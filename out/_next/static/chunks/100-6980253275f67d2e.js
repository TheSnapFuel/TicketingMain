(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[100],{19824:function(a,b){"use strict";let c=-8,d=-4,e=2,f=4,g=12,h="undefined"!=typeof BigUint64Array,i=Symbol(),j=1024;function k(a,b){let c=new Uint32Array(a),e=new Uint16Array(a);var f=c[b+d>>>2]>>>1,g=b>>>1;if(f<=j)return String.fromCharCode.apply(String,e.subarray(g,g+f));let h=[];do{let i=e[g+j-1],k=i>=55296&&i<56320?j-1:j;h.push(String.fromCharCode.apply(String,e.subarray(g,g+=k))),f-=k}while(f>j);return h.join("")+String.fromCharCode.apply(String,e.subarray(g,g+f))}function l(a){let b={};function c(a,b){return a?k(a.buffer,b):"<yet unknown>"}let d=a.env=a.env||{};return d.abort=d.abort||function(a,e,f,g){let h=b.memory||d.memory;throw Error("abort: "+c(h,a)+" at "+c(h,e)+":"+f+":"+g)},d.trace=d.trace||function(a,e){let f=b.memory||d.memory;console.log("trace: "+c(f,a)+(e?" ":"")+Array.prototype.slice.call(arguments,2,2+e).join(", "))},a.Math=a.Math||Math,a.Date=a.Date||Date,b}function m(a,b){let i=b.exports,j=i.memory,l=i.table,m=i["__alloc"],n=i["__retain"],o=i["__rtti_base"]|| -1;function p(a){let b=new Uint32Array(j.buffer),c=b[o>>>2];if((a>>>=0)>=c)throw Error("invalid id: "+a);return b[(o+4>>>2)+2*a]}function r(a){let b=new Uint32Array(j.buffer),c=b[o>>>2];if((a>>>=0)>=c)throw Error("invalid id: "+a);return b[(o+4>>>2)+2*a+1]}function s(a){return 31-Math.clz32(a>>>5&31)}function t(a,b,c){let d=j.buffer;if(c)switch(a){case 2:return new Float32Array(d);case 3:return new Float64Array(d)}else switch(a){case 0:return new(b?Int8Array:Uint8Array)(d);case 1:return new(b?Int16Array:Uint16Array)(d);case 2:return new(b?Int32Array:Uint32Array)(d);case 3:return new(b?BigInt64Array:BigUint64Array)(d)}throw Error("unsupported align: "+a)}function u(a){let b=new Uint32Array(j.buffer),h=b[a+c>>>2],i=p(h);if(!(1&i))throw Error("not an array: "+h);let k=s(i);var l=b[a+f>>>2];let m=i&e?b[a+g>>>2]:b[l+d>>>2]>>>k;return t(k,1024&i,2048&i).subarray(l>>>=k,l+m)}function v(a,b,c){return new a(w(a,b,c))}function w(a,b,c){let e=j.buffer,g=new Uint32Array(e),h=g[c+f>>>2];return new a(e,h,g[h+d>>>2]>>>b)}return a.__allocString=function(a){let b=a.length,c=m(b<<1,1),d=new Uint16Array(j.buffer);for(var e=0,f=c>>>1;e<b;++e)d[f+e]=a.charCodeAt(e);return c},a.__getString=function(a){let b=j.buffer,d=new Uint32Array(b)[a+c>>>2];if(1!==d)throw Error("not a string: "+a);return k(b,a)},a.__allocArray=function(a,b){let c=p(a);if(!(c&(1|e)))throw Error("not an array: "+a+" @ "+c);let d=s(c),h=b.length,i=m(h<<d,0),k=m(c&e?16:12,a),l=new Uint32Array(j.buffer);l[k+0>>>2]=n(i),l[k+f>>>2]=i,l[k+8>>>2]=h<<d,c&e&&(l[k+g>>>2]=h);let o=t(d,1024&c,2048&c);if(8192&c)for(let q=0;q<h;++q)o[(i>>>d)+q]=n(b[q]);else o.set(b,i>>>d);return k},a.__getArrayView=u,a.__getArray=function(a){let b=u(a),c=b.length,d=Array(c);for(let e=0;e<c;e++)d[e]=b[e];return d},a.__getArrayBuffer=function(a){let b=j.buffer,c=new Uint32Array(b)[a+d>>>2];return b.slice(a,a+c)},a.__getInt8Array=v.bind(null,Int8Array,0),a.__getInt8ArrayView=w.bind(null,Int8Array,0),a.__getUint8Array=v.bind(null,Uint8Array,0),a.__getUint8ArrayView=w.bind(null,Uint8Array,0),a.__getUint8ClampedArray=v.bind(null,Uint8ClampedArray,0),a.__getUint8ClampedArrayView=w.bind(null,Uint8ClampedArray,0),a.__getInt16Array=v.bind(null,Int16Array,1),a.__getInt16ArrayView=w.bind(null,Int16Array,1),a.__getUint16Array=v.bind(null,Uint16Array,1),a.__getUint16ArrayView=w.bind(null,Uint16Array,1),a.__getInt32Array=v.bind(null,Int32Array,2),a.__getInt32ArrayView=w.bind(null,Int32Array,2),a.__getUint32Array=v.bind(null,Uint32Array,2),a.__getUint32ArrayView=w.bind(null,Uint32Array,2),h&&(a.__getInt64Array=v.bind(null,BigInt64Array,3),a.__getInt64ArrayView=w.bind(null,BigInt64Array,3),a.__getUint64Array=v.bind(null,BigUint64Array,3),a.__getUint64ArrayView=w.bind(null,BigUint64Array,3)),a.__getFloat32Array=v.bind(null,Float32Array,2),a.__getFloat32ArrayView=w.bind(null,Float32Array,2),a.__getFloat64Array=v.bind(null,Float64Array,3),a.__getFloat64ArrayView=w.bind(null,Float64Array,3),a.__instanceof=function(a,b){let d=new Uint32Array(j.buffer);var e=d[a+c>>>2];if(e<=d[o>>>2])do if(e==b)return!0;while(e=r(e));return!1},a.memory=a.memory||j,a.table=a.table||l,q(i,a)}function n(a){return"undefined"!=typeof Response&&a instanceof Response}async function o(a,b){return n(a=await a)?p(a,b):m(l(b||(b={})),await WebAssembly.instantiate(a instanceof WebAssembly.Module?a:await WebAssembly.compile(a),b))}async function p(a,b){return WebAssembly.instantiateStreaming?m(l(b||(b={})),(await WebAssembly.instantiateStreaming(a,b)).instance):o(n(a=await a)?a.arrayBuffer():a,b)}function q(a,b){var c=b?Object.create(b):{},d=a["__argumentsLength"]?function(b){a["__argumentsLength"].value=b}:a["__setArgumentsLength"]||a["__setargc"]||function(){};for(let e in a){if(!Object.prototype.hasOwnProperty.call(a,e))continue;let f=a[e],g=e.split("."),h=c;for(;g.length>1;){let j=g.shift();Object.prototype.hasOwnProperty.call(h,j)||(h[j]={}),h=h[j]}let k=g[0],l=k.indexOf("#");if(l>=0){let m=k.substring(0,l),n=h[m];if(void 0===n||!n.prototype){let o=function(...a){return o.wrap(o.prototype.constructor(0,...a))};o.prototype={valueOf:function(){return this[i]}},o.wrap=function(a){return Object.create(o.prototype,{[i]:{value:a,writable:!1}})},n&&Object.getOwnPropertyNames(n).forEach(a=>Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(n,a))),h[m]=o}if(k=k.substring(l+1),h=h[m].prototype,/^(get|set):/.test(k)){if(!Object.prototype.hasOwnProperty.call(h,k=k.substring(4))){let p=a[e.replace("set:","get:")],q=a[e.replace("get:","set:")];Object.defineProperty(h,k,{get:function(){return p(this[i])},set:function(a){q(this[i],a)},enumerable:!0})}}else"constructor"===k?(h[k]=(...a)=>(d(a.length),f(...a))).original=f:(h[k]=function(...a){return d(a.length),f(this[i],...a)}).original=f}else/^(get|set):/.test(k)?Object.prototype.hasOwnProperty.call(h,k=k.substring(4))||Object.defineProperty(h,k,{get:a[e.replace("set:","get:")],set:a[e.replace("get:","set:")],enumerable:!0}):"function"==typeof f&&f!==d?(h[k]=(...a)=>(d(a.length),f(...a))).original=f:h[k]=f}return c}b.instantiate=o,b.instantiateSync=function(a,b){return m(l(b||(b={})),new WebAssembly.Instance(a instanceof WebAssembly.Module?a:new WebAssembly.Module(a),b))},b.instantiateStreaming=p,b.demangle=q},37124:function(a,b,c){"use strict";a.exports=c(64478)},41496:function(a){"use strict";a.exports=d;var b,c=/\/|\./;function d(a,b){c.test(a)||(a="google/protobuf/"+a+".proto",b={nested:{google:{nested:{protobuf:{nested:b}}}}}),d[a]=b}d("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),d("duration",{Duration:b={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),d("timestamp",{Timestamp:b}),d("empty",{Empty:{fields:{}}}),d("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),d("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),d("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),d.get=function(a){return d[a]||null}},99305:function(a,b,c){"use strict";var d=b,e=c(63697),f=c(41509);function g(a,b,c,d){if(b.resolvedType){if(b.resolvedType instanceof e){a("switch(d%s){",d);for(var f=b.resolvedType.values,g=Object.keys(f),h=0;h<g.length;++h)b.repeated&&f[g[h]]===b.typeDefault&&a("default:"),a("case%j:",g[h])("case %i:",f[g[h]])("m%s=%j",d,f[g[h]])("break");a("}")}else a('if(typeof d%s!=="object")',d)("throw TypeError(%j)",b.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",d,c,d)}else{var i=!1;switch(b.type){case"double":case"float":a("m%s=Number(d%s)",d,d);break;case"uint32":case"fixed32":a("m%s=d%s>>>0",d,d);break;case"int32":case"sint32":case"sfixed32":a("m%s=d%s|0",d,d);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":a("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",d,d,i)('else if(typeof d%s==="string")',d)("m%s=parseInt(d%s,10)",d,d)('else if(typeof d%s==="number")',d)("m%s=d%s",d,d)('else if(typeof d%s==="object")',d)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",d,d,d,i?"true":"");break;case"bytes":a('if(typeof d%s==="string")',d)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",d,d,d)("else if(d%s.length >= 0)",d)("m%s=d%s",d,d);break;case"string":a("m%s=String(d%s)",d,d);break;case"bool":a("m%s=Boolean(d%s)",d,d)}}return a}function h(a,b,c,d){if(b.resolvedType)b.resolvedType instanceof e?a("d%s=o.enums===String?types[%i].values[m%s]:m%s",d,c,d,d):a("d%s=types[%i].toObject(m%s,o)",d,c,d);else{var f=!1;switch(b.type){case"double":case"float":a("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",d,d,d,d);break;case"uint64":f=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":a('if(typeof m%s==="number")',d)("d%s=o.longs===String?String(m%s):m%s",d,d,d)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",d,d,d,d,f?"true":"",d);break;case"bytes":a("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",d,d,d,d,d);break;default:a("d%s=m%s",d,d)}}return a}d.fromObject=function(a){var b=a.fieldsArray,c=f.codegen(["d"],a.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!b.length)return c("return new this.ctor");c("var m=new this.ctor");for(var d=0;d<b.length;++d){var h=b[d].resolve(),i=f.safeProp(h.name);h.map?(c("if(d%s){",i)('if(typeof d%s!=="object")',i)("throw TypeError(%j)",h.fullName+": object expected")("m%s={}",i)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",i),g(c,h,d,i+"[ks[i]]")("}")("}")):h.repeated?(c("if(d%s){",i)("if(!Array.isArray(d%s))",i)("throw TypeError(%j)",h.fullName+": array expected")("m%s=[]",i)("for(var i=0;i<d%s.length;++i){",i),g(c,h,d,i+"[i]")("}")("}")):(h.resolvedType instanceof e||c("if(d%s!=null){",i),g(c,h,d,i),h.resolvedType instanceof e||c("}"))}return c("return m")},d.toObject=function(a){var b=a.fieldsArray.slice().sort(f.compareFieldsById);if(!b.length)return f.codegen()("return {}");for(var c=f.codegen(["m","o"],a.name+"$toObject")("if(!o)")("o={}")("var d={}"),d=[],g=[],i=[],j=0;j<b.length;++j)b[j].partOf||(b[j].resolve().repeated?d:b[j].map?g:i).push(b[j]);if(d.length){for(c("if(o.arrays||o.defaults){"),j=0;j<d.length;++j)c("d%s=[]",f.safeProp(d[j].name));c("}")}if(g.length){for(c("if(o.objects||o.defaults){"),j=0;j<g.length;++j)c("d%s={}",f.safeProp(g[j].name));c("}")}if(i.length){for(c("if(o.defaults){"),j=0;j<i.length;++j){var k=i[j],l=f.safeProp(k.name);if(k.resolvedType instanceof e)c("d%s=o.enums===String?%j:%j",l,k.resolvedType.valuesById[k.typeDefault],k.typeDefault);else if(k.long)c("if(util.Long){")("var n=new util.Long(%i,%i,%j)",k.typeDefault.low,k.typeDefault.high,k.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",l)("}else")("d%s=o.longs===String?%j:%i",l,k.typeDefault.toString(),k.typeDefault.toNumber());else if(k.bytes){var m="["+Array.prototype.slice.call(k.typeDefault).join(",")+"]";c("if(o.bytes===String)d%s=%j",l,String.fromCharCode.apply(String,k.typeDefault))("else{")("d%s=%s",l,m)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",l,l)("}")}else c("d%s=%j",l,k.typeDefault)}c("}")}var n=!1;for(j=0;j<b.length;++j){var k=b[j],o=a._fieldsArray.indexOf(k),l=f.safeProp(k.name);k.map?(n||(n=!0,c("var ks2")),c("if(m%s&&(ks2=Object.keys(m%s)).length){",l,l)("d%s={}",l)("for(var j=0;j<ks2.length;++j){"),h(c,k,o,l+"[ks2[j]]")("}")):k.repeated?(c("if(m%s&&m%s.length){",l,l)("d%s=[]",l)("for(var j=0;j<m%s.length;++j){",l),h(c,k,o,l+"[j]")("}")):(c("if(m%s!=null&&m.hasOwnProperty(%j)){",l,k.name),h(c,k,o,l),k.partOf&&c("if(o.oneofs)")("d%s=%j",f.safeProp(k.partOf.name),k.name)),c("}")}return c("return d")}},77472:function(a,b,c){"use strict";a.exports=function(a){var b=f.codegen(["r","l"],a.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(a.fieldsArray.filter(function(a){return a.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");a.group&&b("if((t&7)===4)")("break"),b("switch(t>>>3){");for(var c=0;c<a.fieldsArray.length;++c){var h=a._fieldsArray[c].resolve(),i=h.resolvedType instanceof d?"int32":h.type,j="m"+f.safeProp(h.name);b("case %i: {",h.id),h.map?(b("if(%s===util.emptyObject)",j)("%s={}",j)("var c2 = r.uint32()+r.pos"),void 0!==e.defaults[h.keyType]?b("k=%j",e.defaults[h.keyType]):b("k=null"),void 0!==e.defaults[i]?b("value=%j",e.defaults[i]):b("value=null"),b("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",h.keyType)("case 2:"),void 0===e.basic[i]?b("value=types[%i].decode(r,r.uint32())",c):b("value=r.%s()",i),b("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),b(void 0!==e.long[h.keyType]?'%s[typeof k==="object"?util.longToHash(k):k]=value':"%s[k]=value",j)):h.repeated?(b("if(!(%s&&%s.length))",j,j)("%s=[]",j),void 0!==e.packed[i]&&b("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",j,i)("}else"),void 0===e.basic[i]?b(h.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",j,c):b("%s.push(r.%s())",j,i)):void 0===e.basic[i]?b(h.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",j,c):b("%s=r.%s()",j,i),b("break")("}")}for(b("default:")("r.skipType(t&7)")("break")("}")("}"),c=0;c<a._fieldsArray.length;++c){var k=a._fieldsArray[c];k.required&&b("if(!m.hasOwnProperty(%j))",k.name)("throw util.ProtocolError(%j,{instance:m})",g(k))}return b("return m")};var d=c(63697),e=c(51847),f=c(41509);function g(a){return"missing required '"+a.name+"'"}},39097:function(a,b,c){"use strict";a.exports=function(a){for(var b,c,h=f.codegen(["m","w"],a.name+"$encode")("if(!w)")("w=Writer.create()"),i=a.fieldsArray.slice().sort(f.compareFieldsById),b=0;b<i.length;++b){var j=i[b].resolve(),k=a._fieldsArray.indexOf(j),l=j.resolvedType instanceof d?"int32":j.type,m=e.basic[l];c="m"+f.safeProp(j.name),j.map?(h("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",c,j.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",c)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(j.id<<3|2)>>>0,8|e.mapKey[j.keyType],j.keyType),void 0===m?h("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",k,c):h(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|m,l,c),h("}")("}")):j.repeated?(h("if(%s!=null&&%s.length){",c,c),j.packed&& void 0!==e.packed[l]?h("w.uint32(%i).fork()",(j.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",c)("w.%s(%s[i])",l,c)("w.ldelim()"):(h("for(var i=0;i<%s.length;++i)",c),void 0===m?g(h,j,k,c+"[i]"):h("w.uint32(%i).%s(%s[i])",(j.id<<3|m)>>>0,l,c)),h("}")):(j.optional&&h("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",c,j.name),void 0===m?g(h,j,k,c):h("w.uint32(%i).%s(%s)",(j.id<<3|m)>>>0,l,c))}return h("return w")};var d=c(63697),e=c(51847),f=c(41509);function g(a,b,c,d){return b.resolvedType.group?a("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",c,d,(b.id<<3|3)>>>0,(b.id<<3|4)>>>0):a("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",c,d,(b.id<<3|2)>>>0)}},63697:function(a,b,c){"use strict";a.exports=g;var d=c(12070);((g.prototype=Object.create(d.prototype)).constructor=g).className="Enum";var e=c(81865),f=c(41509);function g(a,b,c,e,f){if(d.call(this,a,c),b&&"object"!=typeof b)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=e,this.comments=f||{},this.reserved=void 0,b)for(var g=Object.keys(b),h=0;h<g.length;++h)"number"==typeof b[g[h]]&&(this.valuesById[this.values[g[h]]=b[g[h]]]=g[h])}g.fromJSON=function(a,b){var c=new g(a,b.values,b.options,b.comment,b.comments);return c.reserved=b.reserved,c},g.prototype.toJSON=function(a){var b=!!a&&Boolean(a.keepComments);return f.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",b?this.comment:void 0,"comments",b?this.comments:void 0])},g.prototype.add=function(a,b,c){if(!f.isString(a))throw TypeError("name must be a string");if(!f.isInteger(b))throw TypeError("id must be an integer");if(void 0!==this.values[a])throw Error("duplicate name '"+a+"' in "+this);if(this.isReservedId(b))throw Error("id "+b+" is reserved in "+this);if(this.isReservedName(a))throw Error("name '"+a+"' is reserved in "+this);if(void 0!==this.valuesById[b]){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+b+" in "+this);this.values[a]=b}else this.valuesById[this.values[a]=b]=a;return this.comments[a]=c||null,this},g.prototype.remove=function(a){if(!f.isString(a))throw TypeError("name must be a string");var b=this.values[a];if(null==b)throw Error("name '"+a+"' does not exist in "+this);return delete this.valuesById[b],delete this.values[a],delete this.comments[a],this},g.prototype.isReservedId=function(a){return e.isReservedId(this.reserved,a)},g.prototype.isReservedName=function(a){return e.isReservedName(this.reserved,a)}},95584:function(a,b,c){"use strict";a.exports=j;var d,e=c(12070);((j.prototype=Object.create(e.prototype)).constructor=j).className="Field";var f=c(63697),g=c(51847),h=c(41509),i=/^required|optional|repeated$/;function j(a,b,c,d,f,j,k){if(h.isObject(d)?(k=f,j=d,d=f=void 0):h.isObject(f)&&(k=j,j=f,f=void 0),e.call(this,a,j),!h.isInteger(b)||b<0)throw TypeError("id must be a non-negative integer");if(!h.isString(c))throw TypeError("type must be a string");if(void 0!==d&&!i.test(d=d.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==f&&!h.isString(f))throw TypeError("extend must be a string");"proto3_optional"===d&&(d="optional"),this.rule=d&&"optional"!==d?d:void 0,this.type=c,this.id=b,this.extend=f||void 0,this.required="required"===d,this.optional=!this.required,this.repeated="repeated"===d,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!h.Long&& void 0!==g.long[c],this.bytes="bytes"===c,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=k}j.fromJSON=function(a,b){return new j(a,b.id,b.type,b.rule,b.extend,b.options,b.comment)},Object.defineProperty(j.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),j.prototype.setOption=function(a,b,c){return"packed"===a&&(this._packed=null),e.prototype.setOption.call(this,a,b,c)},j.prototype.toJSON=function(a){var b=!!a&&Boolean(a.keepComments);return h.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",b?this.comment:void 0])},j.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=g.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof d?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof f&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof f)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=h.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var a;h.base64.test(this.typeDefault)?h.base64.decode(this.typeDefault,a=h.newBuffer(h.base64.length(this.typeDefault)),0):h.utf8.write(this.typeDefault,a=h.newBuffer(h.utf8.length(this.typeDefault)),0),this.typeDefault=a}return this.map?this.defaultValue=h.emptyObject:this.repeated?this.defaultValue=h.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof d&&(this.parent.ctor.prototype[this.name]=this.defaultValue),e.prototype.resolve.call(this)},j.d=function(a,b,c,d){return"function"==typeof b?b=h.decorateType(b).name:b&&"object"==typeof b&&(b=h.decorateEnum(b).name),function(e,f){h.decorateType(e.constructor).add(new j(f,a,b,c,{default:d}))}},j._configure=function(a){d=a}},6139:function(a,b,c){"use strict";var d=a.exports=c(99942);d.build="light",d.load=function(a,b,c){return"function"==typeof b?(c=b,b=new d.Root):b||(b=new d.Root),b.load(a,c)},d.loadSync=function(a,b){return b||(b=new d.Root),b.loadSync(a)},d.encoder=c(39097),d.decoder=c(77472),d.verifier=c(11203),d.converter=c(99305),d.ReflectionObject=c(12070),d.Namespace=c(81865),d.Root=c(64305),d.Enum=c(63697),d.Type=c(11703),d.Field=c(95584),d.OneOf=c(46371),d.MapField=c(43429),d.Service=c(50155),d.Method=c(16601),d.Message=c(23185),d.wrappers=c(58190),d.types=c(51847),d.util=c(41509),d.ReflectionObject._configure(d.Root),d.Namespace._configure(d.Type,d.Service,d.Enum),d.Root._configure(d.Type),d.Field._configure(d.Type)},99942:function(a,b,c){"use strict";var d=b;function e(){d.util._configure(),d.Writer._configure(d.BufferWriter),d.Reader._configure(d.BufferReader)}d.build="minimal",d.Writer=c(88864),d.BufferWriter=c(29405),d.Reader=c(45234),d.BufferReader=c(98595),d.util=c(96895),d.rpc=c(20413),d.roots=c(96405),d.configure=e,e()},64478:function(a,b,c){"use strict";var d=a.exports=c(6139);d.build="full",d.tokenize=c(51322),d.parse=c(86525),d.common=c(41496),d.Root._configure(d.Type,d.parse,d.common)},43429:function(a,b,c){"use strict";a.exports=g;var d=c(95584);((g.prototype=Object.create(d.prototype)).constructor=g).className="MapField";var e=c(51847),f=c(41509);function g(a,b,c,e,g,h){if(d.call(this,a,b,e,void 0,void 0,g,h),!f.isString(c))throw TypeError("keyType must be a string");this.keyType=c,this.resolvedKeyType=null,this.map=!0}g.fromJSON=function(a,b){return new g(a,b.id,b.keyType,b.type,b.options,b.comment)},g.prototype.toJSON=function(a){var b=!!a&&Boolean(a.keepComments);return f.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",b?this.comment:void 0])},g.prototype.resolve=function(){if(this.resolved)return this;if(void 0===e.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return d.prototype.resolve.call(this)},g.d=function(a,b,c){return"function"==typeof c?c=f.decorateType(c).name:c&&"object"==typeof c&&(c=f.decorateEnum(c).name),function(d,e){f.decorateType(d.constructor).add(new g(e,a,b,c))}}},23185:function(a,b,c){"use strict";a.exports=e;var d=c(96895);function e(a){if(a)for(var b=Object.keys(a),c=0;c<b.length;++c)this[b[c]]=a[b[c]]}e.create=function(a){return this.$type.create(a)},e.encode=function(a,b){return this.$type.encode(a,b)},e.encodeDelimited=function(a,b){return this.$type.encodeDelimited(a,b)},e.decode=function(a){return this.$type.decode(a)},e.decodeDelimited=function(a){return this.$type.decodeDelimited(a)},e.verify=function(a){return this.$type.verify(a)},e.fromObject=function(a){return this.$type.fromObject(a)},e.toObject=function(a,b){return this.$type.toObject(a,b)},e.prototype.toJSON=function(){return this.$type.toObject(this,d.toJSONOptions)}},16601:function(a,b,c){"use strict";a.exports=f;var d=c(12070);((f.prototype=Object.create(d.prototype)).constructor=f).className="Method";var e=c(41509);function f(a,b,c,f,g,h,i,j,k){if(e.isObject(g)?(i=g,g=h=void 0):e.isObject(h)&&(i=h,h=void 0),!(void 0===b||e.isString(b)))throw TypeError("type must be a string");if(!e.isString(c))throw TypeError("requestType must be a string");if(!e.isString(f))throw TypeError("responseType must be a string");d.call(this,a,i),this.type=b||"rpc",this.requestType=c,this.requestStream=!!g||void 0,this.responseType=f,this.responseStream=!!h||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=j,this.parsedOptions=k}f.fromJSON=function(a,b){return new f(a,b.type,b.requestType,b.responseType,b.requestStream,b.responseStream,b.options,b.comment,b.parsedOptions)},f.prototype.toJSON=function(a){var b=!!a&&Boolean(a.keepComments);return e.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",b?this.comment:void 0,"parsedOptions",this.parsedOptions,])},f.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),d.prototype.resolve.call(this))}},81865:function(a,b,c){"use strict";a.exports=k;var d,e,f,g=c(12070);((k.prototype=Object.create(g.prototype)).constructor=k).className="Namespace";var h=c(95584),i=c(41509);function j(a,b){if(a&&a.length){for(var c={},d=0;d<a.length;++d)c[a[d].name]=a[d].toJSON(b);return c}}function k(a,b){g.call(this,a,b),this.nested=void 0,this._nestedArray=null}function l(a){return a._nestedArray=null,a}k.fromJSON=function(a,b){return new k(a,b.options).addJSON(b.nested)},k.arrayToJSON=j,k.isReservedId=function(a,b){if(a){for(var c=0;c<a.length;++c)if("string"!=typeof a[c]&&a[c][0]<=b&&a[c][1]>b)return!0}return!1},k.isReservedName=function(a,b){if(a){for(var c=0;c<a.length;++c)if(a[c]===b)return!0}return!1},Object.defineProperty(k.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=i.toArray(this.nested))}}),k.prototype.toJSON=function(a){return i.toObject(["options",this.options,"nested",j(this.nestedArray,a)])},k.prototype.addJSON=function(a){if(a)for(var b,c=Object.keys(a),g=0;g<c.length;++g)b=a[c[g]],this.add((void 0!==b.fields?d.fromJSON:void 0!==b.values?f.fromJSON:void 0!==b.methods?e.fromJSON:void 0!==b.id?h.fromJSON:k.fromJSON)(c[g],b));return this},k.prototype.get=function(a){return this.nested&&this.nested[a]||null},k.prototype.getEnum=function(a){if(this.nested&&this.nested[a]instanceof f)return this.nested[a].values;throw Error("no such enum: "+a)},k.prototype.add=function(a){if(!(a instanceof h&& void 0!==a.extend||a instanceof d||a instanceof f||a instanceof e||a instanceof k))throw TypeError("object must be a valid nested object");if(this.nested){var b=this.get(a.name);if(b){if(b instanceof k&&a instanceof k&&!(b instanceof d||b instanceof e)){for(var c=b.nestedArray,g=0;g<c.length;++g)a.add(c[g]);this.remove(b),this.nested||(this.nested={}),a.setOptions(b.options,!0)}else throw Error("duplicate name '"+a.name+"' in "+this)}}else this.nested={};return this.nested[a.name]=a,a.onAdd(this),l(this)},k.prototype.remove=function(a){if(!(a instanceof g))throw TypeError("object must be a ReflectionObject");if(a.parent!==this)throw Error(a+" is not a member of "+this);return delete this.nested[a.name],Object.keys(this.nested).length||(this.nested=void 0),a.onRemove(this),l(this)},k.prototype.define=function(a,b){if(i.isString(a))a=a.split(".");else if(!Array.isArray(a))throw TypeError("illegal path");if(a&&a.length&&""===a[0])throw Error("path must be relative");for(var c=this;a.length>0;){var d=a.shift();if(c.nested&&c.nested[d]){if(!((c=c.nested[d])instanceof k))throw Error("path conflicts with non-namespace objects")}else c.add(c=new k(d))}return b&&c.addJSON(b),c},k.prototype.resolveAll=function(){for(var a=this.nestedArray,b=0;b<a.length;)a[b]instanceof k?a[b++].resolveAll():a[b++].resolve();return this.resolve()},k.prototype.lookup=function(a,b,c){if("boolean"==typeof b?(c=b,b=void 0):b&&!Array.isArray(b)&&(b=[b]),i.isString(a)&&a.length){if("."===a)return this.root;a=a.split(".")}else if(!a.length)return this;if(""===a[0])return this.root.lookup(a.slice(1),b);var d=this.get(a[0]);if(d){if(1===a.length){if(!b||b.indexOf(d.constructor)> -1)return d}else if(d instanceof k&&(d=d.lookup(a.slice(1),b,!0)))return d}else for(var e=0;e<this.nestedArray.length;++e)if(this._nestedArray[e]instanceof k&&(d=this._nestedArray[e].lookup(a,b,!0)))return d;return null===this.parent||c?null:this.parent.lookup(a,b)},k.prototype.lookupType=function(a){var b=this.lookup(a,[d]);if(!b)throw Error("no such type: "+a);return b},k.prototype.lookupEnum=function(a){var b=this.lookup(a,[f]);if(!b)throw Error("no such Enum '"+a+"' in "+this);return b},k.prototype.lookupTypeOrEnum=function(a){var b=this.lookup(a,[d,f]);if(!b)throw Error("no such Type or Enum '"+a+"' in "+this);return b},k.prototype.lookupService=function(a){var b=this.lookup(a,[e]);if(!b)throw Error("no such Service '"+a+"' in "+this);return b},k._configure=function(a,b,c){d=a,e=b,f=c}},12070:function(a,b,c){"use strict";a.exports=f,f.className="ReflectionObject";var d,e=c(41509);function f(a,b){if(!e.isString(a))throw TypeError("name must be a string");if(b&&!e.isObject(b))throw TypeError("options must be an object");this.options=b,this.parsedOptions=null,this.name=a,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(f.prototype,{root:{get:function(){for(var a=this;null!==a.parent;)a=a.parent;return a}},fullName:{get:function(){for(var a=[this.name],b=this.parent;b;)a.unshift(b.name),b=b.parent;return a.join(".")}}}),f.prototype.toJSON=function(){throw Error()},f.prototype.onAdd=function(a){this.parent&&this.parent!==a&&this.parent.remove(this),this.parent=a,this.resolved=!1;var b=a.root;b instanceof d&&b._handleAdd(this)},f.prototype.onRemove=function(a){var b=a.root;b instanceof d&&b._handleRemove(this),this.parent=null,this.resolved=!1},f.prototype.resolve=function(){return this.resolved||this.root instanceof d&&(this.resolved=!0),this},f.prototype.getOption=function(a){if(this.options)return this.options[a]},f.prototype.setOption=function(a,b,c){return c&&this.options&& void 0!==this.options[a]||((this.options||(this.options={}))[a]=b),this},f.prototype.setParsedOption=function(a,b,c){this.parsedOptions||(this.parsedOptions=[]);var d=this.parsedOptions;if(c){var f=d.find(function(b){return Object.prototype.hasOwnProperty.call(b,a)});if(f){var g=f[a];e.setProperty(g,c,b)}else(f={})[a]=e.setProperty({},c,b),d.push(f)}else{var h={};h[a]=b,d.push(h)}return this},f.prototype.setOptions=function(a,b){if(a)for(var c=Object.keys(a),d=0;d<c.length;++d)this.setOption(c[d],a[c[d]],b);return this},f.prototype.toString=function(){var a=this.constructor.className,b=this.fullName;return b.length?a+" "+b:a},f._configure=function(a){d=a}},46371:function(a,b,c){"use strict";a.exports=g;var d=c(12070);((g.prototype=Object.create(d.prototype)).constructor=g).className="OneOf";var e=c(95584),f=c(41509);function g(a,b,c,e){if(Array.isArray(b)||(c=b,b=void 0),d.call(this,a,c),!(void 0===b||Array.isArray(b)))throw TypeError("fieldNames must be an Array");this.oneof=b||[],this.fieldsArray=[],this.comment=e}function h(a){if(a.parent)for(var b=0;b<a.fieldsArray.length;++b)a.fieldsArray[b].parent||a.parent.add(a.fieldsArray[b])}g.fromJSON=function(a,b){return new g(a,b.oneof,b.options,b.comment)},g.prototype.toJSON=function(a){var b=!!a&&Boolean(a.keepComments);return f.toObject(["options",this.options,"oneof",this.oneof,"comment",b?this.comment:void 0])},g.prototype.add=function(a){if(!(a instanceof e))throw TypeError("field must be a Field");return a.parent&&a.parent!==this.parent&&a.parent.remove(a),this.oneof.push(a.name),this.fieldsArray.push(a),a.partOf=this,h(this),this},g.prototype.remove=function(a){if(!(a instanceof e))throw TypeError("field must be a Field");var b=this.fieldsArray.indexOf(a);if(b<0)throw Error(a+" is not a member of "+this);return this.fieldsArray.splice(b,1),(b=this.oneof.indexOf(a.name))> -1&&this.oneof.splice(b,1),a.partOf=null,this},g.prototype.onAdd=function(a){d.prototype.onAdd.call(this,a);for(var b=0;b<this.oneof.length;++b){var c=a.get(this.oneof[b]);c&&!c.partOf&&(c.partOf=this,this.fieldsArray.push(c))}h(this)},g.prototype.onRemove=function(a){for(var b,c=0;c<this.fieldsArray.length;++c)(b=this.fieldsArray[c]).parent&&b.parent.remove(b);d.prototype.onRemove.call(this,a)},g.d=function(){for(var a=Array(arguments.length),b=0;b<arguments.length;)a[b]=arguments[b++];return function(b,c){f.decorateType(b.constructor).add(new g(c,a)),Object.defineProperty(b,c,{get:f.oneOfGetter(a),set:f.oneOfSetter(a)})}}},86525:function(a,b,c){"use strict";a.exports=y,y.filename=null,y.defaults={keepCase:!1};var d=c(51322),e=c(64305),f=c(11703),g=c(95584),h=c(43429),i=c(46371),j=c(63697),k=c(50155),l=c(16601),m=c(51847),n=c(41509),o=/^[1-9][0-9]*$/,p=/^-?[1-9][0-9]*$/,q=/^0[x][0-9a-fA-F]+$/,r=/^-?0[x][0-9a-fA-F]+$/,s=/^0[0-7]+$/,t=/^-?0[0-7]+$/,u=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,v=/^[a-zA-Z_][a-zA-Z_0-9]*$/,w=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,x=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function y(a,b,c){b instanceof e||(c=b,b=new e),c||(c=y.defaults);var z,A,B,C,D,E=c.preferTrailingComment||!1,F=d(a,c.alternateCommentMode||!1),G=F.next,H=F.push,I=F.peek,J=F.skip,K=F.cmnt,L=!0,M=!1,N=b,O=c.keepCase?function(a){return a}:n.camelCase;function P(a,b,c){var d=y.filename;return c||(y.filename=null),Error("illegal "+(b||"token")+" '"+a+"' ("+(d?d+", ":"")+"line "+F.line+")")}function Q(){var a,b=[];do{if('"'!==(a=G())&&"'"!==a)throw P(a);b.push(G()),J(a),a=I()}while('"'===a||"'"===a);return b.join("")}function R(a){var b=G();switch(b){case"'":case'"':return H(b),Q();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return T(b,!0)}catch(c){if(a&&w.test(b))return b;throw P(b,"value")}}function S(a,b){var c,d;do b&&('"'===(c=I())||"'"===c)?a.push(Q()):a.push([d=U(G()),J("to",!0)?U(G()):d]);while(J(",",!0));J(";")}function T(a,b){var c=1;switch("-"===a.charAt(0)&&(c=-1,a=a.substring(1)),a){case"inf":case"INF":case"Inf":return c*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(o.test(a))return c*parseInt(a,10);if(q.test(a))return c*parseInt(a,16);if(s.test(a))return c*parseInt(a,8);if(u.test(a))return c*parseFloat(a);throw P(a,"number",b)}function U(a,b){switch(a){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!b&&"-"===a.charAt(0))throw P(a,"id");if(p.test(a))return parseInt(a,10);if(r.test(a))return parseInt(a,16);if(t.test(a))return parseInt(a,8);throw P(a,"id")}function V(){if(void 0!==A)throw P("package");if(A=G(),!w.test(A))throw P(A,"name");N=N.define(A),J(";")}function W(){var a,b=I();switch(b){case"weak":a=C||(C=[]),G();break;case"public":G();default:a=B||(B=[])}b=Q(),J(";"),a.push(b)}function X(){if(J("="),!(M="proto3"===(D=Q()))&&"proto2"!==D)throw P(D,"syntax");J(";")}function Y(a,b){switch(b){case"option":return af(a,b),J(";"),!0;case"message":return $(a,b),!0;case"enum":return ad(a,b),!0;case"service":return ak(a,b),!0;case"extend":return am(a,b),!0}return!1}function Z(a,b,c){var d,e=F.line;if(a&&("string"!=typeof a.comment&&(a.comment=K()),a.filename=y.filename),J("{",!0)){for(;"}"!==(d=G());)b(d);J(";",!0)}else c&&c(),J(";"),a&&("string"!=typeof a.comment||E)&&(a.comment=K(e)||a.comment)}function $(a,b){if(!v.test(b=G()))throw P(b,"type name");var c=new f(b);Z(c,function(a){if(!Y(c,a))switch(a){case"map":ab(c,a);break;case"required":case"repeated":_(c,a);break;case"optional":M?_(c,"proto3_optional"):_(c,"optional");break;case"oneof":ac(c,a);break;case"extensions":S(c.extensions||(c.extensions=[]));break;case"reserved":S(c.reserved||(c.reserved=[]),!0);break;default:if(!M||!w.test(a))throw P(a);H(a),_(c,"optional")}}),a.add(c)}function _(a,b,c){var d=G();if("group"===d){aa(a,b);return}if(!w.test(d))throw P(d,"type");var e=G();if(!v.test(e))throw P(e,"name");e=O(e),J("=");var f=new g(e,U(G()),d,b,c);if(Z(f,function(a){if("option"===a)af(f,a),J(";");else throw P(a)},function(){aj(f)}),"proto3_optional"===b){var h=new i("_"+e);f.setOption("proto3_optional",!0),h.add(f),a.add(h)}else a.add(f);!M&&f.repeated&&(void 0!==m.packed[d]|| void 0===m.basic[d])&&f.setOption("packed",!1,!0)}function aa(a,b){var c=G();if(!v.test(c))throw P(c,"name");var d=n.lcFirst(c);c===d&&(c=n.ucFirst(c)),J("=");var e=U(G()),h=new f(c);h.group=!0;var i=new g(d,e,c,b);i.filename=y.filename,Z(h,function(a){switch(a){case"option":af(h,a),J(";");break;case"required":case"repeated":_(h,a);break;case"optional":M?_(h,"proto3_optional"):_(h,"optional");break;default:throw P(a)}}),a.add(h).add(i)}function ab(a){J("<");var b=G();if(void 0===m.mapKey[b])throw P(b,"type");J(",");var c=G();if(!w.test(c))throw P(c,"type");J(">");var d=G();if(!v.test(d))throw P(d,"name");J("=");var e=new h(O(d),U(G()),b,c);Z(e,function(a){if("option"===a)af(e,a),J(";");else throw P(a)},function(){aj(e)}),a.add(e)}function ac(a,b){if(!v.test(b=G()))throw P(b,"name");var c=new i(O(b));Z(c,function(a){"option"===a?(af(c,a),J(";")):(H(a),_(c,"optional"))}),a.add(c)}function ad(a,b){if(!v.test(b=G()))throw P(b,"name");var c=new j(b);Z(c,function(a){switch(a){case"option":af(c,a),J(";");break;case"reserved":S(c.reserved||(c.reserved=[]),!0);break;default:ae(c,a)}}),a.add(c)}function ae(a,b){if(!v.test(b))throw P(b,"name");J("=");var c=U(G(),!0),d={};Z(d,function(a){if("option"===a)af(d,a),J(";");else throw P(a)},function(){aj(d)}),a.add(b,c,d.comment)}function af(a,b){var c,d=J("(",!0);if(!w.test(b=G()))throw P(b,"name");var e=b,f=e;d&&(J(")"),f=e="("+e+")",b=I(),x.test(b)&&(c=b.slice(1),e+=b,G())),J("=");var g=ag(a,e);ai(a,f,g,c)}function ag(a,b){if(J("{",!0)){for(var c={};!J("}",!0);){if(!v.test(z=G()))throw P(z,"name");var d,e,f=z;if(J(":",!0),"{"===I())d=ag(a,b+"."+z);else if("["===I()){if(d=[],J("[",!0)){do e=R(!0),d.push(e);while(J(",",!0));J("]"),void 0!==e&&ah(a,b+"."+z,e)}}else d=R(!0),ah(a,b+"."+z,d);var g=c[f];g&&(d=[].concat(g).concat(d)),c[f]=d,J(",",!0),J(";",!0)}return c}var h=R(!0);return ah(a,b,h),h}function ah(a,b,c){a.setOption&&a.setOption(b,c)}function ai(a,b,c,d){a.setParsedOption&&a.setParsedOption(b,c,d)}function aj(a){if(J("[",!0)){do af(a,"option");while(J(",",!0));J("]")}return a}function ak(a,b){if(!v.test(b=G()))throw P(b,"service name");var c=new k(b);Z(c,function(a){if(!Y(c,a)){if("rpc"===a)al(c,a);else throw P(a)}}),a.add(c)}function al(a,b){var c=K(),d=b;if(!v.test(b=G()))throw P(b,"name");var e,f,g,h,i=b;if(J("("),J("stream",!0)&&(f=!0),!w.test(b=G())||(e=b,J(")"),J("returns"),J("("),J("stream",!0)&&(h=!0),!w.test(b=G())))throw P(b);g=b,J(")");var j=new l(i,d,e,g,f,h);j.comment=c,Z(j,function(a){if("option"===a)af(j,a),J(";");else throw P(a)}),a.add(j)}function am(a,b){if(!w.test(b=G()))throw P(b,"reference");var c=b;Z(null,function(b){switch(b){case"required":case"repeated":_(a,b,c);break;case"optional":M?_(a,"proto3_optional",c):_(a,"optional",c);break;default:if(!M||!w.test(b))throw P(b);H(b),_(a,"optional",c)}})}for(;null!==(z=G());)switch(z){case"package":if(!L)throw P(z);V();break;case"import":if(!L)throw P(z);W();break;case"syntax":if(!L)throw P(z);X();break;case"option":af(N,z),J(";");break;default:if(Y(N,z)){L=!1;continue}throw P(z)}return y.filename=null,{package:A,imports:B,weakImports:C,syntax:D,root:b}}},45234:function(a,b,c){"use strict";a.exports=i;var d,e=c(96895),f=e.LongBits,g=e.utf8;function h(a,b){return RangeError("index out of range: "+a.pos+" + "+(b||1)+" > "+a.len)}function i(a){this.buf=a,this.pos=0,this.len=a.length}var j,k="undefined"!=typeof Uint8Array?function(a){if(a instanceof Uint8Array||Array.isArray(a))return new i(a);throw Error("illegal buffer")}:function(a){if(Array.isArray(a))return new i(a);throw Error("illegal buffer")},l=function(){return e.Buffer?function(a){return(i.create=function(a){return e.Buffer.isBuffer(a)?new d(a):k(a)})(a)}:k};function m(){var a=new f(0,0),b=0;if(this.len-this.pos>4){for(;b<4;++b)if(a.lo=(a.lo|(127&this.buf[this.pos])<<7*b)>>>0,this.buf[this.pos++]<128)return a;if(a.lo=(a.lo|(127&this.buf[this.pos])<<28)>>>0,a.hi=(a.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return a;b=0}else{for(;b<3;++b){if(this.pos>=this.len)throw h(this);if(a.lo=(a.lo|(127&this.buf[this.pos])<<7*b)>>>0,this.buf[this.pos++]<128)return a}return a.lo=(a.lo|(127&this.buf[this.pos++])<<7*b)>>>0,a}if(this.len-this.pos>4){for(;b<5;++b)if(a.hi=(a.hi|(127&this.buf[this.pos])<<7*b+3)>>>0,this.buf[this.pos++]<128)return a}else for(;b<5;++b){if(this.pos>=this.len)throw h(this);if(a.hi=(a.hi|(127&this.buf[this.pos])<<7*b+3)>>>0,this.buf[this.pos++]<128)return a}throw Error("invalid varint encoding")}function n(a,b){return(a[b-4]|a[b-3]<<8|a[b-2]<<16|a[b-1]<<24)>>>0}function o(){if(this.pos+8>this.len)throw h(this,8);return new f(n(this.buf,this.pos+=4),n(this.buf,this.pos+=4))}i.create=l(),i.prototype._slice=e.Array.prototype.subarray||e.Array.prototype.slice,i.prototype.uint32=(j=4294967295,function(){if(j=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(j=(j|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(j=(j|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(j=(j|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(j=(j|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return j;if((this.pos+=5)>this.len)throw this.pos=this.len,h(this,10);return j}),i.prototype.int32=function(){return 0|this.uint32()},i.prototype.sint32=function(){var a=this.uint32();return a>>>1^ -(1&a)|0},i.prototype.bool=function(){return 0!==this.uint32()},i.prototype.fixed32=function(){if(this.pos+4>this.len)throw h(this,4);return n(this.buf,this.pos+=4)},i.prototype.sfixed32=function(){if(this.pos+4>this.len)throw h(this,4);return 0|n(this.buf,this.pos+=4)},i.prototype.float=function(){if(this.pos+4>this.len)throw h(this,4);var a=e.float.readFloatLE(this.buf,this.pos);return this.pos+=4,a},i.prototype.double=function(){if(this.pos+8>this.len)throw h(this,4);var a=e.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,a},i.prototype.bytes=function(){var a=this.uint32(),b=this.pos,c=this.pos+a;if(c>this.len)throw h(this,a);return(this.pos+=a,Array.isArray(this.buf))?this.buf.slice(b,c):b===c?new this.buf.constructor(0):this._slice.call(this.buf,b,c)},i.prototype.string=function(){var a=this.bytes();return g.read(a,0,a.length)},i.prototype.skip=function(a){if("number"==typeof a){if(this.pos+a>this.len)throw h(this,a);this.pos+=a}else do if(this.pos>=this.len)throw h(this);while(128&this.buf[this.pos++]);return this},i.prototype.skipType=function(a){switch(a){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(a=7&this.uint32());)this.skipType(a);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+a+" at offset "+this.pos)}return this},i._configure=function(a){d=a,i.create=l(),d._configure();var b=e.Long?"toLong":"toNumber";e.merge(i.prototype,{int64:function(){return m.call(this)[b](!1)},uint64:function(){return m.call(this)[b](!0)},sint64:function(){return m.call(this).zzDecode()[b](!1)},fixed64:function(){return o.call(this)[b](!0)},sfixed64:function(){return o.call(this)[b](!1)}})}},98595:function(a,b,c){"use strict";a.exports=f;var d=c(45234);(f.prototype=Object.create(d.prototype)).constructor=f;var e=c(96895);function f(a){d.call(this,a)}f._configure=function(){e.Buffer&&(f.prototype._slice=e.Buffer.prototype.slice)},f.prototype.string=function(){var a=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+a,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+a,this.len))},f._configure()},64305:function(a,b,c){"use strict";a.exports=l;var d,e,f,g=c(81865);((l.prototype=Object.create(g.prototype)).constructor=l).className="Root";var h=c(95584),i=c(63697),j=c(46371),k=c(41509);function l(a){g.call(this,"",a),this.deferred=[],this.files=[]}function m(){}l.fromJSON=function(a,b){return b||(b=new l),a.options&&b.setOptions(a.options),b.addJSON(a.nested)},l.prototype.resolvePath=k.path.resolve,l.prototype.fetch=k.fetch,l.prototype.load=function a(b,c,d){"function"==typeof c&&(d=c,c=void 0);var g=this;if(!d)return k.asPromise(a,g,b,c);var h=d===m;function i(a,b){if(d){var c=d;if(d=null,h)throw a;c(a,b)}}function j(a){var b=a.lastIndexOf("google/protobuf/");if(b> -1){var c=a.substring(b);if(c in f)return c}return null}function l(a,b){try{if(k.isString(b)&&"{"===b.charAt(0)&&(b=JSON.parse(b)),k.isString(b)){e.filename=a;var d,f=e(b,g,c),l=0;if(f.imports)for(;l<f.imports.length;++l)(d=j(f.imports[l])||g.resolvePath(a,f.imports[l]))&&n(d);if(f.weakImports)for(l=0;l<f.weakImports.length;++l)(d=j(f.weakImports[l])||g.resolvePath(a,f.weakImports[l]))&&n(d,!0)}else g.setOptions(b.options).addJSON(b.nested)}catch(m){i(m)}h||o||i(null,g)}function n(a,b){if(!(g.files.indexOf(a)> -1)){if(g.files.push(a),a in f){h?l(a,f[a]):(++o,setTimeout(function(){--o,l(a,f[a])}));return}if(h){var c;try{c=k.fs.readFileSync(a).toString("utf8")}catch(e){b||i(e);return}l(a,c)}else++o,g.fetch(a,function(c,e){if(--o,d){if(c){b?o||i(null,g):i(c);return}l(a,e)}})}}var o=0;k.isString(b)&&(b=[b]);for(var p,q=0;q<b.length;++q)(p=g.resolvePath("",b[q]))&&n(p);if(h)return g;o||i(null,g)},l.prototype.loadSync=function(a,b){if(!k.isNode)throw Error("not supported");return this.load(a,b,m)},l.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(a){return"'extend "+a.extend+"' in "+a.parent.fullName}).join(", "));return g.prototype.resolveAll.call(this)};var n=/^[A-Z]/;function o(a,b){var c=b.parent.lookup(b.extend);if(c){var d=new h(b.fullName,b.id,b.type,b.rule,void 0,b.options);return d.declaringField=b,b.extensionField=d,c.add(d),!0}return!1}l.prototype._handleAdd=function(a){if(a instanceof h)void 0===a.extend||a.extensionField||o(this,a)||this.deferred.push(a);else if(a instanceof i)n.test(a.name)&&(a.parent[a.name]=a.values);else if(!(a instanceof j)){if(a instanceof d)for(var b=0;b<this.deferred.length;)o(this,this.deferred[b])?this.deferred.splice(b,1):++b;for(var c=0;c<a.nestedArray.length;++c)this._handleAdd(a._nestedArray[c]);n.test(a.name)&&(a.parent[a.name]=a)}},l.prototype._handleRemove=function(a){if(a instanceof h){if(void 0!==a.extend){if(a.extensionField)a.extensionField.parent.remove(a.extensionField),a.extensionField=null;else{var b=this.deferred.indexOf(a);b> -1&&this.deferred.splice(b,1)}}}else if(a instanceof i)n.test(a.name)&&delete a.parent[a.name];else if(a instanceof g){for(var c=0;c<a.nestedArray.length;++c)this._handleRemove(a._nestedArray[c]);n.test(a.name)&&delete a.parent[a.name]}},l._configure=function(a,b,c){d=a,e=b,f=c}},96405:function(a){"use strict";a.exports={}},20413:function(a,b,c){"use strict";b.Service=c(72387)},72387:function(a,b,c){"use strict";a.exports=e;var d=c(96895);function e(a,b,c){if("function"!=typeof a)throw TypeError("rpcImpl must be a function");d.EventEmitter.call(this),this.rpcImpl=a,this.requestDelimited=Boolean(b),this.responseDelimited=Boolean(c)}(e.prototype=Object.create(d.EventEmitter.prototype)).constructor=e,e.prototype.rpcCall=function a(b,c,e,f,g){if(!f)throw TypeError("request must be specified");var h=this;if(!g)return d.asPromise(a,h,b,c,e,f);if(!h.rpcImpl){setTimeout(function(){g(Error("already ended"))},0);return}try{return h.rpcImpl(b,c[h.requestDelimited?"encodeDelimited":"encode"](f).finish(),function(a,c){if(a)return h.emit("error",a,b),g(a);if(null===c){h.end(!0);return}if(!(c instanceof e))try{c=e[h.responseDelimited?"decodeDelimited":"decode"](c)}catch(d){return h.emit("error",d,b),g(d)}return h.emit("data",c,b),g(null,c)})}catch(i){h.emit("error",i,b),setTimeout(function(){g(i)},0);return}},e.prototype.end=function(a){return this.rpcImpl&&(a||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},50155:function(a,b,c){"use strict";a.exports=h;var d=c(81865);((h.prototype=Object.create(d.prototype)).constructor=h).className="Service";var e=c(16601),f=c(41509),g=c(20413);function h(a,b){d.call(this,a,b),this.methods={},this._methodsArray=null}function i(a){return a._methodsArray=null,a}h.fromJSON=function(a,b){var c=new h(a,b.options);if(b.methods)for(var d=Object.keys(b.methods),f=0;f<d.length;++f)c.add(e.fromJSON(d[f],b.methods[d[f]]));return b.nested&&c.addJSON(b.nested),c.comment=b.comment,c},h.prototype.toJSON=function(a){var b=d.prototype.toJSON.call(this,a),c=!!a&&Boolean(a.keepComments);return f.toObject(["options",b&&b.options||void 0,"methods",d.arrayToJSON(this.methodsArray,a)||{},"nested",b&&b.nested||void 0,"comment",c?this.comment:void 0])},Object.defineProperty(h.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=f.toArray(this.methods))}}),h.prototype.get=function(a){return this.methods[a]||d.prototype.get.call(this,a)},h.prototype.resolveAll=function(){for(var a=this.methodsArray,b=0;b<a.length;++b)a[b].resolve();return d.prototype.resolve.call(this)},h.prototype.add=function(a){if(this.get(a.name))throw Error("duplicate name '"+a.name+"' in "+this);return a instanceof e?(this.methods[a.name]=a,a.parent=this,i(this)):d.prototype.add.call(this,a)},h.prototype.remove=function(a){if(a instanceof e){if(this.methods[a.name]!==a)throw Error(a+" is not a member of "+this);return delete this.methods[a.name],a.parent=null,i(this)}return d.prototype.remove.call(this,a)},h.prototype.create=function(a,b,c){for(var d,e=new g.Service(a,b,c),h=0;h<this.methodsArray.length;++h){var i=f.lcFirst((d=this._methodsArray[h]).resolve().name).replace(/[^$\w_]/g,"");e[i]=f.codegen(["r","c"],f.isReserved(i)?i+"_":i)("return this.rpcCall(m,q,s,r,c)")({m:d,q:d.resolvedRequestType.ctor,s:d.resolvedResponseType.ctor})}return e}},51322:function(a){"use strict";a.exports=l;var b=/[\s{}=;:[\],'"()<>]/g,c=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,d=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,e=/^ *[*/]+ */,f=/^\s*\*?\/*/,g=/\n/g,h=/\s/,i=/\\(.?)/g,j={"0":"\0",r:"\r",n:"\n",t:"	"};function k(a){return a.replace(i,function(a,b){switch(b){case"\\":case"":return b;default:return j[b]||""}})}function l(a,i){a=a.toString();var j=0,l=a.length,m=1,n=0,o={},p=[],q=null;function r(a){return Error("illegal "+a+" (line "+m+")")}function s(b){return a.charAt(b)}function t(b,c,d){var h,j,k={type:a.charAt(b++),lineEmpty:!1,leading:d},l=b-(i?2:3);do if(--l<0||"\n"===(j=a.charAt(l))){k.lineEmpty=!0;break}while(" "===j||"	"===j);for(var p=a.substring(b,c).split(g),q=0;q<p.length;++q)p[q]=p[q].replace(i?f:e,"").trim();k.text=p.join("\n").trim(),o[m]=k,n=m}function u(b){var c=v(b),d=a.substring(b,c);return/^\s*\/{1,2}/.test(d)}function v(a){for(var b=a;b<l&&"\n"!==s(b);)b++;return b}function w(){if(p.length>0)return p.shift();if(q)return function(){var b="'"===q?d:c;b.lastIndex=j-1;var e=b.exec(a);if(!e)throw r("string");return j=b.lastIndex,x(q),q=null,k(e[1])}();var e,f,g,n,o,w=0===j;do{if(j===l)return null;for(e=!1;h.test(g=s(j));)if("\n"===g&&(w=!0,++m),++j===l)return null;if("/"===s(j)){if(++j===l)throw r("comment");if("/"===s(j)){if(i){if(n=j,o=!1,u(j)){o=!0;do if((j=v(j))===l||(j++,!w))break;while(u(j))}else j=Math.min(l,v(j)+1);o&&(t(n,j,w),w=!0),m++,e=!0}else{for(o="/"===s(n=j+1);"\n"!==s(++j);)if(j===l)return null;++j,o&&(t(n,j-1,w),w=!0),++m,e=!0}}else{if("*"!==(g=s(j)))return"/";n=j+1,o=i||"*"===s(n);do{if("\n"===g&& ++m,++j===l)throw r("comment");f=g,g=s(j)}while("*"!==f||"/"!==g);++j,o&&(t(n,j-2,w),w=!0),e=!0}}}while(e);var y=j;if(b.lastIndex=0,!b.test(s(y++)))for(;y<l&&!b.test(s(y));)++y;var z=a.substring(j,j=y);return('"'===z||"'"===z)&&(q=z),z}function x(a){p.push(a)}function y(){if(!p.length){var a=w();if(null===a)return null;x(a)}return p[0]}return Object.defineProperty({next:w,peek:y,push:x,skip:function(a,b){var c=y();if(c===a)return w(),!0;if(!b)throw r("token '"+c+"', '"+a+"' expected");return!1},cmnt:function(a){var b,c=null;return void 0===a?(b=o[m-1],delete o[m-1],b&&(i||"*"===b.type||b.lineEmpty)&&(c=b.leading?b.text:null)):(n<a&&y(),b=o[a],delete o[a],b&&!b.lineEmpty&&(i||"/"===b.type)&&(c=b.leading?null:b.text)),c}},"line",{get:function(){return m}})}l.unescape=k},11703:function(a,b,c){"use strict";a.exports=s;var d=c(81865);((s.prototype=Object.create(d.prototype)).constructor=s).className="Type";var e=c(63697),f=c(46371),g=c(95584),h=c(43429),i=c(50155),j=c(23185),k=c(45234),l=c(88864),m=c(41509),n=c(39097),o=c(77472),p=c(11203),q=c(99305),r=c(58190);function s(a,b){d.call(this,a,b),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function t(a){return a._fieldsById=a._fieldsArray=a._oneofsArray=null,delete a.encode,delete a.decode,delete a.verify,a}Object.defineProperties(s.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var a=Object.keys(this.fields),b=0;b<a.length;++b){var c=this.fields[a[b]],d=c.id;if(this._fieldsById[d])throw Error("duplicate id "+d+" in "+this);this._fieldsById[d]=c}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=m.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=m.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=s.generateConstructor(this)())},set:function(a){var b=a.prototype;b instanceof j||((a.prototype=new j).constructor=a,m.merge(a.prototype,b)),a.$type=a.prototype.$type=this,m.merge(a,j,!0),this._ctor=a;for(var c=0;c<this.fieldsArray.length;++c)this._fieldsArray[c].resolve();var d={};for(c=0;c<this.oneofsArray.length;++c)d[this._oneofsArray[c].resolve().name]={get:m.oneOfGetter(this._oneofsArray[c].oneof),set:m.oneOfSetter(this._oneofsArray[c].oneof)};c&&Object.defineProperties(a.prototype,d)}}}),s.generateConstructor=function(a){for(var b,c=m.codegen(["p"],a.name),d=0;d<a.fieldsArray.length;++d)(b=a._fieldsArray[d]).map?c("this%s={}",m.safeProp(b.name)):b.repeated&&c("this%s=[]",m.safeProp(b.name));return c("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},s.fromJSON=function(a,b){var c=new s(a,b.options);c.extensions=b.extensions,c.reserved=b.reserved;for(var j=Object.keys(b.fields),k=0;k<j.length;++k)c.add((void 0!==b.fields[j[k]].keyType?h.fromJSON:g.fromJSON)(j[k],b.fields[j[k]]));if(b.oneofs)for(j=Object.keys(b.oneofs),k=0;k<j.length;++k)c.add(f.fromJSON(j[k],b.oneofs[j[k]]));if(b.nested)for(j=Object.keys(b.nested),k=0;k<j.length;++k){var l=b.nested[j[k]];c.add((void 0!==l.id?g.fromJSON:void 0!==l.fields?s.fromJSON:void 0!==l.values?e.fromJSON:void 0!==l.methods?i.fromJSON:d.fromJSON)(j[k],l))}return b.extensions&&b.extensions.length&&(c.extensions=b.extensions),b.reserved&&b.reserved.length&&(c.reserved=b.reserved),b.group&&(c.group=!0),b.comment&&(c.comment=b.comment),c},s.prototype.toJSON=function(a){var b=d.prototype.toJSON.call(this,a),c=!!a&&Boolean(a.keepComments);return m.toObject(["options",b&&b.options||void 0,"oneofs",d.arrayToJSON(this.oneofsArray,a),"fields",d.arrayToJSON(this.fieldsArray.filter(function(a){return!a.declaringField}),a)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",b&&b.nested||void 0,"comment",c?this.comment:void 0])},s.prototype.resolveAll=function(){for(var a=this.fieldsArray,b=0;b<a.length;)a[b++].resolve();var c=this.oneofsArray;for(b=0;b<c.length;)c[b++].resolve();return d.prototype.resolveAll.call(this)},s.prototype.get=function(a){return this.fields[a]||this.oneofs&&this.oneofs[a]||this.nested&&this.nested[a]||null},s.prototype.add=function(a){if(this.get(a.name))throw Error("duplicate name '"+a.name+"' in "+this);if(a instanceof g&& void 0===a.extend){if(this._fieldsById?this._fieldsById[a.id]:this.fieldsById[a.id])throw Error("duplicate id "+a.id+" in "+this);if(this.isReservedId(a.id))throw Error("id "+a.id+" is reserved in "+this);if(this.isReservedName(a.name))throw Error("name '"+a.name+"' is reserved in "+this);return a.parent&&a.parent.remove(a),this.fields[a.name]=a,a.message=this,a.onAdd(this),t(this)}return a instanceof f?(this.oneofs||(this.oneofs={}),this.oneofs[a.name]=a,a.onAdd(this),t(this)):d.prototype.add.call(this,a)},s.prototype.remove=function(a){if(a instanceof g&& void 0===a.extend){if(!this.fields||this.fields[a.name]!==a)throw Error(a+" is not a member of "+this);return delete this.fields[a.name],a.parent=null,a.onRemove(this),t(this)}if(a instanceof f){if(!this.oneofs||this.oneofs[a.name]!==a)throw Error(a+" is not a member of "+this);return delete this.oneofs[a.name],a.parent=null,a.onRemove(this),t(this)}return d.prototype.remove.call(this,a)},s.prototype.isReservedId=function(a){return d.isReservedId(this.reserved,a)},s.prototype.isReservedName=function(a){return d.isReservedName(this.reserved,a)},s.prototype.create=function(a){return new this.ctor(a)},s.prototype.setup=function(){for(var a=this.fullName,b=[],c=0;c<this.fieldsArray.length;++c)b.push(this._fieldsArray[c].resolve().resolvedType);this.encode=n(this)({Writer:l,types:b,util:m}),this.decode=o(this)({Reader:k,types:b,util:m}),this.verify=p(this)({types:b,util:m}),this.fromObject=q.fromObject(this)({types:b,util:m}),this.toObject=q.toObject(this)({types:b,util:m});var d=r[a];if(d){var e=Object.create(this);e.fromObject=this.fromObject,this.fromObject=d.fromObject.bind(e),e.toObject=this.toObject,this.toObject=d.toObject.bind(e)}return this},s.prototype.encode=function(a,b){return this.setup().encode(a,b)},s.prototype.encodeDelimited=function(a,b){return this.encode(a,b&&b.len?b.fork():b).ldelim()},s.prototype.decode=function(a,b){return this.setup().decode(a,b)},s.prototype.decodeDelimited=function(a){return a instanceof k||(a=k.create(a)),this.decode(a,a.uint32())},s.prototype.verify=function(a){return this.setup().verify(a)},s.prototype.fromObject=function(a){return this.setup().fromObject(a)},s.prototype.toObject=function(a,b){return this.setup().toObject(a,b)},s.d=function(a){return function(b){m.decorateType(b,a)}}},51847:function(a,b,c){"use strict";var d=b,e=c(41509),f=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function g(a,b){var c=0,d={};for(b|=0;c<a.length;)d[f[c+b]]=a[c++];return d}d.basic=g([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),d.defaults=g([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",e.emptyArray,null]),d.long=g([0,0,0,1,1],7),d.mapKey=g([0,0,0,5,5,0,0,0,1,1,0,2],2),d.packed=g([1,5,0,0,0,5,5,0,0,0,1,1,0])},41509:function(a,b,c){"use strict";var d,e,f=a.exports=c(96895),g=c(96405);f.codegen=c(75124),f.fetch=c(49054),f.path=c(18626),f.fs=f.inquire("fs"),f.toArray=function(a){if(a){for(var b=Object.keys(a),c=Array(b.length),d=0;d<b.length;)c[d]=a[b[d++]];return c}return[]},f.toObject=function(a){for(var b={},c=0;c<a.length;){var d=a[c++],e=a[c++];void 0!==e&&(b[d]=e)}return b};var h=/\\/g,i=/"/g;f.isReserved=function(a){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(a)},f.safeProp=function(a){return!/^[$\w_]+$/.test(a)||f.isReserved(a)?'["'+a.replace(h,"\\\\").replace(i,'\\"')+'"]':"."+a},f.ucFirst=function(a){return a.charAt(0).toUpperCase()+a.substring(1)};var j=/_([a-z])/g;f.camelCase=function(a){return a.substring(0,1)+a.substring(1).replace(j,function(a,b){return b.toUpperCase()})},f.compareFieldsById=function(a,b){return a.id-b.id},f.decorateType=function(a,b){if(a.$type)return b&&a.$type.name!==b&&(f.decorateRoot.remove(a.$type),a.$type.name=b,f.decorateRoot.add(a.$type)),a.$type;d||(d=c(11703));var e=new d(b||a.name);return f.decorateRoot.add(e),e.ctor=a,Object.defineProperty(a,"$type",{value:e,enumerable:!1}),Object.defineProperty(a.prototype,"$type",{value:e,enumerable:!1}),e};var k=0;f.decorateEnum=function(a){if(a.$type)return a.$type;e||(e=c(63697));var b=new e("Enum"+k++,a);return f.decorateRoot.add(b),Object.defineProperty(a,"$type",{value:b,enumerable:!1}),b},f.setProperty=function(a,b,c){function d(a,b,c){var e=b.shift();if("__proto__"===e)return a;if(b.length>0)a[e]=d(a[e]||{},b,c);else{var f=a[e];f&&(c=[].concat(f).concat(c)),a[e]=c}return a}if("object"!=typeof a)throw TypeError("dst must be an object");if(!b)throw TypeError("path must be specified");return d(a,b=b.split("."),c)},Object.defineProperty(f,"decorateRoot",{get:function(){return g.decorated||(g.decorated=new(c(64305)))}})},60323:function(a,b,c){"use strict";a.exports=e;var d=c(96895);function e(a,b){this.lo=a>>>0,this.hi=b>>>0}var f=e.zero=new e(0,0);f.toNumber=function(){return 0},f.zzEncode=f.zzDecode=function(){return this},f.length=function(){return 1};var g=e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(a){if(0===a)return f;var b=a<0;b&&(a=-a);var c=a>>>0,d=(a-c)/4294967296>>>0;return b&&(d=~d>>>0,c=~c>>>0,++c>4294967295&&(c=0,++d>4294967295&&(d=0))),new e(c,d)},e.from=function(a){if("number"==typeof a)return e.fromNumber(a);if(d.isString(a)){if(!d.Long)return e.fromNumber(parseInt(a,10));a=d.Long.fromString(a)}return a.low||a.high?new e(a.low>>>0,a.high>>>0):f},e.prototype.toNumber=function(a){if(!a&&this.hi>>>31){var b=~this.lo+1>>>0,c=~this.hi>>>0;return b||(c=c+1>>>0),-(b+4294967296*c)}return this.lo+4294967296*this.hi},e.prototype.toLong=function(a){return d.Long?new d.Long(0|this.lo,0|this.hi,Boolean(a)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(a)}};var h=String.prototype.charCodeAt;e.fromHash=function(a){return a===g?f:new e((h.call(a,0)|h.call(a,1)<<8|h.call(a,2)<<16|h.call(a,3)<<24)>>>0,(h.call(a,4)|h.call(a,5)<<8|h.call(a,6)<<16|h.call(a,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var a=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^a)>>>0,this.lo=(this.lo<<1^a)>>>0,this},e.prototype.zzDecode=function(){var a=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^a)>>>0,this.hi=(this.hi>>>1^a)>>>0,this},e.prototype.length=function(){var a=this.lo,b=(this.lo>>>28|this.hi<<4)>>>0,c=this.hi>>>24;return 0===c?0===b?a<16384?a<128?1:2:a<2097152?3:4:b<16384?b<128?5:6:b<2097152?7:8:c<128?9:10}},96895:function(a,b,c){"use strict";var d=b;function e(a,b,c){for(var d=Object.keys(b),e=0;e<d.length;++e)void 0!==a[d[e]]&&c||(a[d[e]]=b[d[e]]);return a}function f(a){function b(a,c){if(!(this instanceof b))return new b(a,c);Object.defineProperty(this,"message",{get:function(){return a}}),Error.captureStackTrace?Error.captureStackTrace(this,b):Object.defineProperty(this,"stack",{value:Error().stack||""}),c&&e(this,c)}return b.prototype=Object.create(Error.prototype,{constructor:{value:b,writable:!0,enumerable:!1,configurable:!0},name:{get(){return a},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),b}d.asPromise=c(34537),d.base64=c(97419),d.EventEmitter=c(19211),d.float=c(10945),d.inquire=c(67199),d.utf8=c(94997),d.pool=c(76662),d.LongBits=c(60323),d.isNode=Boolean(void 0!==c.g&&c.g&&c.g.process&&c.g.process.versions&&c.g.process.versions.node),d.global=d.isNode&&c.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,d.emptyArray=Object.freeze?Object.freeze([]):[],d.emptyObject=Object.freeze?Object.freeze({}):{},d.isInteger=Number.isInteger||function(a){return"number"==typeof a&&isFinite(a)&&Math.floor(a)===a},d.isString=function(a){return"string"==typeof a||a instanceof String},d.isObject=function(a){return a&&"object"==typeof a},d.isset=d.isSet=function(a,b){var c=a[b];return!!(null!=c&&a.hasOwnProperty(b))&&("object"!=typeof c||(Array.isArray(c)?c.length:Object.keys(c).length)>0)},d.Buffer=function(){try{var a=d.inquire("buffer").Buffer;return a.prototype.utf8Write?a:null}catch(b){return null}}(),d._Buffer_from=null,d._Buffer_allocUnsafe=null,d.newBuffer=function(a){return"number"==typeof a?d.Buffer?d._Buffer_allocUnsafe(a):new d.Array(a):d.Buffer?d._Buffer_from(a):"undefined"==typeof Uint8Array?a:new Uint8Array(a)},d.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,d.Long=d.global.dcodeIO&&d.global.dcodeIO.Long||d.global.Long||d.inquire("long"),d.key2Re=/^true|false|0|1$/,d.key32Re=/^-?(?:0|[1-9][0-9]*)$/,d.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,d.longToHash=function(a){return a?d.LongBits.from(a).toHash():d.LongBits.zeroHash},d.longFromHash=function(a,b){var c=d.LongBits.fromHash(a);return d.Long?d.Long.fromBits(c.lo,c.hi,b):c.toNumber(Boolean(b))},d.merge=e,d.lcFirst=function(a){return a.charAt(0).toLowerCase()+a.substring(1)},d.newError=f,d.ProtocolError=f("ProtocolError"),d.oneOfGetter=function(a){for(var b={},c=0;c<a.length;++c)b[a[c]]=1;return function(){for(var a=Object.keys(this),c=a.length-1;c> -1;--c)if(1===b[a[c]]&& void 0!==this[a[c]]&&null!==this[a[c]])return a[c]}},d.oneOfSetter=function(a){return function(b){for(var c=0;c<a.length;++c)a[c]!==b&&delete this[a[c]]}},d.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},d._configure=function(){var a=d.Buffer;if(!a){d._Buffer_from=d._Buffer_allocUnsafe=null;return}d._Buffer_from=a.from!==Uint8Array.from&&a.from||function(b,c){return new a(b,c)},d._Buffer_allocUnsafe=a.allocUnsafe||function(b){return new a(b)}}},11203:function(a,b,c){"use strict";a.exports=function(a){var b=e.codegen(["m"],a.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),c=a.oneofsArray,d={};c.length&&b("var p={}");for(var i=0;i<a.fieldsArray.length;++i){var j=a._fieldsArray[i].resolve(),k="m"+e.safeProp(j.name);if(j.optional&&b("if(%s!=null&&m.hasOwnProperty(%j)){",k,j.name),j.map)b("if(!util.isObject(%s))",k)("return%j",f(j,"object"))("var k=Object.keys(%s)",k)("for(var i=0;i<k.length;++i){"),h(b,j,"k[i]"),g(b,j,i,k+"[k[i]]")("}");else if(j.repeated)b("if(!Array.isArray(%s))",k)("return%j",f(j,"array"))("for(var i=0;i<%s.length;++i){",k),g(b,j,i,k+"[i]")("}");else{if(j.partOf){var l=e.safeProp(j.partOf.name);1===d[j.partOf.name]&&b("if(p%s===1)",l)("return%j",j.partOf.name+": multiple values"),d[j.partOf.name]=1,b("p%s=1",l)}g(b,j,i,k)}j.optional&&b("}")}return b("return null")};var d=c(63697),e=c(41509);function f(a,b){return a.name+": "+b+(a.repeated&&"array"!==b?"[]":a.map&&"object"!==b?"{k:"+a.keyType+"}":"")+" expected"}function g(a,b,c,e){if(b.resolvedType){if(b.resolvedType instanceof d){a("switch(%s){",e)("default:")("return%j",f(b,"enum value"));for(var g=Object.keys(b.resolvedType.values),h=0;h<g.length;++h)a("case %i:",b.resolvedType.values[g[h]]);a("break")("}")}else a("{")("var e=types[%i].verify(%s);",c,e)("if(e)")("return%j+e",b.name+".")("}")}else switch(b.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":a("if(!util.isInteger(%s))",e)("return%j",f(b,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":a("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",e,e,e,e)("return%j",f(b,"integer|Long"));break;case"float":case"double":a('if(typeof %s!=="number")',e)("return%j",f(b,"number"));break;case"bool":a('if(typeof %s!=="boolean")',e)("return%j",f(b,"boolean"));break;case"string":a("if(!util.isString(%s))",e)("return%j",f(b,"string"));break;case"bytes":a('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',e,e,e)("return%j",f(b,"buffer"))}return a}function h(a,b,c){switch(b.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":a("if(!util.key32Re.test(%s))",c)("return%j",f(b,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":a("if(!util.key64Re.test(%s))",c)("return%j",f(b,"integer|Long key"));break;case"bool":a("if(!util.key2Re.test(%s))",c)("return%j",f(b,"boolean key"))}return a}},58190:function(a,b,c){"use strict";var d=b,e=c(23185);d[".google.protobuf.Any"]={fromObject:function(a){if(a&&a["@type"]){var b=a["@type"].substring(a["@type"].lastIndexOf("/")+1),c=this.lookup(b);if(c){var d="."===a["@type"].charAt(0)?a["@type"].slice(1):a["@type"];return -1===d.indexOf("/")&&(d="/"+d),this.create({type_url:d,value:c.encode(c.fromObject(a)).finish()})}}return this.fromObject(a)},toObject:function(a,b){var c="",d="";if(b&&b.json&&a.type_url&&a.value){d=a.type_url.substring(a.type_url.lastIndexOf("/")+1),c=a.type_url.substring(0,a.type_url.lastIndexOf("/")+1);var f=this.lookup(d);f&&(a=f.decode(a.value))}if(!(a instanceof this.ctor)&&a instanceof e){var g,h=a.$type.toObject(a,b);return""===c&&(c="type.googleapis.com/"),d=c+("."===a.$type.fullName[0]?a.$type.fullName.slice(1):a.$type.fullName),h["@type"]=d,h}return this.toObject(a,b)}}},88864:function(a,b,c){"use strict";a.exports=l;var d,e=c(96895),f=e.LongBits,g=e.base64,h=e.utf8;function i(a,b,c){this.fn=a,this.len=b,this.next=void 0,this.val=c}function j(){}function k(a){this.head=a.head,this.tail=a.tail,this.len=a.len,this.next=a.states}function l(){this.len=0,this.head=new i(j,0,0),this.tail=this.head,this.states=null}var m=function(){return e.Buffer?function(){return(l.create=function(){return new d})()}:function(){return new l}};function n(a,b,c){b[c]=255&a}function o(a,b){this.len=a,this.next=void 0,this.val=b}function p(a,b,c){for(;a.hi;)b[c++]=127&a.lo|128,a.lo=(a.lo>>>7|a.hi<<25)>>>0,a.hi>>>=7;for(;a.lo>127;)b[c++]=127&a.lo|128,a.lo=a.lo>>>7;b[c++]=a.lo}function q(a,b,c){b[c]=255&a,b[c+1]=a>>>8&255,b[c+2]=a>>>16&255,b[c+3]=a>>>24}l.create=m(),l.alloc=function(a){return new e.Array(a)},e.Array!==Array&&(l.alloc=e.pool(l.alloc,e.Array.prototype.subarray)),l.prototype._push=function(a,b,c){return this.tail=this.tail.next=new i(a,b,c),this.len+=b,this},o.prototype=Object.create(i.prototype),o.prototype.fn=function(a,b,c){for(;a>127;)b[c++]=127&a|128,a>>>=7;b[c]=a},l.prototype.uint32=function(a){return this.len+=(this.tail=this.tail.next=new o((a>>>=0)<128?1:a<16384?2:a<2097152?3:a<268435456?4:5,a)).len,this},l.prototype.int32=function(a){return a<0?this._push(p,10,f.fromNumber(a)):this.uint32(a)},l.prototype.sint32=function(a){return this.uint32((a<<1^a>>31)>>>0)},l.prototype.uint64=function(a){var b=f.from(a);return this._push(p,b.length(),b)},l.prototype.int64=l.prototype.uint64,l.prototype.sint64=function(a){var b=f.from(a).zzEncode();return this._push(p,b.length(),b)},l.prototype.bool=function(a){return this._push(n,1,a?1:0)},l.prototype.fixed32=function(a){return this._push(q,4,a>>>0)},l.prototype.sfixed32=l.prototype.fixed32,l.prototype.fixed64=function(a){var b=f.from(a);return this._push(q,4,b.lo)._push(q,4,b.hi)},l.prototype.sfixed64=l.prototype.fixed64,l.prototype.float=function(a){return this._push(e.float.writeFloatLE,4,a)},l.prototype.double=function(a){return this._push(e.float.writeDoubleLE,8,a)};var r=e.Array.prototype.set?function(a,b,c){b.set(a,c)}:function(a,b,c){for(var d=0;d<a.length;++d)b[c+d]=a[d]};l.prototype.bytes=function(a){var b=a.length>>>0;if(!b)return this._push(n,1,0);if(e.isString(a)){var c=l.alloc(b=g.length(a));g.decode(a,c,0),a=c}return this.uint32(b)._push(r,b,a)},l.prototype.string=function(a){var b=h.length(a);return b?this.uint32(b)._push(h.write,b,a):this._push(n,1,0)},l.prototype.fork=function(){return this.states=new k(this),this.head=this.tail=new i(j,0,0),this.len=0,this},l.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new i(j,0,0),this.len=0),this},l.prototype.ldelim=function(){var a=this.head,b=this.tail,c=this.len;return this.reset().uint32(c),c&&(this.tail.next=a.next,this.tail=b,this.len+=c),this},l.prototype.finish=function(){for(var a=this.head.next,b=this.constructor.alloc(this.len),c=0;a;)a.fn(a.val,b,c),c+=a.len,a=a.next;return b},l._configure=function(a){d=a,l.create=m(),d._configure()}},29405:function(a,b,c){"use strict";a.exports=f;var d=c(88864);(f.prototype=Object.create(d.prototype)).constructor=f;var e=c(96895);function f(){d.call(this)}function g(a,b,c){a.length<40?e.utf8.write(a,b,c):b.utf8Write?b.utf8Write(a,c):b.write(a,c)}f._configure=function(){f.alloc=e._Buffer_allocUnsafe,f.writeBytesBuffer=e.Buffer&&e.Buffer.prototype instanceof Uint8Array&&"set"===e.Buffer.prototype.set.name?function(a,b,c){b.set(a,c)}:function(a,b,c){if(a.copy)a.copy(b,c,0,a.length);else for(var d=0;d<a.length;)b[c++]=a[d++]}},f.prototype.bytes=function(a){e.isString(a)&&(a=e._Buffer_from(a,"base64"));var b=a.length>>>0;return this.uint32(b),b&&this._push(f.writeBytesBuffer,b,a),this},f.prototype.string=function(a){var b=e.Buffer.byteLength(a);return this.uint32(b),b&&this._push(g,b,a),this},f._configure()},75124:function(a){"use strict";function b(a,c){"string"==typeof a&&(c=a,a=void 0);var d=[];function e(a){if("string"!=typeof a){var c=f();if(b.verbose&&console.log("codegen: "+c),c="return "+c,a){for(var g=Object.keys(a),h=Array(g.length+1),i=Array(g.length),j=0;j<g.length;)h[j]=g[j],i[j]=a[g[j++]];return h[j]=c,Function.apply(null,h).apply(null,i)}return Function(c)()}for(var k=Array(arguments.length-1),l=0;l<k.length;)k[l]=arguments[++l];if(l=0,a=a.replace(/%([%dfijs])/g,function(a,b){var c=k[l++];switch(b){case"d":case"f":return String(Number(c));case"i":return String(Math.floor(c));case"j":return JSON.stringify(c);case"s":return String(c)}return"%"}),l!==k.length)throw Error("parameter count mismatch");return d.push(a),e}function f(b){return"function "+(b||c||"")+"("+(a&&a.join(",")||"")+"){\n  "+d.join("\n  ")+"\n}"}return e.toString=f,e}a.exports=b,b.verbose=!1},49054:function(a,b,c){"use strict";a.exports=f;var d=c(34537),e=c(67199)("fs");function f(a,b,c){return("function"==typeof b?(c=b,b={}):b||(b={}),c)?!b.xhr&&e&&e.readFile?e.readFile(a,function(d,e){return d&&"undefined"!=typeof XMLHttpRequest?f.xhr(a,b,c):d?c(d):c(null,b.binary?e:e.toString("utf8"))}):f.xhr(a,b,c):d(f,this,a,b)}f.xhr=function(a,b,c){var d=new XMLHttpRequest;d.onreadystatechange=function(){if(4===d.readyState){if(0!==d.status&&200!==d.status)return c(Error("status "+d.status));if(b.binary){var a=d.response;if(!a){a=[];for(var e=0;e<d.responseText.length;++e)a.push(255&d.responseText.charCodeAt(e))}return c(null,"undefined"!=typeof Uint8Array?new Uint8Array(a):a)}return c(null,d.responseText)}},b.binary&&("overrideMimeType"in d&&d.overrideMimeType("text/plain; charset=x-user-defined"),d.responseType="arraybuffer"),d.open("GET",a),d.send()}},18626:function(a,b){"use strict";var c=b,d=c.isAbsolute=function(a){return/^(?:\/|\w+:)/.test(a)},e=c.normalize=function(a){var b=(a=a.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),c=d(a),e="";c&&(e=b.shift()+"/");for(var f=0;f<b.length;)".."===b[f]?f>0&&".."!==b[f-1]?b.splice(--f,2):c?b.splice(f,1):++f:"."===b[f]?b.splice(f,1):++f;return e+b.join("/")};c.resolve=function(a,b,c){return(c||(b=e(b)),d(b))?b:(c||(a=e(a)),(a=a.replace(/(?:\/|^)[^/]+$/,"")).length?e(a+"/"+b):b)}},98099:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(97117);function e(a,b,c){return void 0===b&&(b=new Uint8Array(2)),void 0===c&&(c=0),b[c+0]=a>>>8,b[c+1]=a>>>0,b}function f(a,b,c){return void 0===b&&(b=new Uint8Array(2)),void 0===c&&(c=0),b[c+0]=a>>>0,b[c+1]=a>>>8,b}function g(a,b){return void 0===b&&(b=0),a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3]}function h(a,b){return void 0===b&&(b=0),(a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3])>>>0}function i(a,b){return void 0===b&&(b=0),a[b+3]<<24|a[b+2]<<16|a[b+1]<<8|a[b]}function j(a,b){return void 0===b&&(b=0),(a[b+3]<<24|a[b+2]<<16|a[b+1]<<8|a[b])>>>0}function k(a,b,c){return void 0===b&&(b=new Uint8Array(4)),void 0===c&&(c=0),b[c+0]=a>>>24,b[c+1]=a>>>16,b[c+2]=a>>>8,b[c+3]=a>>>0,b}function l(a,b,c){return void 0===b&&(b=new Uint8Array(4)),void 0===c&&(c=0),b[c+0]=a>>>0,b[c+1]=a>>>8,b[c+2]=a>>>16,b[c+3]=a>>>24,b}function m(a,b,c){return void 0===b&&(b=new Uint8Array(8)),void 0===c&&(c=0),k(a/4294967296>>>0,b,c),k(a>>>0,b,c+4),b}function n(a,b,c){return void 0===b&&(b=new Uint8Array(8)),void 0===c&&(c=0),l(a>>>0,b,c),l(a/4294967296>>>0,b,c+4),b}b.readInt16BE=function(a,b){return void 0===b&&(b=0),(a[b+0]<<8|a[b+1])<<16>>16},b.readUint16BE=function(a,b){return void 0===b&&(b=0),(a[b+0]<<8|a[b+1])>>>0},b.readInt16LE=function(a,b){return void 0===b&&(b=0),(a[b+1]<<8|a[b])<<16>>16},b.readUint16LE=function(a,b){return void 0===b&&(b=0),(a[b+1]<<8|a[b])>>>0},b.writeUint16BE=e,b.writeInt16BE=e,b.writeUint16LE=f,b.writeInt16LE=f,b.readInt32BE=g,b.readUint32BE=h,b.readInt32LE=i,b.readUint32LE=j,b.writeUint32BE=k,b.writeInt32BE=k,b.writeUint32LE=l,b.writeInt32LE=l,b.readInt64BE=function(a,b){void 0===b&&(b=0);var c=g(a,b),d=g(a,b+4);return 4294967296*c+d-(d>>31)*4294967296},b.readUint64BE=function(a,b){void 0===b&&(b=0);var c=h(a,b),d=h(a,b+4);return 4294967296*c+d},b.readInt64LE=function(a,b){void 0===b&&(b=0);var c=i(a,b);return 4294967296*i(a,b+4)+c-(c>>31)*4294967296},b.readUint64LE=function(a,b){void 0===b&&(b=0);var c=j(a,b),d=j(a,b+4);return 4294967296*d+c},b.writeUint64BE=m,b.writeInt64BE=m,b.writeUint64LE=n,b.writeInt64LE=n,b.readUintBE=function(a,b,c){if(void 0===c&&(c=0),a%8!=0)throw Error("readUintBE supports only bitLengths divisible by 8");if(a/8>b.length-c)throw Error("readUintBE: array is too short for the given bitLength");for(var d=0,e=1,f=a/8+c-1;f>=c;f--)d+=b[f]*e,e*=256;return d},b.readUintLE=function(a,b,c){if(void 0===c&&(c=0),a%8!=0)throw Error("readUintLE supports only bitLengths divisible by 8");if(a/8>b.length-c)throw Error("readUintLE: array is too short for the given bitLength");for(var d=0,e=1,f=c;f<c+a/8;f++)d+=b[f]*e,e*=256;return d},b.writeUintBE=function(a,b,c,e){if(void 0===c&&(c=new Uint8Array(a/8)),void 0===e&&(e=0),a%8!=0)throw Error("writeUintBE supports only bitLengths divisible by 8");if(!d.isSafeInteger(b))throw Error("writeUintBE value must be an integer");for(var f=1,g=a/8+e-1;g>=e;g--)c[g]=b/f&255,f*=256;return c},b.writeUintLE=function(a,b,c,e){if(void 0===c&&(c=new Uint8Array(a/8)),void 0===e&&(e=0),a%8!=0)throw Error("writeUintLE supports only bitLengths divisible by 8");if(!d.isSafeInteger(b))throw Error("writeUintLE value must be an integer");for(var f=1,g=e;g<e+a/8;g++)c[g]=b/f&255,f*=256;return c},b.readFloat32BE=function(a,b){return void 0===b&&(b=0),new DataView(a.buffer,a.byteOffset,a.byteLength).getFloat32(b)},b.readFloat32LE=function(a,b){return void 0===b&&(b=0),new DataView(a.buffer,a.byteOffset,a.byteLength).getFloat32(b,!0)},b.readFloat64BE=function(a,b){return void 0===b&&(b=0),new DataView(a.buffer,a.byteOffset,a.byteLength).getFloat64(b)},b.readFloat64LE=function(a,b){return void 0===b&&(b=0),new DataView(a.buffer,a.byteOffset,a.byteLength).getFloat64(b,!0)},b.writeFloat32BE=function(a,b,c){return void 0===b&&(b=new Uint8Array(4)),void 0===c&&(c=0),new DataView(b.buffer,b.byteOffset,b.byteLength).setFloat32(c,a),b},b.writeFloat32LE=function(a,b,c){return void 0===b&&(b=new Uint8Array(4)),void 0===c&&(c=0),new DataView(b.buffer,b.byteOffset,b.byteLength).setFloat32(c,a,!0),b},b.writeFloat64BE=function(a,b,c){return void 0===b&&(b=new Uint8Array(8)),void 0===c&&(c=0),new DataView(b.buffer,b.byteOffset,b.byteLength).setFloat64(c,a),b},b.writeFloat64LE=function(a,b,c){return void 0===b&&(b=new Uint8Array(8)),void 0===c&&(c=0),new DataView(b.buffer,b.byteOffset,b.byteLength).setFloat64(c,a,!0),b}},15501:function(a,b,c){"use strict";var d=c(25439),e=c(63027),f=c(17309),g=c(98099),h=c(4153);b.Cv=32,b.WH=12,b.pg=16;var i=new Uint8Array(16),j=function(){function a(a){if(this.nonceLength=b.WH,this.tagLength=b.pg,a.length!==b.Cv)throw Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(a)}return a.prototype.seal=function(a,b,c,e){if(a.length>16)throw Error("ChaCha20Poly1305: incorrect nonce length");var g,h=new Uint8Array(16);h.set(a,h.length-a.length);var i=new Uint8Array(32);d.stream(this._key,h,i,4);var j=b.length+this.tagLength;if(e){if(e.length!==j)throw Error("ChaCha20Poly1305: incorrect destination length");g=e}else g=new Uint8Array(j);return d.streamXOR(this._key,h,b,g,4),this._authenticate(g.subarray(g.length-this.tagLength,g.length),i,g.subarray(0,g.length-this.tagLength),c),f.wipe(h),g},a.prototype.open=function(a,b,c,e){if(a.length>16)throw Error("ChaCha20Poly1305: incorrect nonce length");if(b.length<this.tagLength)return null;var g,i=new Uint8Array(16);i.set(a,i.length-a.length);var j=new Uint8Array(32);d.stream(this._key,i,j,4);var k=new Uint8Array(this.tagLength);if(this._authenticate(k,j,b.subarray(0,b.length-this.tagLength),c),!h.equal(k,b.subarray(b.length-this.tagLength,b.length)))return null;var l=b.length-this.tagLength;if(e){if(e.length!==l)throw Error("ChaCha20Poly1305: incorrect destination length");g=e}else g=new Uint8Array(l);return d.streamXOR(this._key,i,b.subarray(0,b.length-this.tagLength),g,4),f.wipe(i),g},a.prototype.clean=function(){return f.wipe(this._key),this},a.prototype._authenticate=function(a,b,c,d){var h=new e.Poly1305(b);d&&(h.update(d),d.length%16>0&&h.update(i.subarray(d.length%16))),h.update(c),c.length%16>0&&h.update(i.subarray(c.length%16));var j=new Uint8Array(8);d&&g.writeUint64LE(d.length,j),h.update(j),g.writeUint64LE(c.length,j),h.update(j);for(var k=h.digest(),l=0;l<k.length;l++)a[l]=k[l];h.clean(),f.wipe(k),f.wipe(j)},a}();b.OK=j},25439:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(98099),e=c(17309);function f(a,b,c){for(var e=c[3]<<24|c[2]<<16|c[1]<<8|c[0],f=c[7]<<24|c[6]<<16|c[5]<<8|c[4],g=c[11]<<24|c[10]<<16|c[9]<<8|c[8],h=c[15]<<24|c[14]<<16|c[13]<<8|c[12],i=c[19]<<24|c[18]<<16|c[17]<<8|c[16],j=c[23]<<24|c[22]<<16|c[21]<<8|c[20],k=c[27]<<24|c[26]<<16|c[25]<<8|c[24],l=c[31]<<24|c[30]<<16|c[29]<<8|c[28],m=b[3]<<24|b[2]<<16|b[1]<<8|b[0],n=b[7]<<24|b[6]<<16|b[5]<<8|b[4],o=b[11]<<24|b[10]<<16|b[9]<<8|b[8],p=b[15]<<24|b[14]<<16|b[13]<<8|b[12],q=1634760805,r=857760878,s=2036477234,t=1797285236,u=e,v=f,w=g,x=h,y=i,z=j,A=k,B=l,C=m,D=n,E=o,F=p,G=0;G<20;G+=2)C^=q=q+u|0,u^=y=y+(C=C>>>16|C<<16)|0,u=u>>>20|u<<12,D^=r=r+v|0,v^=z=z+(D=D>>>16|D<<16)|0,v=v>>>20|v<<12,E^=s=s+w|0,w^=A=A+(E=E>>>16|E<<16)|0,w=w>>>20|w<<12,F^=t=t+x|0,x^=B=B+(F=F>>>16|F<<16)|0,x=x>>>20|x<<12,E^=s=s+w|0,w^=A=A+(E=E>>>24|E<<8)|0,w=w>>>25|w<<7,F^=t=t+x|0,x^=B=B+(F=F>>>24|F<<8)|0,x=x>>>25|x<<7,D^=r=r+v|0,v^=z=z+(D=D>>>24|D<<8)|0,v=v>>>25|v<<7,C^=q=q+u|0,u^=y=y+(C=C>>>24|C<<8)|0,u=u>>>25|u<<7,F^=q=q+v|0,v^=A=A+(F=F>>>16|F<<16)|0,v=v>>>20|v<<12,C^=r=r+w|0,w^=B=B+(C=C>>>16|C<<16)|0,w=w>>>20|w<<12,D^=s=s+x|0,x^=y=y+(D=D>>>16|D<<16)|0,x=x>>>20|x<<12,E^=t=t+u|0,u^=z=z+(E=E>>>16|E<<16)|0,u=u>>>20|u<<12,D^=s=s+x|0,x^=y=y+(D=D>>>24|D<<8)|0,x=x>>>25|x<<7,E^=t=t+u|0,u^=z=z+(E=E>>>24|E<<8)|0,u=u>>>25|u<<7,C^=r=r+w|0,w^=B=B+(C=C>>>24|C<<8)|0,w=w>>>25|w<<7,F^=q=q+v|0,v^=A=A+(F=F>>>24|F<<8)|0,v=v>>>25|v<<7;d.writeUint32LE(q+1634760805|0,a,0),d.writeUint32LE(r+857760878|0,a,4),d.writeUint32LE(s+2036477234|0,a,8),d.writeUint32LE(t+1797285236|0,a,12),d.writeUint32LE(u+e|0,a,16),d.writeUint32LE(v+f|0,a,20),d.writeUint32LE(w+g|0,a,24),d.writeUint32LE(x+h|0,a,28),d.writeUint32LE(y+i|0,a,32),d.writeUint32LE(z+j|0,a,36),d.writeUint32LE(A+k|0,a,40),d.writeUint32LE(B+l|0,a,44),d.writeUint32LE(C+m|0,a,48),d.writeUint32LE(D+n|0,a,52),d.writeUint32LE(E+o|0,a,56),d.writeUint32LE(F+p|0,a,60)}function g(a,b,c,d,g){if(void 0===g&&(g=0),32!==a.length)throw Error("ChaCha: key size must be 32 bytes");if(d.length<c.length)throw Error("ChaCha: destination is shorter than source");if(0===g){if(8!==b.length&&12!==b.length)throw Error("ChaCha nonce must be 8 or 12 bytes");j=(i=new Uint8Array(16)).length-b.length,i.set(b,j)}else{if(16!==b.length)throw Error("ChaCha nonce with counter must be 16 bytes");i=b,j=g}for(var i,j,k=new Uint8Array(64),l=0;l<c.length;l+=64){f(k,i,a);for(var m=l;m<l+64&&m<c.length;m++)d[m]=c[m]^k[m-l];h(i,0,j)}return e.wipe(k),0===g&&e.wipe(i),d}function h(a,b,c){for(var d=1;c--;)d=d+(255&a[b])|0,a[b]=255&d,d>>>=8,b++;if(d>0)throw Error("ChaCha: counter overflow")}b.streamXOR=g,b.stream=function(a,b,c,d){return void 0===d&&(d=0),e.wipe(c),g(a,b,c,c,d)}},4153:function(a,b){"use strict";function c(a,b){if(a.length!==b.length)return 0;for(var c=0,d=0;d<a.length;d++)c|=a[d]^b[d];return 1&c-1>>>8}Object.defineProperty(b,"__esModule",{value:!0}),b.select=function(a,b,c){return~(a-1)&b|a-1&c},b.lessOrEqual=function(a,b){return(0|a)-(0|b)-1>>>31&1},b.compare=c,b.equal=function(a,b){return 0!==a.length&&0!==b.length&&0!==c(a,b)}},79984:function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.isSerializableHash=function(a){return void 0!==a.saveState&& void 0!==a.restoreState&& void 0!==a.cleanSavedState}},512:function(a,b,c){"use strict";var d=c(25629),e=c(17309),f=function(){function a(a,b,c,e){void 0===c&&(c=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=a,this._info=e;var f=d.hmac(this._hash,c,b);this._hmac=new d.HMAC(a,f),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return a.prototype._fillBuffer=function(){this._counter[0]++;var a=this._counter[0];if(0===a)throw Error("hkdf: cannot expand more");this._hmac.reset(),a>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},a.prototype.expand=function(a){for(var b=new Uint8Array(a),c=0;c<b.length;c++)this._bufpos===this._buffer.length&&this._fillBuffer(),b[c]=this._buffer[this._bufpos++];return b},a.prototype.clean=function(){this._hmac.clean(),e.wipe(this._buffer),e.wipe(this._counter),this._bufpos=0},a}();b.t=f},25629:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(79984),e=c(4153),f=c(17309),g=function(){function a(a,b){this._finished=!1,this._inner=new a,this._outer=new a,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var c=new Uint8Array(this.blockSize);b.length>this.blockSize?this._inner.update(b).finish(c).clean():c.set(b);for(var e=0;e<c.length;e++)c[e]^=54;this._inner.update(c);for(var e=0;e<c.length;e++)c[e]^=106;this._outer.update(c),d.isSerializableHash(this._inner)&&d.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),f.wipe(c)}return a.prototype.reset=function(){if(!d.isSerializableHash(this._inner)||!d.isSerializableHash(this._outer))throw Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},a.prototype.clean=function(){d.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),d.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},a.prototype.update=function(a){return this._inner.update(a),this},a.prototype.finish=function(a){return this._finished?(this._outer.finish(a),this):(this._inner.finish(a),this._outer.update(a.subarray(0,this.digestLength)).finish(a),this._finished=!0,this)},a.prototype.digest=function(){var a=new Uint8Array(this.digestLength);return this.finish(a),a},a.prototype.saveState=function(){if(!d.isSerializableHash(this._inner))throw Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},a.prototype.restoreState=function(a){if(!d.isSerializableHash(this._inner)||!d.isSerializableHash(this._outer))throw Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(a),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},a.prototype.cleanSavedState=function(a){if(!d.isSerializableHash(this._inner))throw Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(a)},a}();b.HMAC=g,b.hmac=function(a,b,c){var d=new g(a,b);d.update(c);var e=d.digest();return d.clean(),e},b.equal=e.equal},97117:function(a,b){"use strict";function c(a,b){return a+b|0}function d(a,b){return a-b|0}Object.defineProperty(b,"__esModule",{value:!0}),b.mul=Math.imul||function(a,b){var c=65535&a,d=65535&b;return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0},b.add=c,b.sub=d,b.rotl=function(a,b){return a<<b|a>>>32-b},b.rotr=function(a,b){return a<<32-b|a>>>b},b.isInteger=Number.isInteger||function(a){return"number"==typeof a&&isFinite(a)&&Math.floor(a)===a},b.MAX_SAFE_INTEGER=9007199254740991,b.isSafeInteger=function(a){return b.isInteger(a)&&a>= -b.MAX_SAFE_INTEGER&&a<=b.MAX_SAFE_INTEGER}},63027:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(4153),e=c(17309);b.DIGEST_LENGTH=16;var f=function(){function a(a){this.digestLength=b.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=a[0]|a[1]<<8;this._r[0]=8191&c;var d=a[2]|a[3]<<8;this._r[1]=(c>>>13|d<<3)&8191;var e=a[4]|a[5]<<8;this._r[2]=(d>>>10|e<<6)&7939;var f=a[6]|a[7]<<8;this._r[3]=(e>>>7|f<<9)&8191;var g=a[8]|a[9]<<8;this._r[4]=(f>>>4|g<<12)&255,this._r[5]=g>>>1&8190;var h=a[10]|a[11]<<8;this._r[6]=(g>>>14|h<<2)&8191;var i=a[12]|a[13]<<8;this._r[7]=(h>>>11|i<<5)&8065;var j=a[14]|a[15]<<8;this._r[8]=(i>>>8|j<<8)&8191,this._r[9]=j>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return a.prototype._blocks=function(a,b,c){for(var d=this._fin?0:2048,e=this._h[0],f=this._h[1],g=this._h[2],h=this._h[3],i=this._h[4],j=this._h[5],k=this._h[6],l=this._h[7],m=this._h[8],n=this._h[9],o=this._r[0],p=this._r[1],q=this._r[2],r=this._r[3],s=this._r[4],t=this._r[5],u=this._r[6],v=this._r[7],w=this._r[8],x=this._r[9];c>=16;){var y=a[b+0]|a[b+1]<<8;e+=8191&y;var z=a[b+2]|a[b+3]<<8;f+=(y>>>13|z<<3)&8191;var A=a[b+4]|a[b+5]<<8;g+=(z>>>10|A<<6)&8191;var B=a[b+6]|a[b+7]<<8;h+=(A>>>7|B<<9)&8191;var C=a[b+8]|a[b+9]<<8;i+=(B>>>4|C<<12)&8191,j+=C>>>1&8191;var D=a[b+10]|a[b+11]<<8;k+=(C>>>14|D<<2)&8191;var E=a[b+12]|a[b+13]<<8;l+=(D>>>11|E<<5)&8191;var F=a[b+14]|a[b+15]<<8;m+=(E>>>8|F<<8)&8191,n+=F>>>5|d;var G=0,H=G;H+=e*o,H+=f*(5*x),H+=g*(5*w),H+=h*(5*v),H+=i*(5*u),G=H>>>13,H&=8191,H+=j*(5*t),H+=k*(5*s),H+=l*(5*r),H+=m*(5*q),H+=n*(5*p),G+=H>>>13,H&=8191;var I=G;I+=e*p,I+=f*o,I+=g*(5*x),I+=h*(5*w),I+=i*(5*v),G=I>>>13,I&=8191,I+=j*(5*u),I+=k*(5*t),I+=l*(5*s),I+=m*(5*r),I+=n*(5*q),G+=I>>>13,I&=8191;var J=G;J+=e*q,J+=f*p,J+=g*o,J+=h*(5*x),J+=i*(5*w),G=J>>>13,J&=8191,J+=j*(5*v),J+=k*(5*u),J+=l*(5*t),J+=m*(5*s),J+=n*(5*r),G+=J>>>13,J&=8191;var K=G;K+=e*r,K+=f*q,K+=g*p,K+=h*o,K+=i*(5*x),G=K>>>13,K&=8191,K+=j*(5*w),K+=k*(5*v),K+=l*(5*u),K+=m*(5*t),K+=n*(5*s),G+=K>>>13,K&=8191;var L=G;L+=e*s,L+=f*r,L+=g*q,L+=h*p,L+=i*o,G=L>>>13,L&=8191,L+=j*(5*x),L+=k*(5*w),L+=l*(5*v),L+=m*(5*u),L+=n*(5*t),G+=L>>>13,L&=8191;var M=G;M+=e*t,M+=f*s,M+=g*r,M+=h*q,M+=i*p,G=M>>>13,M&=8191,M+=j*o,M+=k*(5*x),M+=l*(5*w),M+=m*(5*v),M+=n*(5*u),G+=M>>>13,M&=8191;var N=G;N+=e*u,N+=f*t,N+=g*s,N+=h*r,N+=i*q,G=N>>>13,N&=8191,N+=j*p,N+=k*o,N+=l*(5*x),N+=m*(5*w),N+=n*(5*v),G+=N>>>13,N&=8191;var O=G;O+=e*v,O+=f*u,O+=g*t,O+=h*s,O+=i*r,G=O>>>13,O&=8191,O+=j*q,O+=k*p,O+=l*o,O+=m*(5*x),O+=n*(5*w),G+=O>>>13,O&=8191;var P=G;P+=e*w,P+=f*v,P+=g*u,P+=h*t,P+=i*s,G=P>>>13,P&=8191,P+=j*r,P+=k*q,P+=l*p,P+=m*o,P+=n*(5*x),G+=P>>>13,P&=8191;var Q=G;Q+=e*x,Q+=f*w,Q+=g*v,Q+=h*u,Q+=i*t,G=Q>>>13,Q&=8191,Q+=j*s,Q+=k*r,Q+=l*q,Q+=m*p,Q+=n*o,G+=Q>>>13,Q&=8191,H=8191&(G=(G=(G<<2)+G|0)+H|0),G>>>=13,I+=G,e=H,f=I,g=J,h=K,i=L,j=M,k=N,l=O,m=P,n=Q,b+=16,c-=16}this._h[0]=e,this._h[1]=f,this._h[2]=g,this._h[3]=h,this._h[4]=i,this._h[5]=j,this._h[6]=k,this._h[7]=l,this._h[8]=m,this._h[9]=n},a.prototype.finish=function(a,b){void 0===b&&(b=0);var c,d,e,f,g=new Uint16Array(10);if(this._leftover){for(f=this._leftover,this._buffer[f++]=1;f<16;f++)this._buffer[f]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(c=this._h[1]>>>13,this._h[1]&=8191,f=2;f<10;f++)this._h[f]+=c,c=this._h[f]>>>13,this._h[f]&=8191;for(this._h[0]+=5*c,c=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=c,c=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=c,g[0]=this._h[0]+5,c=g[0]>>>13,g[0]&=8191,f=1;f<10;f++)g[f]=this._h[f]+c,c=g[f]>>>13,g[f]&=8191;for(g[9]-=8192,d=(1^c)-1,f=0;f<10;f++)g[f]&=d;for(f=0,d=~d;f<10;f++)this._h[f]=this._h[f]&d|g[f];for(f=1,this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,e=this._h[0]+this._pad[0],this._h[0]=65535&e;f<8;f++)e=(this._h[f]+this._pad[f]|0)+(e>>>16)|0,this._h[f]=65535&e;return a[b+0]=this._h[0]>>>0,a[b+1]=this._h[0]>>>8,a[b+2]=this._h[1]>>>0,a[b+3]=this._h[1]>>>8,a[b+4]=this._h[2]>>>0,a[b+5]=this._h[2]>>>8,a[b+6]=this._h[3]>>>0,a[b+7]=this._h[3]>>>8,a[b+8]=this._h[4]>>>0,a[b+9]=this._h[4]>>>8,a[b+10]=this._h[5]>>>0,a[b+11]=this._h[5]>>>8,a[b+12]=this._h[6]>>>0,a[b+13]=this._h[6]>>>8,a[b+14]=this._h[7]>>>0,a[b+15]=this._h[7]>>>8,this._finished=!0,this},a.prototype.update=function(a){var b,c=0,d=a.length;if(this._leftover){(b=16-this._leftover)>d&&(b=d);for(var e=0;e<b;e++)this._buffer[this._leftover+e]=a[c+e];if(d-=b,c+=b,this._leftover+=b,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(d>=16&&(b=d-d%16,this._blocks(a,c,b),c+=b,d-=b),d){for(var e=0;e<d;e++)this._buffer[this._leftover+e]=a[c+e];this._leftover+=d}return this},a.prototype.digest=function(){if(this._finished)throw Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},a.prototype.clean=function(){return e.wipe(this._buffer),e.wipe(this._r),e.wipe(this._h),e.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},a}();b.Poly1305=f,b.oneTimeAuth=function(a,b){var c=new f(a);c.update(b);var d=c.digest();return c.clean(),d},b.equal=function(a,c){return a.length===b.DIGEST_LENGTH&&c.length===b.DIGEST_LENGTH&&d.equal(a,c)}},31416:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.randomStringForEntropy=b.randomString=b.randomUint32=b.randomBytes=b.defaultRandomSource=void 0;let d=c(46008),e=c(98099),f=c(17309);function g(a,c=b.defaultRandomSource){return c.randomBytes(a)}b.defaultRandomSource=new d.SystemRandomSource,b.randomBytes=g,b.randomUint32=function(a=b.defaultRandomSource){let c=g(4,a),d=(0,e.readUint32LE)(c);return(0,f.wipe)(c),d};let h="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function i(a,c=h,d=b.defaultRandomSource){if(c.length<2)throw Error("randomString charset is too short");if(c.length>256)throw Error("randomString charset is too long");let e="",i=c.length,j=256-256%i;for(;a>0;){let k=g(Math.ceil(256*a/j),d);for(let l=0;l<k.length&&a>0;l++){let m=k[l];m<j&&(e+=c.charAt(m%i),a--)}(0,f.wipe)(k)}return e}b.randomString=i,b.randomStringForEntropy=function(a,c=h,d=b.defaultRandomSource){let e=Math.ceil(a/(Math.log(c.length)/Math.LN2));return i(e,c,d)}},75455:function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.BrowserRandomSource=void 0,b.BrowserRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let a="undefined"!=typeof self?self.crypto||self.msCrypto:null;a&& void 0!==a.getRandomValues&&(this._crypto=a,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(a){if(!this.isAvailable||!this._crypto)throw Error("Browser random byte generator is not available.");let b=new Uint8Array(a);for(let c=0;c<b.length;c+=65536)this._crypto.getRandomValues(b.subarray(c,c+Math.min(b.length-c,65536)));return b}}},58871:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.NodeRandomSource=void 0;let d=c(17309);b.NodeRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{let a=c(35883);a&&a.randomBytes&&(this._crypto=a,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(a){if(!this.isAvailable||!this._crypto)throw Error("Node.js random byte generator is not available.");let b=this._crypto.randomBytes(a);if(b.length!==a)throw Error("NodeRandomSource: got fewer bytes than requested");let c=new Uint8Array(a);for(let e=0;e<c.length;e++)c[e]=b[e];return(0,d.wipe)(b),c}}},46008:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SystemRandomSource=void 0;let d=c(75455),e=c(58871);b.SystemRandomSource=class{constructor(){if(this.isAvailable=!1,this.name="",this._source=new d.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new e.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(a){if(!this.isAvailable)throw Error("System random byte generator is not available.");return this._source.randomBytes(a)}}},73294:function(a,b,c){"use strict";var d=c(98099),e=c(17309);b.k=32,b.cn=64;var f=function(){function a(){this.digestLength=b.k,this.blockSize=b.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){e.wipe(this._buffer),e.wipe(this._temp),this.reset()},a.prototype.update=function(a,b){if(void 0===b&&(b=a.length),this._finished)throw Error("SHA256: can't update because hash was finished.");var c=0;if(this._bytesHashed+=b,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&b>0;)this._buffer[this._bufferLength++]=a[c++],b--;this._bufferLength===this.blockSize&&(h(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(b>=this.blockSize&&(c=h(this._temp,this._state,a,c,b),b%=this.blockSize);b>0;)this._buffer[this._bufferLength++]=a[c++],b--;return this},a.prototype.finish=function(a){if(!this._finished){var b=this._bytesHashed,c=this._bufferLength,e=b/536870912|0,f=b<<3,g=b%64<56?64:128;this._buffer[c]=128;for(var i=c+1;i<g-8;i++)this._buffer[i]=0;d.writeUint32BE(e,this._buffer,g-8),d.writeUint32BE(f,this._buffer,g-4),h(this._temp,this._state,this._buffer,0,g),this._finished=!0}for(var i=0;i<this.digestLength/4;i++)d.writeUint32BE(this._state[i],a,4*i);return this},a.prototype.digest=function(){var a=new Uint8Array(this.digestLength);return this.finish(a),a},a.prototype.saveState=function(){if(this._finished)throw Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(a){return this._state.set(a.state),this._bufferLength=a.bufferLength,a.buffer&&this._buffer.set(a.buffer),this._bytesHashed=a.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(a){e.wipe(a.state),a.buffer&&e.wipe(a.buffer),a.bufferLength=0,a.bytesHashed=0},a}();b.mE=f;var g=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function h(a,b,c,e,f){for(;f>=64;){for(var h=b[0],i=b[1],j=b[2],k=b[3],l=b[4],m=b[5],n=b[6],o=b[7],p=0;p<16;p++){var q=e+4*p;a[p]=d.readUint32BE(c,q)}for(var p=16;p<64;p++){var r=a[p-2],s=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,t=((r=a[p-15])>>>7|r<<25)^(r>>>18|r<<14)^r>>>3;a[p]=(s+a[p-7]|0)+(t+a[p-16]|0)}for(var p=0;p<64;p++){var s=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&m^ ~l&n)|0)+(o+(g[p]+a[p]|0)|0)|0,t=((h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10))+(h&i^h&j^i&j)|0;o=n,n=m,m=l,l=k+s|0,k=j,j=i,i=h,h=s+t|0}b[0]+=h,b[1]+=i,b[2]+=j,b[3]+=k,b[4]+=l,b[5]+=m,b[6]+=n,b[7]+=o,e+=64,f-=64}return e}b.vp=function(a){var b=new f;b.update(a);var c=b.digest();return b.clean(),c}},17309:function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.wipe=function(a){for(var b=0;b<a.length;b++)a[b]=0;return a}},57664:function(a,b,c){"use strict";b.gi=b.Au=b._w=b.KS=b.kz=void 0;let d=c(31416),e=c(17309);function f(a){let b=new Float64Array(16);if(a)for(let c=0;c<a.length;c++)b[c]=a[c];return b}b.kz=32,b.KS=32;let g=new Uint8Array(32);g[0]=9;let h=f([56129,1]);function i(a){let b=1;for(let c=0;c<16;c++){let d=a[c]+b+65535;b=Math.floor(d/65536),a[c]=d-65536*b}a[0]+=b-1+37*(b-1)}function j(a,b,c){let d=~(c-1);for(let e=0;e<16;e++){let f=d&(a[e]^b[e]);a[e]^=f,b[e]^=f}}function k(a,b,c){for(let d=0;d<16;d++)a[d]=b[d]+c[d]}function l(a,b,c){for(let d=0;d<16;d++)a[d]=b[d]-c[d]}function m(a,b,c){let d,e,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=c[0],L=c[1],M=c[2],N=c[3],O=c[4],P=c[5],Q=c[6],R=c[7],S=c[8],T=c[9],U=c[10],V=c[11],W=c[12],X=c[13],Y=c[14],Z=c[15];f+=(d=b[0])*K,g+=d*L,h+=d*M,i+=d*N,j+=d*O,k+=d*P,l+=d*Q,m+=d*R,n+=d*S,o+=d*T,p+=d*U,q+=d*V,r+=d*W,s+=d*X,t+=d*Y,u+=d*Z,d=b[1],g+=d*K,h+=d*L,i+=d*M,j+=d*N,k+=d*O,l+=d*P,m+=d*Q,n+=d*R,o+=d*S,p+=d*T,q+=d*U,r+=d*V,s+=d*W,t+=d*X,u+=d*Y,v+=d*Z,d=b[2],h+=d*K,i+=d*L,j+=d*M,k+=d*N,l+=d*O,m+=d*P,n+=d*Q,o+=d*R,p+=d*S,q+=d*T,r+=d*U,s+=d*V,t+=d*W,u+=d*X,v+=d*Y,w+=d*Z,d=b[3],i+=d*K,j+=d*L,k+=d*M,l+=d*N,m+=d*O,n+=d*P,o+=d*Q,p+=d*R,q+=d*S,r+=d*T,s+=d*U,t+=d*V,u+=d*W,v+=d*X,w+=d*Y,x+=d*Z,d=b[4],j+=d*K,k+=d*L,l+=d*M,m+=d*N,n+=d*O,o+=d*P,p+=d*Q,q+=d*R,r+=d*S,s+=d*T,t+=d*U,u+=d*V,v+=d*W,w+=d*X,x+=d*Y,y+=d*Z,d=b[5],k+=d*K,l+=d*L,m+=d*M,n+=d*N,o+=d*O,p+=d*P,q+=d*Q,r+=d*R,s+=d*S,t+=d*T,u+=d*U,v+=d*V,w+=d*W,x+=d*X,y+=d*Y,z+=d*Z,d=b[6],l+=d*K,m+=d*L,n+=d*M,o+=d*N,p+=d*O,q+=d*P,r+=d*Q,s+=d*R,t+=d*S,u+=d*T,v+=d*U,w+=d*V,x+=d*W,y+=d*X,z+=d*Y,A+=d*Z,d=b[7],m+=d*K,n+=d*L,o+=d*M,p+=d*N,q+=d*O,r+=d*P,s+=d*Q,t+=d*R,u+=d*S,v+=d*T,w+=d*U,x+=d*V,y+=d*W,z+=d*X,A+=d*Y,B+=d*Z,d=b[8],n+=d*K,o+=d*L,p+=d*M,q+=d*N,r+=d*O,s+=d*P,t+=d*Q,u+=d*R,v+=d*S,w+=d*T,x+=d*U,y+=d*V,z+=d*W,A+=d*X,B+=d*Y,C+=d*Z,d=b[9],o+=d*K,p+=d*L,q+=d*M,r+=d*N,s+=d*O,t+=d*P,u+=d*Q,v+=d*R,w+=d*S,x+=d*T,y+=d*U,z+=d*V,A+=d*W,B+=d*X,C+=d*Y,D+=d*Z,d=b[10],p+=d*K,q+=d*L,r+=d*M,s+=d*N,t+=d*O,u+=d*P,v+=d*Q,w+=d*R,x+=d*S,y+=d*T,z+=d*U,A+=d*V,B+=d*W,C+=d*X,D+=d*Y,E+=d*Z,d=b[11],q+=d*K,r+=d*L,s+=d*M,t+=d*N,u+=d*O,v+=d*P,w+=d*Q,x+=d*R,y+=d*S,z+=d*T,A+=d*U,B+=d*V,C+=d*W,D+=d*X,E+=d*Y,F+=d*Z,d=b[12],r+=d*K,s+=d*L,t+=d*M,u+=d*N,v+=d*O,w+=d*P,x+=d*Q,y+=d*R,z+=d*S,A+=d*T,B+=d*U,C+=d*V,D+=d*W,E+=d*X,F+=d*Y,G+=d*Z,d=b[13],s+=d*K,t+=d*L,u+=d*M,v+=d*N,w+=d*O,x+=d*P,y+=d*Q,z+=d*R,A+=d*S,B+=d*T,C+=d*U,D+=d*V,E+=d*W,F+=d*X,G+=d*Y,H+=d*Z,d=b[14],t+=d*K,u+=d*L,v+=d*M,w+=d*N,x+=d*O,y+=d*P,z+=d*Q,A+=d*R,B+=d*S,C+=d*T,D+=d*U,E+=d*V,F+=d*W,G+=d*X,H+=d*Y,I+=d*Z,d=b[15],u+=d*K,v+=d*L,w+=d*M,x+=d*N,y+=d*O,z+=d*P,A+=d*Q,B+=d*R,C+=d*S,D+=d*T,E+=d*U,F+=d*V,G+=d*W,H+=d*X,I+=d*Y,J+=d*Z,f+=38*v,g+=38*w,h+=38*x,i+=38*y,j+=38*z,k+=38*A,l+=38*B,m+=38*C,n+=38*D,o+=38*E,p+=38*F,q+=38*G,r+=38*H,s+=38*I,t+=38*J,e=1,d=f+e+65535,e=Math.floor(d/65536),f=d-65536*e,d=g+e+65535,e=Math.floor(d/65536),g=d-65536*e,d=h+e+65535,e=Math.floor(d/65536),h=d-65536*e,d=i+e+65535,e=Math.floor(d/65536),i=d-65536*e,d=j+e+65535,e=Math.floor(d/65536),j=d-65536*e,d=k+e+65535,e=Math.floor(d/65536),k=d-65536*e,d=l+e+65535,e=Math.floor(d/65536),l=d-65536*e,d=m+e+65535,e=Math.floor(d/65536),m=d-65536*e,d=n+e+65535,e=Math.floor(d/65536),n=d-65536*e,d=o+e+65535,e=Math.floor(d/65536),o=d-65536*e,d=p+e+65535,e=Math.floor(d/65536),p=d-65536*e,d=q+e+65535,e=Math.floor(d/65536),q=d-65536*e,d=r+e+65535,e=Math.floor(d/65536),r=d-65536*e,d=s+e+65535,e=Math.floor(d/65536),s=d-65536*e,d=t+e+65535,e=Math.floor(d/65536),t=d-65536*e,d=u+e+65535,e=Math.floor(d/65536),u=d-65536*e,f+=e-1+37*(e-1),e=1,d=f+e+65535,e=Math.floor(d/65536),f=d-65536*e,d=g+e+65535,e=Math.floor(d/65536),g=d-65536*e,d=h+e+65535,e=Math.floor(d/65536),h=d-65536*e,d=i+e+65535,e=Math.floor(d/65536),i=d-65536*e,d=j+e+65535,e=Math.floor(d/65536),j=d-65536*e,d=k+e+65535,e=Math.floor(d/65536),k=d-65536*e,d=l+e+65535,e=Math.floor(d/65536),l=d-65536*e,d=m+e+65535,e=Math.floor(d/65536),m=d-65536*e,d=n+e+65535,e=Math.floor(d/65536),n=d-65536*e,d=o+e+65535,e=Math.floor(d/65536),o=d-65536*e,d=p+e+65535,e=Math.floor(d/65536),p=d-65536*e,d=q+e+65535,e=Math.floor(d/65536),q=d-65536*e,d=r+e+65535,e=Math.floor(d/65536),r=d-65536*e,d=s+e+65535,e=Math.floor(d/65536),s=d-65536*e,d=t+e+65535,e=Math.floor(d/65536),t=d-65536*e,d=u+e+65535,e=Math.floor(d/65536),u=d-65536*e,f+=e-1+37*(e-1),a[0]=f,a[1]=g,a[2]=h,a[3]=i,a[4]=j,a[5]=k,a[6]=l,a[7]=m,a[8]=n,a[9]=o,a[10]=p,a[11]=q,a[12]=r,a[13]=s,a[14]=t,a[15]=u}function n(a,b){m(a,b,b)}function o(a,b){let c=new Uint8Array(32),d=new Float64Array(80),e=f(),g=f(),o=f(),p=f(),q=f(),r=f();for(let s=0;s<31;s++)c[s]=a[s];c[31]=127&a[31]|64,c[0]&=248,function(a,b){for(let c=0;c<16;c++)a[c]=b[2*c]+(b[2*c+1]<<8);a[15]&=32767}(d,b);for(let t=0;t<16;t++)g[t]=d[t];e[0]=p[0]=1;for(let u=254;u>=0;--u){let v=c[u>>>3]>>>(7&u)&1;j(e,g,v),j(o,p,v),k(q,e,o),l(e,e,o),k(o,g,p),l(g,g,p),n(p,q),n(r,e),m(e,o,e),m(o,g,q),k(q,e,o),l(e,e,o),n(g,e),l(o,p,r),m(e,o,h),k(e,e,p),m(o,o,e),m(e,p,r),m(p,g,d),n(g,q),j(e,g,v),j(o,p,v)}for(let w=0;w<16;w++)d[w+16]=e[w],d[w+32]=o[w],d[w+48]=g[w],d[w+64]=p[w];let x=d.subarray(32),y=d.subarray(16);!function(a,b){let c=f();for(let d=0;d<16;d++)c[d]=b[d];for(let e=253;e>=0;e--)n(c,c),2!==e&&4!==e&&m(c,c,b);for(let g=0;g<16;g++)a[g]=c[g]}(x,x),m(y,y,x);let z=new Uint8Array(32);return!function(a,b){let c=f(),d=f();for(let e=0;e<16;e++)d[e]=b[e];i(d),i(d),i(d);for(let g=0;g<2;g++){c[0]=d[0]-65517;for(let h=1;h<15;h++)c[h]=d[h]-65535-(c[h-1]>>16&1),c[h-1]&=65535;c[15]=d[15]-32767-(c[14]>>16&1);let k=c[15]>>16&1;c[14]&=65535,j(d,c,1-k)}for(let l=0;l<16;l++)a[2*l]=255&d[l],a[2*l+1]=d[l]>>8}(z,y),z}function p(a){var c;if(a.length!==b.KS)throw Error(`x25519: seed must be ${b.KS} bytes`);let d=new Uint8Array(a),e=(c=d,o(c,g));return{publicKey:e,secretKey:d}}b._w=p,b.Au=function(a){let b=(0,d.randomBytes)(32,a),c=p(b);return(0,e.wipe)(b),c},b.gi=function(a,c,d=!1){if(a.length!==b.kz)throw Error("X25519: incorrect secret key length");if(c.length!==b.kz)throw Error("X25519: incorrect public key length");let e=o(a,c);if(d){let f=0;for(let g=0;g<e.length;g++)f|=e[g];if(0===f)throw Error("X25519: invalid shared key")}return e}},63573:function(a,b){"use strict";let c=Math.exp;a.exports=function(a){if("number"!=typeof a)throw Error("must provide a timespan to the moving average constructor");if(a<=0)throw Error("must provide a timespan > 0 to the moving average constructor");let b,d=0,e=0,f=0,g,h={};return h.push=function(h,i){if(g){var j,k;let l=(j=h,1-c(-(j-(k=g))/a)),m=i-b,n=l*m;b=l*i+(1-l)*b,d=(1-l)*(d+m*n),e=Math.sqrt(d),f=b+l*m}else b=i;g=h},h.movingAverage=function(){return b},h.variance=function(){return d},h.deviation=function(){return e},h.forecast=function(){return f},h}},18508:function(a,b,c){"use strict";let d=Object.freeze({});function e(a){if("object"!=typeof a||null===a)throw TypeError("First argument must be an abstract-leveldown compliant store");this.db=a,this._operations=[],this._written=!1}e.prototype._checkWritten=function(){if(this._written)throw Error("write() already called on this batch")},e.prototype.put=function(a,b,c){this._checkWritten();let e=this.db._checkKey(a)||this.db._checkValue(b);if(e)throw e;return a=this.db._serializeKey(a),b=this.db._serializeValue(b),this._put(a,b,null!=c?c:d),this},e.prototype._put=function(a,b,c){this._operations.push({...c,type:"put",key:a,value:b})},e.prototype.del=function(a,b){this._checkWritten();let c=this.db._checkKey(a);if(c)throw c;return a=this.db._serializeKey(a),this._del(a,null!=b?b:d),this},e.prototype._del=function(a,b){this._operations.push({...b,type:"del",key:a})},e.prototype.clear=function(){return this._checkWritten(),this._clear(),this},e.prototype._clear=function(){this._operations=[]},e.prototype.write=function(a,b){if(this._checkWritten(),"function"==typeof a&&(b=a),"function"!=typeof b)throw Error("write() requires a callback argument");("object"!=typeof a||null===a)&&(a={}),this._written=!0,this._write(a,b)},e.prototype._write=function(a,b){this.db._batch(this._operations,a,b)},e.prototype._nextTick=c(17212),a.exports=e},43538:function(a,b,c){"use strict";function d(a){if("object"!=typeof a||null===a)throw TypeError("First argument must be an abstract-leveldown compliant store");this.db=a,this._ended=!1,this._nexting=!1}d.prototype.next=function(a){let b=this;if(void 0===a)b=new Promise(function(b,c){a=function(a,d,e){a?c(a):void 0===d&& void 0===e?b():b([d,e])}});else if("function"!=typeof a)throw Error("next() requires a callback argument");return this._ended?(this._nextTick(a,Error("cannot call next() after end()")),b):this._nexting?(this._nextTick(a,Error("cannot call next() before previous next() has completed")),b):(this._nexting=!0,this._next((b,...c)=>{this._nexting=!1,a(b,...c)}),b)},d.prototype._next=function(a){this._nextTick(a)},d.prototype.seek=function(a){if(this._ended)throw Error("cannot call seek() after end()");if(this._nexting)throw Error("cannot call seek() before next() has completed");a=this.db._serializeKey(a),this._seek(a)},d.prototype._seek=function(a){},d.prototype.end=function(a){let b;if(void 0===a)b=new Promise(function(b,c){a=function(a){a?c(a):b()}});else if("function"!=typeof a)throw Error("end() requires a callback argument");return this._ended?(this._nextTick(a,Error("end() already called on iterator")),b):(this._ended=!0,this._end(a),b)},d.prototype._end=function(a){this._nextTick(a)},d.prototype[Symbol.asyncIterator]=async function*(){try{let a;for(;void 0!==(a=await this.next());)yield a}finally{this._ended||await this.end()}},d.prototype._nextTick=c(17212),a.exports=d},32554:function(a,b,c){"use strict";let d=c(97970),e=c(35214),f=c(16957),g=c(43538),h=c(18508),i=c(90070).R,j=c(90070).F,k=Object.prototype.hasOwnProperty,l=["lt","lte","gt","gte"];function m(a){this.status="new",this.supports=d(a,{status:!0})}function n(a,b){let c={};for(let d in b){if(!k.call(b,d))continue;if("start"===d||"end"===d)throw Error('Legacy range options ("start" and "end") have been removed');let e=b[d];o(d)&&(e=a._serializeKey(e)),c[d]=e}return c}function o(a){return -1!==l.indexOf(a)}m.prototype.open=function(a,b){let c=this.status;if("function"==typeof a&&(b=a),"function"!=typeof b)throw Error("open() requires a callback argument");("object"!=typeof a||null===a)&&(a={}),a.createIfMissing=!1!==a.createIfMissing,a.errorIfExists=!!a.errorIfExists,this.status="opening",this._open(a,a=>{if(a)return this.status=c,b(a);this.status="open",b()})},m.prototype._open=function(a,b){this._nextTick(b)},m.prototype.close=function(a){let b=this.status;if("function"!=typeof a)throw Error("close() requires a callback argument");this.status="closing",this._close(c=>{if(c)return this.status=b,a(c);this.status="closed",a()})},m.prototype._close=function(a){this._nextTick(a)},m.prototype.get=function(a,b,c){if("function"==typeof b&&(c=b),"function"!=typeof c)throw Error("get() requires a callback argument");let d=this._checkKey(a);if(d)return this._nextTick(c,d);a=this._serializeKey(a),("object"!=typeof b||null===b)&&(b={}),b.asBuffer=!1!==b.asBuffer,this._get(a,b,c)},m.prototype._get=function(a,b,c){this._nextTick(function(){c(Error("NotFound"))})},m.prototype.getMany=function(a,b,c){var d,e;if(c=i(b,c),c=f.fromCallback(c),b=j(b),d=this,e=c,!d.isOperational()&&(d._nextTick(e,Error("Database is not open")),1))return c.promise;if(!Array.isArray(a))return this._nextTick(c,Error("getMany() requires an array argument")),c.promise;if(0===a.length)return this._nextTick(c,null,[]),c.promise;"boolean"!=typeof b.asBuffer&&(b={...b,asBuffer:!0});let g=Array(a.length);for(let h=0;h<a.length;h++){let k=a[h],l=this._checkKey(k);if(l)return this._nextTick(c,l),c.promise;g[h]=this._serializeKey(k)}return this._getMany(g,b,c),c.promise},m.prototype._getMany=function(a,b,c){this._nextTick(c,null,Array(a.length).fill(void 0))},m.prototype.put=function(a,b,c,d){if("function"==typeof c&&(d=c),"function"!=typeof d)throw Error("put() requires a callback argument");let e=this._checkKey(a)||this._checkValue(b);if(e)return this._nextTick(d,e);a=this._serializeKey(a),b=this._serializeValue(b),("object"!=typeof c||null===c)&&(c={}),this._put(a,b,c,d)},m.prototype._put=function(a,b,c,d){this._nextTick(d)},m.prototype.del=function(a,b,c){if("function"==typeof b&&(c=b),"function"!=typeof c)throw Error("del() requires a callback argument");let d=this._checkKey(a);if(d)return this._nextTick(c,d);a=this._serializeKey(a),("object"!=typeof b||null===b)&&(b={}),this._del(a,b,c)},m.prototype._del=function(a,b,c){this._nextTick(c)},m.prototype.batch=function(a,b,c){if(!arguments.length)return this._chainedBatch();if("function"==typeof b&&(c=b),"function"==typeof a&&(c=a),"function"!=typeof c)throw Error("batch(array) requires a callback argument");if(!Array.isArray(a))return this._nextTick(c,Error("batch(array) requires an array argument"));if(0===a.length)return this._nextTick(c);("object"!=typeof b||null===b)&&(b={});let d=Array(a.length);for(let e=0;e<a.length;e++){if("object"!=typeof a[e]||null===a[e])return this._nextTick(c,Error("batch(array) element must be an object and not `null`"));let f=Object.assign({},a[e]);if("put"!==f.type&&"del"!==f.type)return this._nextTick(c,Error("`type` must be 'put' or 'del'"));let g=this._checkKey(f.key);if(g)return this._nextTick(c,g);if(f.key=this._serializeKey(f.key),"put"===f.type){let h=this._checkValue(f.value);if(h)return this._nextTick(c,h);f.value=this._serializeValue(f.value)}d[e]=f}this._batch(d,b,c)},m.prototype._batch=function(a,b,c){this._nextTick(c)},m.prototype.clear=function(a,b){if("function"==typeof a)b=a;else if("function"!=typeof b)throw Error("clear() requires a callback argument");(a=n(this,a)).reverse=!!a.reverse,a.limit="limit"in a?a.limit:-1,this._clear(a,b)},m.prototype._clear=function(a,b){a.keys=!0,a.values=!1,a.keyAsBuffer=!0,a.valueAsBuffer=!0;let c=this._iterator(a),d={},e=a=>{if(a)return c.end(function(){b(a)});c.next((a,f)=>a?e(a):void 0===f?c.end(b):void this._del(f,d,e))};e()},m.prototype._setupIteratorOptions=function(a){return(a=n(this,a)).reverse=!!a.reverse,a.keys=!1!==a.keys,a.values=!1!==a.values,a.limit="limit"in a?a.limit:-1,a.keyAsBuffer=!1!==a.keyAsBuffer,a.valueAsBuffer=!1!==a.valueAsBuffer,a},m.prototype.iterator=function(a){return("object"!=typeof a||null===a)&&(a={}),a=this._setupIteratorOptions(a),this._iterator(a)},m.prototype._iterator=function(a){return new g(this)},m.prototype._chainedBatch=function(){return new h(this)},m.prototype._serializeKey=function(a){return a},m.prototype._serializeValue=function(a){return a},m.prototype._checkKey=function(a){return null==a?Error("key cannot be `null` or `undefined`"):e(a)&&0===a.length?Error("key cannot be an empty Buffer"):""===a?Error("key cannot be an empty String"):Array.isArray(a)&&0===a.length?Error("key cannot be an empty Array"):void 0},m.prototype._checkValue=function(a){if(null==a)return Error("value cannot be `null` or `undefined`")},m.prototype.isOperational=function(){return"open"===this.status||this._isOperational()},m.prototype._isOperational=function(){return!1},m.prototype._nextTick=c(17212),a.exports=m},24012:function(a,b,c){"use strict";b.AbstractLevelDOWN=c(32554),b.AbstractIterator=c(43538),b.AbstractChainedBatch=c(18508)},90070:function(a,b){"use strict";b.R=function(a,b){return"function"==typeof a?a:b},b.F=function(a){return"object"==typeof a&&null!==a?a:{}}},17212:function(a,b,c){"use strict";let d=c(54375);a.exports=function(a,...b){0===b.length?d(a):d(()=>a(...b))}},35214:function(a){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */ a.exports=function(a){return null!=a&&null!=a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}},97970:function(a){"use strict";function b(a){return!!a&&Object.assign({},a)}a.exports=function(...a){let c=a.reduce((a,b)=>Object.assign(a,b),{});return Object.assign(c,{bufferKeys:c.bufferKeys||!1,snapshots:c.snapshots||!1,permanence:c.permanence||!1,seek:c.seek||!1,clear:c.clear||!1,getMany:c.getMany||!1,keyIterator:c.keyIterator||!1,valueIterator:c.valueIterator||!1,iteratorNextv:c.iteratorNextv||!1,iteratorAll:c.iteratorAll||!1,status:c.status||!1,idempotentOpen:c.idempotentOpen||!1,passiveOpen:c.passiveOpen||!1,serialize:c.serialize||!1,createIfMissing:c.createIfMissing||!1,errorIfExists:c.errorIfExists||!1,deferredOpen:c.deferredOpen||!1,openCallback:c.openCallback||!1,promises:c.promises||!1,streams:c.streams||!1,encodings:b(c.encodings),events:b(c.events),additionalMethods:Object.assign({},c.additionalMethods)})}},9668:function(a,b,c){"use strict";let{Buffer:d}=c(58478),e=Symbol.for("BufferList");function f(a){if(!(this instanceof f))return new f(a);f._init.call(this,a)}f._init=function(a){Object.defineProperty(this,e,{value:!0}),this._bufs=[],this.length=0,a&&this.append(a)},f.prototype._new=function(a){return new f(a)},f.prototype._offset=function(a){if(0===a)return[0,0];let b=0;for(let c=0;c<this._bufs.length;c++){let d=b+this._bufs[c].length;if(a<d||c===this._bufs.length-1)return[c,a-b];b=d}},f.prototype._reverseOffset=function(a){let b=a[0],c=a[1];for(let d=0;d<b;d++)c+=this._bufs[d].length;return c},f.prototype.get=function(a){if(a>this.length||a<0)return;let b=this._offset(a);return this._bufs[b[0]][b[1]]},f.prototype.slice=function(a,b){return"number"==typeof a&&a<0&&(a+=this.length),"number"==typeof b&&b<0&&(b+=this.length),this.copy(null,0,a,b)},f.prototype.copy=function(a,b,c,e){if(("number"!=typeof c||c<0)&&(c=0),("number"!=typeof e||e>this.length)&&(e=this.length),c>=this.length||e<=0)return a||d.alloc(0);let f=!!a,g=this._offset(c),h=e-c,i=h,j=f&&b||0,k=g[1];if(0===c&&e===this.length){if(!f)return 1===this._bufs.length?this._bufs[0]:d.concat(this._bufs,this.length);for(let l=0;l<this._bufs.length;l++)this._bufs[l].copy(a,j),j+=this._bufs[l].length;return a}if(i<=this._bufs[g[0]].length-k)return f?this._bufs[g[0]].copy(a,b,k,k+i):this._bufs[g[0]].slice(k,k+i);f||(a=d.allocUnsafe(h));for(let m=g[0];m<this._bufs.length;m++){let n=this._bufs[m].length-k;if(i>n)this._bufs[m].copy(a,j,k),j+=n;else{this._bufs[m].copy(a,j,k,k+i),j+=n;break}i-=n,k&&(k=0)}return a.length>j?a.slice(0,j):a},f.prototype.shallowSlice=function(a,b){if(a=a||0,b="number"!=typeof b?this.length:b,a<0&&(a+=this.length),b<0&&(b+=this.length),a===b)return this._new();let c=this._offset(a),d=this._offset(b),e=this._bufs.slice(c[0],d[0]+1);return 0===d[1]?e.pop():e[e.length-1]=e[e.length-1].slice(0,d[1]),0!==c[1]&&(e[0]=e[0].slice(c[1])),this._new(e)},f.prototype.toString=function(a,b,c){return this.slice(b,c).toString(a)},f.prototype.consume=function(a){if(Number.isNaN(a=Math.trunc(a))||a<=0)return this;for(;this._bufs.length;)if(a>=this._bufs[0].length)a-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(a),this.length-=a;break}return this},f.prototype.duplicate=function(){let a=this._new();for(let b=0;b<this._bufs.length;b++)a.append(this._bufs[b]);return a},f.prototype.append=function(a){if(null==a)return this;if(a.buffer)this._appendBuffer(d.from(a.buffer,a.byteOffset,a.byteLength));else if(Array.isArray(a))for(let b=0;b<a.length;b++)this.append(a[b]);else if(this._isBufferList(a))for(let c=0;c<a._bufs.length;c++)this.append(a._bufs[c]);else"number"==typeof a&&(a=a.toString()),this._appendBuffer(d.from(a));return this},f.prototype._appendBuffer=function(a){this._bufs.push(a),this.length+=a.length},f.prototype.indexOf=function(a,b,c){if(void 0===c&&"string"==typeof b&&(c=b,b=void 0),"function"==typeof a||Array.isArray(a))throw TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof a?a=d.from([a]):"string"==typeof a?a=d.from(a,c):this._isBufferList(a)?a=a.slice():Array.isArray(a.buffer)?a=d.from(a.buffer,a.byteOffset,a.byteLength):d.isBuffer(a)||(a=d.from(a)),isNaN(b=Number(b||0))&&(b=0),b<0&&(b=this.length+b),b<0&&(b=0),0===a.length)return b>this.length?this.length:b;let e=this._offset(b),f=e[0],g=e[1];for(;f<this._bufs.length;f++){let h=this._bufs[f];for(;g<h.length;){let i=h.length-g;if(i>=a.length){let j=h.indexOf(a,g);if(-1!==j)return this._reverseOffset([f,j]);g=h.length-a.length+1}else{let k=this._reverseOffset([f,g]);if(this._match(k,a))return k;g++}}g=0}return -1},f.prototype._match=function(a,b){if(this.length-a<b.length)return!1;for(let c=0;c<b.length;c++)if(this.get(a+c)!==b[c])return!1;return!0},function(){let a={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let b in a)!function(b){null===a[b]?f.prototype[b]=function(a,c){return this.slice(a,a+c)[b](0,c)}:f.prototype[b]=function(c=0){return this.slice(c,c+a[b])[b](0)}}(b)}(),f.prototype._isBufferList=function(a){return a instanceof f||f.isBufferList(a)},f.isBufferList=function(a){return null!=a&&a[e]},a.exports=f},58478:function(a,b,c){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */ /* eslint-disable no-proto */ let d=c(79742),e=c(80645),f="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function g(a){if(a>2147483647)throw RangeError('The value "'+a+'" is invalid for option "size"');let b=new Uint8Array(a);return Object.setPrototypeOf(b,h.prototype),b}function h(a,b,c){if("number"==typeof a){if("string"==typeof b)throw TypeError('The "string" argument must be of type string. Received type number');return k(a)}return i(a,b,c)}function i(a,b,c){if("string"==typeof a)return l(a,b);if(ArrayBuffer.isView(a))return n(a);if(null==a)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(_(a,ArrayBuffer)||a&&_(a.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(_(a,SharedArrayBuffer)||a&&_(a.buffer,SharedArrayBuffer)))return o(a,b,c);if("number"==typeof a)throw TypeError('The "value" argument must not be of type number. Received type number');let d=a.valueOf&&a.valueOf();if(null!=d&&d!==a)return h.from(d,b,c);let e=p(a);if(e)return e;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof a[Symbol.toPrimitive])return h.from(a[Symbol.toPrimitive]("string"),b,c);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}function j(a){if("number"!=typeof a)throw TypeError('"size" argument must be of type number');if(a<0)throw RangeError('The value "'+a+'" is invalid for option "size"')}function k(a){return j(a),g(a<0?0:0|q(a))}function l(a,b){if(("string"!=typeof b||""===b)&&(b="utf8"),!h.isEncoding(b))throw TypeError("Unknown encoding: "+b);let c=0|r(a,b),d=g(c),e=d.write(a,b);return e!==c&&(d=d.slice(0,e)),d}function m(a){let b=a.length<0?0:0|q(a.length),c=g(b);for(let d=0;d<b;d+=1)c[d]=255&a[d];return c}function n(a){if(_(a,Uint8Array)){let b=new Uint8Array(a);return o(b.buffer,b.byteOffset,b.byteLength)}return m(a)}function o(a,b,c){if(b<0||a.byteLength<b)throw RangeError('"offset" is outside of buffer bounds');if(a.byteLength<b+(c||0))throw RangeError('"length" is outside of buffer bounds');let d;return Object.setPrototypeOf(d=void 0===b&& void 0===c?new Uint8Array(a):void 0===c?new Uint8Array(a,b):new Uint8Array(a,b,c),h.prototype),d}function p(a){if(h.isBuffer(a)){let b=0|q(a.length),c=g(b);return 0===c.length||a.copy(c,0,0,b),c}if(void 0!==a.length){var d;return"number"!=typeof a.length||(d=a.length,d!=d)?g(0):m(a)}if("Buffer"===a.type&&Array.isArray(a.data))return m(a.data)}function q(a){if(a>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|a}function r(a,b){if(h.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||_(a,ArrayBuffer))return a.byteLength;if("string"!=typeof a)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);let c=a.length,d=arguments.length>2&& !0===arguments[2];if(!d&&0===c)return 0;let e=!1;for(;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return W(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return Z(a).length;default:if(e)return d?-1:W(a).length;b=(""+b).toLowerCase(),e=!0}}function s(a,b,c){let d=!1;if((void 0===b||b<0)&&(b=0),b>this.length||((void 0===c||c>this.length)&&(c=this.length),c<=0||(c>>>=0)<=(b>>>=0)))return"";for(a||(a="utf8");;)switch(a){case"hex":return G(this,b,c);case"utf8":case"utf-8":return C(this,b,c);case"ascii":return E(this,b,c);case"latin1":case"binary":return F(this,b,c);case"base64":return B(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,b,c);default:if(d)throw TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function t(a,b,c){let d=a[b];a[b]=a[c],a[c]=d}function u(a,b,c,d,e){var f;if(0===a.length)return -1;if("string"==typeof c?(d=c,c=0):c>2147483647?c=2147483647:c< -2147483648&&(c=-2147483648),f=c=+c,f!=f&&(c=e?0:a.length-1),c<0&&(c=a.length+c),c>=a.length){if(e)return -1;c=a.length-1}else if(c<0){if(!e)return -1;c=0}if("string"==typeof b&&(b=h.from(b,d)),h.isBuffer(b))return 0===b.length?-1:v(a,b,c,d,e);if("number"==typeof b)return(b&=255,"function"==typeof Uint8Array.prototype.indexOf)?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):v(a,[b],c,d,e);throw TypeError("val must be string, number or Buffer")}function v(a,b,c,d,e){let f=1,g=a.length,h=b.length;if(void 0!==d&&("ucs2"===(d=String(d).toLowerCase())||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return -1;f=2,g/=2,h/=2,c/=2}function i(a,b){return 1===f?a[b]:a.readUInt16BE(b*f)}let j;if(e){let k=-1;for(j=c;j<g;j++)if(i(a,j)===i(b,-1===k?0:j-k)){if(-1===k&&(k=j),j-k+1===h)return k*f}else -1!==k&&(j-=j-k),k=-1}else for(c+h>g&&(c=g-h),j=c;j>=0;j--){let l=!0;for(let m=0;m<h;m++)if(i(a,j+m)!==i(b,m)){l=!1;break}if(l)return j}return -1}function w(a,b,c,d){c=Number(c)||0;let e=a.length-c;d?(d=Number(d))>e&&(d=e):d=e;let f=b.length;d>f/2&&(d=f/2);let g;for(g=0;g<d;++g){var h;let i=parseInt(b.substr(2*g,2),16);if(h=i,h!=h)break;a[c+g]=i}return g}function x(a,b,c,d){return $(W(b,a.length-c),a,c,d)}function y(a,b,c,d){return $(X(b),a,c,d)}function z(a,b,c,d){return $(Z(b),a,c,d)}function A(a,b,c,d){return $(Y(b,a.length-c),a,c,d)}function B(a,b,c){return 0===b&&c===a.length?d.fromByteArray(a):d.fromByteArray(a.slice(b,c))}function C(a,b,c){c=Math.min(a.length,c);let d=[],e=b;for(;e<c;){let f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(e+h<=c){let i,j,k,l;switch(h){case 1:f<128&&(g=f);break;case 2:(192&(i=a[e+1]))==128&&(l=(31&f)<<6|63&i)>127&&(g=l);break;case 3:i=a[e+1],j=a[e+2],(192&i)==128&&(192&j)==128&&(l=(15&f)<<12|(63&i)<<6|63&j)>2047&&(l<55296||l>57343)&&(g=l);break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],(192&i)==128&&(192&j)==128&&(192&k)==128&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k)>65535&&l<1114112&&(g=l)}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return D(d)}function D(a){let b=a.length;if(b<=4096)return String.fromCharCode.apply(String,a);let c="",d=0;for(;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=4096));return c}function E(a,b,c){let d="";c=Math.min(a.length,c);for(let e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}function F(a,b,c){let d="";c=Math.min(a.length,c);for(let e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}function G(a,b,c){let d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);let e="";for(let f=b;f<c;++f)e+=aa[a[f]];return e}function H(a,b,c){let d=a.slice(b,c),e="";for(let f=0;f<d.length-1;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function I(a,b,c){if(a%1!=0||a<0)throw RangeError("offset is not uint");if(a+b>c)throw RangeError("Trying to access beyond buffer length")}function J(a,b,c,d,e,f){if(!h.isBuffer(a))throw TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw RangeError('"value" argument is out of bounds');if(c+d>a.length)throw RangeError("Index out of range")}function K(a,b,c,d,e){S(b,d,e,a,c,7);let f=Number(b&BigInt(4294967295));a[c++]=f,f>>=8,a[c++]=f,f>>=8,a[c++]=f,f>>=8,a[c++]=f;let g=Number(b>>BigInt(32)&BigInt(4294967295));return a[c++]=g,g>>=8,a[c++]=g,g>>=8,a[c++]=g,g>>=8,a[c++]=g,c}function L(a,b,c,d,e){S(b,d,e,a,c,7);let f=Number(b&BigInt(4294967295));a[c+7]=f,f>>=8,a[c+6]=f,f>>=8,a[c+5]=f,f>>=8,a[c+4]=f;let g=Number(b>>BigInt(32)&BigInt(4294967295));return a[c+3]=g,g>>=8,a[c+2]=g,g>>=8,a[c+1]=g,g>>=8,a[c]=g,c+8}function M(a,b,c,d,e,f){if(c+d>a.length||c<0)throw RangeError("Index out of range")}function N(a,b,c,d,f){return b=+b,c>>>=0,f||M(a,b,c,4,34028234663852886e22,-34028234663852886e22),e.write(a,b,c,d,23,4),c+4}function O(a,b,c,d,f){return b=+b,c>>>=0,f||M(a,b,c,8,17976931348623157e292,-17976931348623157e292),e.write(a,b,c,d,52,8),c+8}b.Buffer=h,b.SlowBuffer=function(a){return+a!=a&&(a=0),h.alloc(+a)},b.INSPECT_MAX_BYTES=50,b.kMaxLength=2147483647,h.TYPED_ARRAY_SUPPORT=function(){try{let a=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(a,b),42===a.foo()}catch(c){return!1}}(),h.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(a,b,c){return i(a,b,c)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(a,b,c){var d,e,f;return d=a,e=b,f=c,(j(d),d<=0)?g(d):void 0!==e?"string"==typeof f?g(d).fill(e,f):g(d).fill(e):g(d)},h.allocUnsafe=function(a){return k(a)},h.allocUnsafeSlow=function(a){return k(a)},h.isBuffer=function(a){return null!=a&& !0===a._isBuffer&&a!==h.prototype},h.compare=function(a,b){if(_(a,Uint8Array)&&(a=h.from(a,a.offset,a.byteLength)),_(b,Uint8Array)&&(b=h.from(b,b.offset,b.byteLength)),!h.isBuffer(a)||!h.isBuffer(b))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===b)return 0;let c=a.length,d=b.length;for(let e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:d<c?1:0},h.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(a,b){if(!Array.isArray(a))throw TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return h.alloc(0);let c;if(void 0===b)for(c=0,b=0;c<a.length;++c)b+=a[c].length;let d=h.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){let f=a[c];if(_(f,Uint8Array))e+f.length>d.length?(h.isBuffer(f)||(f=h.from(f)),f.copy(d,e)):Uint8Array.prototype.set.call(d,f,e);else if(h.isBuffer(f))f.copy(d,e);else throw TypeError('"list" argument must be an Array of Buffers');e+=f.length}return d},h.byteLength=r,h.prototype._isBuffer=!0,h.prototype.swap16=function(){let a=this.length;if(a%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<a;b+=2)t(this,b,b+1);return this},h.prototype.swap32=function(){let a=this.length;if(a%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<a;b+=4)t(this,b,b+3),t(this,b+1,b+2);return this},h.prototype.swap64=function(){let a=this.length;if(a%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<a;b+=8)t(this,b,b+7),t(this,b+1,b+6),t(this,b+2,b+5),t(this,b+3,b+4);return this},h.prototype.toString=function(){let a=this.length;return 0===a?"":0===arguments.length?C(this,0,a):s.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(a){if(!h.isBuffer(a))throw TypeError("Argument must be a Buffer");return this===a||0===h.compare(this,a)},h.prototype.inspect=function(){let a="",c=b.INSPECT_MAX_BYTES;return a=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(a+=" ... "),"<Buffer "+a+">"},f&&(h.prototype[f]=h.prototype.inspect),h.prototype.compare=function(a,b,c,d,e){if(_(a,Uint8Array)&&(a=h.from(a,a.offset,a.byteLength)),!h.isBuffer(a))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),b<0||c>a.length||d<0||e>this.length)throw RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return -1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;let f=e-d,g=c-b,i=Math.min(f,g),j=this.slice(d,e),k=a.slice(b,c);for(let l=0;l<i;++l)if(j[l]!==k[l]){f=j[l],g=k[l];break}return f<g?-1:g<f?1:0},h.prototype.includes=function(a,b,c){return -1!==this.indexOf(a,b,c)},h.prototype.indexOf=function(a,b,c){return u(this,a,b,c,!0)},h.prototype.lastIndexOf=function(a,b,c){return u(this,a,b,c,!1)},h.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b>>>=0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let e=this.length-b;if((void 0===c||c>e)&&(c=e),a.length>0&&(c<0||b<0)||b>this.length)throw RangeError("Attempt to write outside buffer bounds");d||(d="utf8");let f=!1;for(;;)switch(d){case"hex":return w(this,a,b,c);case"utf8":case"utf-8":return x(this,a,b,c);case"ascii":case"latin1":case"binary":return y(this,a,b,c);case"base64":return z(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,a,b,c);default:if(f)throw TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),f=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},h.prototype.slice=function(a,b){let c=this.length;a=~~a,b=void 0===b?c:~~b,a<0?(a+=c)<0&&(a=0):a>c&&(a=c),b<0?(b+=c)<0&&(b=0):b>c&&(b=c),b<a&&(b=a);let d=this.subarray(a,b);return Object.setPrototypeOf(d,h.prototype),d},h.prototype.readUintLE=h.prototype.readUIntLE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);let d=this[a],e=1,f=0;for(;++f<b&&(e*=256);)d+=this[a+f]*e;return d},h.prototype.readUintBE=h.prototype.readUIntBE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);let d=this[a+ --b],e=1;for(;b>0&&(e*=256);)d+=this[a+ --b]*e;return d},h.prototype.readUint8=h.prototype.readUInt8=function(a,b){return a>>>=0,b||I(a,1,this.length),this[a]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(a,b){return a>>>=0,b||I(a,2,this.length),this[a]|this[a+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(a,b){return a>>>=0,b||I(a,2,this.length),this[a]<<8|this[a+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(a,b){return a>>>=0,b||I(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(a,b){return a>>>=0,b||I(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},h.prototype.readBigUInt64LE=ab(function(a){T(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b|| void 0===c)&&U(a,this.length-8);let d=b+256*this[++a]+65536*this[++a]+16777216*this[++a],e=this[++a]+256*this[++a]+65536*this[++a]+16777216*c;return BigInt(d)+(BigInt(e)<<BigInt(32))}),h.prototype.readBigUInt64BE=ab(function(a){T(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b|| void 0===c)&&U(a,this.length-8);let d=16777216*b+65536*this[++a]+256*this[++a]+this[++a],e=16777216*this[++a]+65536*this[++a]+256*this[++a]+c;return(BigInt(d)<<BigInt(32))+BigInt(e)}),h.prototype.readIntLE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);let d=this[a],e=1,f=0;for(;++f<b&&(e*=256);)d+=this[a+f]*e;return d>=(e*=128)&&(d-=Math.pow(2,8*b)),d},h.prototype.readIntBE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);let d=b,e=1,f=this[a+ --d];for(;d>0&&(e*=256);)f+=this[a+ --d]*e;return f>=(e*=128)&&(f-=Math.pow(2,8*b)),f},h.prototype.readInt8=function(a,b){return(a>>>=0,b||I(a,1,this.length),128&this[a])?-((255-this[a]+1)*1):this[a]},h.prototype.readInt16LE=function(a,b){a>>>=0,b||I(a,2,this.length);let c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},h.prototype.readInt16BE=function(a,b){a>>>=0,b||I(a,2,this.length);let c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},h.prototype.readInt32LE=function(a,b){return a>>>=0,b||I(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},h.prototype.readInt32BE=function(a,b){return a>>>=0,b||I(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},h.prototype.readBigInt64LE=ab(function(a){T(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b|| void 0===c)&&U(a,this.length-8);let d=this[a+4]+256*this[a+5]+65536*this[a+6]+(c<<24);return(BigInt(d)<<BigInt(32))+BigInt(b+256*this[++a]+65536*this[++a]+16777216*this[++a])}),h.prototype.readBigInt64BE=ab(function(a){T(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b|| void 0===c)&&U(a,this.length-8);let d=(b<<24)+65536*this[++a]+256*this[++a]+this[++a];return(BigInt(d)<<BigInt(32))+BigInt(16777216*this[++a]+65536*this[++a]+256*this[++a]+c)}),h.prototype.readFloatLE=function(a,b){return a>>>=0,b||I(a,4,this.length),e.read(this,a,!0,23,4)},h.prototype.readFloatBE=function(a,b){return a>>>=0,b||I(a,4,this.length),e.read(this,a,!1,23,4)},h.prototype.readDoubleLE=function(a,b){return a>>>=0,b||I(a,8,this.length),e.read(this,a,!0,52,8)},h.prototype.readDoubleBE=function(a,b){return a>>>=0,b||I(a,8,this.length),e.read(this,a,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(a,b,c,d){if(a=+a,b>>>=0,c>>>=0,!d){let e=Math.pow(2,8*c)-1;J(this,a,b,c,e,0)}let f=1,g=0;for(this[b]=255&a;++g<c&&(f*=256);)this[b+g]=a/f&255;return b+c},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(a,b,c,d){if(a=+a,b>>>=0,c>>>=0,!d){let e=Math.pow(2,8*c)-1;J(this,a,b,c,e,0)}let f=c-1,g=1;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=a/g&255;return b+c},h.prototype.writeUint8=h.prototype.writeUInt8=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,1,255,0),this[b]=255&a,b+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,65535,0),this[b]=255&a,this[b+1]=a>>>8,b+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,65535,0),this[b]=a>>>8,this[b+1]=255&a,b+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,4294967295,0),this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a,b+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,4294967295,0),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},h.prototype.writeBigUInt64LE=ab(function(a,b=0){return K(this,a,b,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=ab(function(a,b=0){return L(this,a,b,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b>>>=0,!d){let e=Math.pow(2,8*c-1);J(this,a,b,c,e-1,-e)}let f=0,g=1,h=0;for(this[b]=255&a;++f<c&&(g*=256);)a<0&&0===h&&0!==this[b+f-1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},h.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b>>>=0,!d){let e=Math.pow(2,8*c-1);J(this,a,b,c,e-1,-e)}let f=c-1,g=1,h=0;for(this[b+f]=255&a;--f>=0&&(g*=256);)a<0&&0===h&&0!==this[b+f+1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},h.prototype.writeInt8=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,1,127,-128),a<0&&(a=255+a+1),this[b]=255&a,b+1},h.prototype.writeInt16LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,32767,-32768),this[b]=255&a,this[b+1]=a>>>8,b+2},h.prototype.writeInt16BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,32767,-32768),this[b]=a>>>8,this[b+1]=255&a,b+2},h.prototype.writeInt32LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,2147483647,-2147483648),this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24,b+4},h.prototype.writeInt32BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},h.prototype.writeBigInt64LE=ab(function(a,b=0){return K(this,a,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=ab(function(a,b=0){return L(this,a,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeFloatLE=function(a,b,c){return N(this,a,b,!0,c)},h.prototype.writeFloatBE=function(a,b,c){return N(this,a,b,!1,c)},h.prototype.writeDoubleLE=function(a,b,c){return O(this,a,b,!0,c)},h.prototype.writeDoubleBE=function(a,b,c){return O(this,a,b,!1,c)},h.prototype.copy=function(a,b,c,d){if(!h.isBuffer(a))throw TypeError("argument should be a Buffer");if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c||0===a.length||0===this.length)return 0;if(b<0)throw RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw RangeError("Index out of range");if(d<0)throw RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);let e=d-c;return this===a&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(b,c,d):Uint8Array.prototype.set.call(a,this.subarray(c,d),b),e},h.prototype.fill=function(a,b,c,d){if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),void 0!==d&&"string"!=typeof d)throw TypeError("encoding must be a string");if("string"==typeof d&&!h.isEncoding(d))throw TypeError("Unknown encoding: "+d);if(1===a.length){let e=a.charCodeAt(0);("utf8"===d&&e<128||"latin1"===d)&&(a=e)}}else"number"==typeof a?a&=255:"boolean"==typeof a&&(a=Number(a));if(b<0||this.length<b||this.length<c)throw RangeError("Out of range index");if(c<=b)return this;b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0);let f;if("number"==typeof a)for(f=b;f<c;++f)this[f]=a;else{let g=h.isBuffer(a)?a:h.from(a,d),i=g.length;if(0===i)throw TypeError('The value "'+a+'" is invalid for argument "value"');for(f=0;f<c-b;++f)this[f+b]=g[f%i]}return this};let P={};function Q(a,b,c){P[a]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:b.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${a}]`,this.stack,delete this.name}get code(){return a}set code(a){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:a,writable:!0})}toString(){return`${this.name} [${a}]: ${this.message}`}}}function R(a){let b="",c=a.length,d="-"===a[0]?1:0;for(;c>=d+4;c-=3)b=`_${a.slice(c-3,c)}${b}`;return`${a.slice(0,c)}${b}`}function S(a,b,c,d,e,f){var g,h,i;if(a>c||a<b){let j="bigint"==typeof b?"n":"",k;throw k=f>3?0===b||b===BigInt(0)?`>= 0${j} and < 2${j} ** ${(f+1)*8}${j}`:`>= -(2${j} ** ${(f+1)*8-1}${j}) and < 2 ** ${(f+1)*8-1}${j}`:`>= ${b}${j} and <= ${c}${j}`,new P.ERR_OUT_OF_RANGE("value",k,a)}g=d,h=e,i=f,T(h,"offset"),(void 0===g[h]|| void 0===g[h+i])&&U(h,g.length-(i+1))}function T(a,b){if("number"!=typeof a)throw new P.ERR_INVALID_ARG_TYPE(b,"number",a)}function U(a,b,c){if(Math.floor(a)!==a)throw T(a,c),new P.ERR_OUT_OF_RANGE(c||"offset","an integer",a);if(b<0)throw new P.ERR_BUFFER_OUT_OF_BOUNDS;throw new P.ERR_OUT_OF_RANGE(c||"offset",`>= ${c?1:0} and <= ${b}`,a)}Q("ERR_BUFFER_OUT_OF_BOUNDS",function(a){return a?`${a} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Q("ERR_INVALID_ARG_TYPE",function(a,b){return`The "${a}" argument must be of type number. Received type ${typeof b}`},TypeError),Q("ERR_OUT_OF_RANGE",function(a,b,c){let d=`The value of "${a}" is out of range.`,e=c;return Number.isInteger(c)&&Math.abs(c)>4294967296?e=R(String(c)):"bigint"==typeof c&&(e=String(c),(c>BigInt(2)**BigInt(32)||c< -(BigInt(2)**BigInt(32)))&&(e=R(e)),e+="n"),d+=` It must be ${b}. Received ${e}`},RangeError);let V=/[^+/0-9A-Za-z-_]/g;function W(a,b){b=b||1/0;let c,d=a.length,e=null,f=[];for(let g=0;g<d;++g){if((c=a.charCodeAt(g))>55295&&c<57344){if(!e){if(c>56319||g+1===d){(b-=3)> -1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)> -1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)> -1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else if(c<1114112){if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}else throw Error("Invalid code point")}return f}function X(a){let b=[];for(let c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function Y(a,b){let c,d,e,f=[];for(let g=0;g<a.length&&!((b-=2)<0);++g)d=(c=a.charCodeAt(g))>>8,e=c%256,f.push(e),f.push(d);return f}function Z(a){return d.toByteArray(function(a){if((a=(a=a.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;a.length%4!=0;)a+="=";return a}(a))}function $(a,b,c,d){let e;for(e=0;e<d&&!(e+c>=b.length)&&!(e>=a.length);++e)b[e+c]=a[e];return e}function _(a,b){return a instanceof b||null!=a&&null!=a.constructor&&null!=a.constructor.name&&a.constructor.name===b.name}let aa=function(){let a="0123456789abcdef",b=Array(256);for(let c=0;c<16;++c){let d=16*c;for(let e=0;e<16;++e)b[d+e]=a[c]+a[e]}return b}();function ab(a){return"undefined"==typeof BigInt?ac:a}function ac(){throw Error("BigInt not supported")}},76701:function(a,b,c){let d=c(91607);a.exports=a=>{let b;"function"==typeof(a=a||{})?(b=a,a={}):b=a.onEnd;let c=new d,e,f,g,h=()=>{if(!c.isEmpty()){if(a.writev){let b,d=[];for(;!c.isEmpty();){if((b=c.shift()).error)throw b.error;d.push(b.value)}return{done:b.done,value:d}}let h=c.shift();if(h.error)throw h.error;return h}return g?{done:!0}:new Promise((b,c)=>{f=d=>(f=null,d.error?c(d.error):a.writev&&!d.done?b({done:d.done,value:[d.value]}):b(d),e)})},i=a=>f?f(a):(c.push(a),e),j=a=>(c=new d,f)?f({error:a}):(c.push({error:a}),e),k=a=>g?e:i({done:!1,value:a}),l=a=>g?e:(g=!0,a?j(a):i({done:!0})),m=()=>(c=new d,l(),{done:!0}),n=a=>(l(a),{done:!0});if(e={[Symbol.asyncIterator](){return this},next:h,return:m,throw:n,push:k,end:l},!b)return e;let o=e;return e={[Symbol.asyncIterator](){return this},next(){return o.next()},throw(a){return o.throw(a),b&&(b(a),b=null),{done:!0}},return(){return o.return(),b&&(b(),b=null),{done:!0}},push:k,end(a){return o.end(a),b&&(b(a),b=null),e}}}},79830:function(a){"use strict";/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */ a.exports=function(a,b){return"string"==typeof a?g(a):"number"==typeof a?f(a,b):null},a.exports.format=f,a.exports.parse=g;var b=/\B(?=(\d{3})+(?!\d))/g,c=/(?:\.0*|(\.[^0]+)0+)$/,d={b:1,kb:1024,mb:1048576,gb:1073741824,tb:1099511627776,pb:0x4000000000000},e=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function f(a,e){if(!Number.isFinite(a))return null;var f=Math.abs(a),g=e&&e.thousandsSeparator||"",h=e&&e.unitSeparator||"",i=e&& void 0!==e.decimalPlaces?e.decimalPlaces:2,j=Boolean(e&&e.fixedDecimals),k=e&&e.unit||"";k&&d[k.toLowerCase()]||(k=f>=d.pb?"PB":f>=d.tb?"TB":f>=d.gb?"GB":f>=d.mb?"MB":f>=d.kb?"KB":"B");var l=a/d[k.toLowerCase()],m=l.toFixed(i);return j||(m=m.replace(c,"$1")),g&&(m=m.split(".").map(function(a,c){return 0===c?a.replace(b,g):a}).join(".")),m+h+k}function g(a){if("number"==typeof a&&!isNaN(a))return a;if("string"!=typeof a)return null;var b,c=e.exec(a),f="b";return(c?(b=parseFloat(c[1]),f=c[4].toLowerCase()):(b=parseInt(a,10),f="b"),isNaN(b))?null:Math.floor(d[f]*b)}},16957:function(a,b,c){"use strict";var d=c(90886);b.fromCallback=function(a,b){if(void 0===a){var c=new Promise(function(b,c){a=function(a,d){a?c(a):b(d)}});a[void 0!==b?b:"promise"]=c}else if("function"!=typeof a)throw TypeError("Callback must be a function");return a},b.fromPromise=function(a,b){if(void 0===b)return a;a.then(function(a){d(()=>b(null,a))}).catch(function(a){d(()=>b(a))})}},90886:function(a){a.exports="function"==typeof queueMicrotask?queueMicrotask:a=>Promise.resolve().then(a)},94184:function(a,b){var c,d; /*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/ !function(){"use strict";var e={}.hasOwnProperty;function f(){for(var a=[],b=0;b<arguments.length;b++){var c=arguments[b];if(c){var d=typeof c;if("string"===d||"number"===d)a.push(c);else if(Array.isArray(c)){if(c.length){var g=f.apply(null,c);g&&a.push(g)}}else if("object"===d){if(c.toString===Object.prototype.toString)for(var h in c)e.call(c,h)&&c[h]&&a.push(h);else a.push(c.toString())}}}return a.join(" ")}a.exports?(f.default=f,a.exports=f):void 0!==(d=(function(){return f}).apply(b,c=[]))&&(a.exports=d)}()},74664:function(a){let b=(...a)=>{let b;for(;a.length;)b=a.shift()(b);return b},c=a=>a&&("function"==typeof a[Symbol.asyncIterator]||"function"==typeof a[Symbol.iterator]||"function"==typeof a.next),d=a=>a&&"function"==typeof a.sink&&c(a.source),e=a=>b=>(a.sink(b),a.source),f=(...a)=>{if(d(a[0])){let f=a[0];a[0]=()=>f.source}else if(c(a[0])){let g=a[0];a[0]=()=>g}if(a.length>1&&d(a[a.length-1])&&(a[a.length-1]=a[a.length-1].sink),a.length>2)for(let h=1;h<a.length-1;h++)d(a[h])&&(a[h]=e(a[h]));return b(...a)};a.exports=f,a.exports.pipe=f,a.exports.rawPipe=b,a.exports.isIterable=c,a.exports.isDuplex=d},77416:function(a,b,c){let d=c(91607);a.exports=a=>{let b;"function"==typeof(a=a||{})?(b=a,a={}):b=a.onEnd;let c=new d,e,f,g,h=()=>{if(!c.isEmpty()){if(a.writev){let b,d=[];for(;!c.isEmpty();){if((b=c.shift()).error)throw b.error;d.push(b.value)}return{done:b.done,value:d}}let h=c.shift();if(h.error)throw h.error;return h}return g?{done:!0}:new Promise((b,c)=>{f=d=>(f=null,d.error?c(d.error):a.writev&&!d.done?b({done:d.done,value:[d.value]}):b(d),e)})},i=a=>f?f(a):(c.push(a),e),j=a=>(c=new d,f)?f({error:a}):(c.push({error:a}),e),k=a=>g?e:i({done:!1,value:a}),l=a=>g?e:(g=!0,a?j(a):i({done:!0})),m=()=>(c=new d,l(),{done:!0}),n=a=>(l(a),{done:!0});if(e={[Symbol.asyncIterator](){return this},next:h,return:m,throw:n,push:k,end:l},!b)return e;let o=e;return e={[Symbol.asyncIterator](){return this},next(){return o.next()},throw(a){return o.throw(a),b&&(b(a),b=null),{done:!0}},return(){return o.return(),b&&(b(),b=null),{done:!0}},push:k,end(a){return o.end(a),b&&(b(a),b=null),e}}}},86559:function(a,b,c){"use strict";c.d(b,{Z:function(){return q}});var d={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},e=function(a,b,c){var e,f=d[a];return(e="string"==typeof f?f:1===b?f.one:f.other.replace("{{count}}",b.toString()),null!=c&&c.addSuffix)?c.comparison&&c.comparison>0?"in "+e:e+" ago":e};function f(a){return function(){var b=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{},c=b.width?String(b.width):a.defaultWidth,d=a.formats[c]||a.formats[a.defaultWidth];return d}}var g={date:f({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:f({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:f({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},h={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},i=function(a,b,c,d){return h[a]};function j(a){return function(b,c){if("formatting"===(null!=c&&c.context?String(c.context):"standalone")&&a.formattingValues){var d,e=a.defaultFormattingWidth||a.defaultWidth,f=null!=c&&c.width?String(c.width):e;d=a.formattingValues[f]||a.formattingValues[e]}else{var g=a.defaultWidth,h=null!=c&&c.width?String(c.width):a.defaultWidth;d=a.values[h]||a.values[g]}return d[a.argumentCallback?a.argumentCallback(b):b]}}var k={ordinalNumber:function(a,b){var c=Number(a),d=c%100;if(d>20||d<10)switch(d%10){case 1:return c+"st";case 2:return c+"nd";case 3:return c+"rd"}return c+"th"},era:j({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:j({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(a){return a-1}}),month:j({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:j({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:j({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function l(a){return function(b){var c,d=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},e=d.width,f=e&&a.matchPatterns[e]||a.matchPatterns[a.defaultMatchWidth],g=b.match(f);if(!g)return null;var h=g[0],i=e&&a.parsePatterns[e]||a.parsePatterns[a.defaultParseWidth],j=Array.isArray(i)?n(i,function(a){return a.test(h)}):m(i,function(a){return a.test(h)});return c=a.valueCallback?a.valueCallback(j):j,{value:c=d.valueCallback?d.valueCallback(c):c,rest:b.slice(h.length)}}}function m(a,b){for(var c in a)if(a.hasOwnProperty(c)&&b(a[c]))return c}function n(a,b){for(var c=0;c<a.length;c++)if(b(a[c]))return c}var o,p={ordinalNumber:(o={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(a){return parseInt(a,10)}},function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},c=a.match(o.matchPattern);if(!c)return null;var d=c[0],e=a.match(o.parsePattern);if(!e)return null;var f=o.valueCallback?o.valueCallback(e[0]):e[0];return{value:f=b.valueCallback?b.valueCallback(f):f,rest:a.slice(d.length)}}),era:l({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:l({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(a){return a+1}}),month:l({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:l({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:l({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},q={code:"en-US",formatDistance:e,formatLong:g,formatRelative:i,localize:k,match:p,options:{weekStartsOn:0,firstWeekContainsDate:1}}},84314:function(a,b,c){"use strict";c.d(b,{j:function(){return e}});var d={};function e(){return d}},97621:function(a,b){"use strict";var c=function(a,b){switch(a){case"P":return b.date({width:"short"});case"PP":return b.date({width:"medium"});case"PPP":return b.date({width:"long"});default:return b.date({width:"full"})}},d=function(a,b){switch(a){case"p":return b.time({width:"short"});case"pp":return b.time({width:"medium"});case"ppp":return b.time({width:"long"});default:return b.time({width:"full"})}},e=function(a,b){var e,f=a.match(/(P+)(p+)?/)||[],g=f[1],h=f[2];if(!h)return c(a,b);switch(g){case"P":e=b.dateTime({width:"short"});break;case"PP":e=b.dateTime({width:"medium"});break;case"PPP":e=b.dateTime({width:"long"});break;default:e=b.dateTime({width:"full"})}return e.replace("{{date}}",c(g,b)).replace("{{time}}",d(h,b))};b.Z={p:d,P:e}},24262:function(a,b,c){"use strict";function d(a){var b=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return b.setUTCFullYear(a.getFullYear()),a.getTime()-b.getTime()}c.d(b,{Z:function(){return d}})},7032:function(a,b,c){"use strict";c.d(b,{Z:function(){return g}});var d=c(19013),e=c(13882),f=c(66979);function g(a){(0,e.Z)(1,arguments);var b=(0,d.default)(a),c=b.getUTCFullYear(),g=new Date(0);g.setUTCFullYear(c+1,0,4),g.setUTCHours(0,0,0,0);var h=(0,f.Z)(g),i=new Date(0);i.setUTCFullYear(c,0,4),i.setUTCHours(0,0,0,0);var j=(0,f.Z)(i);return b.getTime()>=h.getTime()?c+1:b.getTime()>=j.getTime()?c:c-1}},33276:function(a,b,c){"use strict";c.d(b,{Z:function(){return h}});var d=c(19013),e=c(66979),f=c(7032),g=c(13882);function h(a){(0,g.Z)(1,arguments);var b=(0,d.default)(a);return Math.round(((0,e.Z)(b).getTime()-(function(a){(0,g.Z)(1,arguments);var b=(0,f.Z)(a),c=new Date(0);return c.setUTCFullYear(b,0,4),c.setUTCHours(0,0,0,0),(0,e.Z)(c)})(b).getTime())/6048e5)+1}},7651:function(a,b,c){"use strict";c.d(b,{Z:function(){return i}});var d=c(19013),e=c(13882),f=c(59025),g=c(83946),h=c(84314);function i(a,b){(0,e.Z)(1,arguments);var c,i,j,k,l,m,n,o,p=(0,d.default)(a),q=p.getUTCFullYear(),r=(0,h.j)(),s=(0,g.Z)(null!==(c=null!==(i=null!==(j=null!==(k=null==b?void 0:b.firstWeekContainsDate)&& void 0!==k?k:null==b?void 0:null===(l=b.locale)|| void 0===l?void 0:null===(m=l.options)|| void 0===m?void 0:m.firstWeekContainsDate)&& void 0!==j?j:r.firstWeekContainsDate)&& void 0!==i?i:null===(n=r.locale)|| void 0===n?void 0:null===(o=n.options)|| void 0===o?void 0:o.firstWeekContainsDate)&& void 0!==c?c:1);if(!(s>=1&&s<=7))throw RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var t=new Date(0);t.setUTCFullYear(q+1,0,s),t.setUTCHours(0,0,0,0);var u=(0,f.Z)(t,b),v=new Date(0);v.setUTCFullYear(q,0,s),v.setUTCHours(0,0,0,0);var w=(0,f.Z)(v,b);return p.getTime()>=u.getTime()?q+1:p.getTime()>=w.getTime()?q:q-1}},5230:function(a,b,c){"use strict";c.d(b,{Z:function(){return j}});var d=c(19013),e=c(59025),f=c(7651),g=c(13882),h=c(83946),i=c(84314);function j(a,b){(0,g.Z)(1,arguments);var c=(0,d.default)(a);return Math.round(((0,e.Z)(c,b).getTime()-(function(a,b){(0,g.Z)(1,arguments);var c,d,j,k,l,m,n,o,p=(0,i.j)(),q=(0,h.Z)(null!==(c=null!==(d=null!==(j=null!==(k=null==b?void 0:b.firstWeekContainsDate)&& void 0!==k?k:null==b?void 0:null===(l=b.locale)|| void 0===l?void 0:null===(m=l.options)|| void 0===m?void 0:m.firstWeekContainsDate)&& void 0!==j?j:p.firstWeekContainsDate)&& void 0!==d?d:null===(n=p.locale)|| void 0===n?void 0:null===(o=n.options)|| void 0===o?void 0:o.firstWeekContainsDate)&& void 0!==c?c:1),r=(0,f.Z)(a,b),s=new Date(0);return s.setUTCFullYear(r,0,q),s.setUTCHours(0,0,0,0),(0,e.Z)(s,b)})(c,b).getTime())/6048e5)+1}},5267:function(a,b,c){"use strict";c.d(b,{Do:function(){return g},Iu:function(){return f},qp:function(){return h}});var d=["D","DD"],e=["YY","YYYY"];function f(a){return -1!==d.indexOf(a)}function g(a){return -1!==e.indexOf(a)}function h(a,b,c){if("YYYY"===a)throw RangeError("Use `yyyy` instead of `YYYY` (in `".concat(b,"`) for formatting years to the input `").concat(c,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===a)throw RangeError("Use `yy` instead of `YY` (in `".concat(b,"`) for formatting years to the input `").concat(c,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===a)throw RangeError("Use `d` instead of `D` (in `".concat(b,"`) for formatting days of the month to the input `").concat(c,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===a)throw RangeError("Use `dd` instead of `DD` (in `".concat(b,"`) for formatting days of the month to the input `").concat(c,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}},13882:function(a,b,c){"use strict";function d(a,b){if(b.length<a)throw TypeError(a+" argument"+(a>1?"s":"")+" required, but only "+b.length+" present")}c.d(b,{Z:function(){return d}})},66979:function(a,b,c){"use strict";c.d(b,{Z:function(){return f}});var d=c(19013),e=c(13882);function f(a){(0,e.Z)(1,arguments);var b=(0,d.default)(a),c=b.getUTCDay();return b.setUTCDate(b.getUTCDate()-((c<1?7:0)+c-1)),b.setUTCHours(0,0,0,0),b}},59025:function(a,b,c){"use strict";c.d(b,{Z:function(){return h}});var d=c(19013),e=c(13882),f=c(83946),g=c(84314);function h(a,b){(0,e.Z)(1,arguments);var c,h,i,j,k,l,m,n,o=(0,g.j)(),p=(0,f.Z)(null!==(c=null!==(h=null!==(i=null!==(j=null==b?void 0:b.weekStartsOn)&& void 0!==j?j:null==b?void 0:null===(k=b.locale)|| void 0===k?void 0:null===(l=k.options)|| void 0===l?void 0:l.weekStartsOn)&& void 0!==i?i:o.weekStartsOn)&& void 0!==h?h:null===(m=o.locale)|| void 0===m?void 0:null===(n=m.options)|| void 0===n?void 0:n.weekStartsOn)&& void 0!==c?c:0);if(!(p>=0&&p<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");var q=(0,d.default)(a),r=q.getUTCDay();return q.setUTCDate(q.getUTCDate()-((r<p?7:0)+r-p)),q.setUTCHours(0,0,0,0),q}},83946:function(a,b,c){"use strict";function d(a){if(null===a|| !0===a|| !1===a)return NaN;var b=Number(a);return isNaN(b)?b:b<0?Math.ceil(b):Math.floor(b)}c.d(b,{Z:function(){return d}})},77349:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return g}});var d=c(83946),e=c(19013),f=c(13882);function g(a,b){(0,f.Z)(2,arguments);var c=(0,e.default)(a),g=(0,d.Z)(b);return isNaN(g)?new Date(NaN):(g&&c.setDate(c.getDate()+g),c)}},78343:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return g}});var d=c(83946),e=c(51820),f=c(13882);function g(a,b){(0,f.Z)(2,arguments);var c=(0,d.Z)(b);return(0,e.Z)(a,36e5*c)}},51820:function(a,b,c){"use strict";c.d(b,{Z:function(){return g}});var d=c(83946),e=c(19013),f=c(13882);function g(a,b){(0,f.Z)(2,arguments);var c=(0,e.default)(a).getTime(),g=(0,d.Z)(b);return new Date(c+g)}},58545:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return g}});var d=c(83946),e=c(51820),f=c(13882);function g(a,b){(0,f.Z)(2,arguments);var c=(0,d.Z)(b);return(0,e.Z)(a,6e4*c)}},11640:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return g}});var d=c(83946),e=c(19013),f=c(13882);function g(a,b){(0,f.Z)(2,arguments);var c=(0,e.default)(a),g=(0,d.Z)(b);if(isNaN(g))return new Date(NaN);if(!g)return c;var h=c.getDate(),i=new Date(c.getTime());return(i.setMonth(c.getMonth()+g+1,0),h>=i.getDate())?i:(c.setFullYear(i.getFullYear(),i.getMonth(),h),c)}},63500:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return g}});var d=c(83946),e=c(77349),f=c(13882);function g(a,b){(0,f.Z)(2,arguments);var c=(0,d.Z)(b);return(0,e.default)(a,7*c)}},21593:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return g}});var d=c(83946),e=c(11640),f=c(13882);function g(a,b){(0,f.Z)(2,arguments);var c=(0,d.Z)(b);return(0,e.default)(a,12*c)}},36948:function(a,b,c){"use strict";c.d(b,{qk:function(){return f},vh:function(){return e},yJ:function(){return d}});var d=6e4,e=36e5,f=1e3},92300:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return g}});var d=c(24262),e=c(69119),f=c(13882);function g(a,b){(0,f.Z)(2,arguments);var c=(0,e.default)(a),g=(0,e.default)(b),h=c.getTime()-(0,d.Z)(c),i=g.getTime()-(0,d.Z)(g);return Math.round((h-i)/864e5)}},84129:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a,b){(0,e.Z)(2,arguments);var c=(0,d.default)(a),f=(0,d.default)(b),g=c.getFullYear()-f.getFullYear(),h=c.getMonth()-f.getMonth();return 12*g+h}},52724:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return g}});var d=c(584),e=c(24262),f=c(13882);function g(a,b,c){(0,f.Z)(2,arguments);var g=(0,d.default)(a,c),h=(0,d.default)(b,c),i=g.getTime()-(0,e.Z)(g),j=h.getTime()-(0,e.Z)(h);return Math.round((i-j)/6048e5)}},91857:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a,b){(0,e.Z)(2,arguments);var c=(0,d.default)(a),f=(0,d.default)(b);return c.getFullYear()-f.getFullYear()}},83894:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a){(0,e.Z)(1,arguments);var b=(0,d.default)(a);return b.setHours(23,59,59,999),b}},4135:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a){(0,e.Z)(1,arguments);var b=(0,d.default)(a),c=b.getMonth();return b.setFullYear(b.getFullYear(),c+1,0),b.setHours(23,59,59,999),b}},67090:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return h}});var d=c(84314),e=c(19013),f=c(83946),g=c(13882);function h(a,b){(0,g.Z)(1,arguments);var c,h,i,j,k,l,m,n,o=(0,d.j)(),p=(0,f.Z)(null!==(c=null!==(h=null!==(i=null!==(j=null==b?void 0:b.weekStartsOn)&& void 0!==j?j:null==b?void 0:null===(k=b.locale)|| void 0===k?void 0:null===(l=k.options)|| void 0===l?void 0:l.weekStartsOn)&& void 0!==i?i:o.weekStartsOn)&& void 0!==h?h:null===(m=o.locale)|| void 0===m?void 0:null===(n=m.options)|| void 0===n?void 0:n.weekStartsOn)&& void 0!==c?c:0);if(!(p>=0&&p<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");var q=(0,e.default)(a),r=q.getDay();return q.setDate(q.getDate()+((r<p?-7:0)+6-(r-p))),q.setHours(23,59,59,999),q}},42298:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return D}});var d=c(12274),e=c(91218),f=c(19013),g=c(13882),h=c(33276),i=c(7032),j=c(5230),k=c(7651);function l(a,b){for(var c=Math.abs(a).toString();c.length<b;)c="0"+c;return(a<0?"-":"")+c}var m={y:function(a,b){var c=a.getUTCFullYear(),d=c>0?c:1-c;return l("yy"===b?d%100:d,b.length)},M:function(a,b){var c=a.getUTCMonth();return"M"===b?String(c+1):l(c+1,2)},d:function(a,b){return l(a.getUTCDate(),b.length)},a:function(a,b){var c=a.getUTCHours()/12>=1?"pm":"am";switch(b){case"a":case"aa":return c.toUpperCase();case"aaa":return c;case"aaaaa":return c[0];default:return"am"===c?"a.m.":"p.m."}},h:function(a,b){return l(a.getUTCHours()%12||12,b.length)},H:function(a,b){return l(a.getUTCHours(),b.length)},m:function(a,b){return l(a.getUTCMinutes(),b.length)},s:function(a,b){return l(a.getUTCSeconds(),b.length)},S:function(a,b){var c,d=b.length;return l(Math.floor(a.getUTCMilliseconds()*Math.pow(10,d-3)),b.length)}},n={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"};function o(a,b){var c=a>0?"-":"+",d=Math.abs(a),e=Math.floor(d/60),f=d%60;return 0===f?c+String(e):c+String(e)+(b||"")+l(f,2)}function p(a,b){return a%60==0?(a>0?"-":"+")+l(Math.abs(a)/60,2):q(a,b)}function q(a,b){var c=Math.abs(a),d=l(Math.floor(c/60),2),e=l(c%60,2);return(a>0?"-":"+")+d+(b||"")+e}var r={G:function(a,b,c){var d=a.getUTCFullYear()>0?1:0;switch(b){case"G":case"GG":case"GGG":return c.era(d,{width:"abbreviated"});case"GGGGG":return c.era(d,{width:"narrow"});default:return c.era(d,{width:"wide"})}},y:function(a,b,c){if("yo"===b){var d=a.getUTCFullYear(),e=d>0?d:1-d;return c.ordinalNumber(e,{unit:"year"})}return m.y(a,b)},Y:function(a,b,c,d){var e=(0,k.Z)(a,d),f=e>0?e:1-e;return"YY"===b?l(f%100,2):"Yo"===b?c.ordinalNumber(f,{unit:"year"}):l(f,b.length)},R:function(a,b){var c=(0,i.Z)(a);return l(c,b.length)},u:function(a,b){return l(a.getUTCFullYear(),b.length)},Q:function(a,b,c){var d=Math.ceil((a.getUTCMonth()+1)/3);switch(b){case"Q":return String(d);case"QQ":return l(d,2);case"Qo":return c.ordinalNumber(d,{unit:"quarter"});case"QQQ":return c.quarter(d,{width:"abbreviated",context:"formatting"});case"QQQQQ":return c.quarter(d,{width:"narrow",context:"formatting"});default:return c.quarter(d,{width:"wide",context:"formatting"})}},q:function(a,b,c){var d=Math.ceil((a.getUTCMonth()+1)/3);switch(b){case"q":return String(d);case"qq":return l(d,2);case"qo":return c.ordinalNumber(d,{unit:"quarter"});case"qqq":return c.quarter(d,{width:"abbreviated",context:"standalone"});case"qqqqq":return c.quarter(d,{width:"narrow",context:"standalone"});default:return c.quarter(d,{width:"wide",context:"standalone"})}},M:function(a,b,c){var d=a.getUTCMonth();switch(b){case"M":case"MM":return m.M(a,b);case"Mo":return c.ordinalNumber(d+1,{unit:"month"});case"MMM":return c.month(d,{width:"abbreviated",context:"formatting"});case"MMMMM":return c.month(d,{width:"narrow",context:"formatting"});default:return c.month(d,{width:"wide",context:"formatting"})}},L:function(a,b,c){var d=a.getUTCMonth();switch(b){case"L":return String(d+1);case"LL":return l(d+1,2);case"Lo":return c.ordinalNumber(d+1,{unit:"month"});case"LLL":return c.month(d,{width:"abbreviated",context:"standalone"});case"LLLLL":return c.month(d,{width:"narrow",context:"standalone"});default:return c.month(d,{width:"wide",context:"standalone"})}},w:function(a,b,c,d){var e=(0,j.Z)(a,d);return"wo"===b?c.ordinalNumber(e,{unit:"week"}):l(e,b.length)},I:function(a,b,c){var d=(0,h.Z)(a);return"Io"===b?c.ordinalNumber(d,{unit:"week"}):l(d,b.length)},d:function(a,b,c){return"do"===b?c.ordinalNumber(a.getUTCDate(),{unit:"date"}):m.d(a,b)},D:function(a,b,c){var d=function(a){(0,g.Z)(1,arguments);var b=(0,f.default)(a),c=b.getTime();b.setUTCMonth(0,1),b.setUTCHours(0,0,0,0);var d=b.getTime();return Math.floor((c-d)/864e5)+1}(a);return"Do"===b?c.ordinalNumber(d,{unit:"dayOfYear"}):l(d,b.length)},E:function(a,b,c){var d=a.getUTCDay();switch(b){case"E":case"EE":case"EEE":return c.day(d,{width:"abbreviated",context:"formatting"});case"EEEEE":return c.day(d,{width:"narrow",context:"formatting"});case"EEEEEE":return c.day(d,{width:"short",context:"formatting"});default:return c.day(d,{width:"wide",context:"formatting"})}},e:function(a,b,c,d){var e=a.getUTCDay(),f=(e-d.weekStartsOn+8)%7||7;switch(b){case"e":return String(f);case"ee":return l(f,2);case"eo":return c.ordinalNumber(f,{unit:"day"});case"eee":return c.day(e,{width:"abbreviated",context:"formatting"});case"eeeee":return c.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return c.day(e,{width:"short",context:"formatting"});default:return c.day(e,{width:"wide",context:"formatting"})}},c:function(a,b,c,d){var e=a.getUTCDay(),f=(e-d.weekStartsOn+8)%7||7;switch(b){case"c":return String(f);case"cc":return l(f,b.length);case"co":return c.ordinalNumber(f,{unit:"day"});case"ccc":return c.day(e,{width:"abbreviated",context:"standalone"});case"ccccc":return c.day(e,{width:"narrow",context:"standalone"});case"cccccc":return c.day(e,{width:"short",context:"standalone"});default:return c.day(e,{width:"wide",context:"standalone"})}},i:function(a,b,c){var d=a.getUTCDay(),e=0===d?7:d;switch(b){case"i":return String(e);case"ii":return l(e,b.length);case"io":return c.ordinalNumber(e,{unit:"day"});case"iii":return c.day(d,{width:"abbreviated",context:"formatting"});case"iiiii":return c.day(d,{width:"narrow",context:"formatting"});case"iiiiii":return c.day(d,{width:"short",context:"formatting"});default:return c.day(d,{width:"wide",context:"formatting"})}},a:function(a,b,c){var d=a.getUTCHours()/12>=1?"pm":"am";switch(b){case"a":case"aa":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"aaa":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return c.dayPeriod(d,{width:"narrow",context:"formatting"});default:return c.dayPeriod(d,{width:"wide",context:"formatting"})}},b:function(a,b,c){var d,e=a.getUTCHours();switch(d=12===e?n.noon:0===e?n.midnight:e/12>=1?"pm":"am",b){case"b":case"bb":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"bbb":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return c.dayPeriod(d,{width:"narrow",context:"formatting"});default:return c.dayPeriod(d,{width:"wide",context:"formatting"})}},B:function(a,b,c){var d,e=a.getUTCHours();switch(d=e>=17?n.evening:e>=12?n.afternoon:e>=4?n.morning:n.night,b){case"B":case"BB":case"BBB":return c.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"BBBBB":return c.dayPeriod(d,{width:"narrow",context:"formatting"});default:return c.dayPeriod(d,{width:"wide",context:"formatting"})}},h:function(a,b,c){if("ho"===b){var d=a.getUTCHours()%12;return 0===d&&(d=12),c.ordinalNumber(d,{unit:"hour"})}return m.h(a,b)},H:function(a,b,c){return"Ho"===b?c.ordinalNumber(a.getUTCHours(),{unit:"hour"}):m.H(a,b)},K:function(a,b,c){var d=a.getUTCHours()%12;return"Ko"===b?c.ordinalNumber(d,{unit:"hour"}):l(d,b.length)},k:function(a,b,c){var d=a.getUTCHours();return(0===d&&(d=24),"ko"===b)?c.ordinalNumber(d,{unit:"hour"}):l(d,b.length)},m:function(a,b,c){return"mo"===b?c.ordinalNumber(a.getUTCMinutes(),{unit:"minute"}):m.m(a,b)},s:function(a,b,c){return"so"===b?c.ordinalNumber(a.getUTCSeconds(),{unit:"second"}):m.s(a,b)},S:function(a,b){return m.S(a,b)},X:function(a,b,c,d){var e=(d._originalDate||a).getTimezoneOffset();if(0===e)return"Z";switch(b){case"X":return p(e);case"XXXX":case"XX":return q(e);default:return q(e,":")}},x:function(a,b,c,d){var e=(d._originalDate||a).getTimezoneOffset();switch(b){case"x":return p(e);case"xxxx":case"xx":return q(e);default:return q(e,":")}},O:function(a,b,c,d){var e=(d._originalDate||a).getTimezoneOffset();switch(b){case"O":case"OO":case"OOO":return"GMT"+o(e,":");default:return"GMT"+q(e,":")}},z:function(a,b,c,d){var e=(d._originalDate||a).getTimezoneOffset();switch(b){case"z":case"zz":case"zzz":return"GMT"+o(e,":");default:return"GMT"+q(e,":")}},t:function(a,b,c,d){var e=Math.floor((d._originalDate||a).getTime()/1e3);return l(e,b.length)},T:function(a,b,c,d){return l((d._originalDate||a).getTime(),b.length)}},s=c(97621),t=c(24262),u=c(5267),v=c(83946),w=c(84314),x=c(86559),y=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,z=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,A=/^'([^]*?)'?$/,B=/''/g,C=/[a-zA-Z]/;function D(a,b,c){(0,g.Z)(2,arguments);var h,i,j,k,l,m,n,o,p,q,A,B,D,F,G,H,I,J,K=String(b),L=(0,w.j)(),M=null!==(h=null!==(i=null==c?void 0:c.locale)&& void 0!==i?i:L.locale)&& void 0!==h?h:x.Z,N=(0,v.Z)(null!==(j=null!==(k=null!==(l=null!==(m=null==c?void 0:c.firstWeekContainsDate)&& void 0!==m?m:null==c?void 0:null===(n=c.locale)|| void 0===n?void 0:null===(o=n.options)|| void 0===o?void 0:o.firstWeekContainsDate)&& void 0!==l?l:L.firstWeekContainsDate)&& void 0!==k?k:null===(p=L.locale)|| void 0===p?void 0:null===(q=p.options)|| void 0===q?void 0:q.firstWeekContainsDate)&& void 0!==j?j:1);if(!(N>=1&&N<=7))throw RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var O=(0,v.Z)(null!==(A=null!==(B=null!==(D=null!==(F=null==c?void 0:c.weekStartsOn)&& void 0!==F?F:null==c?void 0:null===(G=c.locale)|| void 0===G?void 0:null===(H=G.options)|| void 0===H?void 0:H.weekStartsOn)&& void 0!==D?D:L.weekStartsOn)&& void 0!==B?B:null===(I=L.locale)|| void 0===I?void 0:null===(J=I.options)|| void 0===J?void 0:J.weekStartsOn)&& void 0!==A?A:0);if(!(O>=0&&O<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!M.localize)throw RangeError("locale must contain localize property");if(!M.formatLong)throw RangeError("locale must contain formatLong property");var P=(0,f.default)(a);if(!(0,d.default)(P))throw RangeError("Invalid time value");var Q=(0,t.Z)(P),R=(0,e.Z)(P,Q),S={firstWeekContainsDate:N,weekStartsOn:O,locale:M,_originalDate:P};return K.match(z).map(function(a){var b=a[0];return"p"===b||"P"===b?(0,s.Z[b])(a,M.formatLong):a}).join("").match(y).map(function(d){if("''"===d)return"'";var e=d[0];if("'"===e)return E(d);var f=r[e];if(f)return!(null!=c&&c.useAdditionalWeekYearTokens)&&(0,u.Do)(d)&&(0,u.qp)(d,b,String(a)),!(null!=c&&c.useAdditionalDayOfYearTokens)&&(0,u.Iu)(d)&&(0,u.qp)(d,b,String(a)),f(R,d,M.localize,S);if(e.match(C))throw RangeError("Format string contains an unescaped latin alphabet character `"+e+"`");return d}).join("")}function E(a){var b=a.match(A);return b?b[1].replace(B,"'"):a}},55855:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a){return(0,e.Z)(1,arguments),(0,d.default)(a).getDate()}},20466:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a){return(0,e.Z)(1,arguments),(0,d.default)(a).getDay()}},85817:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a){return(0,e.Z)(1,arguments),(0,d.default)(a).getHours()}},90259:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return h}});var d=c(19013),e=c(584),f=c(13882);function g(a){return(0,f.Z)(1,arguments),(0,e.default)(a,{weekStartsOn:1})}function h(a){(0,f.Z)(1,arguments);var b=(0,d.default)(a);return Math.round((g(b).getTime()-(function(a){(0,f.Z)(1,arguments);var b=function(a){(0,f.Z)(1,arguments);var b=(0,d.default)(a),c=b.getFullYear(),e=new Date(0);e.setFullYear(c+1,0,4),e.setHours(0,0,0,0);var h=g(e),i=new Date(0);i.setFullYear(c,0,4),i.setHours(0,0,0,0);var j=g(i);return b.getTime()>=h.getTime()?c+1:b.getTime()>=j.getTime()?c:c-1}(a),c=new Date(0);return c.setFullYear(b,0,4),c.setHours(0,0,0,0),g(c)})(b).getTime())/6048e5)+1}},39159:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a){return(0,e.Z)(1,arguments),(0,d.default)(a).getMinutes()}},78966:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a){return(0,e.Z)(1,arguments),(0,d.default)(a).getMonth()}},56605:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a){return(0,e.Z)(1,arguments),Math.floor((0,d.default)(a).getMonth()/3)+1}},77881:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a){return(0,e.Z)(1,arguments),(0,d.default)(a).getSeconds()}},28789:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a){return(0,e.Z)(1,arguments),(0,d.default)(a).getTime()}},95570:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a){return(0,e.Z)(1,arguments),(0,d.default)(a).getFullYear()}},42699:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a,b){(0,e.Z)(2,arguments);var c=(0,d.default)(a),f=(0,d.default)(b);return c.getTime()>f.getTime()}},313:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a,b){(0,e.Z)(2,arguments);var c=(0,d.default)(a),f=(0,d.default)(b);return c.getTime()<f.getTime()}},71381:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return e}});var d=c(13882);function e(a){return(0,d.Z)(1,arguments),a instanceof Date||"object"==typeof a&&"[object Date]"===Object.prototype.toString.call(a)}},96843:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a,b){(0,e.Z)(2,arguments);var c=(0,d.default)(a),f=(0,d.default)(b);return c.getTime()===f.getTime()}},3151:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(69119),e=c(13882);function f(a,b){(0,e.Z)(2,arguments);var c=(0,d.default)(a),f=(0,d.default)(b);return c.getTime()===f.getTime()}},49160:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a,b){(0,e.Z)(2,arguments);var c=(0,d.default)(a),f=(0,d.default)(b);return c.getFullYear()===f.getFullYear()&&c.getMonth()===f.getMonth()}},86117:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(94431),e=c(13882);function f(a,b){(0,e.Z)(2,arguments);var c=(0,d.default)(a),f=(0,d.default)(b);return c.getTime()===f.getTime()}},60792:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a,b){(0,e.Z)(2,arguments);var c=(0,d.default)(a),f=(0,d.default)(b);return c.getFullYear()===f.getFullYear()}},12274:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return g}});var d=c(71381),e=c(19013),f=c(13882);function g(a){return(0,f.Z)(1,arguments),(!!(0,d.default)(a)||"number"==typeof a)&&!isNaN(Number((0,e.default)(a)))}},24257:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a,b){(0,e.Z)(2,arguments);var c=(0,d.default)(a).getTime(),f=(0,d.default)(b.start).getTime(),g=(0,d.default)(b.end).getTime();if(!(f<=g))throw RangeError("Invalid interval");return c>=f&&c<=g}},99890:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a){var b,c;if((0,e.Z)(1,arguments),a&&"function"==typeof a.forEach)b=a;else{if("object"!=typeof a||null===a)return new Date(NaN);b=Array.prototype.slice.call(a)}return b.forEach(function(a){var b=(0,d.default)(a);(void 0===c||c<b||isNaN(Number(b)))&&(c=b)}),c||new Date(NaN)}},37950:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a){var b,c;if((0,e.Z)(1,arguments),a&&"function"==typeof a.forEach)b=a;else{if("object"!=typeof a||null===a)return new Date(NaN);b=Array.prototype.slice.call(a)}return b.forEach(function(a){var b=(0,d.default)(a);(void 0===c||c>b||isNaN(b.getDate()))&&(c=b)}),c||new Date(NaN)}},23855:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return g}});var d=c(36948),e=c(13882),f=c(83946);function g(a,b){(0,e.Z)(1,arguments);var c,d,g,h=(0,f.Z)(null!==(c=null==b?void 0:b.additionalDigits)&& void 0!==c?c:2);if(2!==h&&1!==h&&0!==h)throw RangeError("additionalDigits must be 0, 1 or 2");if(!("string"==typeof a||"[object String]"===Object.prototype.toString.call(a)))return new Date(NaN);var i=l(a);if(i.date){var j=m(i.date,h);d=n(j.restDateString,j.year)}if(!d||isNaN(d.getTime()))return new Date(NaN);var k=d.getTime(),o=0;if(i.time&&(o=p(i.time),isNaN(o)))return new Date(NaN);if(i.timezone){if(g=r(i.timezone),isNaN(g))return new Date(NaN)}else{var q=new Date(k+o),s=new Date(0);return s.setFullYear(q.getUTCFullYear(),q.getUTCMonth(),q.getUTCDate()),s.setHours(q.getUTCHours(),q.getUTCMinutes(),q.getUTCSeconds(),q.getUTCMilliseconds()),s}return new Date(k+o+g)}var h={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},i=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,j=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,k=/^([+-])(\d{2})(?::?(\d{2}))?$/;function l(a){var b,c={},d=a.split(h.dateTimeDelimiter);if(d.length>2)return c;if(/:/.test(d[0])?b=d[0]:(c.date=d[0],b=d[1],h.timeZoneDelimiter.test(c.date)&&(c.date=a.split(h.timeZoneDelimiter)[0],b=a.substr(c.date.length,a.length))),b){var e=h.timezone.exec(b);e?(c.time=b.replace(e[1],""),c.timezone=e[1]):c.time=b}return c}function m(a,b){var c=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+b)+"})|(\\d{2}|[+-]\\d{"+(2+b)+"})$)"),d=a.match(c);if(!d)return{year:NaN,restDateString:""};var e=d[1]?parseInt(d[1]):null,f=d[2]?parseInt(d[2]):null;return{year:null===f?e:100*f,restDateString:a.slice((d[1]||d[2]).length)}}function n(a,b){if(null===b)return new Date(NaN);var c=a.match(i);if(!c)return new Date(NaN);var d=!!c[4],e=o(c[1]),f=o(c[2])-1,g=o(c[3]),h=o(c[4]),j=o(c[5])-1;if(d)return x(b,h,j)?s(b,h,j):new Date(NaN);var k=new Date(0);return v(b,f,g)&&w(b,e)?(k.setUTCFullYear(b,f,Math.max(e,g)),k):new Date(NaN)}function o(a){return a?parseInt(a):1}function p(a){var b=a.match(j);if(!b)return NaN;var c=q(b[1]),e=q(b[2]),f=q(b[3]);return y(c,e,f)?c*d.vh+e*d.yJ+1e3*f:NaN}function q(a){return a&&parseFloat(a.replace(",","."))||0}function r(a){if("Z"===a)return 0;var b=a.match(k);if(!b)return 0;var c="+"===b[1]?-1:1,e=parseInt(b[2]),f=b[3]&&parseInt(b[3])||0;return z(e,f)?c*(e*d.vh+f*d.yJ):NaN}function s(a,b,c){var d=new Date(0);d.setUTCFullYear(a,0,4);var e=d.getUTCDay()||7;return d.setUTCDate(d.getUTCDate()+((b-1)*7+c+1-e)),d}var t=[31,null,31,30,31,30,31,31,30,31,30,31];function u(a){return a%400==0||a%4==0&&a%100!=0}function v(a,b,c){return b>=0&&b<=11&&c>=1&&c<=(t[b]||(u(a)?29:28))}function w(a,b){return b>=1&&b<=(u(a)?366:365)}function x(a,b,c){return b>=1&&b<=53&&c>=0&&c<=6}function y(a,b,c){return 24===a?0===b&&0===c:c>=0&&c<60&&b>=0&&b<60&&a>=0&&a<25}function z(a,b){return b>=0&&b<=59}},35337:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return ax}});var d=c(86559),e=c(91218),f=c(19013);function g(a,b){if(null==a)throw TypeError("assign requires that input parameter not be null or undefined");for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a}var h=c(97621),i=c(24262),j=c(5267),k=c(83946),l=c(13882);function m(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}class n{constructor(){m(this,"priority",void 0),m(this,"subPriority",0)}validate(a,b){return!0}}class o extends n{constructor(a,b,c,d,e){super(),this.value=a,this.validateValue=b,this.setValue=c,this.priority=d,e&&(this.subPriority=e)}validate(a,b){return this.validateValue(a,this.value,b)}set(a,b,c){return this.setValue(a,b,this.value,c)}}class p extends n{constructor(){super(...arguments),m(this,"priority",10),m(this,"subPriority",-1)}set(a,b){if(b.timestampIsSet)return a;var c=new Date(0);return c.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),c.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),c}}function q(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}class r{constructor(){q(this,"incompatibleTokens",void 0),q(this,"priority",void 0),q(this,"subPriority",void 0)}run(a,b,c,d){var e=this.parse(a,b,c,d);return e?{setter:new o(e.value,this.validate,this.set,this.priority,this.subPriority),rest:e.rest}:null}validate(a,b,c){return!0}}function s(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var t=c(36948),u={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},v={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function w(a,b){return a?{value:b(a.value),rest:a.rest}:a}function x(a,b){var c=b.match(a);return c?{value:parseInt(c[0],10),rest:b.slice(c[0].length)}:null}function y(a,b){var c=b.match(a);if(!c)return null;if("Z"===c[0])return{value:0,rest:b.slice(1)};var d="+"===c[1]?1:-1,e=c[2]?parseInt(c[2],10):0,f=c[3]?parseInt(c[3],10):0,g=c[5]?parseInt(c[5],10):0;return{value:d*(e*t.vh+f*t.yJ+g*t.qk),rest:b.slice(c[0].length)}}function z(a){return x(u.anyDigitsSigned,a)}function A(a,b){switch(a){case 1:return x(u.singleDigit,b);case 2:return x(u.twoDigits,b);case 3:return x(u.threeDigits,b);case 4:return x(u.fourDigits,b);default:return x(RegExp("^\\d{1,"+a+"}"),b)}}function B(a,b){switch(a){case 1:return x(u.singleDigitSigned,b);case 2:return x(u.twoDigitsSigned,b);case 3:return x(u.threeDigitsSigned,b);case 4:return x(u.fourDigitsSigned,b);default:return x(RegExp("^-?\\d{1,"+a+"}"),b)}}function C(a){switch(a){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function D(a,b){var c,d=b>0,e=d?b:1-b;if(e<=50)c=a||100;else{var f=e+50,g=100*Math.floor(f/100),h=a>=f%100;c=a+g-(h?100:0)}return d?c:1-c}function E(a){return a%400==0||a%4==0&&a%100!=0}function F(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var G=c(7651),H=c(59025);function I(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var J=c(66979);function K(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function L(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function M(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function N(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function O(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function P(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var Q=c(5230);function R(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var S=c(33276);function T(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function U(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var V=[31,28,31,30,31,30,31,31,30,31,30,31],W=[31,29,31,30,31,30,31,31,30,31,30,31];function X(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var Y=c(84314);function Z(a,b,c){(0,l.Z)(2,arguments);var d,e,g,h,i,j,m,n,o=(0,Y.j)(),p=(0,k.Z)(null!==(d=null!==(e=null!==(g=null!==(h=null==c?void 0:c.weekStartsOn)&& void 0!==h?h:null==c?void 0:null===(i=c.locale)|| void 0===i?void 0:null===(j=i.options)|| void 0===j?void 0:j.weekStartsOn)&& void 0!==g?g:o.weekStartsOn)&& void 0!==e?e:null===(m=o.locale)|| void 0===m?void 0:null===(n=m.options)|| void 0===n?void 0:n.weekStartsOn)&& void 0!==d?d:0);if(!(p>=0&&p<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");var q=(0,f.default)(a),r=(0,k.Z)(b),s=q.getUTCDay();return q.setUTCDate(q.getUTCDate()+(((r%7+7)%7<p?7:0)+r-s)),q}function $(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function aa(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function ab(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function ac(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function ad(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function ae(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function af(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function ag(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function ah(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function ai(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function aj(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function ak(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function al(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function am(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function an(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function ao(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function ap(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var aq={G:new class extends r{constructor(){super(...arguments),s(this,"priority",140),s(this,"incompatibleTokens",["R","u","t","T"])}parse(a,b,c){switch(b){case"G":case"GG":case"GGG":return c.era(a,{width:"abbreviated"})||c.era(a,{width:"narrow"});case"GGGGG":return c.era(a,{width:"narrow"});default:return c.era(a,{width:"wide"})||c.era(a,{width:"abbreviated"})||c.era(a,{width:"narrow"})}}set(a,b,c){return b.era=c,a.setUTCFullYear(c,0,1),a.setUTCHours(0,0,0,0),a}},y:new class extends r{constructor(){super(...arguments),F(this,"priority",130),F(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(a,b,c){var d=function(a){return{year:a,isTwoDigitYear:"yy"===b}};switch(b){case"y":return w(A(4,a),d);case"yo":return w(c.ordinalNumber(a,{unit:"year"}),d);default:return w(A(b.length,a),d)}}validate(a,b){return b.isTwoDigitYear||b.year>0}set(a,b,c){var d=a.getUTCFullYear();if(c.isTwoDigitYear){var e=D(c.year,d);return a.setUTCFullYear(e,0,1),a.setUTCHours(0,0,0,0),a}var f="era"in b&&1!==b.era?1-c.year:c.year;return a.setUTCFullYear(f,0,1),a.setUTCHours(0,0,0,0),a}},Y:new class extends r{constructor(){super(...arguments),I(this,"priority",130),I(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(a,b,c){var d=function(a){return{year:a,isTwoDigitYear:"YY"===b}};switch(b){case"Y":return w(A(4,a),d);case"Yo":return w(c.ordinalNumber(a,{unit:"year"}),d);default:return w(A(b.length,a),d)}}validate(a,b){return b.isTwoDigitYear||b.year>0}set(a,b,c,d){var e=(0,G.Z)(a,d);if(c.isTwoDigitYear){var f=D(c.year,e);return a.setUTCFullYear(f,0,d.firstWeekContainsDate),a.setUTCHours(0,0,0,0),(0,H.Z)(a,d)}var g="era"in b&&1!==b.era?1-c.year:c.year;return a.setUTCFullYear(g,0,d.firstWeekContainsDate),a.setUTCHours(0,0,0,0),(0,H.Z)(a,d)}},R:new class extends r{constructor(){super(...arguments),K(this,"priority",130),K(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(a,b){return"R"===b?B(4,a):B(b.length,a)}set(a,b,c){var d=new Date(0);return d.setUTCFullYear(c,0,4),d.setUTCHours(0,0,0,0),(0,J.Z)(d)}},u:new class extends r{constructor(){super(...arguments),L(this,"priority",130),L(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(a,b){return"u"===b?B(4,a):B(b.length,a)}set(a,b,c){return a.setUTCFullYear(c,0,1),a.setUTCHours(0,0,0,0),a}},Q:new class extends r{constructor(){super(...arguments),M(this,"priority",120),M(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(a,b,c){switch(b){case"Q":case"QQ":return A(b.length,a);case"Qo":return c.ordinalNumber(a,{unit:"quarter"});case"QQQ":return c.quarter(a,{width:"abbreviated",context:"formatting"})||c.quarter(a,{width:"narrow",context:"formatting"});case"QQQQQ":return c.quarter(a,{width:"narrow",context:"formatting"});default:return c.quarter(a,{width:"wide",context:"formatting"})||c.quarter(a,{width:"abbreviated",context:"formatting"})||c.quarter(a,{width:"narrow",context:"formatting"})}}validate(a,b){return b>=1&&b<=4}set(a,b,c){return a.setUTCMonth((c-1)*3,1),a.setUTCHours(0,0,0,0),a}},q:new class extends r{constructor(){super(...arguments),N(this,"priority",120),N(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(a,b,c){switch(b){case"q":case"qq":return A(b.length,a);case"qo":return c.ordinalNumber(a,{unit:"quarter"});case"qqq":return c.quarter(a,{width:"abbreviated",context:"standalone"})||c.quarter(a,{width:"narrow",context:"standalone"});case"qqqqq":return c.quarter(a,{width:"narrow",context:"standalone"});default:return c.quarter(a,{width:"wide",context:"standalone"})||c.quarter(a,{width:"abbreviated",context:"standalone"})||c.quarter(a,{width:"narrow",context:"standalone"})}}validate(a,b){return b>=1&&b<=4}set(a,b,c){return a.setUTCMonth((c-1)*3,1),a.setUTCHours(0,0,0,0),a}},M:new class extends r{constructor(){super(...arguments),O(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),O(this,"priority",110)}parse(a,b,c){var d=function(a){return a-1};switch(b){case"M":return w(x(u.month,a),d);case"MM":return w(A(2,a),d);case"Mo":return w(c.ordinalNumber(a,{unit:"month"}),d);case"MMM":return c.month(a,{width:"abbreviated",context:"formatting"})||c.month(a,{width:"narrow",context:"formatting"});case"MMMMM":return c.month(a,{width:"narrow",context:"formatting"});default:return c.month(a,{width:"wide",context:"formatting"})||c.month(a,{width:"abbreviated",context:"formatting"})||c.month(a,{width:"narrow",context:"formatting"})}}validate(a,b){return b>=0&&b<=11}set(a,b,c){return a.setUTCMonth(c,1),a.setUTCHours(0,0,0,0),a}},L:new class extends r{constructor(){super(...arguments),P(this,"priority",110),P(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(a,b,c){var d=function(a){return a-1};switch(b){case"L":return w(x(u.month,a),d);case"LL":return w(A(2,a),d);case"Lo":return w(c.ordinalNumber(a,{unit:"month"}),d);case"LLL":return c.month(a,{width:"abbreviated",context:"standalone"})||c.month(a,{width:"narrow",context:"standalone"});case"LLLLL":return c.month(a,{width:"narrow",context:"standalone"});default:return c.month(a,{width:"wide",context:"standalone"})||c.month(a,{width:"abbreviated",context:"standalone"})||c.month(a,{width:"narrow",context:"standalone"})}}validate(a,b){return b>=0&&b<=11}set(a,b,c){return a.setUTCMonth(c,1),a.setUTCHours(0,0,0,0),a}},w:new class extends r{constructor(){super(...arguments),R(this,"priority",100),R(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(a,b,c){switch(b){case"w":return x(u.week,a);case"wo":return c.ordinalNumber(a,{unit:"week"});default:return A(b.length,a)}}validate(a,b){return b>=1&&b<=53}set(a,b,c,d){return(0,H.Z)(function(a,b,c){(0,l.Z)(2,arguments);var d=(0,f.default)(a),e=(0,k.Z)(b),g=(0,Q.Z)(d,c)-e;return d.setUTCDate(d.getUTCDate()-7*g),d}(a,c,d),d)}},I:new class extends r{constructor(){super(...arguments),T(this,"priority",100),T(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(a,b,c){switch(b){case"I":return x(u.week,a);case"Io":return c.ordinalNumber(a,{unit:"week"});default:return A(b.length,a)}}validate(a,b){return b>=1&&b<=53}set(a,b,c){return(0,J.Z)(function(a,b){(0,l.Z)(2,arguments);var c=(0,f.default)(a),d=(0,k.Z)(b),e=(0,S.Z)(c)-d;return c.setUTCDate(c.getUTCDate()-7*e),c}(a,c))}},d:new class extends r{constructor(){super(...arguments),U(this,"priority",90),U(this,"subPriority",1),U(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(a,b,c){switch(b){case"d":return x(u.date,a);case"do":return c.ordinalNumber(a,{unit:"date"});default:return A(b.length,a)}}validate(a,b){var c=E(a.getUTCFullYear()),d=a.getUTCMonth();return c?b>=1&&b<=W[d]:b>=1&&b<=V[d]}set(a,b,c){return a.setUTCDate(c),a.setUTCHours(0,0,0,0),a}},D:new class extends r{constructor(){super(...arguments),X(this,"priority",90),X(this,"subpriority",1),X(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(a,b,c){switch(b){case"D":case"DD":return x(u.dayOfYear,a);case"Do":return c.ordinalNumber(a,{unit:"date"});default:return A(b.length,a)}}validate(a,b){return E(a.getUTCFullYear())?b>=1&&b<=366:b>=1&&b<=365}set(a,b,c){return a.setUTCMonth(0,c),a.setUTCHours(0,0,0,0),a}},E:new class extends r{constructor(){super(...arguments),$(this,"priority",90),$(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(a,b,c){switch(b){case"E":case"EE":case"EEE":return c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"});case"EEEEE":return c.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"});default:return c.day(a,{width:"wide",context:"formatting"})||c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"})}}validate(a,b){return b>=0&&b<=6}set(a,b,c,d){return(a=Z(a,c,d)).setUTCHours(0,0,0,0),a}},e:new class extends r{constructor(){super(...arguments),_(this,"priority",90),_(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(a,b,c,d){var e=function(a){return(a+d.weekStartsOn+6)%7+7*Math.floor((a-1)/7)};switch(b){case"e":case"ee":return w(A(b.length,a),e);case"eo":return w(c.ordinalNumber(a,{unit:"day"}),e);case"eee":return c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"});case"eeeee":return c.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"});default:return c.day(a,{width:"wide",context:"formatting"})||c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"})}}validate(a,b){return b>=0&&b<=6}set(a,b,c,d){return(a=Z(a,c,d)).setUTCHours(0,0,0,0),a}},c:new class extends r{constructor(){super(...arguments),aa(this,"priority",90),aa(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(a,b,c,d){var e=function(a){return(a+d.weekStartsOn+6)%7+7*Math.floor((a-1)/7)};switch(b){case"c":case"cc":return w(A(b.length,a),e);case"co":return w(c.ordinalNumber(a,{unit:"day"}),e);case"ccc":return c.day(a,{width:"abbreviated",context:"standalone"})||c.day(a,{width:"short",context:"standalone"})||c.day(a,{width:"narrow",context:"standalone"});case"ccccc":return c.day(a,{width:"narrow",context:"standalone"});case"cccccc":return c.day(a,{width:"short",context:"standalone"})||c.day(a,{width:"narrow",context:"standalone"});default:return c.day(a,{width:"wide",context:"standalone"})||c.day(a,{width:"abbreviated",context:"standalone"})||c.day(a,{width:"short",context:"standalone"})||c.day(a,{width:"narrow",context:"standalone"})}}validate(a,b){return b>=0&&b<=6}set(a,b,c,d){return(a=Z(a,c,d)).setUTCHours(0,0,0,0),a}},i:new class extends r{constructor(){super(...arguments),ab(this,"priority",90),ab(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(a,b,c){var d=function(a){return 0===a?7:a};switch(b){case"i":case"ii":return A(b.length,a);case"io":return c.ordinalNumber(a,{unit:"day"});case"iii":return w(c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"}),d);case"iiiii":return w(c.day(a,{width:"narrow",context:"formatting"}),d);case"iiiiii":return w(c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"}),d);default:return w(c.day(a,{width:"wide",context:"formatting"})||c.day(a,{width:"abbreviated",context:"formatting"})||c.day(a,{width:"short",context:"formatting"})||c.day(a,{width:"narrow",context:"formatting"}),d)}}validate(a,b){return b>=1&&b<=7}set(a,b,c){return(a=function(a,b){(0,l.Z)(2,arguments);var c=(0,k.Z)(b);c%7==0&&(c-=7);var d,e=(0,f.default)(a),g=e.getUTCDay(),h=((c%7+7)%7<1?7:0)+c-g;return e.setUTCDate(e.getUTCDate()+h),e}(a,c)).setUTCHours(0,0,0,0),a}},a:new class extends r{constructor(){super(...arguments),ac(this,"priority",80),ac(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(a,b,c){switch(b){case"a":case"aa":case"aaa":return c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaaa":return c.dayPeriod(a,{width:"narrow",context:"formatting"});default:return c.dayPeriod(a,{width:"wide",context:"formatting"})||c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"})}}set(a,b,c){return a.setUTCHours(C(c),0,0,0),a}},b:new class extends r{constructor(){super(...arguments),ad(this,"priority",80),ad(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(a,b,c){switch(b){case"b":case"bb":case"bbb":return c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbbb":return c.dayPeriod(a,{width:"narrow",context:"formatting"});default:return c.dayPeriod(a,{width:"wide",context:"formatting"})||c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"})}}set(a,b,c){return a.setUTCHours(C(c),0,0,0),a}},B:new class extends r{constructor(){super(...arguments),ae(this,"priority",80),ae(this,"incompatibleTokens",["a","b","t","T"])}parse(a,b,c){switch(b){case"B":case"BB":case"BBB":return c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBBB":return c.dayPeriod(a,{width:"narrow",context:"formatting"});default:return c.dayPeriod(a,{width:"wide",context:"formatting"})||c.dayPeriod(a,{width:"abbreviated",context:"formatting"})||c.dayPeriod(a,{width:"narrow",context:"formatting"})}}set(a,b,c){return a.setUTCHours(C(c),0,0,0),a}},h:new class extends r{constructor(){super(...arguments),af(this,"priority",70),af(this,"incompatibleTokens",["H","K","k","t","T"])}parse(a,b,c){switch(b){case"h":return x(u.hour12h,a);case"ho":return c.ordinalNumber(a,{unit:"hour"});default:return A(b.length,a)}}validate(a,b){return b>=1&&b<=12}set(a,b,c){var d=a.getUTCHours()>=12;return d&&c<12?a.setUTCHours(c+12,0,0,0):d||12!==c?a.setUTCHours(c,0,0,0):a.setUTCHours(0,0,0,0),a}},H:new class extends r{constructor(){super(...arguments),ag(this,"priority",70),ag(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(a,b,c){switch(b){case"H":return x(u.hour23h,a);case"Ho":return c.ordinalNumber(a,{unit:"hour"});default:return A(b.length,a)}}validate(a,b){return b>=0&&b<=23}set(a,b,c){return a.setUTCHours(c,0,0,0),a}},K:new class extends r{constructor(){super(...arguments),ah(this,"priority",70),ah(this,"incompatibleTokens",["h","H","k","t","T"])}parse(a,b,c){switch(b){case"K":return x(u.hour11h,a);case"Ko":return c.ordinalNumber(a,{unit:"hour"});default:return A(b.length,a)}}validate(a,b){return b>=0&&b<=11}set(a,b,c){return a.getUTCHours()>=12&&c<12?a.setUTCHours(c+12,0,0,0):a.setUTCHours(c,0,0,0),a}},k:new class extends r{constructor(){super(...arguments),ai(this,"priority",70),ai(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(a,b,c){switch(b){case"k":return x(u.hour24h,a);case"ko":return c.ordinalNumber(a,{unit:"hour"});default:return A(b.length,a)}}validate(a,b){return b>=1&&b<=24}set(a,b,c){return a.setUTCHours(c<=24?c%24:c,0,0,0),a}},m:new class extends r{constructor(){super(...arguments),aj(this,"priority",60),aj(this,"incompatibleTokens",["t","T"])}parse(a,b,c){switch(b){case"m":return x(u.minute,a);case"mo":return c.ordinalNumber(a,{unit:"minute"});default:return A(b.length,a)}}validate(a,b){return b>=0&&b<=59}set(a,b,c){return a.setUTCMinutes(c,0,0),a}},s:new class extends r{constructor(){super(...arguments),ak(this,"priority",50),ak(this,"incompatibleTokens",["t","T"])}parse(a,b,c){switch(b){case"s":return x(u.second,a);case"so":return c.ordinalNumber(a,{unit:"second"});default:return A(b.length,a)}}validate(a,b){return b>=0&&b<=59}set(a,b,c){return a.setUTCSeconds(c,0),a}},S:new class extends r{constructor(){super(...arguments),al(this,"priority",30),al(this,"incompatibleTokens",["t","T"])}parse(a,b){var c=function(a){return Math.floor(a*Math.pow(10,-b.length+3))};return w(A(b.length,a),c)}set(a,b,c){return a.setUTCMilliseconds(c),a}},X:new class extends r{constructor(){super(...arguments),am(this,"priority",10),am(this,"incompatibleTokens",["t","T","x"])}parse(a,b){switch(b){case"X":return y(v.basicOptionalMinutes,a);case"XX":return y(v.basic,a);case"XXXX":return y(v.basicOptionalSeconds,a);case"XXXXX":return y(v.extendedOptionalSeconds,a);default:return y(v.extended,a)}}set(a,b,c){return b.timestampIsSet?a:new Date(a.getTime()-c)}},x:new class extends r{constructor(){super(...arguments),an(this,"priority",10),an(this,"incompatibleTokens",["t","T","X"])}parse(a,b){switch(b){case"x":return y(v.basicOptionalMinutes,a);case"xx":return y(v.basic,a);case"xxxx":return y(v.basicOptionalSeconds,a);case"xxxxx":return y(v.extendedOptionalSeconds,a);default:return y(v.extended,a)}}set(a,b,c){return b.timestampIsSet?a:new Date(a.getTime()-c)}},t:new class extends r{constructor(){super(...arguments),ao(this,"priority",40),ao(this,"incompatibleTokens","*")}parse(a){return z(a)}set(a,b,c){return[new Date(1e3*c),{timestampIsSet:!0}]}},T:new class extends r{constructor(){super(...arguments),ap(this,"priority",20),ap(this,"incompatibleTokens","*")}parse(a){return z(a)}set(a,b,c){return[new Date(c),{timestampIsSet:!0}]}}},ar=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,as=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,at=/^'([^]*?)'?$/,au=/''/g,av=/\S/,aw=/[a-zA-Z]/;function ax(a,b,c,m){(0,l.Z)(3,arguments);var n,o,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=String(a),H=String(b),I=(0,Y.j)(),J=null!==(n=null!==(o=null==m?void 0:m.locale)&& void 0!==o?o:I.locale)&& void 0!==n?n:d.Z;if(!J.match)throw RangeError("locale must contain match property");var K=(0,k.Z)(null!==(q=null!==(r=null!==(s=null!==(t=null==m?void 0:m.firstWeekContainsDate)&& void 0!==t?t:null==m?void 0:null===(u=m.locale)|| void 0===u?void 0:null===(v=u.options)|| void 0===v?void 0:v.firstWeekContainsDate)&& void 0!==s?s:I.firstWeekContainsDate)&& void 0!==r?r:null===(w=I.locale)|| void 0===w?void 0:null===(x=w.options)|| void 0===x?void 0:x.firstWeekContainsDate)&& void 0!==q?q:1);if(!(K>=1&&K<=7))throw RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var L=(0,k.Z)(null!==(y=null!==(z=null!==(A=null!==(B=null==m?void 0:m.weekStartsOn)&& void 0!==B?B:null==m?void 0:null===(C=m.locale)|| void 0===C?void 0:null===(D=C.options)|| void 0===D?void 0:D.weekStartsOn)&& void 0!==A?A:I.weekStartsOn)&& void 0!==z?z:null===(E=I.locale)|| void 0===E?void 0:null===(F=E.options)|| void 0===F?void 0:F.weekStartsOn)&& void 0!==y?y:0);if(!(L>=0&&L<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===H)return""===G?(0,f.default)(c):new Date(NaN);var M={firstWeekContainsDate:K,weekStartsOn:L,locale:J},N=[new p],O=H.match(as).map(function(a){var b=a[0];return b in h.Z?(0,h.Z[b])(a,J.formatLong):a}).join("").match(ar),P=[];for(var Q of O){var R=function(b){!(null!=m&&m.useAdditionalWeekYearTokens)&&(0,j.Do)(b)&&(0,j.qp)(b,H,a),!(null!=m&&m.useAdditionalDayOfYearTokens)&&(0,j.Iu)(b)&&(0,j.qp)(b,H,a);var c=b[0],d=aq[c];if(d){var e=d.incompatibleTokens;if(Array.isArray(e)){var f=P.find(function(a){return e.includes(a.token)||a.token===c});if(f)throw RangeError("The format string mustn't contain `".concat(f.fullToken,"` and `").concat(b,"` at the same time"))}else if("*"===d.incompatibleTokens&&P.length>0)throw RangeError("The format string mustn't contain `".concat(b,"` and any other token at the same time"));P.push({token:c,fullToken:b});var g=d.run(G,b,J.match,M);if(!g)return Q=b,{v:new Date(NaN)};N.push(g.setter),G=g.rest}else{if(c.match(aw))throw RangeError("Format string contains an unescaped latin alphabet character `"+c+"`");if("''"===b?b="'":"'"===c&&(b=ay(b)),0!==G.indexOf(b))return Q=b,{v:new Date(NaN)};G=G.slice(b.length)}Q=b}(Q);if("object"==typeof R)return R.v}if(G.length>0&&av.test(G))return new Date(NaN);var S=N.map(function(a){return a.priority}).sort(function(a,b){return b-a}).filter(function(a,b,c){return c.indexOf(a)===b}).map(function(a){return N.filter(function(b){return b.priority===a}).sort(function(a,b){return b.subPriority-a.subPriority})}).map(function(a){return a[0]}),T=(0,f.default)(c);if(isNaN(T.getTime()))return new Date(NaN);var U=(0,e.Z)(T,(0,i.Z)(T)),V={};for(var W of S){if(!W.validate(U,M))return new Date(NaN);var X=W.set(U,V,M);Array.isArray(X)?(U=X[0],g(V,X[1])):U=X}return U}function ay(a){return a.match(at)[1].replace(au,"'")}},37042:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return g}});var d=c(83946),e=c(19013),f=c(13882);function g(a,b){(0,f.Z)(2,arguments);var c=(0,e.default)(a),g=(0,d.Z)(b);return c.setHours(g),c}},4543:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return g}});var d=c(83946),e=c(19013),f=c(13882);function g(a,b){(0,f.Z)(2,arguments);var c=(0,e.default)(a),g=(0,d.Z)(b);return c.setMinutes(g),c}},16218:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return g}});var d=c(83946),e=c(19013),f=c(13882);function g(a,b){(0,f.Z)(2,arguments);var c=(0,e.default)(a),g=(0,d.Z)(b),h=c.getFullYear(),i=c.getDate(),j=new Date(0);j.setFullYear(h,g,15),j.setHours(0,0,0,0);var k=function(a){(0,f.Z)(1,arguments);var b=(0,e.default)(a),c=b.getFullYear(),d=b.getMonth(),g=new Date(0);return g.setFullYear(c,d+1,0),g.setHours(0,0,0,0),g.getDate()}(j);return c.setMonth(g,Math.min(i,k)),c}},11503:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return h}});var d=c(83946),e=c(19013),f=c(16218),g=c(13882);function h(a,b){(0,g.Z)(2,arguments);var c=(0,e.default)(a),h=(0,d.Z)(b),i=Math.floor(c.getMonth()/3)+1;return(0,f.default)(c,c.getMonth()+3*(h-i))}},39880:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return g}});var d=c(83946),e=c(19013),f=c(13882);function g(a,b){(0,f.Z)(2,arguments);var c=(0,e.default)(a),g=(0,d.Z)(b);return c.setSeconds(g),c}},44749:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return g}});var d=c(83946),e=c(19013),f=c(13882);function g(a,b){(0,f.Z)(2,arguments);var c=(0,e.default)(a),g=(0,d.Z)(b);return isNaN(c.getTime())?new Date(NaN):(c.setFullYear(g),c)}},69119:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a){(0,e.Z)(1,arguments);var b=(0,d.default)(a);return b.setHours(0,0,0,0),b}},43703:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a){(0,e.Z)(1,arguments);var b=(0,d.default)(a);return b.setDate(1),b.setHours(0,0,0,0),b}},94431:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a){(0,e.Z)(1,arguments);var b=(0,d.default)(a),c=b.getMonth();return b.setMonth(c-c%3,1),b.setHours(0,0,0,0),b}},584:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return h}});var d=c(19013),e=c(83946),f=c(13882),g=c(84314);function h(a,b){(0,f.Z)(1,arguments);var c,h,i,j,k,l,m,n,o=(0,g.j)(),p=(0,e.Z)(null!==(c=null!==(h=null!==(i=null!==(j=null==b?void 0:b.weekStartsOn)&& void 0!==j?j:null==b?void 0:null===(k=b.locale)|| void 0===k?void 0:null===(l=k.options)|| void 0===l?void 0:l.weekStartsOn)&& void 0!==i?i:o.weekStartsOn)&& void 0!==h?h:null===(m=o.locale)|| void 0===m?void 0:null===(n=m.options)|| void 0===n?void 0:n.weekStartsOn)&& void 0!==c?c:0);if(!(p>=0&&p<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");var q=(0,d.default)(a),r=q.getDay();return q.setDate(q.getDate()-((r<p?7:0)+r-p)),q.setHours(0,0,0,0),q}},38148:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return f}});var d=c(19013),e=c(13882);function f(a){(0,e.Z)(1,arguments);var b=(0,d.default)(a),c=new Date(0);return c.setFullYear(b.getFullYear(),0,1),c.setHours(0,0,0,0),c}},7069:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return g}});var d=c(77349),e=c(13882),f=c(83946);function g(a,b){(0,e.Z)(2,arguments);var c=(0,f.Z)(b);return(0,d.default)(a,-c)}},88330:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return g}});var d=c(78343),e=c(13882),f=c(83946);function g(a,b){(0,e.Z)(2,arguments);var c=(0,f.Z)(b);return(0,d.default)(a,-c)}},91218:function(a,b,c){"use strict";c.d(b,{Z:function(){return g}});var d=c(51820),e=c(13882),f=c(83946);function g(a,b){(0,e.Z)(2,arguments);var c=(0,f.Z)(b);return(0,d.Z)(a,-c)}},1784:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return g}});var d=c(58545),e=c(13882),f=c(83946);function g(a,b){(0,e.Z)(2,arguments);var c=(0,f.Z)(b);return(0,d.default)(a,-c)}},54559:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return g}});var d=c(83946),e=c(11640),f=c(13882);function g(a,b){(0,f.Z)(2,arguments);var c=(0,d.Z)(b);return(0,e.default)(a,-c)}},77982:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return g}});var d=c(83946),e=c(63500),f=c(13882);function g(a,b){(0,f.Z)(2,arguments);var c=(0,d.Z)(b);return(0,e.default)(a,-c)}},59319:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return g}});var d=c(83946),e=c(21593),f=c(13882);function g(a,b){(0,f.Z)(2,arguments);var c=(0,d.Z)(b);return(0,e.default)(a,-c)}},19013:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return e}});var d=c(13882);function e(a){(0,d.Z)(1,arguments);var b=Object.prototype.toString.call(a);return a instanceof Date||"object"==typeof a&&"[object Date]"===b?new Date(a.getTime()):"number"==typeof a||"[object Number]"===b?new Date(a):(("string"==typeof a||"[object String]"===b)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}},65780:function(a){"use strict";let b=(a,b)=>Math.floor(Math.random()*(b-a+1)+a),c=()=>{let a=Error("Delay aborted");return a.name="AbortError",a},d=({clearTimeout:a,setTimeout:b,willResolve:d})=>(e,{value:f,signal:g}={})=>{if(g&&g.aborted)return Promise.reject(c());let h,i,j,k=a||clearTimeout,l=()=>{k(h),j(c())},m=()=>{g&&g.removeEventListener("abort",l)},n=new Promise((a,c)=>{i=()=>{m(),d?a(f):c(f)},j=c,h=(b||setTimeout)(i,e)});return g&&g.addEventListener("abort",l,{once:!0}),n.clear=()=>{k(h),h=null,i()},n},e=a=>{let c=d({...a,willResolve:!0});return c.reject=d({...a,willResolve:!1}),c.range=(a,d,e)=>c(b(a,d),e),c},f=e();f.createWithTimers=e,a.exports=f,a.exports.default=f},45001:function(a){"use strict";function b(a,b){var b=b||{};this._head=0,this._tail=0,this._capacity=b.capacity,this._capacityMask=3,this._list=[,,,,],Array.isArray(a)&&this._fromArray(a)}b.prototype.peekAt=function(a){var b=a;if(b===(0|b)){var c=this.size();if(!(b>=c)&&!(b< -c))return b<0&&(b+=c),b=this._head+b&this._capacityMask,this._list[b]}},b.prototype.get=function(a){return this.peekAt(a)},b.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},b.prototype.peekFront=function(){return this.peek()},b.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(b.prototype,"length",{get:function(){return this.size()}}),b.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},b.prototype.unshift=function(a){if(void 0===a)return this.size();var b=this._list.length;return(this._head=this._head-1+b&this._capacityMask,this._list[this._head]=a,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail)?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},b.prototype.shift=function(){var a=this._head;if(a!==this._tail){var b=this._list[a];return this._list[a]=void 0,this._head=a+1&this._capacityMask,a<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),b}},b.prototype.push=function(a){if(void 0===a)return this.size();var b=this._tail;return(this._list[b]=a,this._tail=b+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail)?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},b.prototype.pop=function(){var a=this._tail;if(a!==this._head){var b=this._list.length;this._tail=a-1+b&this._capacityMask;var c=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&a>1e4&&a<=b>>>2&&this._shrinkArray(),c}},b.prototype.removeOne=function(a){var b,c=a;if(c===(0|c)&&this._head!==this._tail){var d=this.size(),e=this._list.length;if(!(c>=d)&&!(c< -d)){c<0&&(c+=d),c=this._head+c&this._capacityMask;var f=this._list[c];if(a<d/2){for(b=a;b>0;b--)this._list[c]=this._list[c=c-1+e&this._capacityMask];this._list[c]=void 0,this._head=this._head+1+e&this._capacityMask}else{for(b=d-1-a;b>0;b--)this._list[c]=this._list[c=c+1+e&this._capacityMask];this._list[c]=void 0,this._tail=this._tail-1+e&this._capacityMask}return f}}},b.prototype.remove=function(a,b){var c,d,e=a,f=b;if(e===(0|e)&&this._head!==this._tail){var g=this.size(),h=this._list.length;if(!(e>=g)&&!(e< -g)&&!(b<1)){if(e<0&&(e+=g),1===b||!b)return(c=[,])[0]=this.removeOne(e),c;if(0===e&&e+b>=g)return c=this.toArray(),this.clear(),c;for(e+b>g&&(b=g-e),c=Array(b),d=0;d<b;d++)c[d]=this._list[this._head+e+d&this._capacityMask];if(e=this._head+e&this._capacityMask,a+b===g){for(this._tail=this._tail-b+h&this._capacityMask,d=b;d>0;d--)this._list[e=e+1+h&this._capacityMask]=void 0;return c}if(0===a){for(this._head=this._head+b+h&this._capacityMask,d=b-1;d>0;d--)this._list[e=e+1+h&this._capacityMask]=void 0;return c}if(e<g/2){for(this._head=this._head+a+b+h&this._capacityMask,d=a;d>0;d--)this.unshift(this._list[e=e-1+h&this._capacityMask]);for(e=this._head-1+h&this._capacityMask;f>0;)this._list[e=e-1+h&this._capacityMask]=void 0,f--;a<0&&(this._tail=e)}else{for(this._tail=e,e=e+b+h&this._capacityMask,d=g-(b+a);d>0;d--)this.push(this._list[e++]);for(e=this._tail;f>0;)this._list[e=e+1+h&this._capacityMask]=void 0,f--}return this._head<2&&this._tail>1e4&&this._tail<=h>>>2&&this._shrinkArray(),c}}},b.prototype.splice=function(a,b){var c=a;if(c===(0|c)){var d=this.size();if(c<0&&(c+=d),!(c>d)){if(!(arguments.length>2))return this.remove(c,b);var e,f,g,h=arguments.length,i=this._list.length,j=2;if(!d||c<d/2){for(e=0,f=Array(c);e<c;e++)f[e]=this._list[this._head+e&this._capacityMask];for(0===b?(g=[],c>0&&(this._head=this._head+c+i&this._capacityMask)):(g=this.remove(c,b),this._head=this._head+c+i&this._capacityMask);h>j;)this.unshift(arguments[--h]);for(e=c;e>0;e--)this.unshift(f[e-1])}else{var k=(f=Array(d-(c+b))).length;for(e=0;e<k;e++)f[e]=this._list[this._head+c+b+e&this._capacityMask];for(0===b?(g=[],c!=d&&(this._tail=this._head+c+i&this._capacityMask)):(g=this.remove(c,b),this._tail=this._tail-k+i&this._capacityMask);j<h;)this.push(arguments[j++]);for(e=0;e<k;e++)this.push(f[e])}return g}}},b.prototype.clear=function(){this._head=0,this._tail=0},b.prototype.isEmpty=function(){return this._head===this._tail},b.prototype.toArray=function(){return this._copyArray(!1)},b.prototype._fromArray=function(a){for(var b=0;b<a.length;b++)this.push(a[b])},b.prototype._copyArray=function(a){var b,c=[],d=this._list,e=d.length;if(a||this._head>this._tail){for(b=this._head;b<e;b++)c.push(d[b]);for(b=0;b<this._tail;b++)c.push(d[b])}else for(b=this._head;b<this._tail;b++)c.push(d[b]);return c},b.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1},b.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},a.exports=b},26905:function(a){var b;a.exports=function(a,b,c,d,e){for(b=b.split?b.split("."):b,d=0;d<b.length;d++)a=a?a[b[d]]:e;return a===e?c:a}},90507:function(a,b,c){"use strict";let d=c(8231);d.EventIterator,d.EventIterator},8231:function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});class c{constructor(){this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}push(a){if(this.isStopped)return;let b={value:a,done:!1};if(this.pullQueue.length){let c=this.pullQueue.shift();c&&c.resolve(b)}else this.pushQueue.push(Promise.resolve(b)),void 0!==this.highWaterMark&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn(`EventIterator queue reached ${this.pushQueue.length} items`))}stop(){if(!this.isStopped){for(let a of(this.isStopped=!0,this.remove(),this.pullQueue))a.resolve({value:void 0,done:!0});this.pullQueue.length=0}}fail(a){if(!this.isStopped){if(this.isStopped=!0,this.remove(),this.pullQueue.length){for(let b of this.pullQueue)b.reject(a);this.pullQueue.length=0}else{let c=Promise.reject(a);c.catch(()=>{}),this.pushQueue.push(c)}}}remove(){Promise.resolve().then(()=>{this.removeCallback&&this.removeCallback()})}[Symbol.asyncIterator](){return{next:a=>{let b=this.pushQueue.shift();return b?(void 0!==this.lowWaterMark&&this.pushQueue.length<=this.lowWaterMark&&this.isPaused&&(this.isPaused=!1,this.eventHandlers.lowWater&&this.eventHandlers.lowWater()),b):this.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise((a,b)=>{this.pullQueue.push({resolve:a,reject:b})})},return:()=>(this.isStopped=!0,this.pushQueue.length=0,this.remove(),Promise.resolve({value:void 0,done:!0}))}}}class d{constructor(a,{highWaterMark:b=100,lowWaterMark:d=1}={}){let e=new c;e.highWaterMark=b,e.lowWaterMark=d,e.removeCallback=a({push:a=>e.push(a),stop:()=>e.stop(),fail:a=>e.fail(a),on:(a,b)=>{e.eventHandlers[a]=b}})||(()=>{}),this[Symbol.asyncIterator]=()=>e[Symbol.asyncIterator](),Object.freeze(this)}}b.EventIterator=d,b.default=d},17187:function(a){"use strict";var b,c="object"==typeof Reflect?Reflect:null,d=c&&"function"==typeof c.apply?c.apply:function(a,b,c){return Function.prototype.apply.call(a,b,c)};b=c&&"function"==typeof c.ownKeys?c.ownKeys:Object.getOwnPropertySymbols?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:function(a){return Object.getOwnPropertyNames(a)};var e=Number.isNaN||function(a){return a!=a};function f(){f.init.call(this)}a.exports=f,a.exports.once=function(a,b){return new Promise(function(c,d){function e(c){a.removeListener(b,f),d(c)}function f(){"function"==typeof a.removeListener&&a.removeListener("error",e),c([].slice.call(arguments))}r(a,b,f,{once:!0}),"error"!==b&&q(a,e,{once:!0})})},f.EventEmitter=f,f.prototype._events=void 0,f.prototype._eventsCount=0,f.prototype._maxListeners=void 0;var g=10;function h(a){if("function"!=typeof a)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof a)}function i(a){return void 0===a._maxListeners?f.defaultMaxListeners:a._maxListeners}function j(a,b,c,d){if(h(c),void 0===(f=a._events)?(f=a._events=Object.create(null),a._eventsCount=0):(void 0!==f.newListener&&(a.emit("newListener",b,c.listener?c.listener:c),f=a._events),g=f[b]),void 0===g)g=f[b]=c,++a._eventsCount;else if("function"==typeof g?g=f[b]=d?[c,g]:[g,c]:d?g.unshift(c):g.push(c),(e=i(a))>0&&g.length>e&&!g.warned){g.warned=!0;var e,f,g,j,k=Error("Possible EventEmitter memory leak detected. "+g.length+" "+String(b)+" listeners added. Use emitter.setMaxListeners() to increase limit");k.name="MaxListenersExceededWarning",k.emitter=a,k.type=b,k.count=g.length,j=k,console&&console.warn&&console.warn(j)}return a}function k(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(a,b,c){var d={fired:!1,wrapFn:void 0,target:a,type:b,listener:c},e=k.bind(d);return e.listener=c,d.wrapFn=e,e}function m(a,b,c){var d=a._events;if(void 0===d)return[];var e=d[b];return void 0===e?[]:"function"==typeof e?c?[e.listener||e]:[e]:c?p(e):o(e,e.length)}function n(a){var b=this._events;if(void 0!==b){var c=b[a];if("function"==typeof c)return 1;if(void 0!==c)return c.length}return 0}function o(a,b){for(var c=Array(b),d=0;d<b;++d)c[d]=a[d];return c}function p(a){for(var b=Array(a.length),c=0;c<b.length;++c)b[c]=a[c].listener||a[c];return b}function q(a,b,c){"function"==typeof a.on&&r(a,"error",b,c)}function r(a,b,c,d){if("function"==typeof a.on)d.once?a.once(b,c):a.on(b,c);else if("function"==typeof a.addEventListener)a.addEventListener(b,function e(f){d.once&&a.removeEventListener(b,e),c(f)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a)}Object.defineProperty(f,"defaultMaxListeners",{enumerable:!0,get:function(){return g},set:function(a){if("number"!=typeof a||a<0||e(a))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");g=a}}),f.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},f.prototype.setMaxListeners=function(a){if("number"!=typeof a||a<0||e(a))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+a+".");return this._maxListeners=a,this},f.prototype.getMaxListeners=function(){return i(this)},f.prototype.emit=function(a){for(var b=[],c=1;c<arguments.length;c++)b.push(arguments[c]);var e="error"===a,f=this._events;if(void 0!==f)e=e&& void 0===f.error;else if(!e)return!1;if(e){if(b.length>0&&(g=b[0]),g instanceof Error)throw g;var g,h=Error("Unhandled error."+(g?" ("+g.message+")":""));throw h.context=g,h}var i=f[a];if(void 0===i)return!1;if("function"==typeof i)d(i,this,b);else for(var j=i.length,k=o(i,j),c=0;c<j;++c)d(k[c],this,b);return!0},f.prototype.addListener=function(a,b){return j(this,a,b,!1)},f.prototype.on=f.prototype.addListener,f.prototype.prependListener=function(a,b){return j(this,a,b,!0)},f.prototype.once=function(a,b){return h(b),this.on(a,l(this,a,b)),this},f.prototype.prependOnceListener=function(a,b){return h(b),this.prependListener(a,l(this,a,b)),this},f.prototype.removeListener=function(a,b){var c,d,e,f,g;if(h(b),void 0===(d=this._events)|| void 0===(c=d[a]))return this;if(c===b||c.listener===b)0== --this._eventsCount?this._events=Object.create(null):(delete d[a],d.removeListener&&this.emit("removeListener",a,c.listener||b));else if("function"!=typeof c){for(e=-1,f=c.length-1;f>=0;f--)if(c[f]===b||c[f].listener===b){g=c[f].listener,e=f;break}if(e<0)return this;0===e?c.shift():function a(b,c){for(;c+1<b.length;c++)b[c]=b[c+1];b.pop()}(c,e),1===c.length&&(d[a]=c[0]),void 0!==d.removeListener&&this.emit("removeListener",a,g||b)}return this},f.prototype.off=f.prototype.removeListener,f.prototype.removeAllListeners=function(a){var b,c,d;if(void 0===(c=this._events))return this;if(void 0===c.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==c[a]&&(0== --this._eventsCount?this._events=Object.create(null):delete c[a]),this;if(0===arguments.length){var e,f=Object.keys(c);for(d=0;d<f.length;++d)"removeListener"!==(e=f[d])&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(b=c[a]))this.removeListener(a,b);else if(void 0!==b)for(d=b.length-1;d>=0;d--)this.removeListener(a,b[d]);return this},f.prototype.listeners=function(a){return m(this,a,!0)},f.prototype.rawListeners=function(a){return m(this,a,!1)},f.listenerCount=function(a,b){return"function"==typeof a.listenerCount?a.listenerCount(b):n.call(a,b)},f.prototype.listenerCount=n,f.prototype.eventNames=function(){return this._eventsCount>0?b(this._events):[]}},3975:function(a){a.exports=class{constructor(a){if(!(a>0)||(a-1&a)!=0)throw Error("Max size for a FixedFIFO should be a power of two");this.buffer=Array(a),this.mask=a-1,this.top=0,this.btm=0,this.next=null}push(a){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=a,this.top=this.top+1&this.mask,!0)}shift(){let a=this.buffer[this.btm];if(void 0!==a)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,a}peek(){return this.buffer[this.btm]}isEmpty(){return void 0===this.buffer[this.btm]}}},91607:function(a,b,c){let d=c(3975);a.exports=class{constructor(a){this.hwm=a||16,this.head=new d(this.hwm),this.tail=this.head}push(a){if(!this.head.push(a)){let b=this.head;this.head=b.next=new d(2*this.head.buffer.length),this.head.push(a)}}shift(){let a=this.tail.shift();if(void 0===a&&this.tail.next){let b=this.tail.next;return this.tail.next=null,this.tail=b,this.tail.shift()}return a}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}},96132:function(a,b){"use strict";function c(a,b=c.BASE){let d=a.length;for(let e=0;e<d;e++)b^=a.charCodeAt(e),b+=(b<<1)+(b<<4)+(b<<7)+(b<<8)+(b<<24);return b>>>0}Object.defineProperty(b,"__esModule",{value:!0}),c.BASE=2166136261,b.default=c,a.exports=c},30043:function(a,b,c){"use strict";let d=c(20544),{fromString:e}=c(52217);class f{constructor(a,b,c=0){this._options=a,this._popCount=0,this._parent=b,this._posAtParent=c,this._children=new d,this.key=null}async put(a,b){let c=await this._findNewBucketAndPos(a);await c.bucket._putAt(c,a,b)}async get(a){let b=await this._findChild(a);if(b)return b.value}async del(a){let b=await this._findPlace(a),c=b.bucket._at(b.pos);c&&c.key===a&&b.bucket._delAt(b.pos)}leafCount(){let a=this._children.compactArray();return a.reduce((a,b)=>b instanceof f?a+b.leafCount():a+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){let a=this._children.compactArray();for(let b of a)b instanceof f?yield*b.eachLeafSeries():yield b;return[]}serialize(a,b){return b(this._children.reduce((c,d,e)=>(d&&(d instanceof f?c.push(d.serialize(a,b)):c.push(a(d,e))),c),[]))}asyncTransform(a,b){return j(this,a,b)}toJSON(){return this.serialize(h,i)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(a){let b=await this._findPlace(a),c=b.bucket._at(b.pos);if(!(c instanceof f)&&c&&c.key===a)return c}async _findPlace(a){let b=this._options.hash("string"==typeof a?e(a):a),c=await b.take(this._options.bits),d=this._children.get(c);return d instanceof f?d._findPlace(b):{bucket:this,pos:c,hash:b,existingChild:d}}async _findNewBucketAndPos(a){let b=await this._findPlace(a);if(b.existingChild&&b.existingChild.key!==a){let c=new f(this._options,b.bucket,b.pos);b.bucket._putObjectAt(b.pos,c);let d=await c._findPlace(b.existingChild.hash);return d.bucket._putAt(d,b.existingChild.key,b.existingChild.value),c._findNewBucketAndPos(b.hash)}return b}_putAt(a,b,c){this._putObjectAt(a.pos,{key:b,value:c,hash:a.hash})}_putObjectAt(a,b){!this._children.get(a)&&this._popCount++,this._children.set(a,b)}_delAt(a){if(-1===a)throw Error("Invalid position");this._children.get(a)&&this._popCount--,this._children.unset(a),this._level()}_level(){if(this._parent&&this._popCount<=1){if(1===this._popCount){let a=this._children.find(g);if(a&&!(a instanceof f)){let b=a.hash;b.untake(this._options.bits);let c={pos:this._posAtParent,hash:b,bucket:this._parent};this._parent._putAt(c,a.key,a.value)}}else this._parent._delAt(this._posAtParent)}}_at(a){return this._children.get(a)}}function g(a){return Boolean(a)}function h(a,b){return a.key}function i(a){return a}async function j(a,b,c){let d=[];for(let e of a._children.compactArray())if(e instanceof f)await j(e,b,c);else{let g=await b(e);d.push({bitField:a._children.bitField(),children:g})}return c(d)}a.exports=f},51536:function(a){"use strict";let b=[255,254,252,248,240,224,192,128],c=[1,3,7,15,31,63,127,255];function d(a,b,c){let d=e(b,c);return(a&d)>>>b}function e(a,d){return b[a]&c[Math.min(d+a-1,7)]}a.exports=class{constructor(a){this._value=a,this._currentBytePos=a.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+8*this._currentBytePos}totalBits(){return 8*this._value.length}take(a){let b=a,c=0;for(;b&&this._haveBits();){let e=this._value[this._currentBytePos],f=this._currentBitPos+1,g=Math.min(f,b),h=d(e,f-g,g);c=(c<<g)+h,b-=g,this._currentBitPos-=g,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return c}untake(a){for(this._currentBitPos+=a;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}}},31712:function(a,b,c){"use strict";let d=c(51536),{concat:e}=c(20605);class f{constructor(a,b){if(!(a instanceof Uint8Array))throw Error("can only hash Uint8Arrays");this._value=a,this._hashFn=b,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(a){let b=a;for(;this._availableBits<b;)await this._produceMoreBits();let c=0;for(;b>0;){let d=this._buffers[this._currentBufferIndex],e=Math.min(d.availableBits(),b),f=d.take(e);c=(c<<e)+f,b-=e,this._availableBits-=e,0===d.availableBits()&&this._currentBufferIndex++}return c}untake(a){let b=a;for(;b>0;){let c=this._buffers[this._currentBufferIndex],d=Math.min(c.totalBits()-c.availableBits(),b);c.untake(d),b-=d,this._availableBits+=d,this._currentBufferIndex>0&&c.totalBits()===c.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;let a=this._depth?e([this._value,Uint8Array.from([this._depth])]):this._value,b=await this._hashFn(a),c=new d(b);this._buffers.push(c),this._availableBits+=c.availableBits()}}a.exports=function(a){return function(b){return b instanceof f?b:new f(b,a)}},a.exports.InfiniteHash=f},54563:function(a,b,c){"use strict";let d=c(30043),e=c(31712);a.exports={createHAMT:function(a){if(!a||!a.hashFn)throw Error("please define an options.hashFn");let b={bits:a.bits||8,hash:e(a.hashFn)};return new d(b)},Bucket:d}},70248:function(a){a.exports=function(a){if(!a)throw Error("hashlru must have a max value, of type number, greater than 0");var b=0,c=Object.create(null),d=Object.create(null);function e(e,f){c[e]=f,++b>=a&&(b=0,d=c,c=Object.create(null))}return{has:function(a){return void 0!==c[a]|| void 0!==d[a]},remove:function(a){void 0!==c[a]&&(c[a]=void 0),void 0!==d[a]&&(d[a]=void 0)},get:function(a){var b=c[a];return void 0!==b?b:void 0!==(b=d[a])?(e(a,b),b):void 0},set:function(a,b){void 0!==c[a]?c[a]=b:e(a,b)},clear:function(){c=Object.create(null),d=Object.create(null)}}}},1476:function(a){"use strict";let b="[a-fA-F\\d:]",c=a=>a&&a.includeBoundaries?`(?:(?<=\\s|^)(?=${b})|(?<=${b})(?=\\s|$))`:"",d="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",e="[a-fA-F\\d]{1,4}",f=`
(?:
(?:${e}:){7}(?:${e}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${e}:){6}(?:${d}|:${e}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${e}:){5}(?::${d}|(?::${e}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${e}:){4}(?:(?::${e}){0,1}:${d}|(?::${e}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${e}:){3}(?:(?::${e}){0,2}:${d}|(?::${e}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${e}:){2}(?:(?::${e}){0,3}:${d}|(?::${e}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${e}:){1}(?:(?::${e}){0,4}:${d}|(?::${e}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${e}){0,5}:${d}|(?::${e}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),g=RegExp(`(?:^${d}$)|(?:^${f}$)`),h=RegExp(`^${d}$`),i=RegExp(`^${f}$`),j=a=>a&&a.exact?g:RegExp(`(?:${c(a)}${d}${c(a)})|(?:${c(a)}${f}${c(a)})`,"g");j.v4=a=>a&&a.exact?h:RegExp(`${c(a)}${d}${c(a)}`,"g"),j.v6=a=>a&&a.exact?i:RegExp(`${c(a)}${f}${c(a)}`,"g"),a.exports=j},56512:function(a){!function(b){"use strict";let c="(0?\\d+|0x[a-f0-9]+)",d={fourOctet:RegExp(`^${c}\\.${c}\\.${c}\\.${c}$`,"i"),threeOctet:RegExp(`^${c}\\.${c}\\.${c}$`,"i"),twoOctet:RegExp(`^${c}\\.${c}$`,"i"),longValue:RegExp(`^${c}$`,"i")},e=RegExp("^0[0-7]+$","i"),f=RegExp("^0x[a-f0-9]+$","i"),g="%[0-9a-z]{1,}",h="(?:[0-9a-f]+::?)+",i={zoneIndex:RegExp(g,"i"),native:RegExp(`^(::)?(${h})?([0-9a-f]+)?(::)?(${g})?$`,"i"),deprecatedTransitional:RegExp(`^(?:::)(${c}\\.${c}\\.${c}\\.${c}(${g})?)$`,"i"),transitional:RegExp(`^((?:${h})|(?:::)(?:${h})?)${c}\\.${c}\\.${c}\\.${c}(${g})?$`,"i")};function j(a,b){if(a.indexOf("::")!==a.lastIndexOf("::"))return null;let c=0,d=-1,e=(a.match(i.zoneIndex)||[])[0],f,g;for(e&&(e=e.substring(1),a=a.replace(/%.+$/,""));(d=a.indexOf(":",d+1))>=0;)c++;if("::"===a.substr(0,2)&&c--,"::"===a.substr(-2,2)&&c--,c>b)return null;for(g=b-c,f=":";g--;)f+="0:";return":"===(a=a.replace("::",f))[0]&&(a=a.slice(1)),":"===a[a.length-1]&&(a=a.slice(0,-1)),{parts:b=function(){let b=a.split(":"),c=[];for(let d=0;d<b.length;d++)c.push(parseInt(b[d],16));return c}(),zoneId:e}}function k(a,b,c,d){if(a.length!==b.length)throw Error("ipaddr: cannot match CIDR for objects with different lengths");let e=0,f;for(;d>0;){if((f=c-d)<0&&(f=0),a[e]>>f!=b[e]>>f)return!1;d-=c,e+=1}return!0}function l(a){if(f.test(a))return parseInt(a,16);if("0"===a[0]&&!isNaN(parseInt(a[1],10))){if(e.test(a))return parseInt(a,8);throw Error(`ipaddr: cannot parse ${a} as octal`)}return parseInt(a,10)}function m(a,b){for(;a.length<b;)a=`0${a}`;return a}let n={};n.IPv4=function(){function a(a){if(4!==a.length)throw Error("ipaddr: ipv4 octet count should be 4");let b,c;for(b=0;b<a.length;b++)if(!(0<=(c=a[b])&&c<=255))throw Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=a}return a.prototype.SpecialRanges={unspecified:[[new a([0,0,0,0]),8]],broadcast:[[new a([255,255,255,255]),32]],multicast:[[new a([224,0,0,0]),4]],linkLocal:[[new a([169,254,0,0]),16]],loopback:[[new a([127,0,0,0]),8]],carrierGradeNat:[[new a([100,64,0,0]),10]],private:[[new a([10,0,0,0]),8],[new a([172,16,0,0]),12],[new a([192,168,0,0]),16]],reserved:[[new a([192,0,0,0]),24],[new a([192,0,2,0]),24],[new a([192,88,99,0]),24],[new a([198,51,100,0]),24],[new a([203,0,113,0]),24],[new a([240,0,0,0]),4]]},a.prototype.kind=function(){return"ipv4"},a.prototype.match=function(a,b){let c;if(void 0===b&&(a=(c=a)[0],b=c[1]),"ipv4"!==a.kind())throw Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return k(this.octets,a.octets,8,b)},a.prototype.prefixLengthFromSubnetMask=function(){let a=0,b=!1,c={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},d,e,f;for(d=3;d>=0;d-=1){if(!((e=this.octets[d])in c)||(f=c[e],b&&0!==f))return null;8!==f&&(b=!0),a+=f}return 32-a},a.prototype.range=function(){return n.subnetMatch(this,this.SpecialRanges)},a.prototype.toByteArray=function(){return this.octets.slice(0)},a.prototype.toIPv4MappedAddress=function(){return n.IPv6.parse(`::ffff:${this.toString()}`)},a.prototype.toNormalizedString=function(){return this.toString()},a.prototype.toString=function(){return this.octets.join(".")},a}(),n.IPv4.broadcastAddressFromCIDR=function(a){try{let b=this.parseCIDR(a),c=b[0].toByteArray(),d=this.subnetMaskFromPrefixLength(b[1]).toByteArray(),e=[],f=0;for(;f<4;)e.push(parseInt(c[f],10)|255^parseInt(d[f],10)),f++;return new this(e)}catch(g){throw Error("ipaddr: the address does not have IPv4 CIDR format")}},n.IPv4.isIPv4=function(a){return null!==this.parser(a)},n.IPv4.isValid=function(a){try{return new this(this.parser(a)),!0}catch(b){return!1}},n.IPv4.isValidFourPartDecimal=function(a){return!!(n.IPv4.isValid(a)&&a.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},n.IPv4.networkAddressFromCIDR=function(a){let b,c,d,e,f;try{for(d=(b=this.parseCIDR(a))[0].toByteArray(),f=this.subnetMaskFromPrefixLength(b[1]).toByteArray(),e=[],c=0;c<4;)e.push(parseInt(d[c],10)&parseInt(f[c],10)),c++;return new this(e)}catch(g){throw Error("ipaddr: the address does not have IPv4 CIDR format")}},n.IPv4.parse=function(a){let b=this.parser(a);if(null===b)throw Error("ipaddr: string is not formatted like an IPv4 Address");return new this(b)},n.IPv4.parseCIDR=function(a){let b;if(b=a.match(/^(.+)\/(\d+)$/)){let c=parseInt(b[2]);if(c>=0&&c<=32){let d=[this.parse(b[1]),c];return Object.defineProperty(d,"toString",{value:function(){return this.join("/")}}),d}}throw Error("ipaddr: string is not formatted like an IPv4 CIDR range")},n.IPv4.parser=function(a){let b,c,e;if(b=a.match(d.fourOctet))return function(){let a=b.slice(1,6),d=[];for(let e=0;e<a.length;e++)d.push(l(c=a[e]));return d}();if(b=a.match(d.longValue)){if((e=l(b[1]))>4294967295||e<0)throw Error("ipaddr: address outside defined range");return(function(){let a=[],b;for(b=0;b<=24;b+=8)a.push(e>>b&255);return a})().reverse()}return(b=a.match(d.twoOctet))?function(){let a=b.slice(1,4),c=[];if((e=l(a[1]))>16777215||e<0)throw Error("ipaddr: address outside defined range");return c.push(l(a[0])),c.push(e>>16&255),c.push(e>>8&255),c.push(255&e),c}():(b=a.match(d.threeOctet))?function(){let a=b.slice(1,5),c=[];if((e=l(a[2]))>65535||e<0)throw Error("ipaddr: address outside defined range");return c.push(l(a[0])),c.push(l(a[1])),c.push(e>>8&255),c.push(255&e),c}():null},n.IPv4.subnetMaskFromPrefixLength=function(a){if((a=parseInt(a))<0||a>32)throw Error("ipaddr: invalid IPv4 prefix length");let b=[0,0,0,0],c=0,d=Math.floor(a/8);for(;c<d;)b[c]=255,c++;return d<4&&(b[d]=Math.pow(2,a%8)-1<<8-a%8),new this(b)},n.IPv6=function(){function a(a,b){let c,d;if(16===a.length)for(c=0,this.parts=[];c<=14;c+=2)this.parts.push(a[c]<<8|a[c+1]);else if(8===a.length)this.parts=a;else throw Error("ipaddr: ipv6 part count should be 8 or 16");for(c=0;c<this.parts.length;c++)if(!(0<=(d=this.parts[c])&&d<=65535))throw Error("ipaddr: ipv6 part should fit in 16 bits");b&&(this.zoneId=b)}return a.prototype.SpecialRanges={unspecified:[new a([0,0,0,0,0,0,0,0]),128],linkLocal:[new a([65152,0,0,0,0,0,0,0]),10],multicast:[new a([65280,0,0,0,0,0,0,0]),8],loopback:[new a([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new a([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new a([0,0,0,0,0,65535,0,0]),96],rfc6145:[new a([0,0,0,0,65535,0,0,0]),96],rfc6052:[new a([100,65435,0,0,0,0,0,0]),96],"6to4":[new a([8194,0,0,0,0,0,0,0]),16],teredo:[new a([8193,0,0,0,0,0,0,0]),32],reserved:[[new a([8193,3512,0,0,0,0,0,0]),32]]},a.prototype.isIPv4MappedAddress=function(){return"ipv4Mapped"===this.range()},a.prototype.kind=function(){return"ipv6"},a.prototype.match=function(a,b){let c;if(void 0===b&&(a=(c=a)[0],b=c[1]),"ipv6"!==a.kind())throw Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return k(this.parts,a.parts,16,b)},a.prototype.prefixLengthFromSubnetMask=function(){let a=0,b=!1,c={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},d,e;for(let f=7;f>=0;f-=1){if(!((d=this.parts[f])in c)||(e=c[d],b&&0!==e))return null;16!==e&&(b=!0),a+=e}return 128-a},a.prototype.range=function(){return n.subnetMatch(this,this.SpecialRanges)},a.prototype.toByteArray=function(){let a,b=[],c=this.parts;for(let d=0;d<c.length;d++)b.push((a=c[d])>>8),b.push(255&a);return b},a.prototype.toFixedLengthString=function(){let a=(function(){let a=[];for(let b=0;b<this.parts.length;b++)a.push(m(this.parts[b].toString(16),4));return a}).call(this).join(":"),b="";return this.zoneId&&(b=`%${this.zoneId}`),a+b},a.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw Error("ipaddr: trying to convert a generic ipv6 address to ipv4");let a=this.parts.slice(-2),b=a[0],c=a[1];return new n.IPv4([b>>8,255&b,c>>8,255&c])},a.prototype.toNormalizedString=function(){let a=(function(){let a=[];for(let b=0;b<this.parts.length;b++)a.push(this.parts[b].toString(16));return a}).call(this).join(":"),b="";return this.zoneId&&(b=`%${this.zoneId}`),a+b},a.prototype.toRFC5952String=function(){let a=/((^|:)(0(:|$)){2,})/g,b=this.toNormalizedString(),c=0,d=-1,e;for(;e=a.exec(b);)e[0].length>d&&(c=e.index,d=e[0].length);return d<0?b:`${b.substring(0,c)}::${b.substring(c+d)}`},a.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},a}(),n.IPv6.broadcastAddressFromCIDR=function(a){try{let b=this.parseCIDR(a),c=b[0].toByteArray(),d=this.subnetMaskFromPrefixLength(b[1]).toByteArray(),e=[],f=0;for(;f<16;)e.push(parseInt(c[f],10)|255^parseInt(d[f],10)),f++;return new this(e)}catch(g){throw Error(`ipaddr: the address does not have IPv6 CIDR format (${g})`)}},n.IPv6.isIPv6=function(a){return null!==this.parser(a)},n.IPv6.isValid=function(a){if("string"==typeof a&& -1===a.indexOf(":"))return!1;try{let b=this.parser(a);return new this(b.parts,b.zoneId),!0}catch(c){return!1}},n.IPv6.networkAddressFromCIDR=function(a){let b,c,d,e,f;try{for(d=(b=this.parseCIDR(a))[0].toByteArray(),f=this.subnetMaskFromPrefixLength(b[1]).toByteArray(),e=[],c=0;c<16;)e.push(parseInt(d[c],10)&parseInt(f[c],10)),c++;return new this(e)}catch(g){throw Error(`ipaddr: the address does not have IPv6 CIDR format (${g})`)}},n.IPv6.parse=function(a){let b=this.parser(a);if(null===b.parts)throw Error("ipaddr: string is not formatted like an IPv6 Address");return new this(b.parts,b.zoneId)},n.IPv6.parseCIDR=function(a){let b,c,d;if((c=a.match(/^(.+)\/(\d+)$/))&&(b=parseInt(c[2]))>=0&&b<=128)return Object.defineProperty(d=[this.parse(c[1]),b],"toString",{value:function(){return this.join("/")}}),d;throw Error("ipaddr: string is not formatted like an IPv6 CIDR range")},n.IPv6.parser=function(a){let b,c,d,e,f,g;if(d=a.match(i.deprecatedTransitional))return this.parser(`::ffff:${d[1]}`);if(i.native.test(a))return j(a,8);if((d=a.match(i.transitional))&&(g=d[6]||"",b=j(d[1].slice(0,-1)+g,6),b.parts)){for(c=0,f=[parseInt(d[2]),parseInt(d[3]),parseInt(d[4]),parseInt(d[5])];c<f.length;c++)if(!(0<=(e=f[c])&&e<=255))return null;return b.parts.push(f[0]<<8|f[1]),b.parts.push(f[2]<<8|f[3]),{parts:b.parts,zoneId:b.zoneId}}return null},n.IPv6.subnetMaskFromPrefixLength=function(a){if((a=parseInt(a))<0||a>128)throw Error("ipaddr: invalid IPv6 prefix length");let b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=0,d=Math.floor(a/8);for(;c<d;)b[c]=255,c++;return d<16&&(b[d]=Math.pow(2,a%8)-1<<8-a%8),new this(b)},n.fromByteArray=function(a){let b=a.length;if(4===b)return new n.IPv4(a);if(16===b)return new n.IPv6(a);throw Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},n.isValid=function(a){return n.IPv6.isValid(a)||n.IPv4.isValid(a)},n.parse=function(a){if(n.IPv6.isValid(a))return n.IPv6.parse(a);if(n.IPv4.isValid(a))return n.IPv4.parse(a);throw Error("ipaddr: the address has neither IPv6 nor IPv4 format")},n.parseCIDR=function(a){try{return n.IPv6.parseCIDR(a)}catch(b){try{return n.IPv4.parseCIDR(a)}catch(c){throw Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},n.process=function(a){let b=this.parse(a);return"ipv6"===b.kind()&&b.isIPv4MappedAddress()?b.toIPv4Address():b},n.subnetMatch=function(a,b,c){let d,e,f,g;for(e in null==c&&(c="unicast"),b)if(Object.prototype.hasOwnProperty.call(b,e)){for(!(f=b[e])[0]||f[0]instanceof Array||(f=[f]),d=0;d<f.length;d++)if(g=f[d],a.kind()===g[0].kind()&&a.match.apply(a,g))return e}return c},a.exports?a.exports=n:b.ipaddr=n}(this)},39920:function(a){"use strict";var b=Object.prototype.hasOwnProperty,c="~";function d(){}function e(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function f(a,b,d,f,g){if("function"!=typeof d)throw TypeError("The listener must be a function");var h=new e(d,f||a,g),i=c?c+b:b;return a._events[i]?a._events[i].fn?a._events[i]=[a._events[i],h]:a._events[i].push(h):(a._events[i]=h,a._eventsCount++),a}function g(a,b){0== --a._eventsCount?a._events=new d:delete a._events[b]}function h(){this._events=new d,this._eventsCount=0}Object.create&&(d.prototype=Object.create(null),new d().__proto__||(c=!1)),h.prototype.eventNames=function(){var a,d,e=[];if(0===this._eventsCount)return e;for(d in a=this._events)b.call(a,d)&&e.push(c?d.slice(1):d);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(a)):e},h.prototype.listeners=function(a){var b=c?c+a:a,d=this._events[b];if(!d)return[];if(d.fn)return[d.fn];for(var e=0,f=d.length,g=Array(f);e<f;e++)g[e]=d[e].fn;return g},h.prototype.listenerCount=function(a){var b=c?c+a:a,d=this._events[b];return d?d.fn?1:d.length:0},h.prototype.emit=function(a,b,d,e,f,g){var h=c?c+a:a;if(!this._events[h])return!1;var i,j,k=this._events[h],l=arguments.length;if(k.fn){switch(k.once&&this.removeListener(a,k.fn,void 0,!0),l){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,d),!0;case 4:return k.fn.call(k.context,b,d,e),!0;case 5:return k.fn.call(k.context,b,d,e,f),!0;case 6:return k.fn.call(k.context,b,d,e,f,g),!0}for(j=1,i=Array(l-1);j<l;j++)i[j-1]=arguments[j];k.fn.apply(k.context,i)}else{var m,n=k.length;for(j=0;j<n;j++)switch(k[j].once&&this.removeListener(a,k[j].fn,void 0,!0),l){case 1:k[j].fn.call(k[j].context);break;case 2:k[j].fn.call(k[j].context,b);break;case 3:k[j].fn.call(k[j].context,b,d);break;case 4:k[j].fn.call(k[j].context,b,d,e);break;default:if(!i)for(m=1,i=Array(l-1);m<l;m++)i[m-1]=arguments[m];k[j].fn.apply(k[j].context,i)}}return!0},h.prototype.on=function(a,b,c){return f(this,a,b,c,!1)},h.prototype.once=function(a,b,c){return f(this,a,b,c,!0)},h.prototype.removeListener=function(a,b,d,e){var f=c?c+a:a;if(!this._events[f])return this;if(!b)return g(this,f),this;var h=this._events[f];if(h.fn)h.fn!==b||e&&!h.once||d&&h.context!==d||g(this,f);else{for(var i=0,j=[],k=h.length;i<k;i++)(h[i].fn!==b||e&&!h[i].once||d&&h[i].context!==d)&&j.push(h[i]);j.length?this._events[f]=1===j.length?j[0]:j:g(this,f)}return this},h.prototype.removeAllListeners=function(a){var b;return a?(b=c?c+a:a,this._events[b]&&g(this,b)):(this._events=new d,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=c,h.EventEmitter=h,a.exports=h},25457:function(a){let b=(...a)=>{let b;for(;a.length;)b=a.shift()(b);return b},c=a=>a&&("function"==typeof a[Symbol.asyncIterator]||"function"==typeof a[Symbol.iterator]||"function"==typeof a.next),d=a=>a&&"function"==typeof a.sink&&c(a.source),e=a=>b=>(a.sink(b),a.source),f=(...a)=>{if(d(a[0])){let f=a[0];a[0]=()=>f.source}else if(c(a[0])){let g=a[0];a[0]=()=>g}if(a.length>1&&d(a[a.length-1])&&(a[a.length-1]=a[a.length-1].sink),a.length>2)for(let h=1;h<a.length-1;h++)d(a[h])&&(a[h]=e(a[h]));return b(...a)};a.exports=f,a.exports.pipe=f,a.exports.rawPipe=b,a.exports.isIterable=c,a.exports.isDuplex=d},40677:function(a,b,c){let d=c(91607);a.exports=a=>{let b;"function"==typeof(a=a||{})?(b=a,a={}):b=a.onEnd;let c=new d,e,f,g,h=()=>{if(!c.isEmpty()){if(a.writev){let b,d=[];for(;!c.isEmpty();){if((b=c.shift()).error)throw b.error;d.push(b.value)}return{done:b.done,value:d}}let h=c.shift();if(h.error)throw h.error;return h}return g?{done:!0}:new Promise((b,c)=>{f=d=>(f=null,d.error?c(d.error):a.writev&&!d.done?b({done:d.done,value:[d.value]}):b(d),e)})},i=a=>f?f(a):(c.push(a),e),j=a=>(c=new d,f)?f({error:a}):(c.push({error:a}),e),k=a=>g?e:i({done:!1,value:a}),l=a=>g?e:(g=!0,a?j(a):i({done:!0})),m=()=>(c=new d,l(),{done:!0}),n=a=>(l(a),{done:!0});if(e={[Symbol.asyncIterator](){return this},next:h,return:m,throw:n,push:k,end:l},!b)return e;let o=e;return e={[Symbol.asyncIterator](){return this},next(){return o.next()},throw(a){return o.throw(a),b&&(b(a),b=null),{done:!0}},return(){return o.return(),b&&(b(),b=null),{done:!0}},push:k,end(a){return o.end(a),b&&(b(a),b=null),e}}}},57027:function(a){a.exports=function(a,c,d){var e,f,g;if(Array.isArray(c)&&(e=c.slice(0)),"string"==typeof c&&(e=c.split(".")),"symbol"==typeof c&&(e=[c]),!Array.isArray(e))throw Error("props arg must be an array, a string or a symbol");if(!(f=e.pop()))return!1;for(b(f);g=e.shift();)if(b(g),void 0===a[g]&&(a[g]={}),!(a=a[g])||"object"!=typeof a)return!1;return a[f]=d,!0};function b(a){if("__proto__"===a||"constructor"===a||"prototype"===a)throw Error("setting of prototype values not supported")}},34134:function(a,b,c){let d=c(17187).EventEmitter,{nanoid:e}=c(78647),{WORKER_REQUEST_READ_LOCK:f,WORKER_RELEASE_READ_LOCK:g,MASTER_GRANT_READ_LOCK:h,WORKER_REQUEST_WRITE_LOCK:i,WORKER_RELEASE_WRITE_LOCK:j,MASTER_GRANT_WRITE_LOCK:k}=c(2932),l=c(43049),m=(a,b,c,d,e)=>(f,g)=>{if(!g||!g.data||g.data.type!==c)return;let h={type:g.data.type,name:g.data.name,identifier:g.data.identifier};a.emit(b,h.name,()=>(f.postMessage({type:e,name:h.name,identifier:h.identifier}),new Promise(a=>{let b=c=>{if(!c||!c.data)return;let e={type:c.data.type,name:c.data.name,identifier:c.data.identifier};e&&e.type===d&&e.identifier===h.identifier&&(f.removeEventListener("message",b),a())};f.addEventListener("message",b)})))},n=(a,b,c,d)=>()=>{let f=e();return globalThis.postMessage({type:b,identifier:f,name:a}),new Promise(b=>{let e=g=>{if(!g||!g.data)return;let h={type:g.data.type,identifier:g.data.identifier};h&&h.type===c&&h.identifier===f&&(globalThis.removeEventListener("message",e),b(()=>{globalThis.postMessage({type:d,identifier:f,name:a})}))};globalThis.addEventListener("message",e)})},o={singleProcess:!1};a.exports=a=>{a=Object.assign({},o,a);let b=!!globalThis.document||a.singleProcess;if(b){let c=new d;return l.addEventListener("message",m(c,"requestReadLock",f,g,h)),l.addEventListener("message",m(c,"requestWriteLock",i,j,k)),c}return{isWorker:!0,readLock:a=>n(a,f,h,g),writeLock:a=>n(a,i,k,j)}}},2932:function(a){a.exports={WORKER_REQUEST_READ_LOCK:"lock:worker:request-read",WORKER_RELEASE_READ_LOCK:"lock:worker:release-read",MASTER_GRANT_READ_LOCK:"lock:master:grant-read",WORKER_REQUEST_WRITE_LOCK:"lock:worker:request-write",WORKER_RELEASE_WRITE_LOCK:"lock:worker:release-write",MASTER_GRANT_WRITE_LOCK:"lock:master:grant-write"}},59526:function(a,b,c){let d=c(94930),e=c(34134),{default:f}=c(56827),{timeout:g}=c(54501),h=c(43049),i={},j;function k(a,b){let c,d=new Promise(a=>{c=a});return a.add(()=>g(new Promise(a=>{c(()=>{a()})}),b.timeout)),d}let l=(a,b)=>{if(j.isWorker)return{readLock:j.readLock(a,b),writeLock:j.writeLock(a,b)};let c=new f({concurrency:1}),d=null;return{readLock:()=>{if(d)return k(d,b);d=new f({concurrency:b.concurrency,autoStart:!1});let a=d,e=k(d,b);return c.add(()=>(a.start(),a.onIdle().then(()=>{d===a&&(d=null)}))),e},writeLock:()=>(d=null,k(c,b))}},m={concurrency:1/0,timeout:846e5,global:c.g,singleProcess:!1};a.exports=(a,b)=>(b||(b={}),"object"==typeof a&&(b=a,a="lock"),a||(a="lock"),b=Object.assign({},m,b),j||(j=d(b)||e(b)).isWorker||(j.on("requestReadLock",(a,b)=>{i[a]&&i[a].readLock().then(a=>b().finally(()=>a()))}),j.on("requestWriteLock",async(a,b)=>{i[a]&&i[a].writeLock().then(a=>b().finally(()=>a()))})),i[a]||(i[a]=l(a,b)),i[a]),a.exports.Worker=function(a,b){b=b||c.g.Worker;let d;try{d=new b(a)}catch(e){e.message.includes("not a constructor")&&(d=b(a))}if(!d)throw Error("Could not create Worker from",b);return h(d),d}},94930:function(a,b,c){var d=c(34155);let e=c(17187).EventEmitter,{nanoid:f}=c(78647),{WORKER_REQUEST_READ_LOCK:g,WORKER_RELEASE_READ_LOCK:h,MASTER_GRANT_READ_LOCK:i,WORKER_REQUEST_WRITE_LOCK:j,WORKER_RELEASE_WRITE_LOCK:k,MASTER_GRANT_WRITE_LOCK:l}=c(2932),m,n=(a,b,c,d,e)=>(f,g)=>{g&&g.type===c&&a.emit(b,g.name,()=>(f.send({type:e,name:g.name,identifier:g.identifier}),new Promise(a=>{let b=c=>{c&&c.type===d&&c.identifier===g.identifier&&(f.removeListener("message",b),a())};f.on("message",b)})))},o=(a,b,c,e)=>()=>{let g=f();return d.send({type:b,identifier:g,name:a}),new Promise(b=>{let f=h=>{h&&h.type===c&&h.identifier===g&&(d.removeListener("message",f),b(()=>{d.send({type:e,identifier:g,name:a})}))};d.on("message",f)})};a.exports=a=>{try{if(m=c(79156),!Object.keys(m).length)return}catch(b){return}if(m.isMaster||a.singleProcess){let d=new e;return m.on("message",n(d,"requestReadLock",g,h,i)),m.on("message",n(d,"requestWriteLock",j,k,l)),d}return{isWorker:!0,readLock:a=>o(a,g,i,h),writeLock:a=>o(a,j,l,k)}}},43049:function(a){let b={},c=a=>{a.addEventListener("message",b=>{c.dispatchEvent("message",a,b)}),a.port&&a.port.addEventListener("message",b=>{c.dispatchEvent("message",a,b)})};c.addEventListener=(a,c)=>{b[a]||(b[a]=[]),b[a].push(c)},c.removeEventListener=(a,c)=>{b[a]&&(b[a]=b[a].filter(a=>a===c))},c.dispatchEvent=function(){let a=Array.prototype.slice.call(arguments),c=a.shift();b[c]&&b[c].forEach(b=>b.apply(null,a))},a.exports=c},56827:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(39920),e=c(59554),f=c(74956),g=()=>{},h=new e.TimeoutError;b.default=class extends d{constructor(a){var b,c,d,e;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=g,this._resolveIdle=g,!("number"==typeof(a=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:f.default},a)).intervalCap&&a.intervalCap>=1))throw TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(c=null===(b=a.intervalCap)|| void 0===b?void 0:b.toString())&& void 0!==c?c:""}\` (${typeof a.intervalCap})`);if(void 0===a.interval||!(Number.isFinite(a.interval)&&a.interval>=0))throw TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(e=null===(d=a.interval)|| void 0===d?void 0:d.toString())&& void 0!==e?e:""}\` (${typeof a.interval})`);this._carryoverConcurrencyCount=a.carryoverConcurrencyCount,this._isIntervalIgnored=a.intervalCap===1/0||0===a.interval,this._intervalCap=a.intervalCap,this._interval=a.interval,this._queue=new a.queueClass,this._queueClass=a.queueClass,this.concurrency=a.concurrency,this._timeout=a.timeout,this._throwOnTimeout=!0===a.throwOnTimeout,this._isPaused=!1===a.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=g,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=g,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let a=Date.now();if(void 0===this._intervalId){let b=this._intervalEnd-a;if(!(b<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},b)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let a=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let b=this._queue.dequeue();return!!b&&(this.emit("active"),b(),a&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){!this._isIntervalIgnored&& void 0===this._intervalId&&(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(a){if(!("number"==typeof a&&a>=1))throw TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${a}\` (${typeof a})`);this._concurrency=a,this._processQueue()}async add(a,b={}){return new Promise((c,d)=>{let f=async()=>{this._pendingCount++,this._intervalCount++;try{let f=void 0===this._timeout&& void 0===b.timeout?a():e.default(Promise.resolve(a()),void 0===b.timeout?this._timeout:b.timeout,()=>{(void 0===b.throwOnTimeout?this._throwOnTimeout:b.throwOnTimeout)&&d(h)});c(await f)}catch(g){d(g)}this._next()};this._queue.enqueue(f,b),this._tryToStartAnother(),this.emit("add")})}async addAll(a,b){return Promise.all(a.map(async a=>this.add(a,b)))}start(){return this._isPaused&&(this._isPaused=!1,this._processQueue()),this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(a=>{let b=this._resolveEmpty;this._resolveEmpty=()=>{b(),a()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(a=>{let b=this._resolveIdle;this._resolveIdle=()=>{b(),a()}})}get size(){return this._queue.size}sizeBy(a){return this._queue.filter(a).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(a){this._timeout=a}}},22405:function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a,b,c){let d=0,e=a.length;for(;e>0;){let f=e/2|0,g=d+f;0>=c(a[g],b)?(d=++g,e-=f+1):e=f}return d}},74956:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(22405);b.default=class{constructor(){this._queue=[]}enqueue(a,b){b=Object.assign({priority:0},b);let c={priority:b.priority,run:a};if(this.size&&this._queue[this.size-1].priority>=b.priority){this._queue.push(c);return}let e=d.default(this._queue,c,(a,b)=>b.priority-a.priority);this._queue.splice(e,0,c)}dequeue(){let a=this._queue.shift();return null==a?void 0:a.run}filter(a){return this._queue.filter(b=>b.priority===a.priority).map(a=>a.run)}get size(){return this._queue.length}}},59554:function(a,b,c){"use strict";let d=c(27345);class e extends Error{constructor(a){super(a),this.name="TimeoutError"}}let f=(a,b,c)=>new Promise((f,g)=>{if("number"!=typeof b||b<0)throw TypeError("Expected `milliseconds` to be a positive number");if(b===1/0){f(a);return}let h=setTimeout(()=>{if("function"==typeof c){try{f(c())}catch(d){g(d)}return}let h="string"==typeof c?c:`Promise timed out after ${b} milliseconds`,i=c instanceof Error?c:new e(h);"function"==typeof a.cancel&&a.cancel(),g(i)},b);d(a.then(f,g),()=>{clearTimeout(h)})});a.exports=f,a.exports.default=f,a.exports.TimeoutError=e},82734:function(a){"use strict";var b=/^(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9])?\.){0,126}(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9]))\.?$/i;a.exports=function(a,c){if(null==c&&(c=!1),a.length<2||a.length>255)return!1;var d=a[a.length-1];if(c){if("."!==d)return!1}else if("."===d)return!1;return b.test(a)}},5003:function(a,b,c){"use strict";let d=c(1476),e=a=>d({exact:!0}).test(a);e.v4=a=>d.v4({exact:!0}).test(a),e.v6=a=>d.v6({exact:!0}).test(a),e.version=a=>e(a)?e.v4(a)?4:6:void 0,a.exports=e},24981:function(a,b,c){"use strict";let{base58btc:d}=c(99086),{base32:e}=c(22817),f=c(28924),{Multiaddr:g}=c(46584),h=c(29175),{CID:i}=c(81362),{URL:j}=c(17745),{toString:k}=c(92263),l=/^https?:\/\/[^/]+\/(ip[fn]s)\/([^/?#]+)/,m=/^\/(ip[fn]s)\/([^/?#]+)/,n=/^https?:\/\/([^/]+)\.(ip[fn]s)\.[^/?]+/,o=/^(([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)+([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])$/;function p(a){try{if("string"==typeof a)return Boolean(i.parse(a));if(a instanceof Uint8Array)return Boolean(i.decode(a));return Boolean(i.asCID(a))}catch(b){return!1}}function q(a){if(!a)return!1;if(g.isMultiaddr(a))return!0;try{return new g(a),!0}catch(b){return!1}}function r(a,b,c=1,d=2){let e=u(a);if(!e)return!1;let f=e.match(b);if(!f||"ipfs"!==f[c])return!1;let g=f[d];return g&&b===n&&(g=g.toLowerCase()),p(g)}function s(a,b,c=1,d=2){let e=u(a);if(!e)return!1;let f=e.match(b);if(!f||"ipns"!==f[c])return!1;let g=f[d];if(g&&b===n){if(p(g=g.toLowerCase()))return!0;try{!g.includes(".")&&g.includes("-")&&(g=g.replace(/--/g,"@").replace(/-/g,".").replace(/@/g,"-"));let{hostname:h}=new j(`http://${g}`);return o.test(h)}catch(i){return!1}}return!0}function t(a){return"string"==typeof a}function u(a){return a instanceof Uint8Array?k(a,"base58btc"):!!t(a)&&a}let v=a=>r(a,n,2,1),w=a=>s(a,n,2,1),x=a=>v(a)||w(a),y=a=>r(a,l)||v(a),z=a=>s(a,l)||w(a),A=a=>y(a)||z(a)||x(a),B=a=>r(a,m)||s(a,m);a.exports={multihash:function(a){let b=u(a);try{f.decode(d.decode("z"+b))}catch{return!1}return!0},multiaddr:q,peerMultiaddr:function(a){return q(a)&&h.P2P.matches(a)},cid:p,base32cid:a=>(function(a){try{e.decode(a)}catch{return!1}return!0})(a)&&p(a),ipfsSubdomain:v,ipnsSubdomain:w,subdomain:x,subdomainGatewayPattern:n,ipfsUrl:y,ipnsUrl:z,url:A,pathGatewayPattern:l,ipfsPath:a=>r(a,m),ipnsPath:a=>s(a,m),path:B,pathPattern:m,urlOrPath:a=>A(a)||B(a),cidPath:a=>t(a)&&!p(a)&&r(`/ipfs/${a}`,m)}},71993:function(a){"use strict";a.exports={E2BIG:7,EACCES:13,EADDRINUSE:100,EADDRNOTAVAIL:101,EAFNOSUPPORT:102,EAGAIN:11,EALREADY:103,EBADF:9,EBADMSG:104,EBUSY:16,ECANCELED:105,ECHILD:10,ECONNABORTED:106,ECONNREFUSED:107,ECONNRESET:108,EDEADLK:36,EDESTADDRREQ:109,EDOM:33,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:110,EIDRM:111,EILSEQ:42,EINPROGRESS:112,EINTR:4,EINVAL:22,EIO:5,EISCONN:113,EISDIR:21,ELOOP:114,EMFILE:24,EMLINK:31,EMSGSIZE:115,ENAMETOOLONG:38,ENETDOWN:116,ENETRESET:117,ENETUNREACH:118,ENFILE:23,ENOBUFS:119,ENODATA:120,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:39,ENOLINK:121,ENOMEM:12,ENOMSG:122,ENOPROTOOPT:123,ENOSPC:28,ENOSR:124,ENOSTR:125,ENOSYS:40,ENOTCONN:126,ENOTDIR:20,ENOTEMPTY:41,ENOTSOCK:128,ENOTSUP:129,ENOTTY:25,ENXIO:6,EOPNOTSUPP:130,EOVERFLOW:132,EPERM:1,EPIPE:32,EPROTO:134,EPROTONOSUPPORT:135,EPROTOTYPE:136,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ETIME:137,ETIMEDOUT:138,ETXTBSY:139,EWOULDBLOCK:140,EXDEV:18,WSAEINTR:10004,WSAEBADF:10009,WSAEACCES:10013,WSAEFAULT:10014,WSAEINVAL:10022,WSAEMFILE:10024,WSAEWOULDBLOCK:10035,WSAEINPROGRESS:10036,WSAEALREADY:10037,WSAENOTSOCK:10038,WSAEDESTADDRREQ:10039,WSAEMSGSIZE:10040,WSAEPROTOTYPE:10041,WSAENOPROTOOPT:10042,WSAEPROTONOSUPPORT:10043,WSAESOCKTNOSUPPORT:10044,WSAEOPNOTSUPP:10045,WSAEPFNOSUPPORT:10046,WSAEAFNOSUPPORT:10047,WSAEADDRINUSE:10048,WSAEADDRNOTAVAIL:10049,WSAENETDOWN:10050,WSAENETUNREACH:10051,WSAENETRESET:10052,WSAECONNABORTED:10053,WSAECONNRESET:10054,WSAENOBUFS:10055,WSAEISCONN:10056,WSAENOTCONN:10057,WSAESHUTDOWN:10058,WSAETOOMANYREFS:10059,WSAETIMEDOUT:10060,WSAECONNREFUSED:10061,WSAELOOP:10062,WSAENAMETOOLONG:10063,WSAEHOSTDOWN:10064,WSAEHOSTUNREACH:10065,WSAENOTEMPTY:10066,WSAEPROCLIM:10067,WSAEUSERS:10068,WSAEDQUOT:10069,WSAESTALE:10070,WSAEREMOTE:10071,WSASYSNOTREADY:10091,WSAVERNOTSUPPORTED:10092,WSANOTINITIALISED:10093,WSAEDISCON:10101,WSAENOMORE:10102,WSAECANCELLED:10103,WSAEINVALIDPROCTABLE:10104,WSAEINVALIDPROVIDER:10105,WSAEPROVIDERFAILEDINIT:10106,WSASYSCALLFAILURE:10107,WSASERVICE_NOT_FOUND:10108,WSATYPE_NOT_FOUND:10109,WSA_E_NO_MORE:10110,WSA_E_CANCELLED:10111,WSAEREFUSED:10112,PRIORITY_LOW:19,PRIORITY_BELOW_NORMAL:10,PRIORITY_NORMAL:0,PRIORITY_ABOVE_NORMAL:-7,PRIORITY_HIGH:-14,PRIORITY_HIGHEST:-20,SIGHUP:1,SIGINT:2,SIGILL:4,SIGABRT:22,SIGFPE:8,SIGKILL:9,SIGSEGV:11,SIGTERM:15,SIGBREAK:21,SIGWINCH:28,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,O_RDONLY:0,O_WRONLY:1,O_RDWR:2,UV_DIRENT_UNKNOWN:0,UV_DIRENT_FILE:1,UV_DIRENT_DIR:2,UV_DIRENT_LINK:3,UV_DIRENT_FIFO:4,UV_DIRENT_SOCKET:5,UV_DIRENT_CHAR:6,UV_DIRENT_BLOCK:7,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFLNK:40960,O_CREAT:256,O_EXCL:1024,UV_FS_O_FILEMAP:536870912,O_TRUNC:512,O_APPEND:8,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_COPYFILE_EXCL:1,COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_FICLONE_FORCE:4,OPENSSL_VERSION_NUMBER:269488351,SSL_OP_ALL:2147485780,SSL_OP_ALLOW_NO_DHE_KEX:1024,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:0,SSL_OP_MICROSOFT_SESS_ID_BUG:0,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:0,SSL_OP_NETSCAPE_CHALLENGE_BUG:0,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:0,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:0,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_ENCRYPT_THEN_MAC:524288,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_RENEGOTIATION:1073741824,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:0,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_NO_TLSv1_3:536870912,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_PRIORITIZE_CHACHA:2097152,SSL_OP_SINGLE_DH_USE:0,SSL_OP_SINGLE_ECDH_USE:0,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:0,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:0,SSL_OP_TLS_D5_BUG:0,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_RSA:1,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_EC:2048,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,RSA_PSS_SALTLEN_DIGEST:-1,RSA_PSS_SALTLEN_MAX_SIGN:-2,RSA_PSS_SALTLEN_AUTO:-2,defaultCoreCipherList:"TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:DHE-RSA-AES256-SHA384:ECDHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA256:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!SRP:!CAMELLIA",TLS1_VERSION:769,TLS1_1_VERSION:770,TLS1_2_VERSION:771,TLS1_3_VERSION:772,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},29309:function(a,b,c){"use strict";let{Readable:d}=c(88473),e=c(1914),f=(a=1/0)=>{let b=0;return new d({read(c){if(b>=a)return this.push(null);b+c>=a&&(c=a-b),b+=c,this.push(e(c))}})};a.exports={randomStream:f,randomBytes:e}},1914:function(a){"use strict";a.exports=function(a){let b=new Uint8Array(a),c=0;if(a>0){if(a>65536)for(;c<a;)c+65536>a?(crypto.getRandomValues(b.subarray(c,c+(a-c))),c+=a-c):(crypto.getRandomValues(b.subarray(c,c+65536)),c+=65536);else crypto.getRandomValues(b)}return b}},78165:function(a){"use strict";async function*b(a,b=1){let c=[];for await(let d of(b<1&&(b=1),a))for(c.push(d);c.length>=b;)yield c.slice(0,b),c=c.slice(b);for(;c.length;)yield c.slice(0,b),c=c.slice(b)}a.exports=b},64593:function(a){"use strict";let b=async a=>{for await(let b of a);};a.exports=b},55565:function(a){"use strict";let b=async function*(a,b){for await(let c of a)await b(c)&&(yield c)};a.exports=b},4321:function(a){"use strict";let b=async function*(a,b){for await(let c of a)await b(c),yield c};a.exports=b},93975:function(a){"use strict";let b=async a=>{let b=0;for await(let c of a)b++;return b};a.exports=b},74014:function(a,b,c){"use strict";let d=c(78580),e=async function*(...a){let b=d();setTimeout(async()=>{try{await Promise.all(a.map(async a=>{for await(let c of a)b.push(c)})),b.end()}catch(c){b.end(c)}},0),yield*b};a.exports=e},78580:function(a,b,c){let d=c(91607);a.exports=a=>{let b;"function"==typeof(a=a||{})?(b=a,a={}):b=a.onEnd;let c=new d,e,f,g,h=()=>{if(!c.isEmpty()){if(a.writev){let b,d=[];for(;!c.isEmpty();){if((b=c.shift()).error)throw b.error;d.push(b.value)}return{done:b.done,value:d}}let h=c.shift();if(h.error)throw h.error;return h}return g?{done:!0}:new Promise((b,c)=>{f=d=>(f=null,d.error?c(d.error):a.writev&&!d.done?b({done:d.done,value:[d.value]}):b(d),e)})},i=a=>f?f(a):(c.push(a),e),j=a=>(c=new d,f)?f({error:a}):(c.push({error:a}),e),k=a=>g?e:i({done:!1,value:a}),l=a=>g?e:(g=!0,a?j(a):i({done:!0})),m=()=>(c=new d,l(),{done:!0}),n=a=>(l(a),{done:!0});if(e={[Symbol.asyncIterator](){return this},next:h,return:m,throw:n,push:k,end:l},!b)return e;let o=e;return e={[Symbol.asyncIterator](){return this},next(){return o.next()},throw(a){return o.throw(a),b&&(b(a),b=null),{done:!0}},return(){return o.return(),b&&(b(),b=null),{done:!0}},push:k,end(a){return o.end(a),b&&(b(a),b=null),e}}}},84810:function(a,b,c){"use strict";let d=c(78165);async function*e(a,b=1){for await(let c of d(a,b)){let e=c.map(a=>a().then(a=>({ok:!0,value:a}),a=>({ok:!1,err:a})));for(let f=0;f<e.length;f++){let g=await e[f];if(g.ok)yield g.value;else throw g.err}}}a.exports=e},58869:function(a,b,c){"use strict";let d=c(1590),e=c(17187).EventEmitter;async function*f(a,b={}){let c=b.concurrency||1/0;c<1&&(c=1/0);let f=null!=b.ordered&&b.ordered,g=new e,h=[],i=d(),j=d(),k=!1,l,m=!1;function n(){return f?Boolean(h[0]&&h[0].done):Boolean(h.find(a=>a.done))}function*o(){for(;h.length&&h[0].done;){let a=h[0];if(h.shift(),a.ok)yield a.value;else throw m=!0,i.resolve(),a.err;i.resolve()}}function*p(){for(;n();)for(let a=0;a<h.length;a++)if(h[a].done){let b=h[a];if(h.splice(a,1),a--,b.ok)yield b.value;else throw m=!0,i.resolve(),b.err;i.resolve()}}for(g.on("task-complete",()=>{j.resolve()}),Promise.resolve().then(async()=>{try{for await(let b of a){if(h.length===c&&await (i=d()).promise,m)break;let e={done:!1};h.push(e),b().then(a=>{e.done=!0,e.ok=!0,e.value=a,g.emit("task-complete")},a=>{e.done=!0,e.err=a,g.emit("task-complete")})}k=!0,g.emit("task-complete")}catch(f){l=f,g.emit("task-complete")}});;){if(n()||await (j=d()).promise,l)throw l;if(f?yield*o():yield*p(),k&&0===h.length)break}}a.exports=f},1590:function(a){"use strict";let b=()=>{let a={};return a.promise=new Promise((b,c)=>{a.resolve=b,a.reject=c}),a};a.exports=b},97515:function(a,b,c){"use strict";let d=c(31303),e=async function*(a,b){let c=await d(a);yield*c.sort(b)};a.exports=e},37939:function(a){"use strict";let b=async function*(a,b){let c=0;if(!(b<1)){for await(let d of a)if(yield d,++c===b)return}};a.exports=b},33053:function(a,b,c){"use strict";let{concat:d}=c(20605);async function e(a){let b=new Uint8Array(0);for await(let c of a)b=d([b,c],b.length+c.length);return b}a.exports=e},44874:function(a){a.exports=function(a,b,c){var d,e;if(!a)return c;if(Array.isArray(b)&&(d=b.slice(0)),"string"==typeof b&&(d=b.split(".")),"symbol"==typeof b&&(d=[b]),!Array.isArray(d))throw Error("props arg must be an array, a string or a symbol");for(;d.length;)if(e=d.shift(),!a|| void 0===(a=a[e]))return c;return a}},99507:function(a,b,c){"use strict";let d=c(61798),{EventEmitter:e}=c(17187);function f(a,b){if(a===b)return!0;if(a.length!==b.length)return!1;for(let c=0,d=a.length;c<d;++c)if(a[c]!==b[c])return!1;return!0}function g(){return{contacts:[],dontSplit:!1,left:null,right:null}}function h(a,b){if(!(b instanceof Uint8Array))throw TypeError(a+" is not a Uint8Array")}class i extends e{constructor(a={}){super(),this.localNodeId=a.localNodeId||d(20),this.numberOfNodesPerKBucket=a.numberOfNodesPerKBucket||20,this.numberOfNodesToPing=a.numberOfNodesToPing||3,this.distance=a.distance||i.distance,this.arbiter=a.arbiter||i.arbiter,this.metadata=Object.assign({},a.metadata),h("option.localNodeId as parameter 1",this.localNodeId),this.root=g()}static arbiter(a,b){return a.vectorClock>b.vectorClock?a:b}static distance(a,b){let c=0,d=0,e=Math.min(a.length,b.length),f=Math.max(a.length,b.length);for(;d<e;++d)c=256*c+(a[d]^b[d]);for(;d<f;++d)c=256*c+255;return c}add(a){h("contact.id",(a||{}).id);let b=0,c=this.root;for(;null===c.contacts;)c=this._determineNode(c,a.id,b++);let d=this._indexOf(c,a.id);return d>=0?(this._update(c,d,a),this):c.contacts.length<this.numberOfNodesPerKBucket?(c.contacts.push(a),this.emit("added",a),this):c.dontSplit?(this.emit("ping",c.contacts.slice(0,this.numberOfNodesToPing),a),this):(this._split(c,b),this.add(a))}closest(a,b=1/0){if(h("id",a),!Number.isInteger(b)&&b!==1/0||b<=0)throw TypeError("n is not positive number");let c=[];for(let d=[this.root],e=0;d.length>0&&c.length<b;){let f=d.pop();if(null===f.contacts){let g=this._determineNode(f,a,e++);d.push(f.left===g?f.right:f.left),d.push(g)}else c=c.concat(f.contacts)}return c.map(b=>[this.distance(b.id,a),b]).sort((a,b)=>a[0]-b[0]).slice(0,b).map(a=>a[1])}count(){let a=0;for(let b=[this.root];b.length>0;){let c=b.pop();null===c.contacts?b.push(c.right,c.left):a+=c.contacts.length}return a}_determineNode(a,b,c){let d=c>>3,e=c%8;if(b.length<=d&&0!==e)return a.left;let f=b[d];return f&1<<7-e?a.right:a.left}get(a){h("id",a);let b=0,c=this.root;for(;null===c.contacts;)c=this._determineNode(c,a,b++);let d=this._indexOf(c,a);return d>=0?c.contacts[d]:null}_indexOf(a,b){for(let c=0;c<a.contacts.length;++c)if(f(a.contacts[c].id,b))return c;return -1}remove(a){h("the id as parameter 1",a);let b=0,c=this.root;for(;null===c.contacts;)c=this._determineNode(c,a,b++);let d=this._indexOf(c,a);if(d>=0){let e=c.contacts.splice(d,1)[0];this.emit("removed",e)}return this}_split(a,b){for(let c of(a.left=g(),a.right=g(),a.contacts))this._determineNode(a,c.id,b).contacts.push(c);a.contacts=null;let d=this._determineNode(a,this.localNodeId,b),e=a.left===d?a.right:a.left;e.dontSplit=!0}toArray(){let a=[];for(let b=[this.root];b.length>0;){let c=b.pop();null===c.contacts?b.push(c.right,c.left):a=a.concat(c.contacts)}return a}*toIterable(){for(let a=[this.root];a.length>0;){let b=a.pop();null===b.contacts?a.push(b.right,b.left):yield*b.contacts}}_update(a,b,c){if(!f(a.contacts[b].id,c.id))throw Error("wrong index for _update");let d=a.contacts[b],e=this.arbiter(d,c);(e!==d||d===c)&&(a.contacts.splice(b,1),a.contacts.push(e),this.emit("updated",d,e))}}a.exports=i},99558:function(a,b,c){"use strict";a.exports=n;let d=c(24012).AbstractLevelDOWN,e=c(35717),f=c(29967),g=c(43016),h=c(55568),i=c(38450),j=c(71228),k=c(82854),l=c(78950),m="level-js-";function n(a,b){if(!(this instanceof n))return new n(a,b);if(d.call(this,{bufferKeys:j.bufferKeys(indexedDB),snapshots:!0,permanence:!0,clear:!0,getMany:!0}),b=b||{},"string"!=typeof a)throw Error("constructor requires a location string argument");this.location=a,this.prefix=null==b.prefix?m:b.prefix,this.version=parseInt(b.version||1,10)}e(n,d),n.prototype.type="level-js",n.prototype._open=function(a,b){let c=indexedDB.open(this.prefix+this.location,this.version);c.onerror=function(){b(c.error||Error("unknown error"))},c.onsuccess=()=>{this.db=c.result,b()},c.onupgradeneeded=a=>{let b=a.target.result;b.objectStoreNames.contains(this.location)||b.createObjectStore(this.location)}},n.prototype.store=function(a){let b=this.db.transaction([this.location],a);return b.objectStore(this.location)},n.prototype.await=function(a,b){let c=a.transaction;c.onabort=function(){b(c.error||Error("aborted by user"))},c.oncomplete=function(){b(null,a.result)}},n.prototype._get=function(a,b,c){let d=this.store("readonly"),e;try{e=d.get(a)}catch(f){return this._nextTick(c,f)}this.await(e,function(a,d){return a?c(a):void 0===d?c(Error("NotFound")):void c(null,i(d,b.asBuffer))})},n.prototype._getMany=function(a,b,c){let d=b.asBuffer,e=this.store("readonly"),g=a.map(a=>b=>{let c;try{c=e.get(a)}catch(f){return b(f)}c.onsuccess=()=>{let a=c.result;b(null,void 0===a?a:i(a,d))},c.onerror=a=>{a.stopPropagation(),b(c.error)}});f(g,16,c)},n.prototype._del=function(a,b,c){let d=this.store("readwrite"),e;try{e=d.delete(a)}catch(f){return this._nextTick(c,f)}this.await(e,c)},n.prototype._put=function(a,b,c,d){let e=this.store("readwrite"),f;try{f=e.put(b,a)}catch(g){return this._nextTick(d,g)}this.await(f,d)},n.prototype._serializeKey=function(a){return h(a,this.supports.bufferKeys)},n.prototype._serializeValue=function(a){return h(a,!0)},n.prototype._iterator=function(a){return new g(this,this.location,a)},n.prototype._batch=function(a,b,c){if(0===a.length)return this._nextTick(c);let d=this.store("readwrite"),e=d.transaction,f=0,g;function h(){let b=a[f++],c=b.key,i;try{i="del"===b.type?d.delete(c):d.put(b.value,c)}catch(j){g=j,e.abort();return}f<a.length&&(i.onsuccess=h)}e.onabort=function(){c(g||e.error||Error("aborted by user"))},e.oncomplete=function(){c()},h()},n.prototype._clear=function(a,b){let c,d;try{c=l(a)}catch(e){return this._nextTick(b)}if(a.limit>=0)return k(this,this.location,c,a,b);try{let f=this.store("readwrite");d=c?f.delete(c):f.clear()}catch(g){return this._nextTick(b,g)}this.await(d,b)},n.prototype._close=function(a){this.db.close(),this._nextTick(a)},n.prototype.upgrade=function(a){if("open"!==this.status)return this._nextTick(a,Error("cannot upgrade() before open()"));let b=this.iterator(),c={},d=this;function e(a){if(a)return g(a);b.next(f)}function f(a,b,f){if(a|| void 0===b)return g(a);let h=d._serializeKey(i(b,!0)),j=d._serializeValue(i(f,!0));d._batch([{type:"del",key:b},{type:"put",key:h,value:j}],c,e)}function g(c){b.end(function(b){a(c||b)})}function h(a){return a}b._deserializeKey=b._deserializeValue=h,e()},n.destroy=function(a,b,c){"function"==typeof b&&(c=b,b=m);let d=indexedDB.deleteDatabase(b+a);d.onsuccess=function(){c()},d.onerror=function(a){c(a)}}},43016:function(a,b,c){"use strict";let d=c(35717),e=c(24012).AbstractIterator,f=c(78950),g=c(38450),h=function(){};function i(a,b,c){if(e.call(this,a),this._limit=c.limit,this._count=0,this._callback=null,this._cache=[],this._completed=!1,this._aborted=!1,this._error=null,this._transaction=null,this._keys=c.keys,this._values=c.values,this._keyAsBuffer=c.keyAsBuffer,this._valueAsBuffer=c.valueAsBuffer,0===this._limit){this._completed=!0;return}let d;try{d=f(c)}catch(g){this._completed=!0;return}this.createIterator(b,d,c.reverse)}a.exports=i,d(i,e),i.prototype.createIterator=function(a,b,c){let d=this.db.db.transaction([a],"readonly"),e=d.objectStore(a),f=e.openCursor(b,c?"prev":"next");f.onsuccess=a=>{let b=a.target.result;b&&this.onItem(b)},this._transaction=d,d.onabort=()=>{this.onAbort(this._transaction.error||Error("aborted by user"))},d.oncomplete=()=>{this.onComplete()}},i.prototype.onItem=function(a){this._cache.push(a.key,a.value),(this._limit<=0|| ++this._count<this._limit)&&a.continue(),this.maybeNext()},i.prototype.onAbort=function(a){this._aborted=!0,this._error=a,this.maybeNext()},i.prototype.onComplete=function(){this._completed=!0,this.maybeNext()},i.prototype.maybeNext=function(){this._callback&&(this._next(this._callback),this._callback=null)},i.prototype._next=function(a){if(this._aborted){let b=this._error;this._error=null,this._nextTick(a,b)}else if(this._cache.length>0){let c=this._cache.shift(),d=this._cache.shift();c=this._keys&& void 0!==c?this._deserializeKey(c,this._keyAsBuffer):void 0,d=this._values&& void 0!==d?this._deserializeValue(d,this._valueAsBuffer):void 0,this._nextTick(a,null,c,d)}else this._completed?this._nextTick(a):this._callback=a},i.prototype._deserializeKey=g,i.prototype._deserializeValue=g,i.prototype._end=function(a){if(this._aborted||this._completed)return this._nextTick(a,this._error);this.onItem=h,this.onAbort=a,this.onComplete=a}},61862:function(a,b,c){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */ /* eslint-disable no-proto */ let d=c(79742),e=c(80645),f="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function g(a){if(a>2147483647)throw RangeError('The value "'+a+'" is invalid for option "size"');let b=new Uint8Array(a);return Object.setPrototypeOf(b,h.prototype),b}function h(a,b,c){if("number"==typeof a){if("string"==typeof b)throw TypeError('The "string" argument must be of type string. Received type number');return k(a)}return i(a,b,c)}function i(a,b,c){if("string"==typeof a)return l(a,b);if(ArrayBuffer.isView(a))return n(a);if(null==a)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(_(a,ArrayBuffer)||a&&_(a.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(_(a,SharedArrayBuffer)||a&&_(a.buffer,SharedArrayBuffer)))return o(a,b,c);if("number"==typeof a)throw TypeError('The "value" argument must not be of type number. Received type number');let d=a.valueOf&&a.valueOf();if(null!=d&&d!==a)return h.from(d,b,c);let e=p(a);if(e)return e;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof a[Symbol.toPrimitive])return h.from(a[Symbol.toPrimitive]("string"),b,c);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}function j(a){if("number"!=typeof a)throw TypeError('"size" argument must be of type number');if(a<0)throw RangeError('The value "'+a+'" is invalid for option "size"')}function k(a){return j(a),g(a<0?0:0|q(a))}function l(a,b){if(("string"!=typeof b||""===b)&&(b="utf8"),!h.isEncoding(b))throw TypeError("Unknown encoding: "+b);let c=0|r(a,b),d=g(c),e=d.write(a,b);return e!==c&&(d=d.slice(0,e)),d}function m(a){let b=a.length<0?0:0|q(a.length),c=g(b);for(let d=0;d<b;d+=1)c[d]=255&a[d];return c}function n(a){if(_(a,Uint8Array)){let b=new Uint8Array(a);return o(b.buffer,b.byteOffset,b.byteLength)}return m(a)}function o(a,b,c){if(b<0||a.byteLength<b)throw RangeError('"offset" is outside of buffer bounds');if(a.byteLength<b+(c||0))throw RangeError('"length" is outside of buffer bounds');let d;return Object.setPrototypeOf(d=void 0===b&& void 0===c?new Uint8Array(a):void 0===c?new Uint8Array(a,b):new Uint8Array(a,b,c),h.prototype),d}function p(a){if(h.isBuffer(a)){let b=0|q(a.length),c=g(b);return 0===c.length||a.copy(c,0,0,b),c}if(void 0!==a.length){var d;return"number"!=typeof a.length||(d=a.length,d!=d)?g(0):m(a)}if("Buffer"===a.type&&Array.isArray(a.data))return m(a.data)}function q(a){if(a>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|a}function r(a,b){if(h.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||_(a,ArrayBuffer))return a.byteLength;if("string"!=typeof a)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);let c=a.length,d=arguments.length>2&& !0===arguments[2];if(!d&&0===c)return 0;let e=!1;for(;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return W(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return Z(a).length;default:if(e)return d?-1:W(a).length;b=(""+b).toLowerCase(),e=!0}}function s(a,b,c){let d=!1;if((void 0===b||b<0)&&(b=0),b>this.length||((void 0===c||c>this.length)&&(c=this.length),c<=0||(c>>>=0)<=(b>>>=0)))return"";for(a||(a="utf8");;)switch(a){case"hex":return G(this,b,c);case"utf8":case"utf-8":return C(this,b,c);case"ascii":return E(this,b,c);case"latin1":case"binary":return F(this,b,c);case"base64":return B(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,b,c);default:if(d)throw TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function t(a,b,c){let d=a[b];a[b]=a[c],a[c]=d}function u(a,b,c,d,e){var f;if(0===a.length)return -1;if("string"==typeof c?(d=c,c=0):c>2147483647?c=2147483647:c< -2147483648&&(c=-2147483648),f=c=+c,f!=f&&(c=e?0:a.length-1),c<0&&(c=a.length+c),c>=a.length){if(e)return -1;c=a.length-1}else if(c<0){if(!e)return -1;c=0}if("string"==typeof b&&(b=h.from(b,d)),h.isBuffer(b))return 0===b.length?-1:v(a,b,c,d,e);if("number"==typeof b)return(b&=255,"function"==typeof Uint8Array.prototype.indexOf)?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):v(a,[b],c,d,e);throw TypeError("val must be string, number or Buffer")}function v(a,b,c,d,e){let f=1,g=a.length,h=b.length;if(void 0!==d&&("ucs2"===(d=String(d).toLowerCase())||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return -1;f=2,g/=2,h/=2,c/=2}function i(a,b){return 1===f?a[b]:a.readUInt16BE(b*f)}let j;if(e){let k=-1;for(j=c;j<g;j++)if(i(a,j)===i(b,-1===k?0:j-k)){if(-1===k&&(k=j),j-k+1===h)return k*f}else -1!==k&&(j-=j-k),k=-1}else for(c+h>g&&(c=g-h),j=c;j>=0;j--){let l=!0;for(let m=0;m<h;m++)if(i(a,j+m)!==i(b,m)){l=!1;break}if(l)return j}return -1}function w(a,b,c,d){c=Number(c)||0;let e=a.length-c;d?(d=Number(d))>e&&(d=e):d=e;let f=b.length;d>f/2&&(d=f/2);let g;for(g=0;g<d;++g){var h;let i=parseInt(b.substr(2*g,2),16);if(h=i,h!=h)break;a[c+g]=i}return g}function x(a,b,c,d){return $(W(b,a.length-c),a,c,d)}function y(a,b,c,d){return $(X(b),a,c,d)}function z(a,b,c,d){return $(Z(b),a,c,d)}function A(a,b,c,d){return $(Y(b,a.length-c),a,c,d)}function B(a,b,c){return 0===b&&c===a.length?d.fromByteArray(a):d.fromByteArray(a.slice(b,c))}function C(a,b,c){c=Math.min(a.length,c);let d=[],e=b;for(;e<c;){let f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(e+h<=c){let i,j,k,l;switch(h){case 1:f<128&&(g=f);break;case 2:(192&(i=a[e+1]))==128&&(l=(31&f)<<6|63&i)>127&&(g=l);break;case 3:i=a[e+1],j=a[e+2],(192&i)==128&&(192&j)==128&&(l=(15&f)<<12|(63&i)<<6|63&j)>2047&&(l<55296||l>57343)&&(g=l);break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],(192&i)==128&&(192&j)==128&&(192&k)==128&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k)>65535&&l<1114112&&(g=l)}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return D(d)}function D(a){let b=a.length;if(b<=4096)return String.fromCharCode.apply(String,a);let c="",d=0;for(;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=4096));return c}function E(a,b,c){let d="";c=Math.min(a.length,c);for(let e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}function F(a,b,c){let d="";c=Math.min(a.length,c);for(let e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}function G(a,b,c){let d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);let e="";for(let f=b;f<c;++f)e+=aa[a[f]];return e}function H(a,b,c){let d=a.slice(b,c),e="";for(let f=0;f<d.length-1;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function I(a,b,c){if(a%1!=0||a<0)throw RangeError("offset is not uint");if(a+b>c)throw RangeError("Trying to access beyond buffer length")}function J(a,b,c,d,e,f){if(!h.isBuffer(a))throw TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw RangeError('"value" argument is out of bounds');if(c+d>a.length)throw RangeError("Index out of range")}function K(a,b,c,d,e){S(b,d,e,a,c,7);let f=Number(b&BigInt(4294967295));a[c++]=f,f>>=8,a[c++]=f,f>>=8,a[c++]=f,f>>=8,a[c++]=f;let g=Number(b>>BigInt(32)&BigInt(4294967295));return a[c++]=g,g>>=8,a[c++]=g,g>>=8,a[c++]=g,g>>=8,a[c++]=g,c}function L(a,b,c,d,e){S(b,d,e,a,c,7);let f=Number(b&BigInt(4294967295));a[c+7]=f,f>>=8,a[c+6]=f,f>>=8,a[c+5]=f,f>>=8,a[c+4]=f;let g=Number(b>>BigInt(32)&BigInt(4294967295));return a[c+3]=g,g>>=8,a[c+2]=g,g>>=8,a[c+1]=g,g>>=8,a[c]=g,c+8}function M(a,b,c,d,e,f){if(c+d>a.length||c<0)throw RangeError("Index out of range")}function N(a,b,c,d,f){return b=+b,c>>>=0,f||M(a,b,c,4,34028234663852886e22,-34028234663852886e22),e.write(a,b,c,d,23,4),c+4}function O(a,b,c,d,f){return b=+b,c>>>=0,f||M(a,b,c,8,17976931348623157e292,-17976931348623157e292),e.write(a,b,c,d,52,8),c+8}b.lW=h,b.h2=50,h.TYPED_ARRAY_SUPPORT=function(){try{let a=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(a,b),42===a.foo()}catch(c){return!1}}(),h.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(a,b,c){return i(a,b,c)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(a,b,c){var d,e,f;return d=a,e=b,f=c,(j(d),d<=0)?g(d):void 0!==e?"string"==typeof f?g(d).fill(e,f):g(d).fill(e):g(d)},h.allocUnsafe=function(a){return k(a)},h.allocUnsafeSlow=function(a){return k(a)},h.isBuffer=function(a){return null!=a&& !0===a._isBuffer&&a!==h.prototype},h.compare=function(a,b){if(_(a,Uint8Array)&&(a=h.from(a,a.offset,a.byteLength)),_(b,Uint8Array)&&(b=h.from(b,b.offset,b.byteLength)),!h.isBuffer(a)||!h.isBuffer(b))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===b)return 0;let c=a.length,d=b.length;for(let e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:d<c?1:0},h.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(a,b){if(!Array.isArray(a))throw TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return h.alloc(0);let c;if(void 0===b)for(c=0,b=0;c<a.length;++c)b+=a[c].length;let d=h.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){let f=a[c];if(_(f,Uint8Array))e+f.length>d.length?(h.isBuffer(f)||(f=h.from(f)),f.copy(d,e)):Uint8Array.prototype.set.call(d,f,e);else if(h.isBuffer(f))f.copy(d,e);else throw TypeError('"list" argument must be an Array of Buffers');e+=f.length}return d},h.byteLength=r,h.prototype._isBuffer=!0,h.prototype.swap16=function(){let a=this.length;if(a%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<a;b+=2)t(this,b,b+1);return this},h.prototype.swap32=function(){let a=this.length;if(a%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<a;b+=4)t(this,b,b+3),t(this,b+1,b+2);return this},h.prototype.swap64=function(){let a=this.length;if(a%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<a;b+=8)t(this,b,b+7),t(this,b+1,b+6),t(this,b+2,b+5),t(this,b+3,b+4);return this},h.prototype.toString=function(){let a=this.length;return 0===a?"":0===arguments.length?C(this,0,a):s.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(a){if(!h.isBuffer(a))throw TypeError("Argument must be a Buffer");return this===a||0===h.compare(this,a)},h.prototype.inspect=function(){let a="",c=b.h2;return a=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(a+=" ... "),"<Buffer "+a+">"},f&&(h.prototype[f]=h.prototype.inspect),h.prototype.compare=function(a,b,c,d,e){if(_(a,Uint8Array)&&(a=h.from(a,a.offset,a.byteLength)),!h.isBuffer(a))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),b<0||c>a.length||d<0||e>this.length)throw RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return -1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;let f=e-d,g=c-b,i=Math.min(f,g),j=this.slice(d,e),k=a.slice(b,c);for(let l=0;l<i;++l)if(j[l]!==k[l]){f=j[l],g=k[l];break}return f<g?-1:g<f?1:0},h.prototype.includes=function(a,b,c){return -1!==this.indexOf(a,b,c)},h.prototype.indexOf=function(a,b,c){return u(this,a,b,c,!0)},h.prototype.lastIndexOf=function(a,b,c){return u(this,a,b,c,!1)},h.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b>>>=0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let e=this.length-b;if((void 0===c||c>e)&&(c=e),a.length>0&&(c<0||b<0)||b>this.length)throw RangeError("Attempt to write outside buffer bounds");d||(d="utf8");let f=!1;for(;;)switch(d){case"hex":return w(this,a,b,c);case"utf8":case"utf-8":return x(this,a,b,c);case"ascii":case"latin1":case"binary":return y(this,a,b,c);case"base64":return z(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,a,b,c);default:if(f)throw TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),f=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},h.prototype.slice=function(a,b){let c=this.length;a=~~a,b=void 0===b?c:~~b,a<0?(a+=c)<0&&(a=0):a>c&&(a=c),b<0?(b+=c)<0&&(b=0):b>c&&(b=c),b<a&&(b=a);let d=this.subarray(a,b);return Object.setPrototypeOf(d,h.prototype),d},h.prototype.readUintLE=h.prototype.readUIntLE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);let d=this[a],e=1,f=0;for(;++f<b&&(e*=256);)d+=this[a+f]*e;return d},h.prototype.readUintBE=h.prototype.readUIntBE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);let d=this[a+ --b],e=1;for(;b>0&&(e*=256);)d+=this[a+ --b]*e;return d},h.prototype.readUint8=h.prototype.readUInt8=function(a,b){return a>>>=0,b||I(a,1,this.length),this[a]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(a,b){return a>>>=0,b||I(a,2,this.length),this[a]|this[a+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(a,b){return a>>>=0,b||I(a,2,this.length),this[a]<<8|this[a+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(a,b){return a>>>=0,b||I(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(a,b){return a>>>=0,b||I(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},h.prototype.readBigUInt64LE=ab(function(a){T(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b|| void 0===c)&&U(a,this.length-8);let d=b+256*this[++a]+65536*this[++a]+16777216*this[++a],e=this[++a]+256*this[++a]+65536*this[++a]+16777216*c;return BigInt(d)+(BigInt(e)<<BigInt(32))}),h.prototype.readBigUInt64BE=ab(function(a){T(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b|| void 0===c)&&U(a,this.length-8);let d=16777216*b+65536*this[++a]+256*this[++a]+this[++a],e=16777216*this[++a]+65536*this[++a]+256*this[++a]+c;return(BigInt(d)<<BigInt(32))+BigInt(e)}),h.prototype.readIntLE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);let d=this[a],e=1,f=0;for(;++f<b&&(e*=256);)d+=this[a+f]*e;return d>=(e*=128)&&(d-=Math.pow(2,8*b)),d},h.prototype.readIntBE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);let d=b,e=1,f=this[a+ --d];for(;d>0&&(e*=256);)f+=this[a+ --d]*e;return f>=(e*=128)&&(f-=Math.pow(2,8*b)),f},h.prototype.readInt8=function(a,b){return(a>>>=0,b||I(a,1,this.length),128&this[a])?-((255-this[a]+1)*1):this[a]},h.prototype.readInt16LE=function(a,b){a>>>=0,b||I(a,2,this.length);let c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},h.prototype.readInt16BE=function(a,b){a>>>=0,b||I(a,2,this.length);let c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},h.prototype.readInt32LE=function(a,b){return a>>>=0,b||I(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},h.prototype.readInt32BE=function(a,b){return a>>>=0,b||I(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},h.prototype.readBigInt64LE=ab(function(a){T(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b|| void 0===c)&&U(a,this.length-8);let d=this[a+4]+256*this[a+5]+65536*this[a+6]+(c<<24);return(BigInt(d)<<BigInt(32))+BigInt(b+256*this[++a]+65536*this[++a]+16777216*this[++a])}),h.prototype.readBigInt64BE=ab(function(a){T(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b|| void 0===c)&&U(a,this.length-8);let d=(b<<24)+65536*this[++a]+256*this[++a]+this[++a];return(BigInt(d)<<BigInt(32))+BigInt(16777216*this[++a]+65536*this[++a]+256*this[++a]+c)}),h.prototype.readFloatLE=function(a,b){return a>>>=0,b||I(a,4,this.length),e.read(this,a,!0,23,4)},h.prototype.readFloatBE=function(a,b){return a>>>=0,b||I(a,4,this.length),e.read(this,a,!1,23,4)},h.prototype.readDoubleLE=function(a,b){return a>>>=0,b||I(a,8,this.length),e.read(this,a,!0,52,8)},h.prototype.readDoubleBE=function(a,b){return a>>>=0,b||I(a,8,this.length),e.read(this,a,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(a,b,c,d){if(a=+a,b>>>=0,c>>>=0,!d){let e=Math.pow(2,8*c)-1;J(this,a,b,c,e,0)}let f=1,g=0;for(this[b]=255&a;++g<c&&(f*=256);)this[b+g]=a/f&255;return b+c},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(a,b,c,d){if(a=+a,b>>>=0,c>>>=0,!d){let e=Math.pow(2,8*c)-1;J(this,a,b,c,e,0)}let f=c-1,g=1;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=a/g&255;return b+c},h.prototype.writeUint8=h.prototype.writeUInt8=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,1,255,0),this[b]=255&a,b+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,65535,0),this[b]=255&a,this[b+1]=a>>>8,b+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,65535,0),this[b]=a>>>8,this[b+1]=255&a,b+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,4294967295,0),this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a,b+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,4294967295,0),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},h.prototype.writeBigUInt64LE=ab(function(a,b=0){return K(this,a,b,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=ab(function(a,b=0){return L(this,a,b,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b>>>=0,!d){let e=Math.pow(2,8*c-1);J(this,a,b,c,e-1,-e)}let f=0,g=1,h=0;for(this[b]=255&a;++f<c&&(g*=256);)a<0&&0===h&&0!==this[b+f-1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},h.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b>>>=0,!d){let e=Math.pow(2,8*c-1);J(this,a,b,c,e-1,-e)}let f=c-1,g=1,h=0;for(this[b+f]=255&a;--f>=0&&(g*=256);)a<0&&0===h&&0!==this[b+f+1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},h.prototype.writeInt8=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,1,127,-128),a<0&&(a=255+a+1),this[b]=255&a,b+1},h.prototype.writeInt16LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,32767,-32768),this[b]=255&a,this[b+1]=a>>>8,b+2},h.prototype.writeInt16BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,32767,-32768),this[b]=a>>>8,this[b+1]=255&a,b+2},h.prototype.writeInt32LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,2147483647,-2147483648),this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24,b+4},h.prototype.writeInt32BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},h.prototype.writeBigInt64LE=ab(function(a,b=0){return K(this,a,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=ab(function(a,b=0){return L(this,a,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeFloatLE=function(a,b,c){return N(this,a,b,!0,c)},h.prototype.writeFloatBE=function(a,b,c){return N(this,a,b,!1,c)},h.prototype.writeDoubleLE=function(a,b,c){return O(this,a,b,!0,c)},h.prototype.writeDoubleBE=function(a,b,c){return O(this,a,b,!1,c)},h.prototype.copy=function(a,b,c,d){if(!h.isBuffer(a))throw TypeError("argument should be a Buffer");if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c||0===a.length||0===this.length)return 0;if(b<0)throw RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw RangeError("Index out of range");if(d<0)throw RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);let e=d-c;return this===a&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(b,c,d):Uint8Array.prototype.set.call(a,this.subarray(c,d),b),e},h.prototype.fill=function(a,b,c,d){if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),void 0!==d&&"string"!=typeof d)throw TypeError("encoding must be a string");if("string"==typeof d&&!h.isEncoding(d))throw TypeError("Unknown encoding: "+d);if(1===a.length){let e=a.charCodeAt(0);("utf8"===d&&e<128||"latin1"===d)&&(a=e)}}else"number"==typeof a?a&=255:"boolean"==typeof a&&(a=Number(a));if(b<0||this.length<b||this.length<c)throw RangeError("Out of range index");if(c<=b)return this;b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0);let f;if("number"==typeof a)for(f=b;f<c;++f)this[f]=a;else{let g=h.isBuffer(a)?a:h.from(a,d),i=g.length;if(0===i)throw TypeError('The value "'+a+'" is invalid for argument "value"');for(f=0;f<c-b;++f)this[f+b]=g[f%i]}return this};let P={};function Q(a,b,c){P[a]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:b.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${a}]`,this.stack,delete this.name}get code(){return a}set code(a){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:a,writable:!0})}toString(){return`${this.name} [${a}]: ${this.message}`}}}function R(a){let b="",c=a.length,d="-"===a[0]?1:0;for(;c>=d+4;c-=3)b=`_${a.slice(c-3,c)}${b}`;return`${a.slice(0,c)}${b}`}function S(a,b,c,d,e,f){var g,h,i;if(a>c||a<b){let j="bigint"==typeof b?"n":"",k;throw k=f>3?0===b||b===BigInt(0)?`>= 0${j} and < 2${j} ** ${(f+1)*8}${j}`:`>= -(2${j} ** ${(f+1)*8-1}${j}) and < 2 ** ${(f+1)*8-1}${j}`:`>= ${b}${j} and <= ${c}${j}`,new P.ERR_OUT_OF_RANGE("value",k,a)}g=d,h=e,i=f,T(h,"offset"),(void 0===g[h]|| void 0===g[h+i])&&U(h,g.length-(i+1))}function T(a,b){if("number"!=typeof a)throw new P.ERR_INVALID_ARG_TYPE(b,"number",a)}function U(a,b,c){if(Math.floor(a)!==a)throw T(a,c),new P.ERR_OUT_OF_RANGE(c||"offset","an integer",a);if(b<0)throw new P.ERR_BUFFER_OUT_OF_BOUNDS;throw new P.ERR_OUT_OF_RANGE(c||"offset",`>= ${c?1:0} and <= ${b}`,a)}Q("ERR_BUFFER_OUT_OF_BOUNDS",function(a){return a?`${a} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Q("ERR_INVALID_ARG_TYPE",function(a,b){return`The "${a}" argument must be of type number. Received type ${typeof b}`},TypeError),Q("ERR_OUT_OF_RANGE",function(a,b,c){let d=`The value of "${a}" is out of range.`,e=c;return Number.isInteger(c)&&Math.abs(c)>4294967296?e=R(String(c)):"bigint"==typeof c&&(e=String(c),(c>BigInt(2)**BigInt(32)||c< -(BigInt(2)**BigInt(32)))&&(e=R(e)),e+="n"),d+=` It must be ${b}. Received ${e}`},RangeError);let V=/[^+/0-9A-Za-z-_]/g;function W(a,b){b=b||1/0;let c,d=a.length,e=null,f=[];for(let g=0;g<d;++g){if((c=a.charCodeAt(g))>55295&&c<57344){if(!e){if(c>56319||g+1===d){(b-=3)> -1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)> -1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)> -1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else if(c<1114112){if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}else throw Error("Invalid code point")}return f}function X(a){let b=[];for(let c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function Y(a,b){let c,d,e,f=[];for(let g=0;g<a.length&&!((b-=2)<0);++g)d=(c=a.charCodeAt(g))>>8,e=c%256,f.push(e),f.push(d);return f}function Z(a){return d.toByteArray(function(a){if((a=(a=a.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;a.length%4!=0;)a+="=";return a}(a))}function $(a,b,c,d){let e;for(e=0;e<d&&!(e+c>=b.length)&&!(e>=a.length);++e)b[e+c]=a[e];return e}function _(a,b){return a instanceof b||null!=a&&null!=a.constructor&&null!=a.constructor.name&&a.constructor.name===b.name}let aa=function(){let a="0123456789abcdef",b=Array(256);for(let c=0;c<16;++c){let d=16*c;for(let e=0;e<16;++e)b[d+e]=a[c]+a[e]}return b}();function ab(a){return"undefined"==typeof BigInt?ac:a}function ac(){throw Error("BigInt not supported")}},82854:function(a){"use strict";a.exports=function(a,b,c,d,e){if(0===d.limit)return a._nextTick(e);let f=a.db.transaction([b],"readwrite"),g=f.objectStore(b),h=0;f.oncomplete=function(){e()},f.onabort=function(){e(f.error||Error("aborted by user"))};let i=g.openKeyCursor?"openKeyCursor":"openCursor",j=d.reverse?"prev":"next";g[i](c,j).onsuccess=function(a){let b=a.target.result;b&&(g.delete(b.key).onsuccess=function(){(d.limit<=0|| ++h<d.limit)&&b.continue()})}}},38450:function(a,b,c){"use strict";let d=c(61862).lW,e=function(){if(!c.g.TextDecoder)return function(a){return g(a).toString()};{let a=new TextDecoder("utf-8");return a.decode.bind(a)}}(),f=function(){if(!c.g.TextDecoder)return function(a){return d.from(a).toString()};{let a=new TextDecoder("utf-8");return a.decode.bind(a)}}();function g(a){let b=d.from(a.buffer);return a.byteLength===a.buffer.byteLength?b:b.slice(a.byteOffset,a.byteOffset+a.byteLength)}a.exports=function(a,b){return a instanceof Uint8Array?b?g(a):e(a):a instanceof ArrayBuffer?b?d.from(a):f(a):b?d.from(String(a)):String(a)}},78950:function(a,b,c){"use strict";let d=c(82303),e=Symbol("none");a.exports=function(a){let b=d.lowerBound(a,e),c=d.upperBound(a,e),f=d.lowerBoundExclusive(a,e),g=d.upperBoundExclusive(a,e);return b!==e&&c!==e?IDBKeyRange.bound(b,c,f,g):b!==e?IDBKeyRange.lowerBound(b,f):c!==e?IDBKeyRange.upperBound(c,g):null}},55568:function(a,b,c){"use strict";let d=c(61862).lW,e=function(){if(!c.g.TextEncoder)return d.from;{let a=new TextEncoder("utf-8");return a.encode.bind(a)}}();a.exports=function(a,b){return b?d.isBuffer(a)?a:e(String(a)):String(a)}},71228:function(a,b,c){"use strict";let d=c(61862).lW;b.test=function(a){return function(b){try{return b.cmp(a,0),!0}catch(c){return!1}}},b.bufferKeys=b.test(d.alloc(0))},63145:function(a,b,c){a.exports=c(72509)(c(99558))},39892:function(a,b,c){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */ /* eslint-disable no-proto */ let d=c(79742),e=c(80645),f="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function g(a){if(a>2147483647)throw RangeError('The value "'+a+'" is invalid for option "size"');let b=new Uint8Array(a);return Object.setPrototypeOf(b,h.prototype),b}function h(a,b,c){if("number"==typeof a){if("string"==typeof b)throw TypeError('The "string" argument must be of type string. Received type number');return k(a)}return i(a,b,c)}function i(a,b,c){if("string"==typeof a)return l(a,b);if(ArrayBuffer.isView(a))return n(a);if(null==a)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(_(a,ArrayBuffer)||a&&_(a.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(_(a,SharedArrayBuffer)||a&&_(a.buffer,SharedArrayBuffer)))return o(a,b,c);if("number"==typeof a)throw TypeError('The "value" argument must not be of type number. Received type number');let d=a.valueOf&&a.valueOf();if(null!=d&&d!==a)return h.from(d,b,c);let e=p(a);if(e)return e;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof a[Symbol.toPrimitive])return h.from(a[Symbol.toPrimitive]("string"),b,c);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}function j(a){if("number"!=typeof a)throw TypeError('"size" argument must be of type number');if(a<0)throw RangeError('The value "'+a+'" is invalid for option "size"')}function k(a){return j(a),g(a<0?0:0|q(a))}function l(a,b){if(("string"!=typeof b||""===b)&&(b="utf8"),!h.isEncoding(b))throw TypeError("Unknown encoding: "+b);let c=0|r(a,b),d=g(c),e=d.write(a,b);return e!==c&&(d=d.slice(0,e)),d}function m(a){let b=a.length<0?0:0|q(a.length),c=g(b);for(let d=0;d<b;d+=1)c[d]=255&a[d];return c}function n(a){if(_(a,Uint8Array)){let b=new Uint8Array(a);return o(b.buffer,b.byteOffset,b.byteLength)}return m(a)}function o(a,b,c){if(b<0||a.byteLength<b)throw RangeError('"offset" is outside of buffer bounds');if(a.byteLength<b+(c||0))throw RangeError('"length" is outside of buffer bounds');let d;return Object.setPrototypeOf(d=void 0===b&& void 0===c?new Uint8Array(a):void 0===c?new Uint8Array(a,b):new Uint8Array(a,b,c),h.prototype),d}function p(a){if(h.isBuffer(a)){let b=0|q(a.length),c=g(b);return 0===c.length||a.copy(c,0,0,b),c}if(void 0!==a.length){var d;return"number"!=typeof a.length||(d=a.length,d!=d)?g(0):m(a)}if("Buffer"===a.type&&Array.isArray(a.data))return m(a.data)}function q(a){if(a>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|a}function r(a,b){if(h.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||_(a,ArrayBuffer))return a.byteLength;if("string"!=typeof a)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);let c=a.length,d=arguments.length>2&& !0===arguments[2];if(!d&&0===c)return 0;let e=!1;for(;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return W(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return Z(a).length;default:if(e)return d?-1:W(a).length;b=(""+b).toLowerCase(),e=!0}}function s(a,b,c){let d=!1;if((void 0===b||b<0)&&(b=0),b>this.length||((void 0===c||c>this.length)&&(c=this.length),c<=0||(c>>>=0)<=(b>>>=0)))return"";for(a||(a="utf8");;)switch(a){case"hex":return G(this,b,c);case"utf8":case"utf-8":return C(this,b,c);case"ascii":return E(this,b,c);case"latin1":case"binary":return F(this,b,c);case"base64":return B(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,b,c);default:if(d)throw TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function t(a,b,c){let d=a[b];a[b]=a[c],a[c]=d}function u(a,b,c,d,e){var f;if(0===a.length)return -1;if("string"==typeof c?(d=c,c=0):c>2147483647?c=2147483647:c< -2147483648&&(c=-2147483648),f=c=+c,f!=f&&(c=e?0:a.length-1),c<0&&(c=a.length+c),c>=a.length){if(e)return -1;c=a.length-1}else if(c<0){if(!e)return -1;c=0}if("string"==typeof b&&(b=h.from(b,d)),h.isBuffer(b))return 0===b.length?-1:v(a,b,c,d,e);if("number"==typeof b)return(b&=255,"function"==typeof Uint8Array.prototype.indexOf)?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):v(a,[b],c,d,e);throw TypeError("val must be string, number or Buffer")}function v(a,b,c,d,e){let f=1,g=a.length,h=b.length;if(void 0!==d&&("ucs2"===(d=String(d).toLowerCase())||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return -1;f=2,g/=2,h/=2,c/=2}function i(a,b){return 1===f?a[b]:a.readUInt16BE(b*f)}let j;if(e){let k=-1;for(j=c;j<g;j++)if(i(a,j)===i(b,-1===k?0:j-k)){if(-1===k&&(k=j),j-k+1===h)return k*f}else -1!==k&&(j-=j-k),k=-1}else for(c+h>g&&(c=g-h),j=c;j>=0;j--){let l=!0;for(let m=0;m<h;m++)if(i(a,j+m)!==i(b,m)){l=!1;break}if(l)return j}return -1}function w(a,b,c,d){c=Number(c)||0;let e=a.length-c;d?(d=Number(d))>e&&(d=e):d=e;let f=b.length;d>f/2&&(d=f/2);let g;for(g=0;g<d;++g){var h;let i=parseInt(b.substr(2*g,2),16);if(h=i,h!=h)break;a[c+g]=i}return g}function x(a,b,c,d){return $(W(b,a.length-c),a,c,d)}function y(a,b,c,d){return $(X(b),a,c,d)}function z(a,b,c,d){return $(Z(b),a,c,d)}function A(a,b,c,d){return $(Y(b,a.length-c),a,c,d)}function B(a,b,c){return 0===b&&c===a.length?d.fromByteArray(a):d.fromByteArray(a.slice(b,c))}function C(a,b,c){c=Math.min(a.length,c);let d=[],e=b;for(;e<c;){let f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(e+h<=c){let i,j,k,l;switch(h){case 1:f<128&&(g=f);break;case 2:(192&(i=a[e+1]))==128&&(l=(31&f)<<6|63&i)>127&&(g=l);break;case 3:i=a[e+1],j=a[e+2],(192&i)==128&&(192&j)==128&&(l=(15&f)<<12|(63&i)<<6|63&j)>2047&&(l<55296||l>57343)&&(g=l);break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],(192&i)==128&&(192&j)==128&&(192&k)==128&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k)>65535&&l<1114112&&(g=l)}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return D(d)}function D(a){let b=a.length;if(b<=4096)return String.fromCharCode.apply(String,a);let c="",d=0;for(;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=4096));return c}function E(a,b,c){let d="";c=Math.min(a.length,c);for(let e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}function F(a,b,c){let d="";c=Math.min(a.length,c);for(let e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}function G(a,b,c){let d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);let e="";for(let f=b;f<c;++f)e+=aa[a[f]];return e}function H(a,b,c){let d=a.slice(b,c),e="";for(let f=0;f<d.length-1;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function I(a,b,c){if(a%1!=0||a<0)throw RangeError("offset is not uint");if(a+b>c)throw RangeError("Trying to access beyond buffer length")}function J(a,b,c,d,e,f){if(!h.isBuffer(a))throw TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw RangeError('"value" argument is out of bounds');if(c+d>a.length)throw RangeError("Index out of range")}function K(a,b,c,d,e){S(b,d,e,a,c,7);let f=Number(b&BigInt(4294967295));a[c++]=f,f>>=8,a[c++]=f,f>>=8,a[c++]=f,f>>=8,a[c++]=f;let g=Number(b>>BigInt(32)&BigInt(4294967295));return a[c++]=g,g>>=8,a[c++]=g,g>>=8,a[c++]=g,g>>=8,a[c++]=g,c}function L(a,b,c,d,e){S(b,d,e,a,c,7);let f=Number(b&BigInt(4294967295));a[c+7]=f,f>>=8,a[c+6]=f,f>>=8,a[c+5]=f,f>>=8,a[c+4]=f;let g=Number(b>>BigInt(32)&BigInt(4294967295));return a[c+3]=g,g>>=8,a[c+2]=g,g>>=8,a[c+1]=g,g>>=8,a[c]=g,c+8}function M(a,b,c,d,e,f){if(c+d>a.length||c<0)throw RangeError("Index out of range")}function N(a,b,c,d,f){return b=+b,c>>>=0,f||M(a,b,c,4,34028234663852886e22,-34028234663852886e22),e.write(a,b,c,d,23,4),c+4}function O(a,b,c,d,f){return b=+b,c>>>=0,f||M(a,b,c,8,17976931348623157e292,-17976931348623157e292),e.write(a,b,c,d,52,8),c+8}b.Buffer=h,b.SlowBuffer=function(a){return+a!=a&&(a=0),h.alloc(+a)},b.INSPECT_MAX_BYTES=50,b.kMaxLength=2147483647,h.TYPED_ARRAY_SUPPORT=function(){try{let a=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(a,b),42===a.foo()}catch(c){return!1}}(),h.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(a,b,c){return i(a,b,c)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(a,b,c){var d,e,f;return d=a,e=b,f=c,(j(d),d<=0)?g(d):void 0!==e?"string"==typeof f?g(d).fill(e,f):g(d).fill(e):g(d)},h.allocUnsafe=function(a){return k(a)},h.allocUnsafeSlow=function(a){return k(a)},h.isBuffer=function(a){return null!=a&& !0===a._isBuffer&&a!==h.prototype},h.compare=function(a,b){if(_(a,Uint8Array)&&(a=h.from(a,a.offset,a.byteLength)),_(b,Uint8Array)&&(b=h.from(b,b.offset,b.byteLength)),!h.isBuffer(a)||!h.isBuffer(b))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===b)return 0;let c=a.length,d=b.length;for(let e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:d<c?1:0},h.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(a,b){if(!Array.isArray(a))throw TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return h.alloc(0);let c;if(void 0===b)for(c=0,b=0;c<a.length;++c)b+=a[c].length;let d=h.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){let f=a[c];if(_(f,Uint8Array))e+f.length>d.length?(h.isBuffer(f)||(f=h.from(f)),f.copy(d,e)):Uint8Array.prototype.set.call(d,f,e);else if(h.isBuffer(f))f.copy(d,e);else throw TypeError('"list" argument must be an Array of Buffers');e+=f.length}return d},h.byteLength=r,h.prototype._isBuffer=!0,h.prototype.swap16=function(){let a=this.length;if(a%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<a;b+=2)t(this,b,b+1);return this},h.prototype.swap32=function(){let a=this.length;if(a%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<a;b+=4)t(this,b,b+3),t(this,b+1,b+2);return this},h.prototype.swap64=function(){let a=this.length;if(a%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<a;b+=8)t(this,b,b+7),t(this,b+1,b+6),t(this,b+2,b+5),t(this,b+3,b+4);return this},h.prototype.toString=function(){let a=this.length;return 0===a?"":0===arguments.length?C(this,0,a):s.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(a){if(!h.isBuffer(a))throw TypeError("Argument must be a Buffer");return this===a||0===h.compare(this,a)},h.prototype.inspect=function(){let a="",c=b.INSPECT_MAX_BYTES;return a=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(a+=" ... "),"<Buffer "+a+">"},f&&(h.prototype[f]=h.prototype.inspect),h.prototype.compare=function(a,b,c,d,e){if(_(a,Uint8Array)&&(a=h.from(a,a.offset,a.byteLength)),!h.isBuffer(a))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),b<0||c>a.length||d<0||e>this.length)throw RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return -1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;let f=e-d,g=c-b,i=Math.min(f,g),j=this.slice(d,e),k=a.slice(b,c);for(let l=0;l<i;++l)if(j[l]!==k[l]){f=j[l],g=k[l];break}return f<g?-1:g<f?1:0},h.prototype.includes=function(a,b,c){return -1!==this.indexOf(a,b,c)},h.prototype.indexOf=function(a,b,c){return u(this,a,b,c,!0)},h.prototype.lastIndexOf=function(a,b,c){return u(this,a,b,c,!1)},h.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b>>>=0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let e=this.length-b;if((void 0===c||c>e)&&(c=e),a.length>0&&(c<0||b<0)||b>this.length)throw RangeError("Attempt to write outside buffer bounds");d||(d="utf8");let f=!1;for(;;)switch(d){case"hex":return w(this,a,b,c);case"utf8":case"utf-8":return x(this,a,b,c);case"ascii":case"latin1":case"binary":return y(this,a,b,c);case"base64":return z(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,a,b,c);default:if(f)throw TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),f=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},h.prototype.slice=function(a,b){let c=this.length;a=~~a,b=void 0===b?c:~~b,a<0?(a+=c)<0&&(a=0):a>c&&(a=c),b<0?(b+=c)<0&&(b=0):b>c&&(b=c),b<a&&(b=a);let d=this.subarray(a,b);return Object.setPrototypeOf(d,h.prototype),d},h.prototype.readUintLE=h.prototype.readUIntLE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);let d=this[a],e=1,f=0;for(;++f<b&&(e*=256);)d+=this[a+f]*e;return d},h.prototype.readUintBE=h.prototype.readUIntBE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);let d=this[a+ --b],e=1;for(;b>0&&(e*=256);)d+=this[a+ --b]*e;return d},h.prototype.readUint8=h.prototype.readUInt8=function(a,b){return a>>>=0,b||I(a,1,this.length),this[a]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(a,b){return a>>>=0,b||I(a,2,this.length),this[a]|this[a+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(a,b){return a>>>=0,b||I(a,2,this.length),this[a]<<8|this[a+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(a,b){return a>>>=0,b||I(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(a,b){return a>>>=0,b||I(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},h.prototype.readBigUInt64LE=ab(function(a){T(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b|| void 0===c)&&U(a,this.length-8);let d=b+256*this[++a]+65536*this[++a]+16777216*this[++a],e=this[++a]+256*this[++a]+65536*this[++a]+16777216*c;return BigInt(d)+(BigInt(e)<<BigInt(32))}),h.prototype.readBigUInt64BE=ab(function(a){T(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b|| void 0===c)&&U(a,this.length-8);let d=16777216*b+65536*this[++a]+256*this[++a]+this[++a],e=16777216*this[++a]+65536*this[++a]+256*this[++a]+c;return(BigInt(d)<<BigInt(32))+BigInt(e)}),h.prototype.readIntLE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);let d=this[a],e=1,f=0;for(;++f<b&&(e*=256);)d+=this[a+f]*e;return d>=(e*=128)&&(d-=Math.pow(2,8*b)),d},h.prototype.readIntBE=function(a,b,c){a>>>=0,b>>>=0,c||I(a,b,this.length);let d=b,e=1,f=this[a+ --d];for(;d>0&&(e*=256);)f+=this[a+ --d]*e;return f>=(e*=128)&&(f-=Math.pow(2,8*b)),f},h.prototype.readInt8=function(a,b){return(a>>>=0,b||I(a,1,this.length),128&this[a])?-((255-this[a]+1)*1):this[a]},h.prototype.readInt16LE=function(a,b){a>>>=0,b||I(a,2,this.length);let c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},h.prototype.readInt16BE=function(a,b){a>>>=0,b||I(a,2,this.length);let c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},h.prototype.readInt32LE=function(a,b){return a>>>=0,b||I(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},h.prototype.readInt32BE=function(a,b){return a>>>=0,b||I(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},h.prototype.readBigInt64LE=ab(function(a){T(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b|| void 0===c)&&U(a,this.length-8);let d=this[a+4]+256*this[a+5]+65536*this[a+6]+(c<<24);return(BigInt(d)<<BigInt(32))+BigInt(b+256*this[++a]+65536*this[++a]+16777216*this[++a])}),h.prototype.readBigInt64BE=ab(function(a){T(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b|| void 0===c)&&U(a,this.length-8);let d=(b<<24)+65536*this[++a]+256*this[++a]+this[++a];return(BigInt(d)<<BigInt(32))+BigInt(16777216*this[++a]+65536*this[++a]+256*this[++a]+c)}),h.prototype.readFloatLE=function(a,b){return a>>>=0,b||I(a,4,this.length),e.read(this,a,!0,23,4)},h.prototype.readFloatBE=function(a,b){return a>>>=0,b||I(a,4,this.length),e.read(this,a,!1,23,4)},h.prototype.readDoubleLE=function(a,b){return a>>>=0,b||I(a,8,this.length),e.read(this,a,!0,52,8)},h.prototype.readDoubleBE=function(a,b){return a>>>=0,b||I(a,8,this.length),e.read(this,a,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(a,b,c,d){if(a=+a,b>>>=0,c>>>=0,!d){let e=Math.pow(2,8*c)-1;J(this,a,b,c,e,0)}let f=1,g=0;for(this[b]=255&a;++g<c&&(f*=256);)this[b+g]=a/f&255;return b+c},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(a,b,c,d){if(a=+a,b>>>=0,c>>>=0,!d){let e=Math.pow(2,8*c)-1;J(this,a,b,c,e,0)}let f=c-1,g=1;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=a/g&255;return b+c},h.prototype.writeUint8=h.prototype.writeUInt8=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,1,255,0),this[b]=255&a,b+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,65535,0),this[b]=255&a,this[b+1]=a>>>8,b+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,65535,0),this[b]=a>>>8,this[b+1]=255&a,b+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,4294967295,0),this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a,b+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,4294967295,0),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},h.prototype.writeBigUInt64LE=ab(function(a,b=0){return K(this,a,b,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=ab(function(a,b=0){return L(this,a,b,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b>>>=0,!d){let e=Math.pow(2,8*c-1);J(this,a,b,c,e-1,-e)}let f=0,g=1,h=0;for(this[b]=255&a;++f<c&&(g*=256);)a<0&&0===h&&0!==this[b+f-1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},h.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b>>>=0,!d){let e=Math.pow(2,8*c-1);J(this,a,b,c,e-1,-e)}let f=c-1,g=1,h=0;for(this[b+f]=255&a;--f>=0&&(g*=256);)a<0&&0===h&&0!==this[b+f+1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},h.prototype.writeInt8=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,1,127,-128),a<0&&(a=255+a+1),this[b]=255&a,b+1},h.prototype.writeInt16LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,32767,-32768),this[b]=255&a,this[b+1]=a>>>8,b+2},h.prototype.writeInt16BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,2,32767,-32768),this[b]=a>>>8,this[b+1]=255&a,b+2},h.prototype.writeInt32LE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,2147483647,-2147483648),this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24,b+4},h.prototype.writeInt32BE=function(a,b,c){return a=+a,b>>>=0,c||J(this,a,b,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},h.prototype.writeBigInt64LE=ab(function(a,b=0){return K(this,a,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=ab(function(a,b=0){return L(this,a,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeFloatLE=function(a,b,c){return N(this,a,b,!0,c)},h.prototype.writeFloatBE=function(a,b,c){return N(this,a,b,!1,c)},h.prototype.writeDoubleLE=function(a,b,c){return O(this,a,b,!0,c)},h.prototype.writeDoubleBE=function(a,b,c){return O(this,a,b,!1,c)},h.prototype.copy=function(a,b,c,d){if(!h.isBuffer(a))throw TypeError("argument should be a Buffer");if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c||0===a.length||0===this.length)return 0;if(b<0)throw RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw RangeError("Index out of range");if(d<0)throw RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);let e=d-c;return this===a&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(b,c,d):Uint8Array.prototype.set.call(a,this.subarray(c,d),b),e},h.prototype.fill=function(a,b,c,d){if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),void 0!==d&&"string"!=typeof d)throw TypeError("encoding must be a string");if("string"==typeof d&&!h.isEncoding(d))throw TypeError("Unknown encoding: "+d);if(1===a.length){let e=a.charCodeAt(0);("utf8"===d&&e<128||"latin1"===d)&&(a=e)}}else"number"==typeof a?a&=255:"boolean"==typeof a&&(a=Number(a));if(b<0||this.length<b||this.length<c)throw RangeError("Out of range index");if(c<=b)return this;b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0);let f;if("number"==typeof a)for(f=b;f<c;++f)this[f]=a;else{let g=h.isBuffer(a)?a:h.from(a,d),i=g.length;if(0===i)throw TypeError('The value "'+a+'" is invalid for argument "value"');for(f=0;f<c-b;++f)this[f+b]=g[f%i]}return this};let P={};function Q(a,b,c){P[a]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:b.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${a}]`,this.stack,delete this.name}get code(){return a}set code(a){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:a,writable:!0})}toString(){return`${this.name} [${a}]: ${this.message}`}}}function R(a){let b="",c=a.length,d="-"===a[0]?1:0;for(;c>=d+4;c-=3)b=`_${a.slice(c-3,c)}${b}`;return`${a.slice(0,c)}${b}`}function S(a,b,c,d,e,f){var g,h,i;if(a>c||a<b){let j="bigint"==typeof b?"n":"",k;throw k=f>3?0===b||b===BigInt(0)?`>= 0${j} and < 2${j} ** ${(f+1)*8}${j}`:`>= -(2${j} ** ${(f+1)*8-1}${j}) and < 2 ** ${(f+1)*8-1}${j}`:`>= ${b}${j} and <= ${c}${j}`,new P.ERR_OUT_OF_RANGE("value",k,a)}g=d,h=e,i=f,T(h,"offset"),(void 0===g[h]|| void 0===g[h+i])&&U(h,g.length-(i+1))}function T(a,b){if("number"!=typeof a)throw new P.ERR_INVALID_ARG_TYPE(b,"number",a)}function U(a,b,c){if(Math.floor(a)!==a)throw T(a,c),new P.ERR_OUT_OF_RANGE(c||"offset","an integer",a);if(b<0)throw new P.ERR_BUFFER_OUT_OF_BOUNDS;throw new P.ERR_OUT_OF_RANGE(c||"offset",`>= ${c?1:0} and <= ${b}`,a)}Q("ERR_BUFFER_OUT_OF_BOUNDS",function(a){return a?`${a} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Q("ERR_INVALID_ARG_TYPE",function(a,b){return`The "${a}" argument must be of type number. Received type ${typeof b}`},TypeError),Q("ERR_OUT_OF_RANGE",function(a,b,c){let d=`The value of "${a}" is out of range.`,e=c;return Number.isInteger(c)&&Math.abs(c)>4294967296?e=R(String(c)):"bigint"==typeof c&&(e=String(c),(c>BigInt(2)**BigInt(32)||c< -(BigInt(2)**BigInt(32)))&&(e=R(e)),e+="n"),d+=` It must be ${b}. Received ${e}`},RangeError);let V=/[^+/0-9A-Za-z-_]/g;function W(a,b){b=b||1/0;let c,d=a.length,e=null,f=[];for(let g=0;g<d;++g){if((c=a.charCodeAt(g))>55295&&c<57344){if(!e){if(c>56319||g+1===d){(b-=3)> -1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)> -1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)> -1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else if(c<1114112){if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}else throw Error("Invalid code point")}return f}function X(a){let b=[];for(let c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function Y(a,b){let c,d,e,f=[];for(let g=0;g<a.length&&!((b-=2)<0);++g)d=(c=a.charCodeAt(g))>>8,e=c%256,f.push(e),f.push(d);return f}function Z(a){return d.toByteArray(function(a){if((a=(a=a.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;a.length%4!=0;)a+="=";return a}(a))}function $(a,b,c,d){let e;for(e=0;e<d&&!(e+c>=b.length)&&!(e>=a.length);++e)b[e+c]=a[e];return e}function _(a,b){return a instanceof b||null!=a&&null!=a.constructor&&null!=a.constructor.name&&a.constructor.name===b.name}let aa=function(){let a="0123456789abcdef",b=Array(256);for(let c=0;c<16;++c){let d=16*c;for(let e=0;e<16;++e)b[d+e]=a[c]+a[e]}return b}();function ab(a){return"undefined"==typeof BigInt?ac:a}function ac(){throw Error("BigInt not supported")}},15196:function(a,b,c){"use strict";let{AbstractChainedBatch:d}=c(24012),e=Symbol("operations");a.exports=class extends d{constructor(a){super(a),this[e]=[]}_put(a,b,c){this[e].push({...c,type:"put",key:a,value:b})}_del(a,b){this[e].push({...b,type:"del",key:a})}_clear(){this[e]=[]}_write(a,b){this.db.batch(this[e],a,b)}}},78662:function(a,b,c){"use strict";let{AbstractIterator:d}=c(24012),e=c(35717),f=c(95575).R,g=Symbol("options"),h=Symbol("iterator"),i=Symbol("operations"),j=Symbol("promise");function k(a,b){d.call(this,a),this[g]=b,this[h]=null,this[i]=[]}for(let l of(e(k,d),k.prototype.setDb=function(a){for(let b of(this[h]=a.iterator(this[g]),this[i].splice(0,this[i].length)))this[h][b.method](...b.args)},k.prototype.next=function(...a){if("open"===this.db.status)return this[h].next(...a);let b=f(a,j,function(a,b){if(void 0!==a|| void 0!==b)return[a,b]});return"opening"===this.db.status?this[i].push({method:"next",args:a}):this._nextTick(b,Error("Database is not open")),b[j]||this},k.prototype.seek=function(...a){if("open"===this.db.status)this[h].seek(...a);else if("opening"===this.db.status)this[i].push({method:"seek",args:a});else throw Error("Database is not open")},k.prototype.end=function(...a){if("open"===this.db.status)return this[h].end(...a);let b=f(a,j);return"opening"===this.db.status?this[i].push({method:"end",args:a}):this._nextTick(b,Error("Database is not open")),b[j]||this},["next","seek","end"]))k.prototype["_"+l]=function(){throw Error("Did not expect private method to be called: "+l)};a.exports=k},51961:function(a,b,c){"use strict";let{AbstractLevelDOWN:d}=c(24012),e=c(35717),f=c(78662),g=c(15196),h=c(95575).R,i=["put","get","getMany","del","batch","clear"],j=["approximateSize","compactRange"],k=Symbol("innerDb"),l=Symbol("operations"),m=Symbol("promise");function n(a){for(let b of(d.call(this,a.supports||{}),j))"function"!=typeof a[b]||this.supports.additionalMethods[b]||(this.supports.additionalMethods[b]=!0);this[k]=a,this[l]=[],o(this)}function o(a){let b=Object.keys(a.supports.additionalMethods);for(let c of i.concat(b))a[c]=function(...a){if("batch"===c&&0===a.length)return new g(this);if("open"===this.status)return this[k][c](...a);let b=h(a,m);return"opening"===this.status?this[l].push({method:c,args:a}):this._nextTick(b,Error("Database is not open")),b[m]};for(let d of(a.iterator=function(a){if("open"===this.status)return this[k].iterator(a);if("opening"===this.status){let b=new f(this,a);return this[l].push({iterator:b}),b}throw Error("Database is not open")},i.concat(["iterator"])))a["_"+d]=function(){throw Error("Did not expect private method to be called: "+d)}}e(n,d),n.prototype.type="deferred-leveldown",Object.defineProperty(n.prototype,"_db",{enumerable:!0,get(){return this[k]}}),n.prototype._open=function(a,b){let c=a=>{if(a||"open"!==this[k].status)return b(a||Error("Database is not open"));let c=this[l];for(let d of(this[l]=[],c))d.iterator?d.iterator.setDb(this[k]):this[k][d.method](...d.args);if(this[l].length>0)throw Error("Did not expect further operations");b()};"new"===this[k].status||"closed"===this[k].status?this[k].open(a,c):this._nextTick(c)},n.prototype._close=function(a){this[k].close(a)},n.prototype._isOperational=function(){return"opening"===this.status},a.exports=n,a.exports.DeferredIterator=f},95575:function(a,b){"use strict";b.R=function(a,b,c){let d=a[a.length-1];if("function"!=typeof d){let e=new Promise((b,e)=>{a.push(d=function(a,...d){a?e(a):b(c?c(...d):d[0])})});d[b]=e}return d}},99916:function(a,b,c){"use strict";let d=c(24012).AbstractLevelDOWN,e=c(24012).AbstractChainedBatch,f=c(24012).AbstractIterator,g=c(35717),h=c(38433),i=c(15505).EncodingError,j=["approximateSize","compactRange"];function k(a,b){if(!(this instanceof k))return new k(a,b);let c=a.supports||{},e=c.additionalMethods||{};d.call(this,c),this.supports.encodings=!0,this.supports.additionalMethods={},j.forEach(function(b){let c="function"==typeof a[b];(e[b]||c)&&(this.supports.additionalMethods[b]=!0,this[b]=function(a,c,d,e){return a=this.codec.encodeKey(a,d),c=this.codec.encodeKey(c,d),this.db[b](a,c,d,e)})},this),void 0===(b=b||{}).keyEncoding&&(b.keyEncoding="utf8"),void 0===b.valueEncoding&&(b.valueEncoding="utf8"),this.db=a,this.codec=new h(b)}function l(a,b){f.call(this,a),this.codec=a.codec,this.keys=b.keys,this.values=b.values,this.opts=this.codec.encodeLtgt(b),this.it=a.db.iterator(this.opts)}function m(a,b){e.call(this,a),this.codec=a.codec,this.batch=a.db.batch()}a.exports=k,g(k,d),k.prototype.type="encoding-down",k.prototype._serializeKey=k.prototype._serializeValue=function(a){return a},k.prototype._open=function(a,b){this.db.open(a,b)},k.prototype._close=function(a){this.db.close(a)},k.prototype._put=function(a,b,c,d){a=this.codec.encodeKey(a,c),b=this.codec.encodeValue(b,c),this.db.put(a,b,c,d)},k.prototype._get=function(a,b,c){a=this.codec.encodeKey(a,b),b.asBuffer=this.codec.valueAsBuffer(b),this.db.get(a,b,(a,d)=>{if(a)return c(a);try{d=this.codec.decodeValue(d,b)}catch(e){return c(new i(e))}c(null,d)})},k.prototype._getMany=function(a,b,c){a=a.map(a=>this.codec.encodeKey(a,b)),b.asBuffer=this.codec.valueAsBuffer(b),this.db.getMany(a,b,(a,d)=>{if(a)return c(a);let e=Array(d.length);for(let f=0;f<d.length;f++){if(void 0===d[f]){e[f]=void 0;continue}try{e[f]=this.codec.decodeValue(d[f],b)}catch(g){return c(new i(g))}}c(null,e)})},k.prototype._del=function(a,b,c){a=this.codec.encodeKey(a,b),this.db.del(a,b,c)},k.prototype._chainedBatch=function(){return new m(this)},k.prototype._batch=function(a,b,c){a=this.codec.encodeBatch(a,b),this.db.batch(a,b,c)},k.prototype._iterator=function(a){return a.keyAsBuffer=this.codec.keyAsBuffer(a),a.valueAsBuffer=this.codec.valueAsBuffer(a),new l(this,a)},k.prototype._clear=function(a,b){a=this.codec.encodeLtgt(a),this.db.clear(a,b)},g(l,f),l.prototype._next=function(a){this.it.next((b,c,d)=>{if(b)return a(b);try{c=this.keys&& void 0!==c?this.codec.decodeKey(c,this.opts):void 0,d=this.values&& void 0!==d?this.codec.decodeValue(d,this.opts):void 0}catch(e){return a(new i(e))}a(null,c,d)})},l.prototype._seek=function(a){a=this.codec.encodeKey(a,this.opts),this.it.seek(a)},l.prototype._end=function(a){this.it.end(a)},g(m,e),m.prototype._put=function(a,b,c){a=this.codec.encodeKey(a,c),b=this.codec.encodeValue(b,c),this.batch.put(a,b)},m.prototype._del=function(a,b){a=this.codec.encodeKey(a,b),this.batch.del(a)},m.prototype._clear=function(){this.batch.clear()},m.prototype._write=function(a,b){this.batch.write(a,b)}},38433:function(a,b,c){"use strict";let d=c(96887),e=new Set(["lt","gt","lte","gte"]);function f(a){if(!(this instanceof f))return new f(a);this.opts=a||{},this.encodings=d}a.exports=f,f.prototype._encoding=function(a){return"string"==typeof a&&(a=d[a]),a||(a=d.id),a},f.prototype._keyEncoding=function(a,b){return this._encoding(b&&b.keyEncoding||a&&a.keyEncoding||this.opts.keyEncoding)},f.prototype._valueEncoding=function(a,b){return this._encoding(b&&(b.valueEncoding||b.encoding)||a&&(a.valueEncoding||a.encoding)||this.opts.valueEncoding||this.opts.encoding)},f.prototype.encodeKey=function(a,b,c){return this._keyEncoding(b,c).encode(a)},f.prototype.encodeValue=function(a,b,c){return this._valueEncoding(b,c).encode(a)},f.prototype.decodeKey=function(a,b){return this._keyEncoding(b).decode(a)},f.prototype.decodeValue=function(a,b){return this._valueEncoding(b).decode(a)},f.prototype.encodeBatch=function(a,b){return a.map(a=>{let c={type:a.type,key:this.encodeKey(a.key,b,a)};return this.keyAsBuffer(b,a)&&(c.keyEncoding="binary"),a.prefix&&(c.prefix=a.prefix),"value"in a&&(c.value=this.encodeValue(a.value,b,a),this.valueAsBuffer(b,a)&&(c.valueEncoding="binary")),c})},f.prototype.encodeLtgt=function(a){let b={};for(let c of Object.keys(a)){if("start"===c||"end"===c)throw Error('Legacy range options ("start" and "end") have been removed');b[c]=e.has(c)?this.encodeKey(a[c],a):a[c]}return b},f.prototype.createStreamDecoder=function(a){return a.keys&&a.values?(b,c)=>({key:this.decodeKey(b,a),value:this.decodeValue(c,a)}):a.keys?b=>this.decodeKey(b,a):a.values?(b,c)=>this.decodeValue(c,a):function(){}},f.prototype.keyAsBuffer=function(a){return this._keyEncoding(a).buffer},f.prototype.valueAsBuffer=function(a){return this._valueEncoding(a).buffer}},96887:function(a,b,c){"use strict";let{Buffer:d}=c(39892);for(let e of(b.utf8=b["utf-8"]={encode:function(a){return g(a)?a:String(a)},decode:f,buffer:!1,type:"utf8"},b.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"},b.binary={encode:function(a){return g(a)?a:d.from(a)},decode:f,buffer:!0,type:"binary"},b.none={encode:f,decode:f,buffer:!1,type:"id"},b.id=b.none,["hex","ascii","base64","ucs2","ucs-2","utf16le","utf-16le"]))b[e]={encode:function(a){return g(a)?a:d.from(a,e)},decode:function(a){return a.toString(e)},buffer:!0,type:e};function f(a){return a}function g(a){return null==a||d.isBuffer(a)}},15505:function(a){"use strict";function b(a,b){let c=function(b,d){if("object"==typeof b&&null!==b&&(d=d||b,b=b.message||b.name),b=b||"","object"==typeof(d=d||void 0)&&d.type===a&&d.message===b)return d;Object.defineProperty(this,"type",{value:a,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"name",{value:a,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"cause",{value:d,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"message",{value:b,enumerable:!1,writable:!0,configurable:!0}),Error.call(this),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,c)};return c.prototype=new b,c}let c=b("LevelUPError",Error);a.exports={LevelUPError:c,InitializationError:b("InitializationError",c),OpenError:b("OpenError",c),ReadError:b("ReadError",c),WriteError:b("WriteError",c),NotFoundError:b("NotFoundError",c),EncodingError:b("EncodingError",c)},a.exports.NotFoundError.prototype.notFound=!0,a.exports.NotFoundError.prototype.status=404},80852:function(a,b,c){"use strict";let d=c(35717),{Readable:e}=c(88473);function f(a,b){if(!(this instanceof f))return new f(a,b);b=b||{},e.call(this,Object.assign({},b,{objectMode:!0})),this._iterator=a,this._options=b,this.on("end",this.destroy.bind(this,null,null))}a.exports=f,d(f,e),f.prototype._read=function(){this.destroyed||this._iterator.next((a,b,c)=>{if(!this.destroyed){if(a)return this.destroy(a);void 0===b&& void 0===c?this.push(null):!1!==this._options.keys&& !1===this._options.values?this.push(b):!1===this._options.keys&& !1!==this._options.values?this.push(c):this.push({key:b,value:c})}})},f.prototype._destroy=function(a,b){this._iterator.end(function(c){b(a||c)})}},72509:function(a,b,c){"use strict";let d=c(44760),e=c(99916);a.exports=function(a){function b(b,f,g){return"function"==typeof b?g=b:"function"==typeof f&&(g=f),c(f)||(f=c(b)?b:{}),d(e(a(b,f),f),f,g)}function c(a){return"object"==typeof a&&null!==a}for(let f of["destroy","repair"])"function"==typeof a[f]&&(b[f]=function(...b){a[f](...b)});return b.errors=d.errors,b}},53313:function(a){"use strict";function b(a){return!!a&&Object.assign({},a)}a.exports=function(...a){let c=a.reduce((a,b)=>Object.assign(a,b),{});return Object.assign(c,{bufferKeys:c.bufferKeys||!1,snapshots:c.snapshots||!1,permanence:c.permanence||!1,seek:c.seek||!1,clear:c.clear||!1,getMany:c.getMany||!1,keyIterator:c.keyIterator||!1,valueIterator:c.valueIterator||!1,iteratorNextv:c.iteratorNextv||!1,iteratorAll:c.iteratorAll||!1,status:c.status||!1,idempotentOpen:c.idempotentOpen||!1,passiveOpen:c.passiveOpen||!1,serialize:c.serialize||!1,createIfMissing:c.createIfMissing||!1,errorIfExists:c.errorIfExists||!1,deferredOpen:c.deferredOpen||!1,openCallback:c.openCallback||!1,promises:c.promises||!1,streams:c.streams||!1,encodings:b(c.encodings),events:b(c.events),additionalMethods:Object.assign({},c.additionalMethods)})}},53137:function(a,b,c){"use strict";let d=c(15505).WriteError,e=c(16957),f=c(19799).R,g=c(19799).F;function h(a){this.db=a,this.batch=a.db.batch(),this.ops=[],this.length=0}h.prototype.put=function(a,b,c){try{this.batch.put(a,b,c)}catch(e){throw new d(e)}return this.ops.push({...c,type:"put",key:a,value:b}),this.length++,this},h.prototype.del=function(a,b){try{this.batch.del(a,b)}catch(c){throw new d(c)}return this.ops.push({...b,type:"del",key:a}),this.length++,this},h.prototype.clear=function(){try{this.batch.clear()}catch(a){throw new d(a)}return this.ops=[],this.length=0,this},h.prototype.write=function(a,b){let c=this.db,h=this.ops;b=f(a,b),b=e.fromCallback(b),a=g(a);try{this.batch.write(a,function(a){if(a)return b(new d(a));c.emit("batch",h),b()})}catch(i){throw new d(i)}return b.promise},a.exports=h},19799:function(a,b){"use strict";b.R=function(a,b){return"function"==typeof a?a:b},b.F=function(a){return"object"==typeof a&&null!==a?a:{}}},44760:function(a,b,c){"use strict";let d=c(17187).EventEmitter,e=c(89539).inherits,f=c(51961),g=c(80852),h=c(53137),i=c(15505),j=c(53313),k=c(16957),l=c(19799).R,m=c(19799).F,n=c(82769),o=i.WriteError,p=i.ReadError,q=i.NotFoundError,r=i.OpenError,s=i.InitializationError;function t(a,b,c){if(!(this instanceof t))return new t(a,b,c);let e;if(d.call(this),this.setMaxListeners(1/0),"function"==typeof b&&(c=b,b={}),b=b||{},!a||"object"!=typeof a){if(e=new s("First argument must be an abstract-leveldown compliant store"),"function"==typeof c)return n(c,e);throw e}if("string"!=typeof a.status)throw Error(".status required, old abstract-leveldown");for(let f of(this.options=m(b),this._db=a,this.db=null,this.open(c||(a=>{a&&this.emit("error",a)})),this.supports=j(this.db.supports,{status:!0,deferredOpen:!0,openCallback:!0,promises:!0,streams:!0}),Object.keys(this.supports.additionalMethods)))null==this[f]&&(this[f]=function(...a){return this.db[f](...a)})}function u(a,b){return!a.isOperational()&&(n(b,new p("Database is not open")),!0)}t.prototype.emit=d.prototype.emit,t.prototype.once=d.prototype.once,e(t,d),Object.defineProperty(t.prototype,"status",{enumerable:!0,get(){return this.db.status}}),t.prototype.isOperational=function(){return"open"===this.db.status||"opening"===this.db.status},t.prototype.open=function(a,b){return("function"==typeof a&&(b=a,a=null),b=k.fromCallback(b),a||(a=this.options),this.db&&this.isOpen())?(n(b,null,this),b.promise):this.db&&this._isOpening()?(this.once("open",()=>{b(null,this)}),b.promise):(this.db=new f(this._db),this.emit("opening"),this.db.open(a,a=>{if(a)return b(new r(a));this.db=this._db,b(null,this),this.emit("open"),this.emit("ready")}),b.promise)},t.prototype.close=function(a){return a=k.fromCallback(a),this.isOpen()?(this.db.close((b,...c)=>{this.emit("closed"),a(b,...c)}),this.emit("closing")):this.isClosed()?n(a):"closing"===this.db.status?this.once("closed",a):this._isOpening()&&this.once("open",()=>{this.close(a)}),a.promise},t.prototype.isOpen=function(){return"open"===this.db.status},t.prototype._isOpening=function(){return"opening"===this.db.status},t.prototype.isClosed=function(){return/^clos|new/.test(this.db.status)},t.prototype.get=function(a,b,c){return c=l(b,c),u(this,c=k.fromCallback(c))||(b=m(b),this.db.get(a,b,function(b,d){if(b)return c(b=/notfound/i.test(b)||b.notFound?new q("Key not found in database ["+a+"]",b):new p(b));c(null,d)})),c.promise},t.prototype.getMany=function(a,b,c){return this.db.getMany(a,b,c)},t.prototype.put=function(a,b,c,d){return d=l(c,d),u(this,d=k.fromCallback(d))||(c=m(c),this.db.put(a,b,c,c=>{if(c)return d(new o(c));this.emit("put",a,b),d()})),d.promise},t.prototype.del=function(a,b,c){return c=l(b,c),u(this,c=k.fromCallback(c))||(b=m(b),this.db.del(a,b,b=>{if(b)return c(new o(b));this.emit("del",a),c()})),c.promise},t.prototype.batch=function(a,b,c){return arguments.length?(c="function"==typeof a?a:l(b,c),u(this,c=k.fromCallback(c))||(b=m(b),this.db.batch(a,b,b=>{if(b)return c(new o(b));this.emit("batch",a),c()})),c.promise):new h(this)},t.prototype.iterator=function(a){return this.db.iterator(a)},t.prototype.clear=function(a,b){return b=l(a,b),a=m(a),u(this,b=k.fromCallback(b))||this.db.clear(a,c=>{if(c)return b(new o(c));this.emit("clear",a),b()}),b.promise},t.prototype.readStream=t.prototype.createReadStream=function(a){return"number"!=typeof(a=Object.assign({keys:!0,values:!0},a)).limit&&(a.limit=-1),new g(this.db.iterator(a),a)},t.prototype.keyStream=t.prototype.createKeyStream=function(a){return this.createReadStream(Object.assign({},a,{keys:!0,values:!1}))},t.prototype.valueStream=t.prototype.createValueStream=function(a){return this.createReadStream(Object.assign({},a,{keys:!1,values:!0}))},t.prototype.toString=function(){return"LevelUP"},t.prototype.type="levelup",t.prototype._nextTick=n,t.errors=i,a.exports=t},82769:function(a,b,c){"use strict";let d=c(54375);a.exports=function(a,...b){0===b.length?d(a):d(()=>a(...b))}},82303:function(a,b,c){var d=c(48764).Buffer;function e(a){return void 0!==a&&""!==a}function f(a,b){return Object.hasOwnProperty.call(a,b)}function g(a,b){return Object.hasOwnProperty.call(a,b)&&b}b.compare=function(a,b){if(d.isBuffer(a)){for(var c=Math.min(a.length,b.length),e=0;e<c;e++){var f=a[e]-b[e];if(f)return f}return a.length-b.length}return a<b?-1:a>b?1:0};var h=b.lowerBoundKey=function(a){return g(a,"gt")||g(a,"gte")||g(a,"min")||(a.reverse?g(a,"end"):g(a,"start"))||void 0},i=b.lowerBound=function(a,b){var c=h(a);return c?a[c]:b},j=b.lowerBoundInclusive=function(a){return!f(a,"gt")},k=b.upperBoundInclusive=function(a){return!f(a,"lt")},l=b.lowerBoundExclusive=function(a){return!j(a)},m=b.upperBoundExclusive=function(a){return!k(a)},n=b.upperBoundKey=function(a){return g(a,"lt")||g(a,"lte")||g(a,"max")||(a.reverse?g(a,"start"):g(a,"end"))||void 0},o=b.upperBound=function(a,b){var c=n(a);return c?a[c]:b};function p(a){return a}b.start=function(a,b){return a.reverse?o(a,b):i(a,b)},b.end=function(a,b){return a.reverse?i(a,b):o(a,b)},b.startInclusive=function(a){return a.reverse?k(a):j(a)},b.endInclusive=function(a){return a.reverse?j(a):k(a)},b.toLtgt=function(a,c,d,e,g){c=c||{},d=d||p;var h=arguments.length>3,i=b.lowerBoundKey(a),j=b.upperBoundKey(a);return i?"gt"===i?c.gt=d(a.gt,!1):c.gte=d(a[i],!1):h&&(c.gte=d(e,!1)),j?"lt"===j?c.lt=d(a.lt,!0):c.lte=d(a[j],!0):h&&(c.lte=d(g,!0)),null!=a.reverse&&(c.reverse=!!a.reverse),f(c,"max")&&delete c.max,f(c,"min")&&delete c.min,f(c,"start")&&delete c.start,f(c,"end")&&delete c.end,c},b.contains=function(a,c,d){d=d||b.compare;var f=i(a);if(e(f)){var g=d(c,f);if(g<0||0===g&&l(a))return!1}var h=o(a);if(e(h)){var g=d(c,h);if(g>0||0===g&&m(a))return!1}return!0},b.filter=function(a,c){return function(d){return b.contains(a,d,c)}}},29175:function(a,b,c){"use strict";let{Multiaddr:d}=c(46584),e=E("dns4"),f=E("dns6"),g=E("dnsaddr"),h=D(E("dns"),g,e,f),i=D(E("ip4"),E("ip6")),j=D(C(i,E("tcp")),C(h,E("tcp"))),k=C(i,E("udp")),l=C(k,E("utp")),m=C(k,E("quic")),n=D(C(j,E("ws")),C(h,E("ws"))),o=D(C(j,E("wss")),C(h,E("wss"))),p=D(C(j,E("http")),C(i,E("http")),C(h,E("http"))),q=D(C(j,E("https")),C(i,E("https")),C(h,E("https"))),r=D(C(n,E("p2p-webrtc-star"),E("p2p")),C(o,E("p2p-webrtc-star"),E("p2p")),C(n,E("p2p-webrtc-star")),C(o,E("p2p-webrtc-star"))),s=D(C(n,E("p2p-websocket-star"),E("p2p")),C(o,E("p2p-websocket-star"),E("p2p")),C(n,E("p2p-websocket-star")),C(o,E("p2p-websocket-star"))),t=D(C(p,E("p2p-webrtc-direct"),E("p2p")),C(q,E("p2p-webrtc-direct"),E("p2p")),C(p,E("p2p-webrtc-direct")),C(q,E("p2p-webrtc-direct"))),u=D(n,o,p,q,r,t,j,l,m,h),v=D(C(u,E("p2p-stardust"),E("p2p")),C(u,E("p2p-stardust"))),w=D(C(u,E("p2p")),r,t,E("p2p")),x=D(C(w,E("p2p-circuit"),w),C(w,E("p2p-circuit")),C(E("p2p-circuit"),w),C(u,E("p2p-circuit")),C(E("p2p-circuit"),u),E("p2p-circuit")),y=()=>D(C(x,y),x),z=y(),A=D(C(z,w,z),C(w,z),C(z,w),z,w);function B(a){return function(b){if(!d.isMultiaddr(b))try{b=new d(b)}catch(c){return!1}let e=a(b.protoNames());return null!==e&&(!0===e|| !1===e?e:0===e.length)}}function C(...a){function b(b){if(b.length<a.length)return null;let c=b;return a.some(a=>(Array.isArray(c="function"==typeof a?a().partialMatch(b):a.partialMatch(b))&&(b=c),null===c)),c}return{toString:function(){return"{ "+a.join(" ")+" }"},input:a,matches:B(b),partialMatch:b}}function D(...a){function b(b){let c=null;return a.some(a=>{let d="function"==typeof a?a().partialMatch(b):a.partialMatch(b);return!!d&&(c=d,!0)}),c}let c={toString:function(){return"{ "+a.join(" ")+" }"},input:a,matches:B(b),partialMatch:b};return c}function E(a){let b=a;return{toString:function(){return b},matches:function(a){let c;if("string"==typeof a||a instanceof Uint8Array)try{c=new d(a)}catch(e){return!1}else c=a;let f=c.protoNames();return 1===f.length&&f[0]===b},partialMatch:function(a){return 0===a.length?null:a[0]===b?a.slice(1):null}}}a.exports={DNS:h,DNS4:e,DNS6:f,DNSADDR:g,IP:i,TCP:j,UDP:k,QUIC:m,UTP:l,HTTP:p,HTTPS:q,WebSockets:n,WebSocketsSecure:o,WebSocketStar:s,WebRTCStar:r,WebRTCDirect:t,Reliable:u,Stardust:v,Circuit:z,P2P:A,IPFS:A}},57824:function(a){var b=36e5,c=24*b,d=7*c,e=365.25*c;function f(a,b,c,d){return Math.round(a/c)+" "+d+(b>=1.5*c?"s":"")}a.exports=function(a,g){g=g||{};var h,i,j,k,l=typeof a;if("string"===l&&a.length>0)return function a(f){if(!((f=String(f)).length>100)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(g){var h=parseFloat(g[1]),i=(g[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return h*e;case"weeks":case"week":case"w":return h*d;case"days":case"day":case"d":return h*c;case"hours":case"hour":case"hrs":case"hr":case"h":return h*b;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*h;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}(a);if("number"===l&&isFinite(a)){return g.long?(h=a,i=Math.abs(h),i>=c?f(h,i,c,"day"):i>=b?f(h,i,b,"hour"):i>=6e4?f(h,i,6e4,"minute"):i>=1e3?f(h,i,1e3,"second"):h+" ms"):(j=a,k=Math.abs(j),k>=c?Math.round(j/c)+"d":k>=b?Math.round(j/b)+"h":k>=6e4?Math.round(j/6e4)+"m":k>=1e3?Math.round(j/1e3)+"s":j+"ms")}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},18190:function(a,b,c){"use strict";let d=c(99918),e=c(89768),f=c(94676),{concat:g}=c(20605),{toString:h}=c(92263);function i(a){let b=[],c=a.split("/").slice(1);if(1===c.length&&""===c[0])return[];for(let d=0;d<c.length;d++){let f=c[d],g=e(f);if(0===g.size){b.push([f]);continue}if(++d>=c.length)throw u("invalid address: "+a);if(g.path){b.push([f,t(c.slice(d).join("/"))]);break}b.push([f,c[d]])}return b}function j(a){let b=[];return a.map(a=>{let c=v(a);return b.push(c.name),a.length>1&&b.push(a[1]),null}),t(b.join("/"))}function k(a){return a.map(a=>{Array.isArray(a)||(a=[a]);let b=v(a);return a.length>1?[b.code,d.toBytes(b.code,a[1])]:[b.code]})}function l(a){return a.map(a=>{let b=v(a);return a[1]?[b.code,d.toString(b.code,a[1])]:[b.code]})}function m(a){return r(g(a.map(a=>{let b=v(a),c=Uint8Array.from(f.encode(b.code));return a.length>1&&(c=g([c,a[1]])),c})))}function n(a,b){if(a.size>0)return a.size/8;if(0===a.size)return 0;{let c=f.decode(b);return c+f.decode.bytes}}function o(a){let b=[],c=0;for(;c<a.length;){let d=f.decode(a,c),g=f.decode.bytes,i=e(d),j=n(i,a.slice(c+g));if(0===j){b.push([d]),c+=g;continue}let k=a.slice(c+g,c+g+j);if((c+=j+g)>a.length)throw u("Invalid address Uint8Array: "+h(a,"base16"));b.push([d,k])}return b}function p(a){a=t(a);let b=i(a),c=k(b);return m(c)}function q(a){return p(a)}function r(a){let b=s(a);if(b)throw b;return Uint8Array.from(a)}function s(a){try{o(a)}catch(b){return b}}function t(a){return"/"+a.trim().split("/").filter(a=>a).join("/")}function u(a){return Error("Error parsing address: "+a)}function v(a){let b=e(a[0]);return b}a.exports={stringToStringTuples:i,stringTuplesToString:j,tuplesToStringTuples:l,stringTuplesToTuples:k,bytesToTuples:o,tuplesToBytes:m,bytesToString:function(a){let b=o(a),c=l(b);return j(c)},stringToBytes:p,fromString:q,fromBytes:r,validateBytes:s,isValidBytes:function(a){return void 0===s(a)},cleanPath:t,ParseError:u,protoFromTuple:v,sizeForAddr:n}},99918:function(a,b,c){"use strict";let d=c(33692),e=c(89768),{CID:f}=c(81362),{base32:g}=c(22817),{base58btc:h}=c(99086),i=c(28924),j=c(94676),{toString:k}=c(92263),{fromString:l}=c(52217),{concat:m}=c(20605);function n(a,b){return b instanceof Uint8Array?n.toString(a,b):n.toBytes(a,b)}function o(a){let b=new ArrayBuffer(2),c=new DataView(b);return c.setUint16(0,a),new Uint8Array(b)}function p(a){let b=new DataView(a.buffer);return b.getUint16(a.byteOffset)}a.exports=n,n.toString=function(a,b){let c=e(a);switch(c.code){case 4:case 41:return function a(b){let c=d.toString(b);if(!c||!d.isIP(c))throw Error("invalid ip address");return c}(b);case 6:case 273:case 33:case 132:return p(b).toString();case 53:case 54:case 55:case 56:case 400:case 777:return function a(b){let c=j.decode(b);if((b=b.slice(j.decode.bytes)).length!==c)throw Error("inconsistent lengths");return k(b)}(b);case 421:return function a(b){let c=j.decode(b),d=b.slice(j.decode.bytes);if(d.length!==c)throw Error("inconsistent lengths");return k(d,"base58btc")}(b);case 444:case 445:return function a(b){let c=b.slice(0,b.length-2),d=b.slice(b.length-2),e=k(c,"base32"),f=p(d);return e+":"+f}(b);default:return k(b,"base16")}},n.toBytes=function(a,b){let c=e(a);switch(c.code){case 4:case 41:return function a(b){if(!d.isIP(b))throw Error("invalid ip address");return d.toBytes(b)}(b);case 6:case 273:case 33:case 132:return o(parseInt(b,10));case 53:case 54:case 55:case 56:case 400:case 777:return function a(b){let c=l(b),d=Uint8Array.from(j.encode(c.length));return m([d,c],d.length+c.length)}(b);case 421:return function a(b){let c;c="Q"===b[0]||"1"===b[0]?i.decode(h.decode(`z${b}`)).bytes:f.parse(b).multihash.bytes;let d=Uint8Array.from(j.encode(c.length));return m([d,c],d.length+c.length)}(b);case 444:return function a(b){let c=b.split(":");if(2!==c.length)throw Error("failed to parse onion addr: "+c+" does not contain a port number");if(16!==c[0].length)throw Error("failed to parse onion addr: "+c[0]+" not a Tor onion address.");let d=g.decode("b"+c[0]),e=parseInt(c[1],10);if(e<1||e>65536)throw Error("Port number is not in range(1, 65536)");let f=o(e);return m([d,f],d.length+f.length)}(b);case 445:return function a(b){let c=b.split(":");if(2!==c.length)throw Error("failed to parse onion addr: "+c+" does not contain a port number");if(56!==c[0].length)throw Error("failed to parse onion addr: "+c[0]+" not a Tor onion3 address.");let d=g.decode("b"+c[0]),e=parseInt(c[1],10);if(e<1||e>65536)throw Error("Port number is not in range(1, 65536)");let f=o(e);return m([d,f],d.length+f.length)}(b);default:return l(b,"base16")}}},46584:function(a,b,c){"use strict";let d=c(18190),e=c(89768),f=c(94676),{CID:g}=c(81362),{base58btc:h}=c(99086),i=c(32114),j=Symbol.for("nodejs.util.inspect.custom"),{toString:k}=c(92263),{equals:l}=c(19588),m=new Map,n=Symbol.for("@multiformats/js-multiaddr/multiaddr");class o{constructor(a){if(null==a&&(a=""),Object.defineProperty(this,n,{value:!0}),a instanceof Uint8Array)this.bytes=d.fromBytes(a);else if("string"==typeof a){if(a.length>0&&"/"!==a.charAt(0))throw Error(`multiaddr "${a}" must start with a "/"`);this.bytes=d.fromString(a)}else if(o.isMultiaddr(a))this.bytes=d.fromBytes(a.bytes);else throw Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return d.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){let a={},b=this.toString().split("/");return a.family="ip4"===b[1]?4:6,a.host=b[2],a.transport=b[3],a.port=parseInt(b[4]),a}protos(){return this.protoCodes().map(a=>Object.assign({},e(a)))}protoCodes(){let a=[],b=this.bytes,c=0;for(;c<b.length;){let g=f.decode(b,c),h=f.decode.bytes,i=e(g),j=d.sizeForAddr(i,b.slice(c+h));c+=j+h,a.push(g)}return a}protoNames(){return this.protos().map(a=>a.name)}tuples(){return d.bytesToTuples(this.bytes)}stringTuples(){let a=d.bytesToTuples(this.bytes);return d.tuplesToStringTuples(a)}encapsulate(a){return a=new o(a),new o(this.toString()+a.toString())}decapsulate(a){let b=a.toString(),c=this.toString(),d=c.lastIndexOf(b);if(d<0)throw Error("Address "+this+" does not contain subaddress: "+a);return new o(c.slice(0,d))}decapsulateCode(a){let b=this.tuples();for(let c=b.length-1;c>=0;c--)if(b[c][0]===a)return new o(d.tuplesToBytes(b.slice(0,c)));return this}getPeerId(){try{let a=this.stringTuples().filter(a=>a[0]===e.names.ipfs.code),b=a.pop();if(b&&b[1]){let c=b[1];if("Q"===c[0]||"1"===c[0])return k(h.decode(`z${c}`),"base58btc");return k(g.parse(c).multihash.bytes,"base58btc")}return null}catch(d){return null}}getPath(){let a=null;try{(a=this.stringTuples().filter(a=>{let b=e(a[0]);return!!b.path})[0][1])||(a=null)}catch(b){a=null}return a}equals(a){return l(this.bytes,a.bytes)}async resolve(){let a=this.protos().find(a=>a.resolvable);if(!a)return[this];let b=m.get(a.name);if(!b)throw i(Error(`no available resolver for ${a.name}`),"ERR_NO_AVAILABLE_RESOLVER");let c=await b(this);return c.map(a=>new o(a))}nodeAddress(){let a=this.protoCodes(),b=this.protoNames(),c=this.toString().split("/").slice(1);if(c.length<4)throw Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(4!==a[0]&&41!==a[0]&&54!==a[0]&&55!==a[0])throw Error(`no protocol with name: "'${b[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if("tcp"!==c[2]&&"udp"!==c[2])throw Error(`no protocol with name: "'${b[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:41===a[0]||55===a[0]?6:4,address:c[1],port:parseInt(c[3])}}isThinWaistAddress(a){let b=(a||this).protos();return 2===b.length&&(4===b[0].code||41===b[0].code)&&(6===b[1].code||273===b[1].code)}static fromNodeAddress(a,b){if(!a)throw Error("requires node address object");if(!b)throw Error("requires transport protocol");let c;switch(a.family){case 4:c="ip4";break;case 6:c="ip6";break;default:throw Error(`Invalid addr family. Got '${a.family}' instead of 4 or 6`)}return new o("/"+[c,a.address,b,a.port].join("/"))}static isName(a){return!!o.isMultiaddr(a)&&a.protos().some(a=>a.resolvable)}static isMultiaddr(a){return a instanceof o||Boolean(a&&a[n])}[j](){return"<Multiaddr "+k(this.bytes,"base16")+" - "+d.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+k(this.bytes,"base16")+" - "+d.bytesToString(this.bytes)+">"}}o.protocols=e,o.resolvers=m,a.exports={Multiaddr:o,multiaddr:function(a){return new o(a)},protocols:e,resolvers:m}},33692:function(a,b,c){"use strict";let d=c(5003),{toString:e}=c(92263),f=d.v4,g=d.v6,h=function(a,b,c){c=~~c;let d;if(f(a))d=b||new Uint8Array(c+4),a.split(/\./g).map(function(a){d[c++]=255&parseInt(a,10)});else if(g(a)){let i=a.split(":",8),j;for(j=0;j<i.length;j++){let k=f(i[j]),l;k&&(l=h(i[j]),i[j]=e(l.slice(0,2),"base16")),l&& ++j<8&&i.splice(j,0,e(l.slice(2,4),"base16"))}if(""===i[0])for(;i.length<8;)i.unshift("0");else if(""===i[i.length-1])for(;i.length<8;)i.push("0");else if(i.length<8){for(j=0;j<i.length&&""!==i[j];j++);let m=[j,"1"];for(j=9-i.length;j>0;j--)m.push("0");i.splice.apply(i,m)}for(j=0,d=b||new Uint8Array(c+16);j<i.length;j++){let n=parseInt(i[j],16);d[c++]=n>>8&255,d[c++]=255&n}}if(!d)throw Error("Invalid ip address: "+a);return d},i=function(a,b,c){b=~~b,c=c||a.length-b;let d=[],e,f=new DataView(a.buffer);if(4===c){for(let g=0;g<c;g++)d.push(a[b+g]);e=d.join(".")}else if(16===c){for(let h=0;h<c;h+=2)d.push(f.getUint16(b+h).toString(16));e=(e=(e=d.join(":")).replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3")).replace(/:{3,4}/,"::")}return e};a.exports={isIP:d,isV4:f,isV6:g,toBytes:h,toString:i}},89768:function(a){"use strict";function b(a){if("number"==typeof a){if(b.codes[a])return b.codes[a];throw Error("no protocol with code: "+a)}if("string"==typeof a){if(b.names[a])return b.names[a];throw Error("no protocol with name: "+a)}throw Error("invalid protocol id type: "+a)}function c(a,b,c,d,e){return{code:a,size:b,name:c,resolvable:Boolean(d),path:Boolean(e)}}b.lengthPrefixedVarSize=-1,b.V=-1,b.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns","resolvable"],[54,-1,"dns4","resolvable"],[55,-1,"dns6","resolvable"],[56,-1,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,"path"],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]],b.names={},b.codes={},b.table.map(a=>{let d=c.apply(null,a);return b.codes[d.code]=d,b.names[d.name]=d,null}),b.object=c,a.exports=b},40469:function(a,b,c){a.exports=c(18027)},18027:function(a,b){!function(c,d){"use strict";var e={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function f(a){if(!Array.isArray(a)&&!ArrayBuffer.isView(a))return!1;for(var b=0;b<a.length;b++)if(!Number.isInteger(a[b])||a[b]<0||a[b]>255)return!1;return!0}function g(a,b){return(65535&a)*b+(((a>>>16)*b&65535)<<16)}function h(a,b){return a<<b|a>>>32-b}function i(a){return a^=a>>>16,a=g(a,2246822507),a^=a>>>13,a=g(a,3266489909),a^=a>>>16}function j(a,b){a=[a[0]>>>16,65535&a[0],a[1]>>>16,65535&a[1]],b=[b[0]>>>16,65535&b[0],b[1]>>>16,65535&b[1]];var c=[0,0,0,0];return c[3]+=a[3]+b[3],c[2]+=c[3]>>>16,c[3]&=65535,c[2]+=a[2]+b[2],c[1]+=c[2]>>>16,c[2]&=65535,c[1]+=a[1]+b[1],c[0]+=c[1]>>>16,c[1]&=65535,c[0]+=a[0]+b[0],c[0]&=65535,[c[0]<<16|c[1],c[2]<<16|c[3]]}function k(a,b){a=[a[0]>>>16,65535&a[0],a[1]>>>16,65535&a[1]],b=[b[0]>>>16,65535&b[0],b[1]>>>16,65535&b[1]];var c=[0,0,0,0];return c[3]+=a[3]*b[3],c[2]+=c[3]>>>16,c[3]&=65535,c[2]+=a[2]*b[3],c[1]+=c[2]>>>16,c[2]&=65535,c[2]+=a[3]*b[2],c[1]+=c[2]>>>16,c[2]&=65535,c[1]+=a[1]*b[3],c[0]+=c[1]>>>16,c[1]&=65535,c[1]+=a[2]*b[2],c[0]+=c[1]>>>16,c[1]&=65535,c[1]+=a[3]*b[1],c[0]+=c[1]>>>16,c[1]&=65535,c[0]+=a[0]*b[3]+a[1]*b[2]+a[2]*b[1]+a[3]*b[0],c[0]&=65535,[c[0]<<16|c[1],c[2]<<16|c[3]]}function l(a,b){return 32==(b%=64)?[a[1],a[0]]:b<32?[a[0]<<b|a[1]>>>32-b,a[1]<<b|a[0]>>>32-b]:(b-=32,[a[1]<<b|a[0]>>>32-b,a[0]<<b|a[1]>>>32-b])}function m(a,b){return 0==(b%=64)?a:b<32?[a[0]<<b|a[1]>>>32-b,a[1]<<b]:[a[1]<<b-32,0]}function n(a,b){return[a[0]^b[0],a[1]^b[1]]}function o(a){return a=k(a=n(a,[0,a[0]>>>1]),[4283543511,3981806797]),a=n(a,[0,a[0]>>>1]),a=k(a,[3301882366,444984403]),a=n(a,[0,a[0]>>>1])}e.x86.hash32=function(a,b){if(!e.inputValidation||f(a)){b=b||0;for(var c=a.length%4,d=a.length-c,j=b,k=0,l=0;l<d;l+=4)k=h(k=g(k=a[l]|a[l+1]<<8|a[l+2]<<16|a[l+3]<<24,3432918353),15),k=g(k,461845907),j^=k,j=h(j,13),j=g(j,5)+3864292196;switch(k=0,c){case 3:k^=a[l+2]<<16;case 2:k^=a[l+1]<<8;case 1:k^=a[l],k=h(k=g(k,3432918353),15),k=g(k,461845907),j^=k}return j^=a.length,(j=i(j))>>>0}},e.x86.hash128=function(a,b){if(!e.inputValidation||f(a)){b=b||0;for(var c=a.length%16,d=a.length-c,j=b,k=b,l=b,m=b,n=0,o=0,p=0,q=0,r=0;r<d;r+=16)n=a[r]|a[r+1]<<8|a[r+2]<<16|a[r+3]<<24,o=a[r+4]|a[r+5]<<8|a[r+6]<<16|a[r+7]<<24,p=a[r+8]|a[r+9]<<8|a[r+10]<<16|a[r+11]<<24,q=a[r+12]|a[r+13]<<8|a[r+14]<<16|a[r+15]<<24,n=g(n,597399067),n=h(n,15),n=g(n,2869860233),j^=n,j=h(j,19),j+=k,j=g(j,5)+1444728091,o=g(o,2869860233),o=h(o,16),o=g(o,951274213),k^=o,k=h(k,17),k+=l,k=g(k,5)+197830471,p=g(p,951274213),p=h(p,17),p=g(p,2716044179),l^=p,l=h(l,15),l+=m,l=g(l,5)+2530024501,q=g(q,2716044179),q=h(q,18),q=g(q,597399067),m^=q,m=h(m,13),m+=j,m=g(m,5)+850148119;switch(n=0,o=0,p=0,q=0,c){case 15:q^=a[r+14]<<16;case 14:q^=a[r+13]<<8;case 13:q^=a[r+12],q=h(q=g(q,2716044179),18),q=g(q,597399067),m^=q;case 12:p^=a[r+11]<<24;case 11:p^=a[r+10]<<16;case 10:p^=a[r+9]<<8;case 9:p^=a[r+8],p=h(p=g(p,951274213),17),p=g(p,2716044179),l^=p;case 8:o^=a[r+7]<<24;case 7:o^=a[r+6]<<16;case 6:o^=a[r+5]<<8;case 5:o^=a[r+4],o=h(o=g(o,2869860233),16),o=g(o,951274213),k^=o;case 4:n^=a[r+3]<<24;case 3:n^=a[r+2]<<16;case 2:n^=a[r+1]<<8;case 1:n^=a[r],n=h(n=g(n,597399067),15),n=g(n,2869860233),j^=n}return j^=a.length,k^=a.length,l^=a.length,m^=a.length,j+=k,j+=l,j+=m,k+=j,l+=j,m+=j,j=i(j),k=i(k),l=i(l),m=i(m),j+=k,j+=l,j+=m,k+=j,l+=j,m+=j,("00000000"+(j>>>0).toString(16)).slice(-8)+("00000000"+(k>>>0).toString(16)).slice(-8)+("00000000"+(l>>>0).toString(16)).slice(-8)+("00000000"+(m>>>0).toString(16)).slice(-8)}},e.x64.hash128=function(a,b){if(!e.inputValidation||f(a)){b=b||0;for(var c=a.length%16,d=a.length-c,g=[0,b],h=[0,b],i=[0,0],p=[0,0],q=[2277735313,289559509],r=[1291169091,658871167],s=0;s<d;s+=16)i=[a[s+4]|a[s+5]<<8|a[s+6]<<16|a[s+7]<<24,a[s]|a[s+1]<<8|a[s+2]<<16|a[s+3]<<24],p=[a[s+12]|a[s+13]<<8|a[s+14]<<16|a[s+15]<<24,a[s+8]|a[s+9]<<8|a[s+10]<<16|a[s+11]<<24],i=k(i,q),i=l(i,31),i=k(i,r),g=n(g,i),g=l(g,27),g=j(g,h),g=j(k(g,[0,5]),[0,1390208809]),p=k(p,r),p=l(p,33),p=k(p,q),h=n(h,p),h=l(h,31),h=j(h,g),h=j(k(h,[0,5]),[0,944331445]);switch(i=[0,0],p=[0,0],c){case 15:p=n(p,m([0,a[s+14]],48));case 14:p=n(p,m([0,a[s+13]],40));case 13:p=n(p,m([0,a[s+12]],32));case 12:p=n(p,m([0,a[s+11]],24));case 11:p=n(p,m([0,a[s+10]],16));case 10:p=n(p,m([0,a[s+9]],8));case 9:p=l(p=k(p=n(p,[0,a[s+8]]),r),33),p=k(p,q),h=n(h,p);case 8:i=n(i,m([0,a[s+7]],56));case 7:i=n(i,m([0,a[s+6]],48));case 6:i=n(i,m([0,a[s+5]],40));case 5:i=n(i,m([0,a[s+4]],32));case 4:i=n(i,m([0,a[s+3]],24));case 3:i=n(i,m([0,a[s+2]],16));case 2:i=n(i,m([0,a[s+1]],8));case 1:i=l(i=k(i=n(i,[0,a[s]]),q),31),i=k(i,r),g=n(g,i)}return g=n(g,[0,a.length]),h=n(h,[0,a.length]),g=j(g,h),h=j(h,g),g=o(g),h=o(h),g=j(g,h),h=j(h,g),("00000000"+(g[0]>>>0).toString(16)).slice(-8)+("00000000"+(g[1]>>>0).toString(16)).slice(-8)+("00000000"+(h[0]>>>0).toString(16)).slice(-8)+("00000000"+(h[1]>>>0).toString(16)).slice(-8)}},a.exports&&(b=a.exports=e),b.murmurHash3=e}(this)},99633:function(a){"use strict";a.exports=function(a){var b=void 0,c=void 0;function d(a){if(!(a instanceof Object))throw Error('Target "'+a+'" is not an object');c=a}function e(a){Object.keys(a).forEach(function(b){var c=a[b];if("function"!=typeof c)throw Error('Trap "'+b+": "+c+'" is not a function');if(!Reflect[b])throw Error('Trap "'+b+": "+c+'" is not a valid trap')}),b=a}d(function(){}),a&&d(a),e(Reflect);var f=new Proxy({},{get:function(a,d){return function(){for(var a=arguments.length,e=Array(a),f=0;f<a;f++)e[f]=arguments[f];return b[d].apply(null,[c].concat(function(a){if(!Array.isArray(a))return Array.from(a);for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}(e.slice(1))))}}});return{setTarget:d,setHandler:e,getTarget:function(){return c},getHandler:function(){return b},proxy:new Proxy(c,f)}}},28951:function(a,b){(function(){var a,c,d,e,f,g,h,i;i=function(a){var b,c,d,e;return b=(-16777216&a)>>>24,c=(16711680&a)>>>16,d=(65280&a)>>>8,e=255&a,[b,c,d,e].join(".")},h=function(a){var b,d,e,f,g,h;for(b=[],e=f=0;f<=3&&0!==a.length;e=++f){if(e>0){if("."!==a[0])throw Error("Invalid IP");a=a.substring(1)}g=(h=c(a))[0],d=h[1],a=a.substring(d),b.push(g)}if(0!==a.length)throw Error("Invalid IP");switch(b.length){case 1:if(b[0]>4294967295)throw Error("Invalid IP");return b[0]>>>0;case 2:if(b[0]>255||b[1]>16777215)throw Error("Invalid IP");return(b[0]<<24|b[1])>>>0;case 3:if(b[0]>255||b[1]>255||b[2]>65535)throw Error("Invalid IP");return(b[0]<<24|b[1]<<16|b[2])>>>0;case 4:if(b[0]>255||b[1]>255||b[2]>255||b[3]>255)throw Error("Invalid IP");return(b[0]<<24|b[1]<<16|b[2]<<8|b[3])>>>0;default:throw Error("Invalid IP")}},e=(d=function(a){return a.charCodeAt(0)})("0"),g=d("a"),f=d("A"),c=function(a){var b,c,h,i,j;for(i=0,b=10,c="9",h=0,a.length>1&&"0"===a[h]&&("x"===a[h+1]||"X"===a[h+1]?(h+=2,b=16):"0"<=a[h+1]&&a[h+1]<="9"&&(h++,b=8,c="7")),j=h;h<a.length;){if("0"<=a[h]&&a[h]<=c)i=i*b+(d(a[h])-e)>>>0;else if(16===b){if("a"<=a[h]&&a[h]<="f")i=i*b+(10+d(a[h])-g)>>>0;else if("A"<=a[h]&&a[h]<="F")i=i*b+(10+d(a[h])-f)>>>0;else break}else break;if(i>4294967295)throw Error("too large");h++}if(h===j)throw Error("empty octet");return[i,h]},a=function(){function a(a,b){var c,d,e;if("string"!=typeof a)throw Error("Missing `net' parameter");if(b||(a=(e=a.split("/",2))[0],b=e[1]),b||(b=32),"string"==typeof b&&b.indexOf(".")> -1){try{this.maskLong=h(b)}catch(f){throw Error("Invalid mask: "+b)}for(c=d=32;d>=0;c=--d)if(this.maskLong===4294967295<<32-c>>>0){this.bitmask=c;break}}else if(b||0===b)this.bitmask=parseInt(b,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0);else throw Error("Invalid mask: empty");try{this.netLong=(h(a)&this.maskLong)>>>0}catch(g){throw Error("Invalid net address: "+a)}if(!(this.bitmask<=32))throw Error("Invalid mask for ip4: "+b);this.size=Math.pow(2,32-this.bitmask),this.base=i(this.netLong),this.mask=i(this.maskLong),this.hostmask=i(~this.maskLong),this.first=this.bitmask<=30?i(this.netLong+1):this.base,this.last=this.bitmask<=30?i(this.netLong+this.size-2):i(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?i(this.netLong+this.size-1):void 0}return a.prototype.contains=function(b){return("string"==typeof b&&(b.indexOf("/")>0||4!==b.split(".").length)&&(b=new a(b)),b instanceof a)?this.contains(b.base)&&this.contains(b.broadcast||b.last):(h(b)&this.maskLong)>>>0==(this.netLong&this.maskLong)>>>0},a.prototype.next=function(b){return null==b&&(b=1),new a(i(this.netLong+this.size*b),this.mask)},a.prototype.forEach=function(a){var b,c,d;for(d=h(this.first),c=h(this.last),b=0;d<=c;)a(i(d),d,b),b++,d++},a.prototype.toString=function(){return this.base+"/"+this.bitmask},a}(),b.ip2long=h,b.long2ip=i,b.Netmask=a}).call(this)},39828:function(){},8925:function(a,b,c){var d,e,f,g,h,i=c(3832);function j(a,b){var c=function(){return new i.aes.Algorithm(a,b)};i.cipher.registerAlgorithm(a,c)}c(85649),c(61967),c(97116),a.exports=i.aes=i.aes||{},i.aes.startEncrypting=function(a,b,c,d){var e=p({key:a,output:c,decrypt:!1,mode:d});return e.start(b),e},i.aes.createEncryptionCipher=function(a,b){return p({key:a,output:null,decrypt:!1,mode:b})},i.aes.startDecrypting=function(a,b,c,d){var e=p({key:a,output:c,decrypt:!0,mode:d});return e.start(b),e},i.aes.createDecryptionCipher=function(a,b){return p({key:a,output:null,decrypt:!0,mode:b})},i.aes.Algorithm=function(a,b){k||m();var c=this;c.name=a,c.mode=new b({blockSize:16,cipher:{encrypt:function(a,b){return o(c._w,a,b,!1)},decrypt:function(a,b){return o(c._w,a,b,!0)}}}),c._init=!1},i.aes.Algorithm.prototype.initialize=function(a){if(!this._init){var b,c=a.key;if("string"==typeof c&&(16===c.length||24===c.length||32===c.length))c=i.util.createBuffer(c);else if(i.util.isArray(c)&&(16===c.length||24===c.length||32===c.length)){b=c,c=i.util.createBuffer();for(var d=0;d<b.length;++d)c.putByte(b[d])}if(!i.util.isArray(c)){b=c,c=[];var e=b.length();if(16===e||24===e||32===e){e>>>=2;for(var d=0;d<e;++d)c.push(b.getInt32())}}if(!i.util.isArray(c)||!(4===c.length||6===c.length||8===c.length))throw Error("Invalid key parameter.");var f=-1!==["CFB","OFB","CTR","GCM"].indexOf(this.mode.name);this._w=n(c,a.decrypt&&!f),this._init=!0}},i.aes._expandKey=function(a,b){return k||m(),n(a,b)},i.aes._updateBlock=o,j("AES-ECB",i.cipher.modes.ecb),j("AES-CBC",i.cipher.modes.cbc),j("AES-CFB",i.cipher.modes.cfb),j("AES-OFB",i.cipher.modes.ofb),j("AES-CTR",i.cipher.modes.ctr),j("AES-GCM",i.cipher.modes.gcm);var k=!1,l=4;function m(){k=!0,f=[0,1,2,4,8,16,32,64,128,27,54];for(var a=Array(256),b=0;b<128;++b)a[b]=b<<1,a[b+128]=b+128<<1^283;d=Array(256),e=Array(256),g=[,,,,],h=[,,,,];for(var b=0;b<4;++b)g[b]=Array(256),h[b]=Array(256);for(var c,i,j,l,m,n,o,p=0,q=0,b=0;b<256;++b){l=(l=q^q<<1^q<<2^q<<3^q<<4)>>8^255&l^99,d[p]=l,e[l]=p,m=a[l],c=a[p],i=a[c],j=a[i],n=m<<24^l<<16^l<<8^(l^m),o=(c^i^j)<<24^(p^j)<<16^(p^i^j)<<8^(p^c^j);for(var r=0;r<4;++r)g[r][p]=n,h[r][l]=o,n=n<<24|n>>>8,o=o<<24|o>>>8;0===p?p=q=1:(p=c^a[a[a[c^j]]],q^=a[a[q]])}}function n(a,b){for(var c,e=a.slice(0),g=1,i=e.length,j=l*(i+6+1),k=i;k<j;++k)c=e[k-1],k%i==0?(c=d[c>>>16&255]<<24^d[c>>>8&255]<<16^d[255&c]<<8^d[c>>>24]^f[g]<<24,g++):i>6&&k%i==4&&(c=d[c>>>24]<<24^d[c>>>16&255]<<16^d[c>>>8&255]<<8^d[255&c]),e[k]=e[k-i]^c;if(b){var m,n=h[0],o=h[1],p=h[2],q=h[3],r=e.slice(0);j=e.length;for(var k=0,s=j-l;k<j;k+=l,s-=l)if(0===k||k===j-l)r[k]=e[s],r[k+1]=e[s+3],r[k+2]=e[s+2],r[k+3]=e[s+1];else for(var t=0;t<l;++t)m=e[s+t],r[k+(3& -t)]=n[d[m>>>24]]^o[d[m>>>16&255]]^p[d[m>>>8&255]]^q[d[255&m]];e=r}return e}function o(a,b,c,f){var i,j,k,l,m,n,o,p,q,r,s,t,u=a.length/4-1;f?(i=h[0],j=h[1],k=h[2],l=h[3],m=e):(i=g[0],j=g[1],k=g[2],l=g[3],m=d),n=b[0]^a[0],o=b[f?3:1]^a[1],p=b[2]^a[2],q=b[f?1:3]^a[3];for(var v=3,w=1;w<u;++w)r=i[n>>>24]^j[o>>>16&255]^k[p>>>8&255]^l[255&q]^a[++v],s=i[o>>>24]^j[p>>>16&255]^k[q>>>8&255]^l[255&n]^a[++v],t=i[p>>>24]^j[q>>>16&255]^k[n>>>8&255]^l[255&o]^a[++v],q=i[q>>>24]^j[n>>>16&255]^k[o>>>8&255]^l[255&p]^a[++v],n=r,o=s,p=t;c[0]=m[n>>>24]<<24^m[o>>>16&255]<<16^m[p>>>8&255]<<8^m[255&q]^a[++v],c[f?3:1]=m[o>>>24]<<24^m[p>>>16&255]<<16^m[q>>>8&255]<<8^m[255&n]^a[++v],c[2]=m[p>>>24]<<24^m[q>>>16&255]<<16^m[n>>>8&255]<<8^m[255&o]^a[++v],c[f?1:3]=m[q>>>24]<<24^m[n>>>16&255]<<16^m[o>>>8&255]<<8^m[255&p]^a[++v]}function p(a){var b,c="AES-"+((a=a||{}).mode||"CBC").toUpperCase(),d=(b=a.decrypt?i.cipher.createDecipher(c,a.key):i.cipher.createCipher(c,a.key)).start;return b.start=function(a,c){var e=null;c instanceof i.util.ByteBuffer&&(e=c,c={}),(c=c||{}).output=e,c.iv=a,d.call(b,c)},b}},3068:function(a,b,c){var d=c(3832);c(97116),c(66270);var e=a.exports=d.asn1=d.asn1||{};function f(a,b,c){if(c>b){var d=Error("Too few bytes to parse DER.");throw d.available=a.length(),d.remaining=b,d.requested=c,d}}e.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},e.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},e.create=function(a,b,c,f,g){if(d.util.isArray(f)){for(var h=[],i=0;i<f.length;++i)void 0!==f[i]&&h.push(f[i]);f=h}var j={tagClass:a,type:b,constructed:c,composed:c||d.util.isArray(f),value:f};return g&&"bitStringContents"in g&&(j.bitStringContents=g.bitStringContents,j.original=e.copy(j)),j},e.copy=function(a,b){var c;if(d.util.isArray(a)){c=[];for(var f=0;f<a.length;++f)c.push(e.copy(a[f],b));return c}return"string"==typeof a?a:(c={tagClass:a.tagClass,type:a.type,constructed:a.constructed,composed:a.composed,value:e.copy(a.value,b)},b&&!b.excludeBitStringContents&&(c.bitStringContents=a.bitStringContents),c)},e.equals=function(a,b,c){if(d.util.isArray(a)){if(!d.util.isArray(b)||a.length!==b.length)return!1;for(var f=0;f<a.length;++f)if(!e.equals(a[f],b[f]))return!1;return!0}if(typeof a!=typeof b)return!1;if("string"==typeof a)return a===b;var g=a.tagClass===b.tagClass&&a.type===b.type&&a.constructed===b.constructed&&a.composed===b.composed&&e.equals(a.value,b.value);return c&&c.includeBitStringContents&&(g=g&&a.bitStringContents===b.bitStringContents),g},e.getBerValueLength=function(a){var b,c=a.getByte();if(128!==c)return 128&c?a.getInt((127&c)<<3):c};var g=function(a,b){var c,d=a.getByte();if(b--,128!==d){if(128&d){var e=127&d;f(a,b,e),c=a.getInt(e<<3)}else c=d;if(c<0)throw Error("Negative length: "+c);return c}};function h(a,b,c,d){f(a,b,2);var i,j,k,l=a.getByte();b--;var m=192&l,n=31&l;i=a.length();var o=g(a,b);if(b-=i-a.length(),void 0!==o&&o>b){if(d.strict){var p=Error("Too few bytes to read ASN.1 value.");throw p.available=a.length(),p.remaining=b,p.requested=o,p}o=b}var q=(32&l)==32;if(q){if(j=[],void 0===o)for(;;){if(f(a,b,2),a.bytes(2)===String.fromCharCode(0,0)){a.getBytes(2),b-=2;break}i=a.length(),j.push(h(a,b,c+1,d)),b-=i-a.length()}else for(;o>0;)i=a.length(),j.push(h(a,o,c+1,d)),b-=i-a.length(),o-=i-a.length()}if(void 0===j&&m===e.Class.UNIVERSAL&&n===e.Type.BITSTRING&&(k=a.bytes(o)),void 0===j&&d.decodeBitStrings&&m===e.Class.UNIVERSAL&&n===e.Type.BITSTRING&&o>1){var r=a.read,s=b,t=0;if(n===e.Type.BITSTRING&&(f(a,b,1),t=a.getByte(),b--),0===t)try{i=a.length();var u={strict:!0,decodeBitStrings:!0},v=h(a,b,c+1,u),w=i-a.length();b-=w,n==e.Type.BITSTRING&&w++;var x=v.tagClass;w===o&&(x===e.Class.UNIVERSAL||x===e.Class.CONTEXT_SPECIFIC)&&(j=[v])}catch(y){}void 0===j&&(a.read=r,b=s)}if(void 0===j){if(void 0===o){if(d.strict)throw Error("Non-constructed ASN.1 object of indefinite length.");o=b}if(n===e.Type.BMPSTRING)for(j="";o>0;o-=2)f(a,b,2),j+=String.fromCharCode(a.getInt16()),b-=2;else j=a.getBytes(o),b-=o}var z=void 0===k?null:{bitStringContents:k};return e.create(m,n,q,j,z)}e.fromDer=function(a,b){void 0===b&&(b={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"==typeof b&&(b={strict:b,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in b||(b.strict=!0),"parseAllBytes"in b||(b.parseAllBytes=!0),"decodeBitStrings"in b||(b.decodeBitStrings=!0),"string"==typeof a&&(a=d.util.createBuffer(a));var c=a.length(),e=h(a,a.length(),0,b);if(b.parseAllBytes&&0!==a.length()){var f=Error("Unparsed DER bytes remain after ASN.1 parsing.");throw f.byteCount=c,f.remaining=a.length(),f}return e},e.toDer=function(a){var b=d.util.createBuffer(),c=a.tagClass|a.type,f=d.util.createBuffer(),g=!1;if("bitStringContents"in a&&(g=!0,a.original&&(g=e.equals(a,a.original))),g)f.putBytes(a.bitStringContents);else if(a.composed){a.constructed?c|=32:f.putByte(0);for(var h=0;h<a.value.length;++h)void 0!==a.value[h]&&f.putBuffer(e.toDer(a.value[h]))}else if(a.type===e.Type.BMPSTRING)for(var h=0;h<a.value.length;++h)f.putInt16(a.value.charCodeAt(h));else a.type===e.Type.INTEGER&&a.value.length>1&&(0===a.value.charCodeAt(0)&&(128&a.value.charCodeAt(1))==0||255===a.value.charCodeAt(0)&&(128&a.value.charCodeAt(1))==128)?f.putBytes(a.value.substr(1)):f.putBytes(a.value);if(b.putByte(c),127>=f.length())b.putByte(127&f.length());else{var i=f.length(),j="";do j+=String.fromCharCode(255&i),i>>>=8;while(i>0);b.putByte(128|j.length);for(var h=j.length-1;h>=0;--h)b.putByte(j.charCodeAt(h))}return b.putBuffer(f),b},e.oidToDer=function(a){var b,c,e,f,g=a.split("."),h=d.util.createBuffer();h.putByte(40*parseInt(g[0],10)+parseInt(g[1],10));for(var i=2;i<g.length;++i){b=!0,c=[],e=parseInt(g[i],10);do f=127&e,e>>>=7,b||(f|=128),c.push(f),b=!1;while(e>0);for(var j=c.length-1;j>=0;--j)h.putByte(c[j])}return h},e.derToOid=function(a){"string"==typeof a&&(a=d.util.createBuffer(a));var b,c=a.getByte();b=Math.floor(c/40)+"."+c%40;for(var e=0;a.length()>0;)c=a.getByte(),e<<=7,128&c?e+=127&c:(b+="."+(e+c),e=0);return b},e.utcTimeToDate=function(a){var b=new Date,c=parseInt(a.substr(0,2),10);c=c>=50?1900+c:2e3+c;var d=parseInt(a.substr(2,2),10)-1,e=parseInt(a.substr(4,2),10),f=parseInt(a.substr(6,2),10),g=parseInt(a.substr(8,2),10),h=0;if(a.length>11){var i=a.charAt(10),j=10;"+"!==i&&"-"!==i&&(h=parseInt(a.substr(10,2),10),j+=2)}if(b.setUTCFullYear(c,d,e),b.setUTCHours(f,g,h,0),j&&("+"===(i=a.charAt(j))||"-"===i)){var k=parseInt(a.substr(j+1,2),10),l=parseInt(a.substr(j+4,2),10),m=60*k+l;m*=6e4,"+"===i?b.setTime(+b-m):b.setTime(+b+m)}return b},e.generalizedTimeToDate=function(a){var b=new Date,c=parseInt(a.substr(0,4),10),d=parseInt(a.substr(4,2),10)-1,e=parseInt(a.substr(6,2),10),f=parseInt(a.substr(8,2),10),g=parseInt(a.substr(10,2),10),h=parseInt(a.substr(12,2),10),i=0,j=0,k=!1;"Z"===a.charAt(a.length-1)&&(k=!0);var l=a.length-5,m=a.charAt(l);if("+"===m||"-"===m){var n=parseInt(a.substr(l+1,2),10),o=parseInt(a.substr(l+4,2),10);j=60*n+o,j*=6e4,"+"===m&&(j*=-1),k=!0}return"."===a.charAt(14)&&(i=1e3*parseFloat(a.substr(14),10)),k?(b.setUTCFullYear(c,d,e),b.setUTCHours(f,g,h,i),b.setTime(+b+j)):(b.setFullYear(c,d,e),b.setHours(f,g,h,i)),b},e.dateToUtcTime=function(a){if("string"==typeof a)return a;var b="",c=[];c.push((""+a.getUTCFullYear()).substr(2)),c.push(""+(a.getUTCMonth()+1)),c.push(""+a.getUTCDate()),c.push(""+a.getUTCHours()),c.push(""+a.getUTCMinutes()),c.push(""+a.getUTCSeconds());for(var d=0;d<c.length;++d)c[d].length<2&&(b+="0"),b+=c[d];return b+"Z"},e.dateToGeneralizedTime=function(a){if("string"==typeof a)return a;var b="",c=[];c.push(""+a.getUTCFullYear()),c.push(""+(a.getUTCMonth()+1)),c.push(""+a.getUTCDate()),c.push(""+a.getUTCHours()),c.push(""+a.getUTCMinutes()),c.push(""+a.getUTCSeconds());for(var d=0;d<c.length;++d)c[d].length<2&&(b+="0"),b+=c[d];return b+"Z"},e.integerToDer=function(a){var b=d.util.createBuffer();if(a>= -128&&a<128)return b.putSignedInt(a,8);if(a>= -32768&&a<32768)return b.putSignedInt(a,16);if(a>= -8388608&&a<8388608)return b.putSignedInt(a,24);if(a>= -2147483648&&a<2147483648)return b.putSignedInt(a,32);var c=Error("Integer too large; max is 32-bits.");throw c.integer=a,c},e.derToInteger=function(a){"string"==typeof a&&(a=d.util.createBuffer(a));var b=8*a.length();if(b>32)throw Error("Integer too large; max is 32-bits.");return a.getSignedInt(b)},e.validate=function(a,b,c,f){var g=!1;if((a.tagClass===b.tagClass|| void 0===b.tagClass)&&(a.type===b.type|| void 0===b.type)){if(a.constructed===b.constructed|| void 0===b.constructed){if(g=!0,b.value&&d.util.isArray(b.value))for(var h=0,i=0;g&&i<b.value.length;++i)g=b.value[i].optional||!1,a.value[h]&&((g=e.validate(a.value[h],b.value[i],c,f))?++h:b.value[i].optional&&(g=!0)),!g&&f&&f.push("["+b.name+'] Tag class "'+b.tagClass+'", type "'+b.type+'" expected value length "'+b.value.length+'", got "'+a.value.length+'"');if(g&&c&&(b.capture&&(c[b.capture]=a.value),b.captureAsn1&&(c[b.captureAsn1]=a),b.captureBitStringContents&&"bitStringContents"in a&&(c[b.captureBitStringContents]=a.bitStringContents),b.captureBitStringValue&&"bitStringContents"in a)){if(a.bitStringContents.length<2)c[b.captureBitStringValue]="";else{if(0!==a.bitStringContents.charCodeAt(0))throw Error("captureBitStringValue only supported for zero unused bits");c[b.captureBitStringValue]=a.bitStringContents.slice(1)}}}else f&&f.push("["+b.name+'] Expected constructed "'+b.constructed+'", got "'+a.constructed+'"')}else f&&(a.tagClass!==b.tagClass&&f.push("["+b.name+'] Expected tag class "'+b.tagClass+'", got "'+a.tagClass+'"'),a.type!==b.type&&f.push("["+b.name+'] Expected type "'+b.type+'", got "'+a.type+'"'));return g};var i=/[^\\u0000-\\u00ff]/;e.prettyPrint=function(a,b,c){var f="";c=c||2,(b=b||0)>0&&(f+="\n");for(var g="",h=0;h<b*c;++h)g+=" ";switch(f+=g+"Tag: ",a.tagClass){case e.Class.UNIVERSAL:f+="Universal:";break;case e.Class.APPLICATION:f+="Application:";break;case e.Class.CONTEXT_SPECIFIC:f+="Context-Specific:";break;case e.Class.PRIVATE:f+="Private:"}if(a.tagClass===e.Class.UNIVERSAL)switch(f+=a.type,a.type){case e.Type.NONE:f+=" (None)";break;case e.Type.BOOLEAN:f+=" (Boolean)";break;case e.Type.INTEGER:f+=" (Integer)";break;case e.Type.BITSTRING:f+=" (Bit string)";break;case e.Type.OCTETSTRING:f+=" (Octet string)";break;case e.Type.NULL:f+=" (Null)";break;case e.Type.OID:f+=" (Object Identifier)";break;case e.Type.ODESC:f+=" (Object Descriptor)";break;case e.Type.EXTERNAL:f+=" (External or Instance of)";break;case e.Type.REAL:f+=" (Real)";break;case e.Type.ENUMERATED:f+=" (Enumerated)";break;case e.Type.EMBEDDED:f+=" (Embedded PDV)";break;case e.Type.UTF8:f+=" (UTF8)";break;case e.Type.ROID:f+=" (Relative Object Identifier)";break;case e.Type.SEQUENCE:f+=" (Sequence)";break;case e.Type.SET:f+=" (Set)";break;case e.Type.PRINTABLESTRING:f+=" (Printable String)";break;case e.Type.IA5String:f+=" (IA5String (ASCII))";break;case e.Type.UTCTIME:f+=" (UTC time)";break;case e.Type.GENERALIZEDTIME:f+=" (Generalized time)";break;case e.Type.BMPSTRING:f+=" (BMP String)"}else f+=a.type;if(f+="\n",f+=g+"Constructed: "+a.constructed+"\n",a.composed){for(var j=0,k="",h=0;h<a.value.length;++h)void 0!==a.value[h]&&(j+=1,k+=e.prettyPrint(a.value[h],b+1,c),h+1<a.value.length&&(k+=","));f+=g+"Sub values: "+j+k}else{if(f+=g+"Value: ",a.type===e.Type.OID){var l=e.derToOid(a.value);f+=l,d.pki&&d.pki.oids&&l in d.pki.oids&&(f+=" ("+d.pki.oids[l]+") ")}if(a.type===e.Type.INTEGER)try{f+=e.derToInteger(a.value)}catch(m){f+="0x"+d.util.bytesToHex(a.value)}else if(a.type===e.Type.BITSTRING){if(a.value.length>1?f+="0x"+d.util.bytesToHex(a.value.slice(1)):f+="(none)",a.value.length>0){var n=a.value.charCodeAt(0);1==n?f+=" (1 unused bit shown)":n>1&&(f+=" ("+n+" unused bits shown)")}}else if(a.type===e.Type.OCTETSTRING)i.test(a.value)||(f+="("+a.value+") "),f+="0x"+d.util.bytesToHex(a.value);else if(a.type===e.Type.UTF8)try{f+=d.util.decodeUtf8(a.value)}catch(o){if("URI malformed"===o.message)f+="0x"+d.util.bytesToHex(a.value)+" (malformed UTF8)";else throw o}else a.type===e.Type.PRINTABLESTRING||a.type===e.Type.IA5String?f+=a.value:i.test(a.value)?f+="0x"+d.util.bytesToHex(a.value):0===a.value.length?f+="[null]":f+=a.value}return f}},78807:function(a,b,c){var d=c(62678).Buffer,e={};a.exports=e;var f={};e.encode=function(a,b,c){if("string"!=typeof b)throw TypeError('"alphabet" must be a string.');if(void 0!==c&&"number"!=typeof c)throw TypeError('"maxline" must be a number.');var d="";if(a instanceof Uint8Array){var e=0,f=b.length,g=b.charAt(0),h=[0];for(e=0;e<a.length;++e){for(var i=0,j=a[e];i<h.length;++i)j+=h[i]<<8,h[i]=j%f,j=j/f|0;for(;j>0;)h.push(j%f),j=j/f|0}for(e=0;0===a[e]&&e<a.length-1;++e)d+=g;for(e=h.length-1;e>=0;--e)d+=b[h[e]]}else d=function a(b,c){var d=0,e=c.length,f=c.charAt(0),g=[0];for(d=0;d<b.length();++d){for(var h=0,i=b.at(d);h<g.length;++h)i+=g[h]<<8,g[h]=i%e,i=i/e|0;for(;i>0;)g.push(i%e),i=i/e|0}var j="";for(d=0;0===b.at(d)&&d<b.length()-1;++d)j+=f;for(d=g.length-1;d>=0;--d)j+=c[g[d]];return j}(a,b);if(c){var k=RegExp(".{1,"+c+"}","g");d=d.match(k).join("\r\n")}return d},e.decode=function(a,b){if("string"!=typeof a)throw TypeError('"input" must be a string.');if("string"!=typeof b)throw TypeError('"alphabet" must be a string.');var c=f[b];if(!c){c=f[b]=[];for(var e=0;e<b.length;++e)c[b.charCodeAt(e)]=e}a=a.replace(/\s/g,"");for(var g=b.length,h=b.charAt(0),i=[0],e=0;e<a.length;e++){var j=c[a.charCodeAt(e)];if(void 0===j)return;for(var k=0,l=j;k<i.length;++k)l+=i[k]*g,i[k]=255&l,l>>=8;for(;l>0;)i.push(255&l),l>>=8}for(var m=0;a[m]===h&&m<a.length-1;++m)i.push(0);return void 0!==d?d.from(i.reverse()):new Uint8Array(i.reverse())}},85649:function(a,b,c){var d=c(3832);c(97116),a.exports=d.cipher=d.cipher||{},d.cipher.algorithms=d.cipher.algorithms||{},d.cipher.createCipher=function(a,b){var c=a;if("string"==typeof c&&(c=d.cipher.getAlgorithm(c))&&(c=c()),!c)throw Error("Unsupported algorithm: "+a);return new d.cipher.BlockCipher({algorithm:c,key:b,decrypt:!1})},d.cipher.createDecipher=function(a,b){var c=a;if("string"==typeof c&&(c=d.cipher.getAlgorithm(c))&&(c=c()),!c)throw Error("Unsupported algorithm: "+a);return new d.cipher.BlockCipher({algorithm:c,key:b,decrypt:!0})},d.cipher.registerAlgorithm=function(a,b){a=a.toUpperCase(),d.cipher.algorithms[a]=b},d.cipher.getAlgorithm=function(a){return(a=a.toUpperCase())in d.cipher.algorithms?d.cipher.algorithms[a]:null};var e=d.cipher.BlockCipher=function(a){this.algorithm=a.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=a.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=a.decrypt,this.algorithm.initialize(a)};e.prototype.start=function(a){a=a||{};var b={};for(var c in a)b[c]=a[c];b.decrypt=this._decrypt,this._finish=!1,this._input=d.util.createBuffer(),this.output=a.output||d.util.createBuffer(),this.mode.start(b)},e.prototype.update=function(a){for(a&&this._input.putBuffer(a);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},e.prototype.finish=function(a){a&&("ECB"===this.mode.name||"CBC"===this.mode.name)&&(this.mode.pad=function(b){return a(this.blockSize,b,!1)},this.mode.unpad=function(b){return a(this.blockSize,b,!0)});var b={};return b.decrypt=this._decrypt,b.overflow=this._input.length()%this.blockSize,!!(this._decrypt||!this.mode.pad||this.mode.pad(this._input,b))&&(this._finish=!0,this.update(),(!this._decrypt||!this.mode.unpad||!!this.mode.unpad(this.output,b))&&(!this.mode.afterFinish||!!this.mode.afterFinish(this.output,b)))}},61967:function(a,b,c){var d=c(3832);c(97116),d.cipher=d.cipher||{};var e=a.exports=d.cipher.modes=d.cipher.modes||{};function f(a,b){if("string"==typeof a&&(a=d.util.createBuffer(a)),d.util.isArray(a)&&a.length>4){var c=a;a=d.util.createBuffer();for(var e=0;e<c.length;++e)a.putByte(c[e])}if(a.length()<b)throw Error("Invalid IV length; got "+a.length()+" bytes and expected "+b+" bytes.");if(!d.util.isArray(a)){for(var f=[],g=b/4,e=0;e<g;++e)f.push(a.getInt32());a=f}return a}function g(a){a[a.length-1]=a[a.length-1]+1&4294967295}function h(a){return[a/4294967296|0,4294967295&a]}e.ecb=function(a){a=a||{},this.name="ECB",this.cipher=a.cipher,this.blockSize=a.blockSize||16,this._ints=this.blockSize/4,this._inBlock=Array(this._ints),this._outBlock=Array(this._ints)},e.ecb.prototype.start=function(a){},e.ecb.prototype.encrypt=function(a,b,c){if(a.length()<this.blockSize&&!(c&&a.length()>0))return!0;for(var d=0;d<this._ints;++d)this._inBlock[d]=a.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var d=0;d<this._ints;++d)b.putInt32(this._outBlock[d])},e.ecb.prototype.decrypt=function(a,b,c){if(a.length()<this.blockSize&&!(c&&a.length()>0))return!0;for(var d=0;d<this._ints;++d)this._inBlock[d]=a.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var d=0;d<this._ints;++d)b.putInt32(this._outBlock[d])},e.ecb.prototype.pad=function(a,b){var c=a.length()===this.blockSize?this.blockSize:this.blockSize-a.length();return a.fillWithByte(c,c),!0},e.ecb.prototype.unpad=function(a,b){if(b.overflow>0)return!1;var c=a.length(),d=a.at(c-1);return!(d>this.blockSize<<2)&&(a.truncate(d),!0)},e.cbc=function(a){a=a||{},this.name="CBC",this.cipher=a.cipher,this.blockSize=a.blockSize||16,this._ints=this.blockSize/4,this._inBlock=Array(this._ints),this._outBlock=Array(this._ints)},e.cbc.prototype.start=function(a){if(null===a.iv){if(!this._prev)throw Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in a)this._iv=f(a.iv,this.blockSize),this._prev=this._iv.slice(0);else throw Error("Invalid IV parameter.")},e.cbc.prototype.encrypt=function(a,b,c){if(a.length()<this.blockSize&&!(c&&a.length()>0))return!0;for(var d=0;d<this._ints;++d)this._inBlock[d]=this._prev[d]^a.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var d=0;d<this._ints;++d)b.putInt32(this._outBlock[d]);this._prev=this._outBlock},e.cbc.prototype.decrypt=function(a,b,c){if(a.length()<this.blockSize&&!(c&&a.length()>0))return!0;for(var d=0;d<this._ints;++d)this._inBlock[d]=a.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var d=0;d<this._ints;++d)b.putInt32(this._prev[d]^this._outBlock[d]);this._prev=this._inBlock.slice(0)},e.cbc.prototype.pad=function(a,b){var c=a.length()===this.blockSize?this.blockSize:this.blockSize-a.length();return a.fillWithByte(c,c),!0},e.cbc.prototype.unpad=function(a,b){if(b.overflow>0)return!1;var c=a.length(),d=a.at(c-1);return!(d>this.blockSize<<2)&&(a.truncate(d),!0)},e.cfb=function(a){a=a||{},this.name="CFB",this.cipher=a.cipher,this.blockSize=a.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=Array(this._ints),this._partialBlock=Array(this._ints),this._partialOutput=d.util.createBuffer(),this._partialBytes=0},e.cfb.prototype.start=function(a){if(!("iv"in a))throw Error("Invalid IV parameter.");this._iv=f(a.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},e.cfb.prototype.encrypt=function(a,b,c){var d=a.length();if(0===d)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&d>=this.blockSize){for(var e=0;e<this._ints;++e)this._inBlock[e]=a.getInt32()^this._outBlock[e],b.putInt32(this._inBlock[e]);return}var f=(this.blockSize-d)%this.blockSize;f>0&&(f=this.blockSize-f),this._partialOutput.clear();for(var e=0;e<this._ints;++e)this._partialBlock[e]=a.getInt32()^this._outBlock[e],this._partialOutput.putInt32(this._partialBlock[e]);if(f>0)a.read-=this.blockSize;else for(var e=0;e<this._ints;++e)this._inBlock[e]=this._partialBlock[e];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),f>0&&!c)return b.putBytes(this._partialOutput.getBytes(f-this._partialBytes)),this._partialBytes=f,!0;b.putBytes(this._partialOutput.getBytes(d-this._partialBytes)),this._partialBytes=0},e.cfb.prototype.decrypt=function(a,b,c){var d=a.length();if(0===d)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&d>=this.blockSize){for(var e=0;e<this._ints;++e)this._inBlock[e]=a.getInt32(),b.putInt32(this._inBlock[e]^this._outBlock[e]);return}var f=(this.blockSize-d)%this.blockSize;f>0&&(f=this.blockSize-f),this._partialOutput.clear();for(var e=0;e<this._ints;++e)this._partialBlock[e]=a.getInt32(),this._partialOutput.putInt32(this._partialBlock[e]^this._outBlock[e]);if(f>0)a.read-=this.blockSize;else for(var e=0;e<this._ints;++e)this._inBlock[e]=this._partialBlock[e];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),f>0&&!c)return b.putBytes(this._partialOutput.getBytes(f-this._partialBytes)),this._partialBytes=f,!0;b.putBytes(this._partialOutput.getBytes(d-this._partialBytes)),this._partialBytes=0},e.ofb=function(a){a=a||{},this.name="OFB",this.cipher=a.cipher,this.blockSize=a.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=Array(this._ints),this._partialOutput=d.util.createBuffer(),this._partialBytes=0},e.ofb.prototype.start=function(a){if(!("iv"in a))throw Error("Invalid IV parameter.");this._iv=f(a.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},e.ofb.prototype.encrypt=function(a,b,c){var d=a.length();if(0===a.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&d>=this.blockSize){for(var e=0;e<this._ints;++e)b.putInt32(a.getInt32()^this._outBlock[e]),this._inBlock[e]=this._outBlock[e];return}var f=(this.blockSize-d)%this.blockSize;f>0&&(f=this.blockSize-f),this._partialOutput.clear();for(var e=0;e<this._ints;++e)this._partialOutput.putInt32(a.getInt32()^this._outBlock[e]);if(f>0)a.read-=this.blockSize;else for(var e=0;e<this._ints;++e)this._inBlock[e]=this._outBlock[e];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),f>0&&!c)return b.putBytes(this._partialOutput.getBytes(f-this._partialBytes)),this._partialBytes=f,!0;b.putBytes(this._partialOutput.getBytes(d-this._partialBytes)),this._partialBytes=0},e.ofb.prototype.decrypt=e.ofb.prototype.encrypt,e.ctr=function(a){a=a||{},this.name="CTR",this.cipher=a.cipher,this.blockSize=a.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=Array(this._ints),this._partialOutput=d.util.createBuffer(),this._partialBytes=0},e.ctr.prototype.start=function(a){if(!("iv"in a))throw Error("Invalid IV parameter.");this._iv=f(a.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},e.ctr.prototype.encrypt=function(a,b,c){var d=a.length();if(0===d)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&d>=this.blockSize)for(var e=0;e<this._ints;++e)b.putInt32(a.getInt32()^this._outBlock[e]);else{var f=(this.blockSize-d)%this.blockSize;f>0&&(f=this.blockSize-f),this._partialOutput.clear();for(var e=0;e<this._ints;++e)this._partialOutput.putInt32(a.getInt32()^this._outBlock[e]);if(f>0&&(a.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),f>0&&!c)return b.putBytes(this._partialOutput.getBytes(f-this._partialBytes)),this._partialBytes=f,!0;b.putBytes(this._partialOutput.getBytes(d-this._partialBytes)),this._partialBytes=0}g(this._inBlock)},e.ctr.prototype.decrypt=e.ctr.prototype.encrypt,e.gcm=function(a){a=a||{},this.name="GCM",this.cipher=a.cipher,this.blockSize=a.blockSize||16,this._ints=this.blockSize/4,this._inBlock=Array(this._ints),this._outBlock=Array(this._ints),this._partialOutput=d.util.createBuffer(),this._partialBytes=0,this._R=3774873600},e.gcm.prototype.start=function(a){if(!("iv"in a))throw Error("Invalid IV parameter.");var b,c=d.util.createBuffer(a.iv);if(this._cipherLength=0,b="additionalData"in a?d.util.createBuffer(a.additionalData):d.util.createBuffer(),"tagLength"in a?this._tagLength=a.tagLength:this._tagLength=128,this._tag=null,a.decrypt&&(this._tag=d.util.createBuffer(a.tag).getBytes(),this._tag.length!==this._tagLength/8))throw Error("Authentication tag does not match tag length.");this._hashBlock=Array(this._ints),this.tag=null,this._hashSubkey=Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var e=c.length();if(12===e)this._j0=[c.getInt32(),c.getInt32(),c.getInt32(),1];else{for(this._j0=[0,0,0,0];c.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[c.getInt32(),c.getInt32(),c.getInt32(),c.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(h(8*e)))}this._inBlock=this._j0.slice(0),g(this._inBlock),this._partialBytes=0,b=d.util.createBuffer(b),this._aDataLength=h(8*b.length());var f=b.length()%this.blockSize;for(f&&b.fillWithByte(0,this.blockSize-f),this._s=[0,0,0,0];b.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[b.getInt32(),b.getInt32(),b.getInt32(),b.getInt32()])},e.gcm.prototype.encrypt=function(a,b,c){var d=a.length();if(0===d)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&d>=this.blockSize){for(var e=0;e<this._ints;++e)b.putInt32(this._outBlock[e]^=a.getInt32());this._cipherLength+=this.blockSize}else{var f=(this.blockSize-d)%this.blockSize;f>0&&(f=this.blockSize-f),this._partialOutput.clear();for(var e=0;e<this._ints;++e)this._partialOutput.putInt32(a.getInt32()^this._outBlock[e]);if(f<=0||c){if(c){var h=d%this.blockSize;this._cipherLength+=h,this._partialOutput.truncate(this.blockSize-h)}else this._cipherLength+=this.blockSize;for(var e=0;e<this._ints;++e)this._outBlock[e]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),f>0&&!c)return a.read-=this.blockSize,b.putBytes(this._partialOutput.getBytes(f-this._partialBytes)),this._partialBytes=f,!0;b.putBytes(this._partialOutput.getBytes(d-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),g(this._inBlock)},e.gcm.prototype.decrypt=function(a,b,c){var d=a.length();if(d<this.blockSize&&!(c&&d>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),g(this._inBlock),this._hashBlock[0]=a.getInt32(),this._hashBlock[1]=a.getInt32(),this._hashBlock[2]=a.getInt32(),this._hashBlock[3]=a.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var e=0;e<this._ints;++e)b.putInt32(this._outBlock[e]^this._hashBlock[e]);d<this.blockSize?this._cipherLength+=d%this.blockSize:this._cipherLength+=this.blockSize},e.gcm.prototype.afterFinish=function(a,b){var c=!0;b.decrypt&&b.overflow&&a.truncate(this.blockSize-b.overflow),this.tag=d.util.createBuffer();var e=this._aDataLength.concat(h(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,e);var f=[];this.cipher.encrypt(this._j0,f);for(var g=0;g<this._ints;++g)this.tag.putInt32(this._s[g]^f[g]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),b.decrypt&&this.tag.bytes()!==this._tag&&(c=!1),c},e.gcm.prototype.multiply=function(a,b){for(var c=[0,0,0,0],d=b.slice(0),e=0;e<128;++e)a[e/32|0]&1<<31-e%32&&(c[0]^=d[0],c[1]^=d[1],c[2]^=d[2],c[3]^=d[3]),this.pow(d,d);return c},e.gcm.prototype.pow=function(a,b){for(var c=1&a[3],d=3;d>0;--d)b[d]=a[d]>>>1|(1&a[d-1])<<31;b[0]=a[0]>>>1,c&&(b[0]^=this._R)},e.gcm.prototype.tableMultiply=function(a){for(var b=[0,0,0,0],c=0;c<32;++c){var d=a[c/8|0]>>>(7-c%8)*4&15,e=this._m[c][d];b[0]^=e[0],b[1]^=e[1],b[2]^=e[2],b[3]^=e[3]}return b},e.gcm.prototype.ghash=function(a,b,c){return b[0]^=c[0],b[1]^=c[1],b[2]^=c[2],b[3]^=c[3],this.tableMultiply(b)},e.gcm.prototype.generateHashTable=function(a,b){for(var c=8/b,d=4*c,e=16*c,f=Array(e),g=0;g<e;++g){var h=[0,0,0,0],i=g/d|0,j=(d-1-g%d)*b;h[i]=1<<b-1<<j,f[g]=this.generateSubHashTable(this.multiply(h,a),b)}return f},e.gcm.prototype.generateSubHashTable=function(a,b){var c=1<<b,d=c>>>1,e=Array(c);e[d]=a.slice(0);for(var f=d>>>1;f>0;)this.pow(e[2*f],e[f]=[]),f>>=1;for(f=2;f<d;){for(var g=1;g<f;++g){var h=e[f],i=e[g];e[f+g]=[h[0]^i[0],h[1]^i[1],h[2]^i[2],h[3]^i[3]]}f*=2}for(e[0]=[0,0,0,0],f=d+1;f<c;++f){var j=e[f^d];e[f]=[a[0]^j[0],a[1]^j[1],a[2]^j[2],a[3]^j[3]]}return e}},33480:function(a,b,c){var d=c(3832);function e(a,b){var c=function(){return new d.des.Algorithm(a,b)};d.cipher.registerAlgorithm(a,c)}c(85649),c(61967),c(97116),a.exports=d.des=d.des||{},d.des.startEncrypting=function(a,b,c,d){var e=p({key:a,output:c,decrypt:!1,mode:d||(null===b?"ECB":"CBC")});return e.start(b),e},d.des.createEncryptionCipher=function(a,b){return p({key:a,output:null,decrypt:!1,mode:b})},d.des.startDecrypting=function(a,b,c,d){var e=p({key:a,output:c,decrypt:!0,mode:d||(null===b?"ECB":"CBC")});return e.start(b),e},d.des.createDecryptionCipher=function(a,b){return p({key:a,output:null,decrypt:!0,mode:b})},d.des.Algorithm=function(a,b){var c=this;c.name=a,c.mode=new b({blockSize:8,cipher:{encrypt:function(a,b){return o(c._keys,a,b,!1)},decrypt:function(a,b){return o(c._keys,a,b,!0)}}}),c._init=!1},d.des.Algorithm.prototype.initialize=function(a){if(!this._init){var b=d.util.createBuffer(a.key);if(0===this.name.indexOf("3DES")&&24!==b.length())throw Error("Invalid Triple-DES key size: "+8*b.length());this._keys=n(b),this._init=!0}},e("DES-ECB",d.cipher.modes.ecb),e("DES-CBC",d.cipher.modes.cbc),e("DES-CFB",d.cipher.modes.cfb),e("DES-OFB",d.cipher.modes.ofb),e("DES-CTR",d.cipher.modes.ctr),e("3DES-ECB",d.cipher.modes.ecb),e("3DES-CBC",d.cipher.modes.cbc),e("3DES-CFB",d.cipher.modes.cfb),e("3DES-OFB",d.cipher.modes.ofb),e("3DES-CTR",d.cipher.modes.ctr);var f=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],g=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],h=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],i=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],j=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],k=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],l=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],m=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function n(a){for(var b,c=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],d=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],e=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],f=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],g=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],h=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],i=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],j=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],k=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],l=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],m=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],n=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],o=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],p=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],q=a.length()>8?3:1,r=[],s=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],t=0,u=0;u<q;u++){var v=a.getInt32(),w=a.getInt32();b=(v>>>4^w)&252645135,w^=b,v^=b<<4,b=(w>>> -16^v)&65535,v^=b,w^=b<< -16,b=(v>>>2^w)&858993459,w^=b,v^=b<<2,b=(w>>> -16^v)&65535,v^=b,w^=b<< -16,b=(v>>>1^w)&1431655765,w^=b,v^=b<<1,b=(w>>>8^v)&16711935,v^=b,w^=b<<8,b=(v>>>1^w)&1431655765,w^=b,v^=b<<1,b=v<<8|w>>>20&240,v=w<<24|w<<8&16711680|w>>>8&65280|w>>>24&240,w=b;for(var x=0;x<s.length;++x){s[x]?(v=v<<2|v>>>26,w=w<<2|w>>>26):(v=v<<1|v>>>27,w=w<<1|w>>>27),w&=-15;var y=c[(v&=-15)>>>28]|d[v>>>24&15]|e[v>>>20&15]|f[v>>>16&15]|g[v>>>12&15]|h[v>>>8&15]|i[v>>>4&15],z=j[w>>>28]|k[w>>>24&15]|l[w>>>20&15]|m[w>>>16&15]|n[w>>>12&15]|o[w>>>8&15]|p[w>>>4&15];b=(z>>>16^y)&65535,r[t++]=y^b,r[t++]=z^b<<16}}return r}function o(a,b,c,d){var e,n,o=32===a.length?3:9;e=3===o?d?[30,-2,-2]:[0,32,2]:d?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var p=b[0],q=b[1];n=(p>>>4^q)&252645135,q^=n,p^=n<<4,n=(p>>>16^q)&65535,q^=n,p^=n<<16,n=(q>>>2^p)&858993459,p^=n,q^=n<<2,n=(q>>>8^p)&16711935,p^=n,q^=n<<8,n=(p>>>1^q)&1431655765,q^=n,p^=n<<1,p=p<<1|p>>>31,q=q<<1|q>>>31;for(var r=0;r<o;r+=3){for(var s=e[r+1],t=e[r+2],u=e[r];u!=s;u+=t){var v=q^a[u],w=(q>>>4|q<<28)^a[u+1];n=p,p=q,q=n^(g[v>>>24&63]|i[v>>>16&63]|k[v>>>8&63]|m[63&v]|f[w>>>24&63]|h[w>>>16&63]|j[w>>>8&63]|l[63&w])}n=p,p=q,q=n}n=((p=p>>>1|p<<31)>>>1^(q=q>>>1|q<<31))&1431655765,q^=n,p^=n<<1,n=(q>>>8^p)&16711935,p^=n,q^=n<<8,n=(q>>>2^p)&858993459,p^=n,q^=n<<2,n=(p>>>16^q)&65535,q^=n,p^=n<<16,n=(p>>>4^q)&252645135,q^=n,p^=n<<4,c[0]=p,c[1]=q}function p(a){var b,c="DES-"+((a=a||{}).mode||"CBC").toUpperCase(),e=(b=a.decrypt?d.cipher.createDecipher(c,a.key):d.cipher.createCipher(c,a.key)).start;return b.start=function(a,c){var f=null;c instanceof d.util.ByteBuffer&&(f=c,c={}),(c=c||{}).output=f,c.iv=a,e.call(b,c)},b}},3832:function(a){a.exports={options:{usePureJavaScript:!1}}},36607:function(a,b,c){var d=c(3832);c(28991),c(97116),(a.exports=d.hmac=d.hmac||{}).create=function(){var a=null,b=null,c=null,e=null,f={};return f.start=function(f,g){if(null!==f){if("string"==typeof f){if((f=f.toLowerCase())in d.md.algorithms)b=d.md.algorithms[f].create();else throw Error('Unknown hash algorithm "'+f+'"')}else b=f}if(null===g)g=a;else{if("string"==typeof g)g=d.util.createBuffer(g);else if(d.util.isArray(g)){var h=g;g=d.util.createBuffer();for(var i=0;i<h.length;++i)g.putByte(h[i])}var j=g.length();j>b.blockLength&&(b.start(),b.update(g.bytes()),g=b.digest()),c=d.util.createBuffer(),e=d.util.createBuffer(),j=g.length();for(var i=0;i<j;++i){var h=g.at(i);c.putByte(54^h),e.putByte(92^h)}if(j<b.blockLength)for(var h=b.blockLength-j,i=0;i<h;++i)c.putByte(54),e.putByte(92);a=g,c=c.bytes(),e=e.bytes()}b.start(),b.update(c)},f.update=function(a){b.update(a)},f.getMac=function(){var a=b.digest().bytes();return b.start(),b.update(e),b.update(a),b.digest()},f.digest=f.getMac,f}},15764:function(a,b,c){var d,e,f,g=c(3832);a.exports=g.jsbn=g.jsbn||{};function h(a,b,c){this.data=[],null!=a&&("number"==typeof a?this.fromNumber(a,b,c):null==b&&"string"!=typeof a?this.fromString(a,256):this.fromString(a,b))}function i(){return new h(null)}function j(a,b,c,d,e,f){for(var g=16383&b,h=b>>14;--f>=0;){var i=16383&this.data[a],j=this.data[a++]>>14,k=h*i+j*g;e=((i=g*i+((16383&k)<<14)+c.data[d]+e)>>28)+(k>>14)+h*j,c.data[d++]=268435455&i}return e}g.jsbn.BigInteger=h,"undefined"==typeof navigator?(h.prototype.am=j,d=28):"Microsoft Internet Explorer"==navigator.appName?(h.prototype.am=function(a,b,c,d,e,f){for(var g=32767&b,h=b>>15;--f>=0;){var i=32767&this.data[a],j=this.data[a++]>>15,k=h*i+j*g;e=((i=g*i+((32767&k)<<15)+c.data[d]+(1073741823&e))>>>30)+(k>>>15)+h*j+(e>>>30),c.data[d++]=1073741823&i}return e},d=30):"Netscape"!=navigator.appName?(h.prototype.am=function(a,b,c,d,e,f){for(;--f>=0;){var g=b*this.data[a++]+c.data[d]+e;e=Math.floor(g/67108864),c.data[d++]=67108863&g}return e},d=26):(h.prototype.am=j,d=28),h.prototype.DB=d,h.prototype.DM=(1<<d)-1,h.prototype.DV=1<<d,h.prototype.FV=4503599627370496,h.prototype.F1=52-d,h.prototype.F2=2*d-52;var k=[];for(f=0,e=48;f<=9;++f)k[e++]=f;for(f=10,e=97;f<36;++f)k[e++]=f;for(f=10,e=65;f<36;++f)k[e++]=f;function l(a){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(a)}function m(a,b){var c=k[a.charCodeAt(b)];return null==c?-1:c}function n(a){var b=i();return b.fromInt(a),b}function o(a){var b,c=1;return 0!=(b=a>>>16)&&(a=b,c+=16),0!=(b=a>>8)&&(a=b,c+=8),0!=(b=a>>4)&&(a=b,c+=4),0!=(b=a>>2)&&(a=b,c+=2),0!=(b=a>>1)&&(a=b,c+=1),c}function p(a){this.m=a}function q(a){return a}function r(a){this.m=a,this.mp=a.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<a.DB-15)-1,this.mt2=2*a.t}function s(a,b){return a&b}function t(a,b){return a|b}function u(a,b){return a^b}function v(a,b){return a& ~b}function w(a){if(0==a)return -1;var b=0;return(65535&a)==0&&(a>>=16,b+=16),(255&a)==0&&(a>>=8,b+=8),(15&a)==0&&(a>>=4,b+=4),(3&a)==0&&(a>>=2,b+=2),(1&a)==0&& ++b,b}function x(a){for(var b=0;0!=a;)a&=a-1,++b;return b}function y(){}function z(a){return a}function A(a){this.r2=i(),this.q3=i(),h.ONE.dlShiftTo(2*a.t,this.r2),this.mu=this.r2.divide(a),this.m=a}function B(a){return a}p.prototype.convert=function(a){return a.s<0||a.compareTo(this.m)>=0?a.mod(this.m):a},p.prototype.revert=q,p.prototype.reduce=function(a){a.divRemTo(this.m,null,a)},p.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c),this.reduce(c)},p.prototype.sqrTo=function(a,b){a.squareTo(b),this.reduce(b)},r.prototype.convert=function(a){var b=i();return a.abs().dlShiftTo(this.m.t,b),b.divRemTo(this.m,null,b),a.s<0&&b.compareTo(h.ZERO)>0&&this.m.subTo(b,b),b},r.prototype.revert=function(a){var b=i();return a.copyTo(b),this.reduce(b),b},r.prototype.reduce=function(a){for(;a.t<=this.mt2;)a.data[a.t++]=0;for(var b=0;b<this.m.t;++b){var c=32767&a.data[b],d=c*this.mpl+((c*this.mph+(a.data[b]>>15)*this.mpl&this.um)<<15)&a.DM;for(c=b+this.m.t,a.data[c]+=this.m.am(0,d,a,b,0,this.m.t);a.data[c]>=a.DV;)a.data[c]-=a.DV,a.data[++c]++}a.clamp(),a.drShiftTo(this.m.t,a),a.compareTo(this.m)>=0&&a.subTo(this.m,a)},r.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c),this.reduce(c)},r.prototype.sqrTo=function(a,b){a.squareTo(b),this.reduce(b)},h.prototype.copyTo=function(a){for(var b=this.t-1;b>=0;--b)a.data[b]=this.data[b];a.t=this.t,a.s=this.s},h.prototype.fromInt=function(a){this.t=1,this.s=a<0?-1:0,a>0?this.data[0]=a:a< -1?this.data[0]=a+this.DV:this.t=0},h.prototype.fromString=function(a,b){if(16==b)c=4;else if(8==b)c=3;else if(256==b)c=8;else if(2==b)c=1;else if(32==b)c=5;else if(4==b)c=2;else{this.fromRadix(a,b);return}this.t=0,this.s=0;for(var c,d=a.length,e=!1,f=0;--d>=0;){var g=8==c?255&a[d]:m(a,d);if(g<0){"-"==a.charAt(d)&&(e=!0);continue}e=!1,0==f?this.data[this.t++]=g:f+c>this.DB?(this.data[this.t-1]|=(g&(1<<this.DB-f)-1)<<f,this.data[this.t++]=g>>this.DB-f):this.data[this.t-1]|=g<<f,(f+=c)>=this.DB&&(f-=this.DB)}8==c&&(128&a[0])!=0&&(this.s=-1,f>0&&(this.data[this.t-1]|=(1<<this.DB-f)-1<<f)),this.clamp(),e&&h.ZERO.subTo(this,this)},h.prototype.clamp=function(){for(var a=this.s&this.DM;this.t>0&&this.data[this.t-1]==a;)--this.t},h.prototype.dlShiftTo=function(a,b){var c;for(c=this.t-1;c>=0;--c)b.data[c+a]=this.data[c];for(c=a-1;c>=0;--c)b.data[c]=0;b.t=this.t+a,b.s=this.s},h.prototype.drShiftTo=function(a,b){for(var c=a;c<this.t;++c)b.data[c-a]=this.data[c];b.t=Math.max(this.t-a,0),b.s=this.s},h.prototype.lShiftTo=function(a,b){var c,d=a%this.DB,e=this.DB-d,f=(1<<e)-1,g=Math.floor(a/this.DB),h=this.s<<d&this.DM;for(c=this.t-1;c>=0;--c)b.data[c+g+1]=this.data[c]>>e|h,h=(this.data[c]&f)<<d;for(c=g-1;c>=0;--c)b.data[c]=0;b.data[g]=h,b.t=this.t+g+1,b.s=this.s,b.clamp()},h.prototype.rShiftTo=function(a,b){b.s=this.s;var c=Math.floor(a/this.DB);if(c>=this.t){b.t=0;return}var d=a%this.DB,e=this.DB-d,f=(1<<d)-1;b.data[0]=this.data[c]>>d;for(var g=c+1;g<this.t;++g)b.data[g-c-1]|=(this.data[g]&f)<<e,b.data[g-c]=this.data[g]>>d;d>0&&(b.data[this.t-c-1]|=(this.s&f)<<e),b.t=this.t-c,b.clamp()},h.prototype.subTo=function(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);c<e;)d+=this.data[c]-a.data[c],b.data[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d-=a.s;c<this.t;)d+=this.data[c],b.data[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d-=a.data[c],b.data[c++]=d&this.DM,d>>=this.DB;d-=a.s}b.s=d<0?-1:0,d< -1?b.data[c++]=this.DV+d:d>0&&(b.data[c++]=d),b.t=c,b.clamp()},h.prototype.multiplyTo=function(a,b){var c=this.abs(),d=a.abs(),e=c.t;for(b.t=e+d.t;--e>=0;)b.data[e]=0;for(e=0;e<d.t;++e)b.data[e+c.t]=c.am(0,d.data[e],b,e,0,c.t);b.s=0,b.clamp(),this.s!=a.s&&h.ZERO.subTo(b,b)},h.prototype.squareTo=function(a){for(var b=this.abs(),c=a.t=2*b.t;--c>=0;)a.data[c]=0;for(c=0;c<b.t-1;++c){var d=b.am(c,b.data[c],a,2*c,0,1);(a.data[c+b.t]+=b.am(c+1,2*b.data[c],a,2*c+1,d,b.t-c-1))>=b.DV&&(a.data[c+b.t]-=b.DV,a.data[c+b.t+1]=1)}a.t>0&&(a.data[a.t-1]+=b.am(c,b.data[c],a,2*c,0,1)),a.s=0,a.clamp()},h.prototype.divRemTo=function(a,b,c){var d=a.abs();if(!(d.t<=0)){var e=this.abs();if(e.t<d.t){null!=b&&b.fromInt(0),null!=c&&this.copyTo(c);return}null==c&&(c=i());var f=i(),g=this.s,j=a.s,k=this.DB-o(d.data[d.t-1]);k>0?(d.lShiftTo(k,f),e.lShiftTo(k,c)):(d.copyTo(f),e.copyTo(c));var l=f.t,m=f.data[l-1];if(0!=m){var n=m*(1<<this.F1)+(l>1?f.data[l-2]>>this.F2:0),p=this.FV/n,q=(1<<this.F1)/n,r=1<<this.F2,s=c.t,t=s-l,u=null==b?i():b;for(f.dlShiftTo(t,u),c.compareTo(u)>=0&&(c.data[c.t++]=1,c.subTo(u,c)),h.ONE.dlShiftTo(l,u),u.subTo(f,f);f.t<l;)f.data[f.t++]=0;for(;--t>=0;){var v=c.data[--s]==m?this.DM:Math.floor(c.data[s]*p+(c.data[s-1]+r)*q);if((c.data[s]+=f.am(0,v,c,t,0,l))<v)for(f.dlShiftTo(t,u),c.subTo(u,c);c.data[s]< --v;)c.subTo(u,c)}null!=b&&(c.drShiftTo(l,b),g!=j&&h.ZERO.subTo(b,b)),c.t=l,c.clamp(),k>0&&c.rShiftTo(k,c),g<0&&h.ZERO.subTo(c,c)}}},h.prototype.invDigit=function(){if(this.t<1)return 0;var a=this.data[0];if((1&a)==0)return 0;var b=3&a;return(b=(b=(b=(b=b*(2-(15&a)*b)&15)*(2-(255&a)*b)&255)*(2-((65535&a)*b&65535))&65535)*(2-a*b%this.DV)%this.DV)>0?this.DV-b:-b},h.prototype.isEven=function(){return(this.t>0?1&this.data[0]:this.s)==0},h.prototype.exp=function(a,b){if(a>4294967295||a<1)return h.ONE;var c=i(),d=i(),e=b.convert(this),f=o(a)-1;for(e.copyTo(c);--f>=0;)if(b.sqrTo(c,d),(a&1<<f)>0)b.mulTo(d,e,c);else{var g=c;c=d,d=g}return b.revert(c)},h.prototype.toString=function(a){if(this.s<0)return"-"+this.negate().toString(a);if(16==a)b=4;else if(8==a)b=3;else if(2==a)b=1;else if(32==a)b=5;else{if(4!=a)return this.toRadix(a);b=2}var b,c,d=(1<<b)-1,e=!1,f="",g=this.t,h=this.DB-g*this.DB%b;if(g-- >0)for(h<this.DB&&(c=this.data[g]>>h)>0&&(e=!0,f=l(c));g>=0;)h<b?(c=(this.data[g]&(1<<h)-1)<<b-h,c|=this.data[--g]>>(h+=this.DB-b)):(c=this.data[g]>>(h-=b)&d,h<=0&&(h+=this.DB,--g)),c>0&&(e=!0),e&&(f+=l(c));return e?f:"0"},h.prototype.negate=function(){var a=i();return h.ZERO.subTo(this,a),a},h.prototype.abs=function(){return this.s<0?this.negate():this},h.prototype.compareTo=function(a){var b=this.s-a.s;if(0!=b)return b;var c=this.t;if(0!=(b=c-a.t))return this.s<0?-b:b;for(;--c>=0;)if(0!=(b=this.data[c]-a.data[c]))return b;return 0},h.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+o(this.data[this.t-1]^this.s&this.DM)},h.prototype.mod=function(a){var b=i();return this.abs().divRemTo(a,null,b),this.s<0&&b.compareTo(h.ZERO)>0&&a.subTo(b,b),b},h.prototype.modPowInt=function(a,b){var c;return c=a<256||b.isEven()?new p(b):new r(b),this.exp(a,c)},h.ZERO=n(0),h.ONE=n(1),y.prototype.convert=z,y.prototype.revert=z,y.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c)},y.prototype.sqrTo=function(a,b){a.squareTo(b)},A.prototype.convert=function(a){if(a.s<0||a.t>2*this.m.t)return a.mod(this.m);if(0>a.compareTo(this.m))return a;var b=i();return a.copyTo(b),this.reduce(b),b},A.prototype.revert=B,A.prototype.reduce=function(a){for(a.drShiftTo(this.m.t-1,this.r2),a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>a.compareTo(this.r2);)a.dAddOffset(1,this.m.t+1);for(a.subTo(this.r2,a);a.compareTo(this.m)>=0;)a.subTo(this.m,a)},A.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c),this.reduce(c)},A.prototype.sqrTo=function(a,b){a.squareTo(b),this.reduce(b)};var C=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],D=67108864/C[C.length-1];h.prototype.chunkSize=function(a){return Math.floor(Math.LN2*this.DB/Math.log(a))},h.prototype.toRadix=function(a){if(null==a&&(a=10),0==this.signum()||a<2||a>36)return"0";var b=this.chunkSize(a),c=Math.pow(a,b),d=n(c),e=i(),f=i(),g="";for(this.divRemTo(d,e,f);e.signum()>0;)g=(c+f.intValue()).toString(a).substr(1)+g,e.divRemTo(d,e,f);return f.intValue().toString(a)+g},h.prototype.fromRadix=function(a,b){this.fromInt(0),null==b&&(b=10);for(var c=this.chunkSize(b),d=Math.pow(b,c),e=!1,f=0,g=0,i=0;i<a.length;++i){var j=m(a,i);if(j<0){"-"==a.charAt(i)&&0==this.signum()&&(e=!0);continue}g=b*g+j,++f>=c&&(this.dMultiply(d),this.dAddOffset(g,0),f=0,g=0)}f>0&&(this.dMultiply(Math.pow(b,f)),this.dAddOffset(g,0)),e&&h.ZERO.subTo(this,this)},h.prototype.fromNumber=function(a,b,c){if("number"==typeof b){if(a<2)this.fromInt(1);else for(this.fromNumber(a,c),this.testBit(a-1)||this.bitwiseTo(h.ONE.shiftLeft(a-1),t,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(b);)this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(h.ONE.shiftLeft(a-1),this)}else{var d=[],e=7&a;d.length=(a>>3)+1,b.nextBytes(d),e>0?d[0]&=(1<<e)-1:d[0]=0,this.fromString(d,256)}},h.prototype.bitwiseTo=function(a,b,c){var d,e,f=Math.min(a.t,this.t);for(d=0;d<f;++d)c.data[d]=b(this.data[d],a.data[d]);if(a.t<this.t){for(e=a.s&this.DM,d=f;d<this.t;++d)c.data[d]=b(this.data[d],e);c.t=this.t}else{for(e=this.s&this.DM,d=f;d<a.t;++d)c.data[d]=b(e,a.data[d]);c.t=a.t}c.s=b(this.s,a.s),c.clamp()},h.prototype.changeBit=function(a,b){var c=h.ONE.shiftLeft(a);return this.bitwiseTo(c,b,c),c},h.prototype.addTo=function(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);c<e;)d+=this.data[c]+a.data[c],b.data[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d+=a.s;c<this.t;)d+=this.data[c],b.data[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d+=a.data[c],b.data[c++]=d&this.DM,d>>=this.DB;d+=a.s}b.s=d<0?-1:0,d>0?b.data[c++]=d:d< -1&&(b.data[c++]=this.DV+d),b.t=c,b.clamp()},h.prototype.dMultiply=function(a){this.data[this.t]=this.am(0,a-1,this,0,0,this.t),++this.t,this.clamp()},h.prototype.dAddOffset=function(a,b){if(0!=a){for(;this.t<=b;)this.data[this.t++]=0;for(this.data[b]+=a;this.data[b]>=this.DV;)this.data[b]-=this.DV,++b>=this.t&&(this.data[this.t++]=0),++this.data[b]}},h.prototype.multiplyLowerTo=function(a,b,c){var d,e=Math.min(this.t+a.t,b);for(c.s=0,c.t=e;e>0;)c.data[--e]=0;for(d=c.t-this.t;e<d;++e)c.data[e+this.t]=this.am(0,a.data[e],c,e,0,this.t);for(d=Math.min(a.t,b);e<d;++e)this.am(0,a.data[e],c,e,0,b-e);c.clamp()},h.prototype.multiplyUpperTo=function(a,b,c){--b;var d=c.t=this.t+a.t-b;for(c.s=0;--d>=0;)c.data[d]=0;for(d=Math.max(b-this.t,0);d<a.t;++d)c.data[this.t+d-b]=this.am(b-d,a.data[d],c,0,0,this.t+d-b);c.clamp(),c.drShiftTo(1,c)},h.prototype.modInt=function(a){if(a<=0)return 0;var b=this.DV%a,c=this.s<0?a-1:0;if(this.t>0){if(0==b)c=this.data[0]%a;else for(var d=this.t-1;d>=0;--d)c=(b*c+this.data[d])%a}return c},h.prototype.millerRabin=function(a){var b,c=this.subtract(h.ONE),d=c.getLowestSetBit();if(d<=0)return!1;for(var e=c.shiftRight(d),f={nextBytes:function(a){for(var b=0;b<a.length;++b)a[b]=Math.floor(256*Math.random())}},g=0;g<a;++g){do b=new h(this.bitLength(),f);while(0>=b.compareTo(h.ONE)||b.compareTo(c)>=0);var i=b.modPow(e,this);if(0!=i.compareTo(h.ONE)&&0!=i.compareTo(c)){for(var j=1;(j++)<d&&0!=i.compareTo(c);)if(0==(i=i.modPowInt(2,this)).compareTo(h.ONE))return!1;if(0!=i.compareTo(c))return!1}}return!0},h.prototype.clone=function(){var a=i();return this.copyTo(a),a},h.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return -1}else if(1==this.t)return this.data[0];else if(0==this.t)return 0;return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},h.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},h.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},h.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},h.prototype.toByteArray=function(){var a=this.t,b=[];b[0]=this.s;var c,d=this.DB-a*this.DB%8,e=0;if(a-- >0)for(d<this.DB&&(c=this.data[a]>>d)!=(this.s&this.DM)>>d&&(b[e++]=c|this.s<<this.DB-d);a>=0;)d<8?(c=(this.data[a]&(1<<d)-1)<<8-d,c|=this.data[--a]>>(d+=this.DB-8)):(c=this.data[a]>>(d-=8)&255,d<=0&&(d+=this.DB,--a)),(128&c)!=0&&(c|=-256),0==e&&(128&this.s)!=(128&c)&& ++e,(e>0||c!=this.s)&&(b[e++]=c);return b},h.prototype.equals=function(a){return 0==this.compareTo(a)},h.prototype.min=function(a){return 0>this.compareTo(a)?this:a},h.prototype.max=function(a){return this.compareTo(a)>0?this:a},h.prototype.and=function(a){var b=i();return this.bitwiseTo(a,s,b),b},h.prototype.or=function(a){var b=i();return this.bitwiseTo(a,t,b),b},h.prototype.xor=function(a){var b=i();return this.bitwiseTo(a,u,b),b},h.prototype.andNot=function(a){var b=i();return this.bitwiseTo(a,v,b),b},h.prototype.not=function(){for(var a=i(),b=0;b<this.t;++b)a.data[b]=this.DM& ~this.data[b];return a.t=this.t,a.s=~this.s,a},h.prototype.shiftLeft=function(a){var b=i();return a<0?this.rShiftTo(-a,b):this.lShiftTo(a,b),b},h.prototype.shiftRight=function(a){var b=i();return a<0?this.lShiftTo(-a,b):this.rShiftTo(a,b),b},h.prototype.getLowestSetBit=function(){for(var a=0;a<this.t;++a)if(0!=this.data[a])return a*this.DB+w(this.data[a]);return this.s<0?this.t*this.DB:-1},h.prototype.bitCount=function(){for(var a=0,b=this.s&this.DM,c=0;c<this.t;++c)a+=x(this.data[c]^b);return a},h.prototype.testBit=function(a){var b=Math.floor(a/this.DB);return b>=this.t?0!=this.s:(this.data[b]&1<<a%this.DB)!=0},h.prototype.setBit=function(a){return this.changeBit(a,t)},h.prototype.clearBit=function(a){return this.changeBit(a,v)},h.prototype.flipBit=function(a){return this.changeBit(a,u)},h.prototype.add=function(a){var b=i();return this.addTo(a,b),b},h.prototype.subtract=function(a){var b=i();return this.subTo(a,b),b},h.prototype.multiply=function(a){var b=i();return this.multiplyTo(a,b),b},h.prototype.divide=function(a){var b=i();return this.divRemTo(a,b,null),b},h.prototype.remainder=function(a){var b=i();return this.divRemTo(a,null,b),b},h.prototype.divideAndRemainder=function(a){var b=i(),c=i();return this.divRemTo(a,b,c),[b,c]},h.prototype.modPow=function(a,b){var c,d,e=a.bitLength(),f=n(1);if(e<=0)return f;c=e<18?1:e<48?3:e<144?4:e<768?5:6,d=e<8?new p(b):b.isEven()?new A(b):new r(b);var g=[],h=3,j=c-1,k=(1<<c)-1;if(g[1]=d.convert(this),c>1){var l=i();for(d.sqrTo(g[1],l);h<=k;)g[h]=i(),d.mulTo(l,g[h-2],g[h]),h+=2}var m,q,s=a.t-1,t=!0,u=i();for(e=o(a.data[s])-1;s>=0;){for(e>=j?m=a.data[s]>>e-j&k:(m=(a.data[s]&(1<<e+1)-1)<<j-e,s>0&&(m|=a.data[s-1]>>this.DB+e-j)),h=c;(1&m)==0;)m>>=1,--h;if((e-=h)<0&&(e+=this.DB,--s),t)g[m].copyTo(f),t=!1;else{for(;h>1;)d.sqrTo(f,u),d.sqrTo(u,f),h-=2;h>0?d.sqrTo(f,u):(q=f,f=u,u=q),d.mulTo(u,g[m],f)}for(;s>=0&&(a.data[s]&1<<e)==0;)d.sqrTo(f,u),q=f,f=u,u=q,--e<0&&(e=this.DB-1,--s)}return d.revert(f)},h.prototype.modInverse=function(a){var b=a.isEven();if(this.isEven()&&b||0==a.signum())return h.ZERO;for(var c=a.clone(),d=this.clone(),e=n(1),f=n(0),g=n(0),i=n(1);0!=c.signum();){for(;c.isEven();)c.rShiftTo(1,c),b?(e.isEven()&&f.isEven()||(e.addTo(this,e),f.subTo(a,f)),e.rShiftTo(1,e)):f.isEven()||f.subTo(a,f),f.rShiftTo(1,f);for(;d.isEven();)d.rShiftTo(1,d),b?(g.isEven()&&i.isEven()||(g.addTo(this,g),i.subTo(a,i)),g.rShiftTo(1,g)):i.isEven()||i.subTo(a,i),i.rShiftTo(1,i);c.compareTo(d)>=0?(c.subTo(d,c),b&&e.subTo(g,e),f.subTo(i,f)):(d.subTo(c,d),b&&g.subTo(e,g),i.subTo(f,i))}return 0!=d.compareTo(h.ONE)?h.ZERO:i.compareTo(a)>=0?i.subtract(a):0>i.signum()&&(i.addTo(a,i),0>i.signum())?i.add(a):i},h.prototype.pow=function(a){return this.exp(a,new y)},h.prototype.gcd=function(a){var b=this.s<0?this.negate():this.clone(),c=a.s<0?a.negate():a.clone();if(0>b.compareTo(c)){var d=b;b=c,c=d}var e=b.getLowestSetBit(),f=c.getLowestSetBit();if(f<0)return b;for(e<f&&(f=e),f>0&&(b.rShiftTo(f,b),c.rShiftTo(f,c));b.signum()>0;)(e=b.getLowestSetBit())>0&&b.rShiftTo(e,b),(e=c.getLowestSetBit())>0&&c.rShiftTo(e,c),b.compareTo(c)>=0?(b.subTo(c,b),b.rShiftTo(1,b)):(c.subTo(b,c),c.rShiftTo(1,c));return f>0&&c.lShiftTo(f,c),c},h.prototype.isProbablePrime=function(a){var b,c=this.abs();if(1==c.t&&c.data[0]<=C[C.length-1]){for(b=0;b<C.length;++b)if(c.data[0]==C[b])return!0;return!1}if(c.isEven())return!1;for(b=1;b<C.length;){for(var d=C[b],e=b+1;e<C.length&&d<D;)d*=C[e++];for(d=c.modInt(d);b<e;)if(d%C[b++]==0)return!1}return c.millerRabin(a)}},28991:function(a,b,c){var d=c(3832);a.exports=d.md=d.md||{},d.md.algorithms=d.md.algorithms||{}},86971:function(a,b,c){var d=c(3832);c(83453),a.exports=d.mgf=d.mgf||{},d.mgf.mgf1=d.mgf1},83453:function(a,b,c){var d=c(3832);c(97116),d.mgf=d.mgf||{},(a.exports=d.mgf.mgf1=d.mgf1=d.mgf1||{}).create=function(a){return{generate:function(b,c){for(var e=new d.util.ByteBuffer,f=Math.ceil(c/a.digestLength),g=0;g<f;g++){var h=new d.util.ByteBuffer;h.putInt32(g),a.start(),a.update(b+h.getBytes()),e.putBuffer(a.digest())}return e.truncate(e.length()-c),e.getBytes()}}}},66270:function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ab,ac,ad,ae,af,ag,ah,ai,aj=c(3832);aj.pki=aj.pki||{};var ak=a.exports=aj.pki.oids=aj.oids=aj.oids||{};function al(a,b){ak[a]=b,ak[b]=a}al("1.2.840.113549.1.1.1","rsaEncryption"),al("1.2.840.113549.1.1.4","md5WithRSAEncryption"),al("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),al("1.2.840.113549.1.1.7","RSAES-OAEP"),al("1.2.840.113549.1.1.8","mgf1"),al("1.2.840.113549.1.1.9","pSpecified"),al("1.2.840.113549.1.1.10","RSASSA-PSS"),al("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),al("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),al("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),al("1.3.101.112","EdDSA25519"),al("1.2.840.10040.4.3","dsa-with-sha1"),al("1.3.14.3.2.7","desCBC"),al("1.3.14.3.2.26","sha1"),al("1.3.14.3.2.29","sha1WithRSASignature"),al("2.16.840.1.101.3.4.2.1","sha256"),al("2.16.840.1.101.3.4.2.2","sha384"),al("2.16.840.1.101.3.4.2.3","sha512"),al("2.16.840.1.101.3.4.2.4","sha224"),al("2.16.840.1.101.3.4.2.5","sha512-224"),al("2.16.840.1.101.3.4.2.6","sha512-256"),al("1.2.840.113549.2.2","md2"),al("1.2.840.113549.2.5","md5"),al("1.2.840.113549.1.7.1","data"),al("1.2.840.113549.1.7.2","signedData"),al("1.2.840.113549.1.7.3","envelopedData"),al("1.2.840.113549.1.7.4","signedAndEnvelopedData"),al("1.2.840.113549.1.7.5","digestedData"),al("1.2.840.113549.1.7.6","encryptedData"),al("1.2.840.113549.1.9.1","emailAddress"),al("1.2.840.113549.1.9.2","unstructuredName"),al("1.2.840.113549.1.9.3","contentType"),al("1.2.840.113549.1.9.4","messageDigest"),al("1.2.840.113549.1.9.5","signingTime"),al("1.2.840.113549.1.9.6","counterSignature"),al("1.2.840.113549.1.9.7","challengePassword"),al("1.2.840.113549.1.9.8","unstructuredAddress"),al("1.2.840.113549.1.9.14","extensionRequest"),al("1.2.840.113549.1.9.20","friendlyName"),al("1.2.840.113549.1.9.21","localKeyId"),al("1.2.840.113549.1.9.22.1","x509Certificate"),al("1.2.840.113549.1.12.10.1.1","keyBag"),al("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),al("1.2.840.113549.1.12.10.1.3","certBag"),al("1.2.840.113549.1.12.10.1.4","crlBag"),al("1.2.840.113549.1.12.10.1.5","secretBag"),al("1.2.840.113549.1.12.10.1.6","safeContentsBag"),al("1.2.840.113549.1.5.13","pkcs5PBES2"),al("1.2.840.113549.1.5.12","pkcs5PBKDF2"),al("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),al("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),al("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),al("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),al("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),al("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),al("1.2.840.113549.2.7","hmacWithSHA1"),al("1.2.840.113549.2.8","hmacWithSHA224"),al("1.2.840.113549.2.9","hmacWithSHA256"),al("1.2.840.113549.2.10","hmacWithSHA384"),al("1.2.840.113549.2.11","hmacWithSHA512"),al("1.2.840.113549.3.7","des-EDE3-CBC"),al("2.16.840.1.101.3.4.1.2","aes128-CBC"),al("2.16.840.1.101.3.4.1.22","aes192-CBC"),al("2.16.840.1.101.3.4.1.42","aes256-CBC"),al("2.5.4.3","commonName"),al("2.5.4.4","surname"),al("2.5.4.5","serialNumber"),al("2.5.4.6","countryName"),al("2.5.4.7","localityName"),al("2.5.4.8","stateOrProvinceName"),al("2.5.4.9","streetAddress"),al("2.5.4.10","organizationName"),al("2.5.4.11","organizationalUnitName"),al("2.5.4.12","title"),al("2.5.4.13","description"),al("2.5.4.15","businessCategory"),al("2.5.4.17","postalCode"),al("2.5.4.42","givenName"),al("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),al("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),al("2.16.840.1.113730.1.1","nsCertType"),al("2.16.840.1.113730.1.13","nsComment"),e="authorityKeyIdentifier",ak[d="2.5.29.1"]=e,g="keyAttributes",ak[f="2.5.29.2"]=g,i="certificatePolicies",ak[h="2.5.29.3"]=i,k="keyUsageRestriction",ak[j="2.5.29.4"]=k,m="policyMapping",ak[l="2.5.29.5"]=m,o="subtreesConstraint",ak[n="2.5.29.6"]=o,q="subjectAltName",ak[p="2.5.29.7"]=q,s="issuerAltName",ak[r="2.5.29.8"]=s,u="subjectDirectoryAttributes",ak[t="2.5.29.9"]=u,w="basicConstraints",ak[v="2.5.29.10"]=w,y="nameConstraints",ak[x="2.5.29.11"]=y,A="policyConstraints",ak[z="2.5.29.12"]=A,C="basicConstraints",ak[B="2.5.29.13"]=C,al("2.5.29.14","subjectKeyIdentifier"),al("2.5.29.15","keyUsage"),E="privateKeyUsagePeriod",ak[D="2.5.29.16"]=E,al("2.5.29.17","subjectAltName"),al("2.5.29.18","issuerAltName"),al("2.5.29.19","basicConstraints"),G="cRLNumber",ak[F="2.5.29.20"]=G,I="cRLReason",ak[H="2.5.29.21"]=I,K="expirationDate",ak[J="2.5.29.22"]=K,M="instructionCode",ak[L="2.5.29.23"]=M,O="invalidityDate",ak[N="2.5.29.24"]=O,Q="cRLDistributionPoints",ak[P="2.5.29.25"]=Q,S="issuingDistributionPoint",ak[R="2.5.29.26"]=S,U="deltaCRLIndicator",ak[T="2.5.29.27"]=U,W="issuingDistributionPoint",ak[V="2.5.29.28"]=W,Y="certificateIssuer",ak[X="2.5.29.29"]=Y,$="nameConstraints",ak[Z="2.5.29.30"]=$,al("2.5.29.31","cRLDistributionPoints"),al("2.5.29.32","certificatePolicies"),aa="policyMappings",ak[_="2.5.29.33"]=aa,ac="policyConstraints",ak[ab="2.5.29.34"]=ac,al("2.5.29.35","authorityKeyIdentifier"),ae="policyConstraints",ak[ad="2.5.29.36"]=ae,al("2.5.29.37","extKeyUsage"),ag="freshestCRL",ak[af="2.5.29.46"]=ag,ai="inhibitAnyPolicy",ak[ah="2.5.29.54"]=ai,al("1.3.6.1.4.1.11129.2.4.2","timestampList"),al("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),al("1.3.6.1.5.5.7.3.1","serverAuth"),al("1.3.6.1.5.5.7.3.2","clientAuth"),al("1.3.6.1.5.5.7.3.3","codeSigning"),al("1.3.6.1.5.5.7.3.4","emailProtection"),al("1.3.6.1.5.5.7.3.8","timeStamping")},97450:function(a,b,c){var d=c(3832);if(c(8925),c(3068),c(33480),c(28991),c(66270),c(98960),c(26953),c(49563),c(69372),c(28095),c(97116),void 0===e)var e=d.jsbn.BigInteger;var f=d.asn1,g=d.pki=d.pki||{};a.exports=g.pbe=d.pbe=d.pbe||{};var h=g.oids,i={name:"EncryptedPrivateKeyInfo",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:f.Class.UNIVERSAL,type:f.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:f.Class.UNIVERSAL,type:f.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},j={name:"PBES2Algorithms",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:f.Class.UNIVERSAL,type:f.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:f.Class.UNIVERSAL,type:f.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:f.Class.UNIVERSAL,type:f.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:f.Class.UNIVERSAL,type:f.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:f.Class.UNIVERSAL,type:f.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},k={name:"pkcs-12PbeParams",tagClass:f.Class.UNIVERSAL,type:f.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:f.Class.UNIVERSAL,type:f.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:f.Class.UNIVERSAL,type:f.Type.INTEGER,constructed:!1,capture:"iterations"}]};function l(a,b){return a.start().update(b).digest().getBytes()}function m(a){var b;if(a){if(!(b=g.oids[f.derToOid(a)])){var c=Error("Unsupported PRF OID.");throw c.oid=a,c.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],c}}else b="hmacWithSHA1";return n(b)}function n(a){var b=d.md;switch(a){case"hmacWithSHA224":b=d.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":a=a.substr(8).toLowerCase();break;default:var c=Error("Unsupported PRF algorithm.");throw c.algorithm=a,c.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],c}if(!b||!(a in b))throw Error("Unknown hash algorithm: "+a);return b[a].create()}g.encryptPrivateKeyInfo=function(a,b,c){(c=c||{}).saltSize=c.saltSize||8,c.count=c.count||2048,c.algorithm=c.algorithm||"aes128",c.prfAlgorithm=c.prfAlgorithm||"sha1";var e=d.random.getBytesSync(c.saltSize),i=c.count,j=f.integerToDer(i);if(0===c.algorithm.indexOf("aes")||"des"===c.algorithm){switch(c.algorithm){case"aes128":k=16,o=16,p=h["aes128-CBC"],q=d.aes.createEncryptionCipher;break;case"aes192":k=24,o=16,p=h["aes192-CBC"],q=d.aes.createEncryptionCipher;break;case"aes256":k=32,o=16,p=h["aes256-CBC"],q=d.aes.createEncryptionCipher;break;case"des":k=8,o=8,p=h.desCBC,q=d.des.createEncryptionCipher;break;default:var k,l,m,o,p,q,r=Error("Cannot encrypt private key. Unknown encryption algorithm.");throw r.algorithm=c.algorithm,r}var s,t,u,v,w,x="hmacWith"+c.prfAlgorithm.toUpperCase(),y=n(x),z=d.pkcs5.pbkdf2(b,e,i,k,y),A=d.random.getBytesSync(o),B=q(z);B.start(A),B.update(f.toDer(a)),B.finish(),m=B.output.getBytes();var C=(s=e,t=j,u=k,v=x,w=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,s),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,t.getBytes())]),"hmacWithSHA1"!==v&&w.value.push(f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,d.util.hexToBytes(u.toString(16))),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(g.oids[v]).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.NULL,!1,"")])),w);l=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(h.pkcs5PBES2).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(h.pkcs5PBKDF2).getBytes()),C]),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(p).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,A)])])])}else if("3des"===c.algorithm){k=24;var D=new d.util.ByteBuffer(e),z=g.pbe.generatePkcs12Key(b,D,1,i,k),A=g.pbe.generatePkcs12Key(b,D,2,i,k),B=d.des.createEncryptionCipher(z);B.start(A),B.update(f.toDer(a)),B.finish(),m=B.output.getBytes(),l=f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OID,!1,f.oidToDer(h["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,e),f.create(f.Class.UNIVERSAL,f.Type.INTEGER,!1,j.getBytes())])])}else{var r=Error("Cannot encrypt private key. Unknown encryption algorithm.");throw r.algorithm=c.algorithm,r}return f.create(f.Class.UNIVERSAL,f.Type.SEQUENCE,!0,[l,f.create(f.Class.UNIVERSAL,f.Type.OCTETSTRING,!1,m)])},g.decryptPrivateKeyInfo=function(a,b){var c=null,e={},h=[];if(!f.validate(a,i,e,h)){var j=Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw j.errors=h,j}var k=f.derToOid(e.encryptionOid),l=g.pbe.getCipher(k,e.encryptionParams,b),m=d.util.createBuffer(e.encryptedData);return l.update(m),l.finish()&&(c=f.fromDer(l.output)),c},g.encryptedPrivateKeyToPem=function(a,b){var c={type:"ENCRYPTED PRIVATE KEY",body:f.toDer(a).getBytes()};return d.pem.encode(c,{maxline:b})},g.encryptedPrivateKeyFromPem=function(a){var b=d.pem.decode(a)[0];if("ENCRYPTED PRIVATE KEY"!==b.type){var c=Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw c.headerType=b.type,c}if(b.procType&&"ENCRYPTED"===b.procType.type)throw Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return f.fromDer(b.body)},g.encryptRsaPrivateKey=function(a,b,c){if(!(c=c||{}).legacy){var e,h,i,j,k=g.wrapRsaPrivateKey(g.privateKeyToAsn1(a));return k=g.encryptPrivateKeyInfo(k,b,c),g.encryptedPrivateKeyToPem(k)}switch(c.algorithm){case"aes128":e="AES-128-CBC",i=16,h=d.random.getBytesSync(16),j=d.aes.createEncryptionCipher;break;case"aes192":e="AES-192-CBC",i=24,h=d.random.getBytesSync(16),j=d.aes.createEncryptionCipher;break;case"aes256":e="AES-256-CBC",i=32,h=d.random.getBytesSync(16),j=d.aes.createEncryptionCipher;break;case"3des":e="DES-EDE3-CBC",i=24,h=d.random.getBytesSync(8),j=d.des.createEncryptionCipher;break;case"des":e="DES-CBC",i=8,h=d.random.getBytesSync(8),j=d.des.createEncryptionCipher;break;default:var l=Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+c.algorithm+'".');throw l.algorithm=c.algorithm,l}var m=d.pbe.opensslDeriveBytes(b,h.substr(0,8),i),n=j(m);n.start(h),n.update(f.toDer(g.privateKeyToAsn1(a))),n.finish();var o={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:e,parameters:d.util.bytesToHex(h).toUpperCase()},body:n.output.getBytes()};return d.pem.encode(o)},g.decryptRsaPrivateKey=function(a,b){var c=null,e=d.pem.decode(a)[0];if("ENCRYPTED PRIVATE KEY"!==e.type&&"PRIVATE KEY"!==e.type&&"RSA PRIVATE KEY"!==e.type){var h=Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw h.headerType=h,h}if(e.procType&&"ENCRYPTED"===e.procType.type){switch(e.dekInfo.algorithm){case"DES-CBC":i=8,j=d.des.createDecryptionCipher;break;case"DES-EDE3-CBC":i=24,j=d.des.createDecryptionCipher;break;case"AES-128-CBC":i=16,j=d.aes.createDecryptionCipher;break;case"AES-192-CBC":i=24,j=d.aes.createDecryptionCipher;break;case"AES-256-CBC":i=32,j=d.aes.createDecryptionCipher;break;case"RC2-40-CBC":i=5,j=function(a){return d.rc2.createDecryptionCipher(a,40)};break;case"RC2-64-CBC":i=8,j=function(a){return d.rc2.createDecryptionCipher(a,64)};break;case"RC2-128-CBC":i=16,j=function(a){return d.rc2.createDecryptionCipher(a,128)};break;default:var i,j,h=Error('Could not decrypt private key; unsupported encryption algorithm "'+e.dekInfo.algorithm+'".');throw h.algorithm=e.dekInfo.algorithm,h}var k=d.util.hexToBytes(e.dekInfo.parameters),l=d.pbe.opensslDeriveBytes(b,k.substr(0,8),i),m=j(l);if(m.start(k),m.update(d.util.createBuffer(e.body)),!m.finish())return c;c=m.output.getBytes()}else c=e.body;return null!==(c="ENCRYPTED PRIVATE KEY"===e.type?g.decryptPrivateKeyInfo(f.fromDer(c),b):f.fromDer(c))&&(c=g.privateKeyFromAsn1(c)),c},g.pbe.generatePkcs12Key=function(a,b,c,e,f,g){if(null==g){if(!("sha1"in d.md))throw Error('"sha1" hash algorithm unavailable.');g=d.md.sha1.create()}var h,i,j=g.digestLength,k=g.blockLength,l=new d.util.ByteBuffer,m=new d.util.ByteBuffer;if(null!=a){for(i=0;i<a.length;i++)m.putInt16(a.charCodeAt(i));m.putInt16(0)}var n=m.length(),o=b.length(),p=new d.util.ByteBuffer;p.fillWithByte(c,k);var q=k*Math.ceil(o/k),r=new d.util.ByteBuffer;for(i=0;i<q;i++)r.putByte(b.at(i%o));var s=k*Math.ceil(n/k),t=new d.util.ByteBuffer;for(i=0;i<s;i++)t.putByte(m.at(i%n));var u=r;u.putBuffer(t);for(var v=Math.ceil(f/j),w=1;w<=v;w++){var x=new d.util.ByteBuffer;x.putBytes(p.bytes()),x.putBytes(u.bytes());for(var y=0;y<e;y++)g.start(),g.update(x.getBytes()),x=g.digest();var z=new d.util.ByteBuffer;for(i=0;i<k;i++)z.putByte(x.at(i%j));var A=Math.ceil(o/k)+Math.ceil(n/k),B=new d.util.ByteBuffer;for(h=0;h<A;h++){var C=new d.util.ByteBuffer(u.getBytes(k)),D=511;for(i=z.length()-1;i>=0;i--)D>>=8,D+=z.at(i)+C.at(i),C.setAt(i,255&D);B.putBuffer(C)}u=B,l.putBuffer(x)}return l.truncate(l.length()-f),l},g.pbe.getCipher=function(a,b,c){switch(a){case g.oids.pkcs5PBES2:return g.pbe.getCipherForPBES2(a,b,c);case g.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case g.oids["pbewithSHAAnd40BitRC2-CBC"]:return g.pbe.getCipherForPKCS12PBE(a,b,c);default:var d=Error("Cannot read encrypted PBE data block. Unsupported OID.");throw d.oid=a,d.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],d}},g.pbe.getCipherForPBES2=function(a,b,c){var e,h,i={},k=[];if(!f.validate(b,j,i,k)){var l=Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw l.errors=k,l}if((a=f.derToOid(i.kdfOid))!==g.oids.pkcs5PBKDF2){var l=Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw l.oid=a,l.supportedOids=["pkcs5PBKDF2"],l}if((a=f.derToOid(i.encOid))!==g.oids["aes128-CBC"]&&a!==g.oids["aes192-CBC"]&&a!==g.oids["aes256-CBC"]&&a!==g.oids["des-EDE3-CBC"]&&a!==g.oids.desCBC){var l=Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw l.oid=a,l.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],l}var n=i.kdfSalt,o=d.util.createBuffer(i.kdfIterationCount);switch(o=o.getInt(o.length()<<3),g.oids[a]){case"aes128-CBC":e=16,h=d.aes.createDecryptionCipher;break;case"aes192-CBC":e=24,h=d.aes.createDecryptionCipher;break;case"aes256-CBC":e=32,h=d.aes.createDecryptionCipher;break;case"des-EDE3-CBC":e=24,h=d.des.createDecryptionCipher;break;case"desCBC":e=8,h=d.des.createDecryptionCipher}var p=m(i.prfOid),q=d.pkcs5.pbkdf2(c,n,o,e,p),r=i.encIv,s=h(q);return s.start(r),s},g.pbe.getCipherForPKCS12PBE=function(a,b,c){var e,h,i,j={},l=[];if(!f.validate(b,k,j,l)){var n=Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw n.errors=l,n}var o=d.util.createBuffer(j.salt),p=d.util.createBuffer(j.iterations);switch(p=p.getInt(p.length()<<3),a){case g.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:e=24,h=8,i=d.des.startDecrypting;break;case g.oids["pbewithSHAAnd40BitRC2-CBC"]:e=5,h=8,i=function(a,b){var c=d.rc2.createDecryptionCipher(a,40);return c.start(b,null),c};break;default:var n=Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw n.oid=a,n}var q=m(j.prfOid),r=g.pbe.generatePkcs12Key(c,o,1,p,e,q);q.start();var s=g.pbe.generatePkcs12Key(c,o,2,p,h,q);return i(r,s)},g.pbe.opensslDeriveBytes=function(a,b,c,e){if(null==e){if(!("md5"in d.md))throw Error('"md5" hash algorithm unavailable.');e=d.md.md5.create()}null===b&&(b="");for(var f=[l(e,a+b)],g=16,h=1;g<c;++h,g+=16)f.push(l(e,f[h-1]+a+b));return f.join("").substr(0,c)}},98960:function(a,b,c){var d,e=c(62678).Buffer,f=c(3832);c(36607),c(28991),c(97116);var g=f.pkcs5=f.pkcs5||{};f.util.isNodejs&&!f.options.usePureJavaScript&&(d=c(25819)),a.exports=f.pbkdf2=g.pbkdf2=function(a,b,c,g,h,i){if("function"==typeof h&&(i=h,h=null),f.util.isNodejs&&!f.options.usePureJavaScript&&d.pbkdf2&&(null===h||"object"!=typeof h)&&(d.pbkdf2Sync.length>4||!h||"sha1"===h))return("string"!=typeof h&&(h="sha1"),a=e.from(a,"binary"),b=e.from(b,"binary"),i)?4===d.pbkdf2Sync.length?d.pbkdf2(a,b,c,g,function(a,b){if(a)return i(a);i(null,b.toString("binary"))}):d.pbkdf2(a,b,c,g,h,function(a,b){if(a)return i(a);i(null,b.toString("binary"))}):4===d.pbkdf2Sync.length?d.pbkdf2Sync(a,b,c,g).toString("binary"):d.pbkdf2Sync(a,b,c,g,h).toString("binary");if(null==h&&(h="sha1"),"string"==typeof h){if(!(h in f.md.algorithms))throw Error("Unknown hash algorithm: "+h);h=f.md[h].create()}var j=h.digestLength;if(g>4294967295*j){var k=Error("Derived key is too long.");if(i)return i(k);throw k}var l=Math.ceil(g/j),m=g-(l-1)*j,n=f.hmac.create();n.start(h,a);var o="";if(!i){for(var p=1;p<=l;++p){n.start(null,null),n.update(b),n.update(f.util.int32ToBytes(p)),r=t=n.digest().getBytes();for(var q=2;q<=c;++q)n.start(null,null),n.update(t),s=n.digest().getBytes(),r=f.util.xorBytes(r,s,j),t=s;o+=p<l?r:r.substr(0,m)}return o}var r,s,t,q,p=1;function u(){if(p>l)return i(null,o);n.start(null,null),n.update(b),n.update(f.util.int32ToBytes(p)),r=t=n.digest().getBytes(),q=2,v()}function v(){if(q<=c)return n.start(null,null),n.update(t),s=n.digest().getBytes(),r=f.util.xorBytes(r,s,j),t=s,++q,f.util.setImmediate(v);o+=p<l?r:r.substr(0,m),++p,u()}u()}},26953:function(a,b,c){var d=c(3832);c(97116);var e=a.exports=d.pem=d.pem||{};function f(a){for(var b=a.name+": ",c=[],d=function(a,b){return" "+b},e=0;e<a.values.length;++e)c.push(a.values[e].replace(/^(\S+\r\n)/,d));b+=c.join(",")+"\r\n";for(var f=0,g=-1,e=0;e<b.length;++e,++f)if(f>65&& -1!==g){var h=b[g];","===h?(++g,b=b.substr(0,g)+"\r\n "+b.substr(g)):b=b.substr(0,g)+"\r\n"+h+b.substr(g+1),f=e-g-1,g=-1,++e}else(" "===b[e]||"	"===b[e]||","===b[e])&&(g=e);return b}function g(a){return a.replace(/^\s+/,"")}e.encode=function(a,b){b=b||{};var c,e="-----BEGIN "+a.type+"-----\r\n";if(a.procType&&(e+=f(c={name:"Proc-Type",values:[String(a.procType.version),a.procType.type]})),a.contentDomain&&(e+=f(c={name:"Content-Domain",values:[a.contentDomain]})),a.dekInfo&&(c={name:"DEK-Info",values:[a.dekInfo.algorithm]},a.dekInfo.parameters&&c.values.push(a.dekInfo.parameters),e+=f(c)),a.headers)for(var g=0;g<a.headers.length;++g)e+=f(a.headers[g]);return a.procType&&(e+="\r\n"),e+=d.util.encode64(a.body,b.maxline||64)+"\r\n",e+="-----END "+a.type+"-----\r\n"},e.decode=function(a){for(var b,c=[],e=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,f=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,h=/\r?\n/;b=e.exec(a);){var i=b[1];"NEW CERTIFICATE REQUEST"===i&&(i="CERTIFICATE REQUEST");var j={type:i,procType:null,contentDomain:null,dekInfo:null,headers:[],body:d.util.decode64(b[3])};if(c.push(j),b[2]){for(var k=b[2].split(h),l=0;b&&l<k.length;){for(var m=k[l].replace(/\s+$/,""),n=l+1;n<k.length;++n){var o=k[n];if(!/\s/.test(o[0]))break;m+=o,l=n}if(b=m.match(f)){for(var p={name:b[1],values:[]},q=b[2].split(","),r=0;r<q.length;++r)p.values.push(g(q[r]));if(j.procType){if(j.contentDomain||"Content-Domain"!==p.name){if(j.dekInfo||"DEK-Info"!==p.name)j.headers.push(p);else{if(0===p.values.length)throw Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');j.dekInfo={algorithm:q[0],parameters:q[1]||null}}}else j.contentDomain=q[0]||""}else{if("Proc-Type"!==p.name)throw Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==p.values.length)throw Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');j.procType={version:q[0],type:q[1]}}}++l}if("ENCRYPTED"===j.procType&&!j.dekInfo)throw Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===c.length)throw Error("Invalid PEM formatted message.");return c}},18936:function(a,b,c){var d=c(3832);c(97116),c(49563),c(137);var e=a.exports=d.pkcs1=d.pkcs1||{};function f(a,b,c){c||(c=d.md.sha1.create());for(var e="",f=Math.ceil(b/c.digestLength),g=0;g<f;++g){var h=String.fromCharCode(g>>24&255,g>>16&255,g>>8&255,255&g);c.start(),c.update(a+h),e+=c.digest().getBytes()}return e.substring(0,b)}e.encode_rsa_oaep=function(a,b,c){"string"==typeof c?(e=c,g=arguments[3]||void 0,h=arguments[4]||void 0):c&&(e=c.label||void 0,g=c.seed||void 0,h=c.md||void 0,c.mgf1&&c.mgf1.md&&(i=c.mgf1.md)),h?h.start():h=d.md.sha1.create(),i||(i=h);var e,g,h,i,j=Math.ceil(a.n.bitLength()/8),k=j-2*h.digestLength-2;if(b.length>k){var l=Error("RSAES-OAEP input message length is too long.");throw l.length=b.length,l.maxLength=k,l}e||(e=""),h.update(e,"raw");for(var m=h.digest(),n="",o=k-b.length,p=0;p<o;p++)n+="\0";var q=m.getBytes()+n+"\x01"+b;if(g){if(g.length!==h.digestLength){var l=Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw l.seedLength=g.length,l.digestLength=h.digestLength,l}}else g=d.random.getBytes(h.digestLength);var r=f(g,j-h.digestLength-1,i),s=d.util.xorBytes(q,r,q.length),t=f(s,h.digestLength,i);return"\0"+d.util.xorBytes(g,t,g.length)+s},e.decode_rsa_oaep=function(a,b,c){"string"==typeof c?(e=c,g=arguments[3]||void 0):c&&(e=c.label||void 0,g=c.md||void 0,c.mgf1&&c.mgf1.md&&(h=c.mgf1.md));var e,g,h,i=Math.ceil(a.n.bitLength()/8);if(b.length!==i){var j=Error("RSAES-OAEP encoded message length is invalid.");throw j.length=b.length,j.expectedLength=i,j}if(void 0===g?g=d.md.sha1.create():g.start(),h||(h=g),i<2*g.digestLength+2)throw Error("RSAES-OAEP key is too short for the hash function.");e||(e=""),g.update(e,"raw");for(var k=g.digest().getBytes(),l=b.charAt(0),m=b.substring(1,g.digestLength+1),n=b.substring(1+g.digestLength),o=f(n,g.digestLength,h),p=d.util.xorBytes(m,o,m.length),q=f(p,i-g.digestLength-1,h),r=d.util.xorBytes(n,q,n.length),s=r.substring(0,g.digestLength),j="\0"!==l,t=0;t<g.digestLength;++t)j|=k.charAt(t)!==s.charAt(t);for(var u=1,v=g.digestLength,w=g.digestLength;w<r.length;w++){var x=r.charCodeAt(w),y=1&x^1,z=u?65534:0;j|=x&z,u&=y,v+=u}if(j||1!==r.charCodeAt(v))throw Error("Invalid RSAES-OAEP padding.");return r.substring(v+1)}},79437:function(a,b,c){var d=c(3832);c(8925),c(3068),c(33480),c(66270),c(26953),c(95496),c(49563),c(97116),c(25414);var e=d.asn1,f=a.exports=d.pkcs7=d.pkcs7||{};function g(a){var b={},c=[];if(!e.validate(a,f.asn1.recipientInfoValidator,b,c)){var g=Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw g.errors=c,g}return{version:b.version.charCodeAt(0),issuer:d.pki.RDNAttributesAsArray(b.issuer),serialNumber:d.util.createBuffer(b.serial).toHex(),encryptedContent:{algorithm:e.derToOid(b.encAlgorithm),parameter:b.encParameter?b.encParameter.value:void 0,content:b.encKey}}}function h(a){return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(a.version).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[d.pki.distinguishedNameToAsn1({attributes:a.issuer}),e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,d.util.hexToBytes(a.serialNumber))]),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(a.encryptedContent.algorithm).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")]),e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,a.encryptedContent.content)])}function i(a){var b=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(a.version).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[d.pki.distinguishedNameToAsn1({attributes:a.issuer}),e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,d.util.hexToBytes(a.serialNumber))]),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(a.digestAlgorithm).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")])]);if(a.authenticatedAttributesAsn1&&b.value.push(a.authenticatedAttributesAsn1),b.value.push(e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(a.signatureAlgorithm).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")])),b.value.push(e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,a.signature)),a.unauthenticatedAttributes.length>0){for(var c=e.create(e.Class.CONTEXT_SPECIFIC,1,!0,[]),f=0;f<a.unauthenticatedAttributes.length;++f){var g=a.unauthenticatedAttributes[f];c.values.push(k(g))}b.value.push(c)}return b}function j(a){for(var b=[],c=0;c<a.length;++c)b.push(i(a[c]));return b}function k(a){var b;if(a.type===d.pki.oids.contentType)b=e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(a.value).getBytes());else if(a.type===d.pki.oids.messageDigest)b=e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,a.value.bytes());else if(a.type===d.pki.oids.signingTime){var c=new Date("1950-01-01T00:00:00Z"),f=new Date("2050-01-01T00:00:00Z"),g=a.value;if("string"==typeof g){var h=Date.parse(g);g=isNaN(h)?13===g.length?e.utcTimeToDate(g):e.generalizedTimeToDate(g):new Date(h)}b=g>=c&&g<f?e.create(e.Class.UNIVERSAL,e.Type.UTCTIME,!1,e.dateToUtcTime(g)):e.create(e.Class.UNIVERSAL,e.Type.GENERALIZEDTIME,!1,e.dateToGeneralizedTime(g))}return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(a.type).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SET,!0,[b])])}function l(a){return[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(d.pki.oids.data).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(a.algorithm).getBytes()),a.parameter?e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,a.parameter.getBytes()):void 0]),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,a.content.getBytes())])]}function m(a,b,c){var f={};if(!e.validate(b,c,f,[])){var g=Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw g.errors=g,g}if(e.derToOid(f.contentType)!==d.pki.oids.data)throw Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(f.encryptedContent){var h="";if(d.util.isArray(f.encryptedContent))for(var i=0;i<f.encryptedContent.length;++i){if(f.encryptedContent[i].type!==e.Type.OCTETSTRING)throw Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");h+=f.encryptedContent[i].value}else h=f.encryptedContent;a.encryptedContent={algorithm:e.derToOid(f.encAlgorithm),parameter:d.util.createBuffer(f.encParameter.value),content:d.util.createBuffer(h)}}if(f.content){var h="";if(d.util.isArray(f.content))for(var i=0;i<f.content.length;++i){if(f.content[i].type!==e.Type.OCTETSTRING)throw Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");h+=f.content[i].value}else h=f.content;a.content=d.util.createBuffer(h)}return a.version=f.version.charCodeAt(0),a.rawCapture=f,f}function n(a){if(void 0===a.encryptedContent.key)throw Error("Symmetric key not available.");if(void 0===a.content){var b;switch(a.encryptedContent.algorithm){case d.pki.oids["aes128-CBC"]:case d.pki.oids["aes192-CBC"]:case d.pki.oids["aes256-CBC"]:b=d.aes.createDecryptionCipher(a.encryptedContent.key);break;case d.pki.oids.desCBC:case d.pki.oids["des-EDE3-CBC"]:b=d.des.createDecryptionCipher(a.encryptedContent.key);break;default:throw Error("Unsupported symmetric cipher, OID "+a.encryptedContent.algorithm)}if(b.start(a.encryptedContent.parameter),b.update(a.encryptedContent.content),!b.finish())throw Error("Symmetric decryption failed.");a.content=b.output}}f.messageFromPem=function(a){var b=d.pem.decode(a)[0];if("PKCS7"!==b.type){var c=Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw c.headerType=b.type,c}if(b.procType&&"ENCRYPTED"===b.procType.type)throw Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var g=e.fromDer(b.body);return f.messageFromAsn1(g)},f.messageToPem=function(a,b){var c={type:"PKCS7",body:e.toDer(a.toAsn1()).getBytes()};return d.pem.encode(c,{maxline:b})},f.messageFromAsn1=function(a){var b,c={},g=[];if(!e.validate(a,f.asn1.contentInfoValidator,c,g)){var h=Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw h.errors=g,h}var i=e.derToOid(c.contentType);switch(i){case d.pki.oids.envelopedData:b=f.createEnvelopedData();break;case d.pki.oids.encryptedData:b=f.createEncryptedData();break;case d.pki.oids.signedData:b=f.createSignedData();break;default:throw Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return b.fromAsn1(c.content.value[0]),b},f.createSignedData=function(){var a=null;return a={type:d.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(b){if(m(a,b,f.asn1.signedDataValidator),a.certificates=[],a.crls=[],a.digestAlgorithmIdentifiers=[],a.contentInfo=null,a.signerInfos=[],a.rawCapture.certificates)for(var c=a.rawCapture.certificates.value,e=0;e<c.length;++e)a.certificates.push(d.pki.certificateFromAsn1(c[e]))},toAsn1:function(){a.contentInfo||a.sign();for(var b=[],c=0;c<a.certificates.length;++c)b.push(d.pki.certificateToAsn1(a.certificates[c]));var f=[],g=e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(a.version).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SET,!0,a.digestAlgorithmIdentifiers),a.contentInfo])]);return b.length>0&&g.value[0].value.push(e.create(e.Class.CONTEXT_SPECIFIC,0,!0,b)),f.length>0&&g.value[0].value.push(e.create(e.Class.CONTEXT_SPECIFIC,1,!0,f)),g.value[0].value.push(e.create(e.Class.UNIVERSAL,e.Type.SET,!0,a.signerInfos)),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(a.type).getBytes()),g])},addSigner:function(b){var c=b.issuer,e=b.serialNumber;if(b.certificate){var f=b.certificate;"string"==typeof f&&(f=d.pki.certificateFromPem(f)),c=f.issuer.attributes,e=f.serialNumber}var g=b.key;if(!g)throw Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof g&&(g=d.pki.privateKeyFromPem(g));var h=b.digestAlgorithm||d.pki.oids.sha1;switch(h){case d.pki.oids.sha1:case d.pki.oids.sha256:case d.pki.oids.sha384:case d.pki.oids.sha512:case d.pki.oids.md5:break;default:throw Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+h)}var i=b.authenticatedAttributes||[];if(i.length>0){for(var j=!1,k=!1,l=0;l<i.length;++l){var m=i[l];if(!j&&m.type===d.pki.oids.contentType){if(j=!0,k)break;continue}if(!k&&m.type===d.pki.oids.messageDigest){if(k=!0,j)break;continue}}if(!j||!k)throw Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}a.signers.push({key:g,version:1,issuer:c,serialNumber:e,digestAlgorithm:h,signatureAlgorithm:d.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:i,unauthenticatedAttributes:[]})},sign:function(f){if(f=f||{},("object"!=typeof a.content||null===a.contentInfo)&&(a.contentInfo=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(d.pki.oids.data).getBytes())]),"content"in a)){var g;a.content instanceof d.util.ByteBuffer?g=a.content.bytes():"string"==typeof a.content&&(g=d.util.encodeUtf8(a.content)),f.detached?a.detachedContent=e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,g):a.contentInfo.value.push(e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,g)]))}if(0!==a.signers.length){var h=b();c(h)}},verify:function(){throw Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(b){"string"==typeof b&&(b=d.pki.certificateFromPem(b)),a.certificates.push(b)},addCertificateRevokationList:function(a){throw Error("PKCS#7 CRL support not yet implemented.")}};function b(){for(var b={},c=0;c<a.signers.length;++c){var f=a.signers[c],g=f.digestAlgorithm;g in b||(b[g]=d.md[d.pki.oids[g]].create()),0===f.authenticatedAttributes.length?f.md=b[g]:f.md=d.md[d.pki.oids[g]].create()}for(var g in a.digestAlgorithmIdentifiers=[],b)a.digestAlgorithmIdentifiers.push(e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(g).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")]));return b}function c(b){if(!(c=a.detachedContent?a.detachedContent:(c=a.contentInfo.value[1]).value[0]))throw Error("Could not sign PKCS#7 message; there is no content to sign.");var c,f=e.derToOid(a.contentInfo.value[0].value),g=e.toDer(c);for(var h in g.getByte(),e.getBerValueLength(g),g=g.getBytes(),b)b[h].start().update(g);for(var i=new Date,l=0;l<a.signers.length;++l){var m=a.signers[l];if(0===m.authenticatedAttributes.length){if(f!==d.pki.oids.data)throw Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{m.authenticatedAttributesAsn1=e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var n=e.create(e.Class.UNIVERSAL,e.Type.SET,!0,[]),o=0;o<m.authenticatedAttributes.length;++o){var p=m.authenticatedAttributes[o];p.type===d.pki.oids.messageDigest?p.value=b[m.digestAlgorithm].digest():p.type!==d.pki.oids.signingTime||p.value||(p.value=i),n.value.push(k(p)),m.authenticatedAttributesAsn1.value.push(k(p))}g=e.toDer(n).getBytes(),m.md.start().update(g)}m.signature=m.key.sign(m.md,"RSASSA-PKCS1-V1_5")}a.signerInfos=j(a.signers)}},f.createEncryptedData=function(){var a=null;return a={type:d.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:d.pki.oids["aes256-CBC"]},fromAsn1:function(b){m(a,b,f.asn1.encryptedDataValidator)},decrypt:function(b){void 0!==b&&(a.encryptedContent.key=b),n(a)}}},f.createEnvelopedData=function(){var a=null;return a={type:d.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:d.pki.oids["aes256-CBC"]},fromAsn1:function(b){var c=m(a,b,f.asn1.envelopedDataValidator);a.recipients=function a(b){for(var c=[],d=0;d<b.length;++d)c.push(g(b[d]));return c}(c.recipientInfos.value)},toAsn1:function(){return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(a.type).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(a.version).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SET,!0,function a(b){for(var c=[],d=0;d<b.length;++d)c.push(h(b[d]));return c}(a.recipients)),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,l(a.encryptedContent))])])])},findRecipient:function(b){for(var c=b.issuer.attributes,d=0;d<a.recipients.length;++d){var e=a.recipients[d],f=e.issuer;if(e.serialNumber===b.serialNumber&&f.length===c.length){for(var g=!0,h=0;h<c.length;++h)if(f[h].type!==c[h].type||f[h].value!==c[h].value){g=!1;break}if(g)return e}}return null},decrypt:function(b,c){if(void 0===a.encryptedContent.key&& void 0!==b&& void 0!==c)switch(b.encryptedContent.algorithm){case d.pki.oids.rsaEncryption:case d.pki.oids.desCBC:var e=c.decrypt(b.encryptedContent.content);a.encryptedContent.key=d.util.createBuffer(e);break;default:throw Error("Unsupported asymmetric cipher, OID "+b.encryptedContent.algorithm)}n(a)},addRecipient:function(b){a.recipients.push({version:0,issuer:b.issuer.attributes,serialNumber:b.serialNumber,encryptedContent:{algorithm:d.pki.oids.rsaEncryption,key:b.publicKey}})},encrypt:function(b,c){if(void 0===a.encryptedContent.content){switch(c=c||a.encryptedContent.algorithm,b=b||a.encryptedContent.key,c){case d.pki.oids["aes128-CBC"]:e=16,f=16,g=d.aes.createEncryptionCipher;break;case d.pki.oids["aes192-CBC"]:e=24,f=16,g=d.aes.createEncryptionCipher;break;case d.pki.oids["aes256-CBC"]:e=32,f=16,g=d.aes.createEncryptionCipher;break;case d.pki.oids["des-EDE3-CBC"]:e=24,f=8,g=d.des.createEncryptionCipher;break;default:throw Error("Unsupported symmetric cipher, OID "+c)}if(void 0===b)b=d.util.createBuffer(d.random.getBytes(e));else if(b.length()!=e)throw Error("Symmetric key has wrong length; got "+b.length()+" bytes, expected "+e+".");a.encryptedContent.algorithm=c,a.encryptedContent.key=b,a.encryptedContent.parameter=d.util.createBuffer(d.random.getBytes(f));var e,f,g,h=g(b);if(h.start(a.encryptedContent.parameter.copy()),h.update(a.content),!h.finish())throw Error("Symmetric encryption failed.");a.encryptedContent.content=h.output}for(var i=0;i<a.recipients.length;++i){var j=a.recipients[i];if(void 0===j.encryptedContent.content){if(j.encryptedContent.algorithm===d.pki.oids.rsaEncryption)j.encryptedContent.content=j.encryptedContent.key.encrypt(a.encryptedContent.key.data);else throw Error("Unsupported asymmetric cipher, OID "+j.encryptedContent.algorithm)}}}}}},95496:function(a,b,c){var d=c(3832);c(3068),c(97116);var e=d.asn1,f=a.exports=d.pkcs7asn1=d.pkcs7asn1||{};d.pkcs7=d.pkcs7||{},d.pkcs7.asn1=f;var g={name:"ContentInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};f.contentInfoValidator=g;var h={name:"EncryptedContentInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:e.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};f.envelopedDataValidator={name:"EnvelopedData",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(h)},f.encryptedDataValidator={name:"EncryptedData",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"}].concat(h)};var i={name:"SignerInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:e.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:e.Class.UNIVERSAL,type:e.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:e.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};f.signedDataValidator={name:"SignedData",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},g,{name:"SignedData.Certificates",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:e.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,capture:"signerInfos",optional:!0,value:[i]}]},f.recipientInfoValidator={name:"RecipientInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:e.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:e.Class.UNIVERSAL,type:e.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},29654:function(a,b,c){var d=c(3832);c(97116),c(15764),c(49563),function(){if(d.prime){a.exports=d.prime;return}var b=a.exports=d.prime=d.prime||{},c=d.jsbn.BigInteger,e=[6,4,2,4,2,4,6,2],f=new c(null);f.fromInt(30);var g=function(a,b){return a|b};function h(a,b,c,d){var e=k(a,b),f=l(e.bitLength());"millerRabinTests"in c&&(f=c.millerRabinTests);var g=10;"maxBlockTime"in c&&(g=c.maxBlockTime),i(e,a,b,0,f,g,d)}function i(a,b,c,f,g,h,j){var l=+new Date;do{if(a.bitLength()>b&&(a=k(b,c)),a.isProbablePrime(g))return j(null,a);a.dAddOffset(e[(f++)%8],0)}while(h<0|| +new Date-l<h);d.util.setImmediate(function(){i(a,b,c,f,g,h,j)})}function j(a,b,e,f){if("undefined"==typeof Worker)return h(a,b,e,f);var g=k(a,b),i=e.workers,j=e.workLoad||100,l=30*j/8,m=e.workerScript||"forge/prime.worker.js";if(-1===i)return d.util.estimateCores(function(a,b){a&&(b=2),i=b-1,n()});function n(){i=Math.max(1,i);for(var d=[],e=0;e<i;++e)d[e]=new Worker(m);for(var h=i,e=0;e<i;++e)d[e].addEventListener("message",o);var n=!1;function o(e){if(!n){--h;var i=e.data;if(i.found){for(var m=0;m<d.length;++m)d[m].terminate();return n=!0,f(null,new c(i.prime,16))}g.bitLength()>a&&(g=k(a,b));var o=g.toString(16);e.target.postMessage({hex:o,workLoad:j}),g.dAddOffset(l,0)}}}n()}function k(a,b){var d=new c(a,b),e=a-1;return d.testBit(e)||d.bitwiseTo(c.ONE.shiftLeft(e),g,d),d.dAddOffset(31-d.mod(f).byteValue(),0),d}function l(a){return a<=100?27:a<=150?18:a<=200?15:a<=250?12:a<=300?9:a<=350?8:a<=400?7:a<=500?6:a<=600?5:a<=800?4:a<=1250?3:2}b.generateProbablePrime=function(a,b,c){"function"==typeof b&&(c=b,b={});var e,f,g,i,k=(b=b||{}).algorithm||"PRIMEINC";"string"==typeof k&&(k={name:k}),k.options=k.options||{};var l=b.prng||d.random;if("PRIMEINC"===k.name){return e=a,f={nextBytes:function(a){for(var b=l.getBytesSync(a.length),c=0;c<a.length;++c)a[c]=b.charCodeAt(c)}},g=k.options,i=c,"workers"in g?j(e,f,g,i):h(e,f,g,i)}throw Error("Invalid prime generation algorithm: "+k.name)}}()},74933:function(a,b,c){var d=c(24112),e=c(3832);c(97116);var f=null;!e.util.isNodejs||e.options.usePureJavaScript||d.versions["node-webkit"]||(f=c(25819));var g=a.exports=e.prng=e.prng||{};g.create=function(a){for(var b={plugin:a,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},c=a.md,d=Array(32),g=0;g<32;++g)d[g]=c.create();function h(){if(b.pools[0].messageLength>=32)return i();var a=32-b.pools[0].messageLength<<5;b.collect(b.seedFileSync(a)),i()}function i(){b.reseeds=4294967295===b.reseeds?0:b.reseeds+1;var a=b.plugin.md.create();a.update(b.keyBytes);for(var c=1,d=0;d<32;++d)b.reseeds%c==0&&(a.update(b.pools[d].digest().getBytes()),b.pools[d].start()),c<<=1;b.keyBytes=a.digest().getBytes(),a.start(),a.update(b.keyBytes);var e=a.digest().getBytes();b.key=b.plugin.formatKey(b.keyBytes),b.seed=b.plugin.formatSeed(e),b.generated=0}function j(a){var b=null,c=e.util.globalScope,d=c.crypto||c.msCrypto;d&&d.getRandomValues&&(b=function(a){return d.getRandomValues(a)});var f=e.util.createBuffer();if(b)for(;f.length()<a;){var g=Math.max(1,Math.min(a-f.length(),65536)/4),h=new Uint32Array(Math.floor(g));try{b(h);for(var i=0;i<h.length;++i)f.putInt32(h[i])}catch(j){if(!("undefined"!=typeof QuotaExceededError&&j instanceof QuotaExceededError))throw j}}if(f.length()<a)for(var k,l,m,n=Math.floor(65536*Math.random());f.length()<a;){l=16807*(65535&n),k=16807*(n>>16),l+=(32767&k)<<16,l+=k>>15,l=(2147483647&l)+(l>>31),n=4294967295&l;for(var i=0;i<3;++i)m=n>>>(i<<3),m^=Math.floor(256*Math.random()),f.putByte(255&m)}return f.getBytes(a)}return b.pools=d,b.pool=0,b.generate=function(a,c){if(!c)return b.generateSync(a);var d=b.plugin.cipher,f=b.plugin.increment,g=b.plugin.formatKey,h=b.plugin.formatSeed,j=e.util.createBuffer();function k(l){if(l)return c(l);if(j.length()>=a)return c(null,j.getBytes(a));if(b.generated>1048575&&(b.key=null),null===b.key)return e.util.nextTick(function(){(function a(c){if(b.pools[0].messageLength>=32)return i(),c();var d=32-b.pools[0].messageLength<<5;b.seedFile(d,function(a,d){if(a)return c(a);b.collect(d),i(),c()})})(k)});var m=d(b.key,b.seed);b.generated+=m.length,j.putBytes(m),b.key=g(d(b.key,f(b.seed))),b.seed=h(d(b.key,b.seed)),e.util.setImmediate(k)}b.key=null,k()},b.generateSync=function(a){var c=b.plugin.cipher,d=b.plugin.increment,f=b.plugin.formatKey,g=b.plugin.formatSeed;b.key=null;for(var i=e.util.createBuffer();i.length()<a;){b.generated>1048575&&(b.key=null),null===b.key&&h();var j=c(b.key,b.seed);b.generated+=j.length,i.putBytes(j),b.key=f(c(b.key,d(b.seed))),b.seed=g(c(b.key,b.seed))}return i.getBytes(a)},f?(b.seedFile=function(a,b){f.randomBytes(a,function(a,c){if(a)return b(a);b(null,c.toString())})},b.seedFileSync=function(a){return f.randomBytes(a).toString()}):(b.seedFile=function(a,b){try{b(null,j(a))}catch(c){b(c)}},b.seedFileSync=j),b.collect=function(a){for(var c=a.length,d=0;d<c;++d)b.pools[b.pool].update(a.substr(d,1)),b.pool=31===b.pool?0:b.pool+1},b.collectInt=function(a,c){for(var d="",e=0;e<c;e+=8)d+=String.fromCharCode(a>>e&255);b.collect(d)},b.registerWorker=function(a){if(a===self)b.seedFile=function(a,b){function c(a){var d=a.data;d.forge&&d.forge.prng&&(self.removeEventListener("message",c),b(d.forge.prng.err,d.forge.prng.bytes))}self.addEventListener("message",c),self.postMessage({forge:{prng:{needed:a}}})};else{var c=function(c){var d=c.data;d.forge&&d.forge.prng&&b.seedFile(d.forge.prng.needed,function(b,c){a.postMessage({forge:{prng:{err:b,bytes:c}}})})};a.addEventListener("message",c)}},b}},96007:function(a,b,c){var d=c(3832);c(49563),c(97116),(a.exports=d.pss=d.pss||{}).create=function(a){3===arguments.length&&(a={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var b,c=a.md,e=a.mgf,f=c.digestLength,g=a.salt||null;if("string"==typeof g&&(g=d.util.createBuffer(g)),"saltLength"in a)b=a.saltLength;else if(null!==g)b=g.length();else throw Error("Salt length not specified or specific salt not given.");if(null!==g&&g.length()!==b)throw Error("Given salt length does not match length of given salt.");var h=a.prng||d.random,i={};return i.encode=function(a,i){var j,k,l=i-1,m=Math.ceil(l/8),n=a.digest().getBytes();if(m<f+b+2)throw Error("Message is too long to encrypt.");k=null===g?h.getBytesSync(b):g.bytes();var o=new d.util.ByteBuffer;o.fillWithByte(0,8),o.putBytes(n),o.putBytes(k),c.start(),c.update(o.getBytes());var p=c.digest().getBytes(),q=new d.util.ByteBuffer;q.fillWithByte(0,m-b-f-2),q.putByte(1),q.putBytes(k);var r=q.getBytes(),s=m-f-1,t=e.generate(p,s),u="";for(j=0;j<s;j++)u+=String.fromCharCode(r.charCodeAt(j)^t.charCodeAt(j));return(u=String.fromCharCode(u.charCodeAt(0)& ~(65280>>8*m-l&255))+u.substr(1))+p+"\xbc"},i.verify=function(a,g,h){var i,j=h-1,k=Math.ceil(j/8);if(g=g.substr(-k),k<f+b+2)throw Error("Inconsistent parameters to PSS signature verification.");if(188!==g.charCodeAt(k-1))throw Error("Encoded message does not end in 0xBC.");var l=k-f-1,m=g.substr(0,l),n=g.substr(l,f),o=65280>>8*k-j&255;if((m.charCodeAt(0)&o)!=0)throw Error("Bits beyond keysize not zero as expected.");var p=e.generate(n,l),q="";for(i=0;i<l;i++)q+=String.fromCharCode(m.charCodeAt(i)^p.charCodeAt(i));q=String.fromCharCode(q.charCodeAt(0)& ~o)+q.substr(1);var r=k-f-b-2;for(i=0;i<r;i++)if(0!==q.charCodeAt(i))throw Error("Leftmost octets not zero as expected");if(1!==q.charCodeAt(r))throw Error("Inconsistent PSS signature, 0x01 marker not found");var s=q.substr(-b),t=new d.util.ByteBuffer;return t.fillWithByte(0,8),t.putBytes(a),t.putBytes(s),c.start(),c.update(t.getBytes()),n===c.digest().getBytes()},i}},49563:function(a,b,c){var d=c(3832);c(8925),c(41668),c(74933),c(97116),function(){if(d.random&&d.random.getBytes){a.exports=d.random;return}!function(b){var c={},e=[,,,,],f=d.util.createBuffer();function g(){var a=d.prng.create(c);return a.getBytes=function(b,c){return a.generate(b,c)},a.getBytesSync=function(b){return a.generate(b)},a}c.formatKey=function(a){var b=d.util.createBuffer(a);return(a=[,,,,])[0]=b.getInt32(),a[1]=b.getInt32(),a[2]=b.getInt32(),a[3]=b.getInt32(),d.aes._expandKey(a,!1)},c.formatSeed=function(a){var b=d.util.createBuffer(a);return(a=[,,,,])[0]=b.getInt32(),a[1]=b.getInt32(),a[2]=b.getInt32(),a[3]=b.getInt32(),a},c.cipher=function(a,b){return d.aes._updateBlock(a,b,e,!1),f.putInt32(e[0]),f.putInt32(e[1]),f.putInt32(e[2]),f.putInt32(e[3]),f.getBytes()},c.increment=function(a){return++a[3],a},c.md=d.md.sha256;var h=g(),i=null,j=d.util.globalScope,k=j.crypto||j.msCrypto;if(k&&k.getRandomValues&&(i=function(a){return k.getRandomValues(a)}),d.options.usePureJavaScript|| !d.util.isNodejs&&!i){if("undefined"==typeof window||window.document,h.collectInt(+new Date,32),"undefined"!=typeof navigator){var l="";for(var m in navigator)try{"string"==typeof navigator[m]&&(l+=navigator[m])}catch(n){}h.collect(l),l=null}b&&(b().mousemove(function(a){h.collectInt(a.clientX,16),h.collectInt(a.clientY,16)}),b().keypress(function(a){h.collectInt(a.charCode,8)}))}if(d.random)for(var m in h)d.random[m]=h[m];else d.random=h;d.random.createInstance=g,a.exports=d.random}("undefined"!=typeof jQuery?jQuery:null)}()},69372:function(a,b,c){var d=c(3832);c(97116);var e=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],f=[1,2,3,5];a.exports=d.rc2=d.rc2||{},d.rc2.expandKey=function(a,b){"string"==typeof a&&(a=d.util.createBuffer(a)),b=b||128;var c,f=a,g=a.length(),h=b,i=Math.ceil(h/8);for(c=g;c<128;c++)f.putByte(e[f.at(c-1)+f.at(c-g)&255]);for(f.setAt(128-i,e[f.at(128-i)&255>>(7&h)]),c=127-i;c>=0;c--)f.setAt(c,e[f.at(c+1)^f.at(c+i)]);return f};var g=function(a,b,c){var e,g,h,i,j=!1,k=null,l=null,m=null,n=[];for(h=0,a=d.rc2.expandKey(a,b);h<64;h++)n.push(a.getInt16Le());c?(e=function(a){for(h=0;h<4;h++){var b,c;a[h]+=n[i]+(a[(h+3)%4]&a[(h+2)%4])+(~a[(h+3)%4]&a[(h+1)%4]),a[h]=(b=a[h],c=f[h],b<<c&65535|(65535&b)>>16-c),i++}},g=function(a){for(h=0;h<4;h++)a[h]+=n[63&a[(h+3)%4]]}):(e=function(a){for(h=3;h>=0;h--){var b,c;a[h]=(b=a[h],c=f[h],(65535&b)>>c|b<<16-c&65535),a[h]-=n[i]+(a[(h+3)%4]&a[(h+2)%4])+(~a[(h+3)%4]&a[(h+1)%4]),i--}},g=function(a){for(h=3;h>=0;h--)a[h]-=n[63&a[(h+3)%4]]});var o=function(a){var b=[];for(h=0;h<4;h++){var d=k.getInt16Le();null!==m&&(c?d^=m.getInt16Le():m.putInt16Le(d)),b.push(65535&d)}i=c?0:63;for(var e=0;e<a.length;e++)for(var f=0;f<a[e][0];f++)a[e][1](b);for(h=0;h<4;h++)null!==m&&(c?m.putInt16Le(b[h]):b[h]^=m.getInt16Le()),l.putInt16Le(b[h])},p=null;return p={start:function(a,b){a&&"string"==typeof a&&(a=d.util.createBuffer(a)),j=!1,k=d.util.createBuffer(),l=b||new d.util.createBuffer,m=a,p.output=l},update:function(a){for(j||k.putBuffer(a);k.length()>=8;)o([[5,e],[1,g],[6,e],[1,g],[5,e]])},finish:function(a){var b=!0;if(c){if(a)b=a(8,k,!c);else{var d=8===k.length()?8:8-k.length();k.fillWithByte(d,d)}}if(b&&(j=!0,p.update()),!c&&(b=0===k.length())){if(a)b=a(8,l,!c);else{var e=l.length(),f=l.at(e-1);f>e?b=!1:l.truncate(f)}}return b}}};d.rc2.startEncrypting=function(a,b,c){var e=d.rc2.createEncryptionCipher(a,128);return e.start(b,c),e},d.rc2.createEncryptionCipher=function(a,b){return g(a,b,!0)},d.rc2.startDecrypting=function(a,b,c){var e=d.rc2.createDecryptionCipher(a,128);return e.start(b,c),e},d.rc2.createDecryptionCipher=function(a,b){return g(a,b,!1)}},28095:function(a,b,c){var d=c(3832);if(c(3068),c(15764),c(66270),c(18936),c(29654),c(49563),c(97116),void 0===e)var e=d.jsbn.BigInteger;var f=d.util.isNodejs?c(25819):null,g=d.asn1,h=d.util;d.pki=d.pki||{},a.exports=d.pki.rsa=d.rsa=d.rsa||{};var i=d.pki,j=[6,4,2,4,2,4,6,2],k={name:"PrivateKeyInfo",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:g.Class.UNIVERSAL,type:g.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:g.Class.UNIVERSAL,type:g.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:g.Class.UNIVERSAL,type:g.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},l={name:"RSAPrivateKey",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:g.Class.UNIVERSAL,type:g.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:g.Class.UNIVERSAL,type:g.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:g.Class.UNIVERSAL,type:g.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:g.Class.UNIVERSAL,type:g.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:g.Class.UNIVERSAL,type:g.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:g.Class.UNIVERSAL,type:g.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:g.Class.UNIVERSAL,type:g.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:g.Class.UNIVERSAL,type:g.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:g.Class.UNIVERSAL,type:g.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},m={name:"RSAPublicKey",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:g.Class.UNIVERSAL,type:g.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:g.Class.UNIVERSAL,type:g.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},n=d.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:g.Class.UNIVERSAL,type:g.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:g.Class.UNIVERSAL,type:g.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},o={name:"DigestInfo",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:g.Class.UNIVERSAL,type:g.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:g.Class.UNIVERSAL,type:g.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:g.Class.UNIVERSAL,type:g.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},p=function(a){if(a.algorithm in i.oids)b=i.oids[a.algorithm];else{var b,c=Error("Unknown message digest algorithm.");throw c.algorithm=a.algorithm,c}var d=g.oidToDer(b).getBytes(),e=g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[]),f=g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[]);f.value.push(g.create(g.Class.UNIVERSAL,g.Type.OID,!1,d)),f.value.push(g.create(g.Class.UNIVERSAL,g.Type.NULL,!1,""));var h=g.create(g.Class.UNIVERSAL,g.Type.OCTETSTRING,!1,a.digest().getBytes());return e.value.push(f),e.value.push(h),g.toDer(e).getBytes()},q=function(a,b,c){if(c)return a.modPow(b.e,b.n);if(!b.p||!b.q)return a.modPow(b.d,b.n);b.dP||(b.dP=b.d.mod(b.p.subtract(e.ONE))),b.dQ||(b.dQ=b.d.mod(b.q.subtract(e.ONE))),b.qInv||(b.qInv=b.q.modInverse(b.p));do f=new e(d.util.bytesToHex(d.random.getBytes(b.n.bitLength()/8)),16);while(f.compareTo(b.n)>=0||!f.gcd(b.n).equals(e.ONE));for(var f,g=(a=a.multiply(f.modPow(b.e,b.n)).mod(b.n)).mod(b.p).modPow(b.dP,b.p),h=a.mod(b.q).modPow(b.dQ,b.q);0>g.compareTo(h);)g=g.add(b.p);var i=g.subtract(h).multiply(b.qInv).mod(b.p).multiply(b.q).add(h);return i.multiply(f.modInverse(b.n)).mod(b.n)};function r(a,b,c){var e,f=d.util.createBuffer(),g=Math.ceil(b.n.bitLength()/8);if(a.length>g-11){var h=Error("Message is too long for PKCS#1 v1.5 padding.");throw h.length=a.length,h.max=g-11,h}f.putByte(0),f.putByte(c);var i=g-3-a.length;if(0===c||1===c){e=0===c?0:255;for(var j=0;j<i;++j)f.putByte(e)}else for(;i>0;){for(var k=0,l=d.random.getBytes(i),j=0;j<i;++j)0===(e=l.charCodeAt(j))?++k:f.putByte(e);i=k}return f.putByte(0),f.putBytes(a),f}function s(a,b,c,e){var f=Math.ceil(b.n.bitLength()/8),g=d.util.createBuffer(a),h=g.getByte(),i=g.getByte();if(0!==h||c&&0!==i&&1!==i|| !c&&2!=i||c&&0===i&& void 0===e)throw Error("Encryption block is invalid.");var j=0;if(0===i){j=f-3-e;for(var k=0;k<j;++k)if(0!==g.getByte())throw Error("Encryption block is invalid.")}else if(1===i)for(j=0;g.length()>1;){if(255!==g.getByte()){--g.read;break}++j}else if(2===i)for(j=0;g.length()>1;){if(0===g.getByte()){--g.read;break}++j}if(0!==g.getByte()||j!==f-3-g.length())throw Error("Encryption block is invalid.");return g.getBytes()}function t(a){var b=a.toString(16);b[0]>="8"&&(b="00"+b);var c=d.util.hexToBytes(b);return c.length>1&&(0===c.charCodeAt(0)&&(128&c.charCodeAt(1))==0||255===c.charCodeAt(0)&&(128&c.charCodeAt(1))==128)?c.substr(1):c}function u(a){return a<=100?27:a<=150?18:a<=200?15:a<=250?12:a<=300?9:a<=350?8:a<=400?7:a<=500?6:a<=600?5:a<=800?4:a<=1250?3:2}function v(a){return d.util.isNodejs&&"function"==typeof f[a]}function w(a){return void 0!==h.globalScope&&"object"==typeof h.globalScope.crypto&&"object"==typeof h.globalScope.crypto.subtle&&"function"==typeof h.globalScope.crypto.subtle[a]}function x(a){return void 0!==h.globalScope&&"object"==typeof h.globalScope.msCrypto&&"object"==typeof h.globalScope.msCrypto.subtle&&"function"==typeof h.globalScope.msCrypto.subtle[a]}function y(a){for(var b=d.util.hexToBytes(a.toString(16)),c=new Uint8Array(b.length),e=0;e<b.length;++e)c[e]=b.charCodeAt(e);return c}i.rsa.encrypt=function(a,b,c){var f,g=c,h=Math.ceil(b.n.bitLength()/8);!1!==c&& !0!==c?(g=2===c,f=r(a,b,c)):(f=d.util.createBuffer()).putBytes(a);for(var i=new e(f.toHex(),16),j=q(i,b,g).toString(16),k=d.util.createBuffer(),l=h-Math.ceil(j.length/2);l>0;)k.putByte(0),--l;return k.putBytes(d.util.hexToBytes(j)),k.getBytes()},i.rsa.decrypt=function(a,b,c,f){var g=Math.ceil(b.n.bitLength()/8);if(a.length!==g){var h=Error("Encrypted message length is invalid.");throw h.length=a.length,h.expected=g,h}var i=new e(d.util.createBuffer(a).toHex(),16);if(i.compareTo(b.n)>=0)throw Error("Encrypted message is invalid.");for(var j=q(i,b,c).toString(16),k=d.util.createBuffer(),l=g-Math.ceil(j.length/2);l>0;)k.putByte(0),--l;return(k.putBytes(d.util.hexToBytes(j)),!1!==f)?s(k.getBytes(),b,c):k.getBytes()},i.rsa.createKeyPairGenerationState=function(a,b,c){"string"==typeof a&&(a=parseInt(a,10)),a=a||2048;var f,g=(c=c||{}).prng||d.random,h=c.algorithm||"PRIMEINC";if("PRIMEINC"===h)(f={algorithm:h,state:0,bits:a,rng:{nextBytes:function(a){for(var b=g.getBytesSync(a.length),c=0;c<a.length;++c)a[c]=b.charCodeAt(c)}},eInt:b||65537,e:new e(null),p:null,q:null,qBits:a>>1,pBits:a-(a>>1),pqState:0,num:null,keys:null}).e.fromInt(f.eInt);else throw Error("Invalid key generation algorithm: "+h);return f},i.rsa.stepKeyPairGenerationState=function(a,b){"algorithm"in a||(a.algorithm="PRIMEINC");var c,d=new e(null);d.fromInt(30);for(var f=0,g=function(a,b){return a|b},h=+new Date,k=0;null===a.keys&&(b<=0||k<b);){if(0===a.state){var l=null===a.p?a.pBits:a.qBits,m=l-1;0===a.pqState?(a.num=new e(l,a.rng),a.num.testBit(m)||a.num.bitwiseTo(e.ONE.shiftLeft(m),g,a.num),a.num.dAddOffset(31-a.num.mod(d).byteValue(),0),f=0,++a.pqState):1===a.pqState?a.num.bitLength()>l?a.pqState=0:a.num.isProbablePrime(u(a.num.bitLength()))?++a.pqState:a.num.dAddOffset(j[(f++)%8],0):2===a.pqState?a.pqState=0===a.num.subtract(e.ONE).gcd(a.e).compareTo(e.ONE)?3:0:3===a.pqState&&(a.pqState=0,null===a.p?a.p=a.num:a.q=a.num,null!==a.p&&null!==a.q&& ++a.state,a.num=null)}else if(1===a.state)0>a.p.compareTo(a.q)&&(a.num=a.p,a.p=a.q,a.q=a.num),++a.state;else if(2===a.state)a.p1=a.p.subtract(e.ONE),a.q1=a.q.subtract(e.ONE),a.phi=a.p1.multiply(a.q1),++a.state;else if(3===a.state)0===a.phi.gcd(a.e).compareTo(e.ONE)?++a.state:(a.p=null,a.q=null,a.state=0);else if(4===a.state)a.n=a.p.multiply(a.q),a.n.bitLength()===a.bits?++a.state:(a.q=null,a.state=0);else if(5===a.state){var n=a.e.modInverse(a.phi);a.keys={privateKey:i.rsa.setPrivateKey(a.n,a.e,n,a.p,a.q,n.mod(a.p1),n.mod(a.q1),a.q.modInverse(a.p)),publicKey:i.rsa.setPublicKey(a.n,a.e)}}c=+new Date,k+=c-h,h=c}return null!==a.keys},i.rsa.generateKeyPair=function(a,b,c,j){if(1===arguments.length?"object"==typeof a?(c=a,a=void 0):"function"==typeof a&&(j=a,a=void 0):2===arguments.length?"number"==typeof a?"function"==typeof b?(j=b,b=void 0):"number"!=typeof b&&(c=b,b=void 0):(c=a,j=b,a=void 0,b=void 0):3===arguments.length&&("number"==typeof b?"function"==typeof c&&(j=c,c=void 0):(j=c,c=b,b=void 0)),c=c||{},void 0===a&&(a=c.bits||2048),void 0===b&&(b=c.e||65537),!d.options.usePureJavaScript&&!c.prng&&a>=256&&a<=16384&&(65537===b||3===b)){if(j){if(v("generateKeyPair"))return f.generateKeyPair("rsa",{modulusLength:a,publicExponent:b,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,b,c){if(a)return j(a);j(null,{privateKey:i.privateKeyFromPem(c),publicKey:i.publicKeyFromPem(b)})});if(w("generateKey")&&w("exportKey"))return h.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:a,publicExponent:y(b),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return h.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){j(a)}).then(function(a){if(a){var b=i.privateKeyFromAsn1(g.fromDer(d.util.createBuffer(a)));j(null,{privateKey:b,publicKey:i.setRsaPublicKey(b.n,b.e)})}});if(x("generateKey")&&x("exportKey")){var k=h.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:a,publicExponent:y(b),hash:{name:"SHA-256"}},!0,["sign","verify"]);k.oncomplete=function(a){var b=a.target.result,c=h.globalScope.msCrypto.subtle.exportKey("pkcs8",b.privateKey);c.oncomplete=function(a){var b=a.target.result,c=i.privateKeyFromAsn1(g.fromDer(d.util.createBuffer(b)));j(null,{privateKey:c,publicKey:i.setRsaPublicKey(c.n,c.e)})},c.onerror=function(a){j(a)}},k.onerror=function(a){j(a)};return}}else if(v("generateKeyPairSync")){var l=f.generateKeyPairSync("rsa",{modulusLength:a,publicExponent:b,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:i.privateKeyFromPem(l.privateKey),publicKey:i.publicKeyFromPem(l.publicKey)}}}var m=i.rsa.createKeyPairGenerationState(a,b,c);if(!j)return i.rsa.stepKeyPairGenerationState(m,0),m.keys;(function a(b,c,f){"function"==typeof c&&(f=c,c={});var g={algorithm:{name:(c=c||{}).algorithm||"PRIMEINC",options:{workers:c.workers||2,workLoad:c.workLoad||100,workerScript:c.workerScript}}};function h(){j(b.pBits,function(a,c){return a?f(a):(b.p=c,null!==b.q)?k(a,b.q):void j(b.qBits,k)})}function j(a,b){d.prime.generateProbablePrime(a,g,b)}function k(a,c){if(a)return f(a);if(b.q=c,0>b.p.compareTo(b.q)){var d=b.p;b.p=b.q,b.q=d}if(0!==b.p.subtract(e.ONE).gcd(b.e).compareTo(e.ONE)){b.p=null,h();return}if(0!==b.q.subtract(e.ONE).gcd(b.e).compareTo(e.ONE)){b.q=null,j(b.qBits,k);return}if(b.p1=b.p.subtract(e.ONE),b.q1=b.q.subtract(e.ONE),b.phi=b.p1.multiply(b.q1),0!==b.phi.gcd(b.e).compareTo(e.ONE)){b.p=b.q=null,h();return}if(b.n=b.p.multiply(b.q),b.n.bitLength()!==b.bits){b.q=null,j(b.qBits,k);return}var g=b.e.modInverse(b.phi);b.keys={privateKey:i.rsa.setPrivateKey(b.n,b.e,g,b.p,b.q,g.mod(b.p1),g.mod(b.q1),b.q.modInverse(b.p)),publicKey:i.rsa.setPublicKey(b.n,b.e)},f(null,b.keys)}"prng"in c&&(g.prng=c.prng),h()})(m,c,j)},i.setRsaPublicKey=i.rsa.setPublicKey=function(a,b){var c={n:a,e:b};return c.encrypt=function(a,b,e){if("string"==typeof b?b=b.toUpperCase():void 0===b&&(b="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===b)b={encode:function(a,b,c){return r(a,b,2).getBytes()}};else if("RSA-OAEP"===b||"RSAES-OAEP"===b)b={encode:function(a,b){return d.pkcs1.encode_rsa_oaep(b,a,e)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(b))b={encode:function(a){return a}};else if("string"==typeof b)throw Error('Unsupported encryption scheme: "'+b+'".');var f=b.encode(a,c,!0);return i.rsa.encrypt(f,c,!0)},c.verify=function(a,b,e,f){"string"==typeof e?e=e.toUpperCase():void 0===e&&(e="RSASSA-PKCS1-V1_5"),void 0===f&&(f={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in f||(f._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===e?e={verify:function(a,b){b=s(b,c,!0);var e=g.fromDer(b,{parseAllBytes:f._parseAllDigestBytes}),h={},i=[];if(!g.validate(e,o,h,i)){var j=Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw j.errors=i,j}var k=g.derToOid(h.algorithmIdentifier);if(!(k===d.oids.md2||k===d.oids.md5||k===d.oids.sha1||k===d.oids.sha224||k===d.oids.sha256||k===d.oids.sha384||k===d.oids.sha512||k===d.oids["sha512-224"]||k===d.oids["sha512-256"])){var j=Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw j.oid=k,j}if((k===d.oids.md2||k===d.oids.md5)&&!("parameters"in h))throw Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return a===h.digest}}:("NONE"===e||"NULL"===e||null===e)&&(e={verify:function(a,b){return b=s(b,c,!0),a===b}});var h=i.rsa.decrypt(b,c,!0,!1);return e.verify(a,h,c.n.bitLength())},c},i.setRsaPrivateKey=i.rsa.setPrivateKey=function(a,b,c,e,f,g,h,j){var k={n:a,e:b,d:c,p:e,q:f,dP:g,dQ:h,qInv:j};return k.decrypt=function(a,b,c){"string"==typeof b?b=b.toUpperCase():void 0===b&&(b="RSAES-PKCS1-V1_5");var e=i.rsa.decrypt(a,k,!1,!1);if("RSAES-PKCS1-V1_5"===b)b={decode:s};else if("RSA-OAEP"===b||"RSAES-OAEP"===b)b={decode:function(a,b){return d.pkcs1.decode_rsa_oaep(b,a,c)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(b))b={decode:function(a){return a}};else throw Error('Unsupported encryption scheme: "'+b+'".');return b.decode(e,k,!1)},k.sign=function(a,b){var c=!1;"string"==typeof b&&(b=b.toUpperCase()),void 0===b||"RSASSA-PKCS1-V1_5"===b?(b={encode:p},c=1):("NONE"===b||"NULL"===b||null===b)&&(b={encode:function(){return a}},c=1);var d=b.encode(a,k.n.bitLength());return i.rsa.encrypt(d,k,c)},k},i.wrapRsaPrivateKey=function(a){return g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[g.create(g.Class.UNIVERSAL,g.Type.INTEGER,!1,g.integerToDer(0).getBytes()),g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[g.create(g.Class.UNIVERSAL,g.Type.OID,!1,g.oidToDer(i.oids.rsaEncryption).getBytes()),g.create(g.Class.UNIVERSAL,g.Type.NULL,!1,"")]),g.create(g.Class.UNIVERSAL,g.Type.OCTETSTRING,!1,g.toDer(a).getBytes())])},i.privateKeyFromAsn1=function(a){var b,c,f,h,j,m,n,o,p={},q=[];if(g.validate(a,k,p,q)&&(a=g.fromDer(d.util.createBuffer(p.privateKey))),p={},q=[],!g.validate(a,l,p,q)){var r=Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw r.errors=q,r}return b=d.util.createBuffer(p.privateKeyModulus).toHex(),c=d.util.createBuffer(p.privateKeyPublicExponent).toHex(),f=d.util.createBuffer(p.privateKeyPrivateExponent).toHex(),h=d.util.createBuffer(p.privateKeyPrime1).toHex(),j=d.util.createBuffer(p.privateKeyPrime2).toHex(),m=d.util.createBuffer(p.privateKeyExponent1).toHex(),n=d.util.createBuffer(p.privateKeyExponent2).toHex(),o=d.util.createBuffer(p.privateKeyCoefficient).toHex(),i.setRsaPrivateKey(new e(b,16),new e(c,16),new e(f,16),new e(h,16),new e(j,16),new e(m,16),new e(n,16),new e(o,16))},i.privateKeyToAsn1=i.privateKeyToRSAPrivateKey=function(a){return g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[g.create(g.Class.UNIVERSAL,g.Type.INTEGER,!1,g.integerToDer(0).getBytes()),g.create(g.Class.UNIVERSAL,g.Type.INTEGER,!1,t(a.n)),g.create(g.Class.UNIVERSAL,g.Type.INTEGER,!1,t(a.e)),g.create(g.Class.UNIVERSAL,g.Type.INTEGER,!1,t(a.d)),g.create(g.Class.UNIVERSAL,g.Type.INTEGER,!1,t(a.p)),g.create(g.Class.UNIVERSAL,g.Type.INTEGER,!1,t(a.q)),g.create(g.Class.UNIVERSAL,g.Type.INTEGER,!1,t(a.dP)),g.create(g.Class.UNIVERSAL,g.Type.INTEGER,!1,t(a.dQ)),g.create(g.Class.UNIVERSAL,g.Type.INTEGER,!1,t(a.qInv))])},i.publicKeyFromAsn1=function(a){var b={},c=[];if(g.validate(a,n,b,c)){var f=g.derToOid(b.publicKeyOid);if(f!==i.oids.rsaEncryption){var h=Error("Cannot read public key. Unknown OID.");throw h.oid=f,h}a=b.rsaPublicKey}if(c=[],!g.validate(a,m,b,c)){var h=Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw h.errors=c,h}var j=d.util.createBuffer(b.publicKeyModulus).toHex(),k=d.util.createBuffer(b.publicKeyExponent).toHex();return i.setRsaPublicKey(new e(j,16),new e(k,16))},i.publicKeyToAsn1=i.publicKeyToSubjectPublicKeyInfo=function(a){return g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[g.create(g.Class.UNIVERSAL,g.Type.OID,!1,g.oidToDer(i.oids.rsaEncryption).getBytes()),g.create(g.Class.UNIVERSAL,g.Type.NULL,!1,"")]),g.create(g.Class.UNIVERSAL,g.Type.BITSTRING,!1,[i.publicKeyToRSAPublicKey(a)])])},i.publicKeyToRSAPublicKey=function(a){return g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[g.create(g.Class.UNIVERSAL,g.Type.INTEGER,!1,t(a.n)),g.create(g.Class.UNIVERSAL,g.Type.INTEGER,!1,t(a.e))])}},137:function(a,b,c){var d=c(3832);c(28991),c(97116);var e=a.exports=d.sha1=d.sha1||{};d.md.sha1=d.md.algorithms.sha1=e,e.create=function(){g||h();var a=null,b=d.util.createBuffer(),c=Array(80),e={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return e.start=function(){e.messageLength=0,e.fullMessageLength=e.messageLength64=[];for(var c=e.messageLengthSize/4,f=0;f<c;++f)e.fullMessageLength.push(0);return b=d.util.createBuffer(),a={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},e},e.start(),e.update=function(f,g){"utf8"===g&&(f=d.util.encodeUtf8(f));var h=f.length;e.messageLength+=h,h=[h/4294967296>>>0,h>>>0];for(var j=e.fullMessageLength.length-1;j>=0;--j)e.fullMessageLength[j]+=h[1],h[1]=h[0]+(e.fullMessageLength[j]/4294967296>>>0),e.fullMessageLength[j]=e.fullMessageLength[j]>>>0,h[0]=h[1]/4294967296>>>0;return b.putBytes(f),i(a,c,b),(b.read>2048||0===b.length())&&b.compact(),e},e.digest=function(){var g,h,j=d.util.createBuffer();j.putBytes(b.bytes());var k=e.fullMessageLength[e.fullMessageLength.length-1]+e.messageLengthSize&e.blockLength-1;j.putBytes(f.substr(0,e.blockLength-k));for(var l=8*e.fullMessageLength[0],m=0;m<e.fullMessageLength.length-1;++m)l+=(g=8*e.fullMessageLength[m+1])/4294967296>>>0,j.putInt32(l>>>0),l=g>>>0;j.putInt32(l);var n={h0:a.h0,h1:a.h1,h2:a.h2,h3:a.h3,h4:a.h4};i(n,c,j);var o=d.util.createBuffer();return o.putInt32(n.h0),o.putInt32(n.h1),o.putInt32(n.h2),o.putInt32(n.h3),o.putInt32(n.h4),o},e};var f=null,g=!1;function h(){f="\x80",f+=d.util.fillString("\0",64),g=!0}function i(a,b,c){for(var d,e,f,g,h,i,j,k,l=c.length();l>=64;){for(k=0,e=a.h0,f=a.h1,g=a.h2,h=a.h3,i=a.h4;k<16;++k)d=c.getInt32(),b[k]=d,d=(e<<5|e>>>27)+(j=h^f&(g^h))+i+1518500249+d,i=h,h=g,g=(f<<30|f>>>2)>>>0,f=e,e=d;for(;k<20;++k)d=(d=b[k-3]^b[k-8]^b[k-14]^b[k-16])<<1|d>>>31,b[k]=d,j=h^f&(g^h),d=(e<<5|e>>>27)+j+i+1518500249+d,i=h,h=g,g=(f<<30|f>>>2)>>>0,f=e,e=d;for(;k<32;++k)d=(d=b[k-3]^b[k-8]^b[k-14]^b[k-16])<<1|d>>>31,b[k]=d,j=f^g^h,d=(e<<5|e>>>27)+j+i+1859775393+d,i=h,h=g,g=(f<<30|f>>>2)>>>0,f=e,e=d;for(;k<40;++k)d=(d=b[k-6]^b[k-16]^b[k-28]^b[k-32])<<2|d>>>30,b[k]=d,j=f^g^h,d=(e<<5|e>>>27)+j+i+1859775393+d,i=h,h=g,g=(f<<30|f>>>2)>>>0,f=e,e=d;for(;k<60;++k)d=(d=b[k-6]^b[k-16]^b[k-28]^b[k-32])<<2|d>>>30,b[k]=d,j=f&g|h&(f^g),d=(e<<5|e>>>27)+j+i+2400959708+d,i=h,h=g,g=(f<<30|f>>>2)>>>0,f=e,e=d;for(;k<80;++k)d=(d=b[k-6]^b[k-16]^b[k-28]^b[k-32])<<2|d>>>30,b[k]=d,j=f^g^h,d=(e<<5|e>>>27)+j+i+3395469782+d,i=h,h=g,g=(f<<30|f>>>2)>>>0,f=e,e=d;a.h0=a.h0+e|0,a.h1=a.h1+f|0,a.h2=a.h2+g|0,a.h3=a.h3+h|0,a.h4=a.h4+i|0,l-=64}}},41668:function(a,b,c){var d=c(3832);c(28991),c(97116);var e=a.exports=d.sha256=d.sha256||{};d.md.sha256=d.md.algorithms.sha256=e,e.create=function(){g||i();var a=null,b=d.util.createBuffer(),c=Array(64),e={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return e.start=function(){e.messageLength=0,e.fullMessageLength=e.messageLength64=[];for(var c=e.messageLengthSize/4,f=0;f<c;++f)e.fullMessageLength.push(0);return b=d.util.createBuffer(),a={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},e},e.start(),e.update=function(f,g){"utf8"===g&&(f=d.util.encodeUtf8(f));var h=f.length;e.messageLength+=h,h=[h/4294967296>>>0,h>>>0];for(var i=e.fullMessageLength.length-1;i>=0;--i)e.fullMessageLength[i]+=h[1],h[1]=h[0]+(e.fullMessageLength[i]/4294967296>>>0),e.fullMessageLength[i]=e.fullMessageLength[i]>>>0,h[0]=h[1]/4294967296>>>0;return b.putBytes(f),j(a,c,b),(b.read>2048||0===b.length())&&b.compact(),e},e.digest=function(){var g,h,i=d.util.createBuffer();i.putBytes(b.bytes());var k=e.fullMessageLength[e.fullMessageLength.length-1]+e.messageLengthSize&e.blockLength-1;i.putBytes(f.substr(0,e.blockLength-k));for(var l=8*e.fullMessageLength[0],m=0;m<e.fullMessageLength.length-1;++m)l+=(g=8*e.fullMessageLength[m+1])/4294967296>>>0,i.putInt32(l>>>0),l=g>>>0;i.putInt32(l);var n={h0:a.h0,h1:a.h1,h2:a.h2,h3:a.h3,h4:a.h4,h5:a.h5,h6:a.h6,h7:a.h7};j(n,c,i);var o=d.util.createBuffer();return o.putInt32(n.h0),o.putInt32(n.h1),o.putInt32(n.h2),o.putInt32(n.h3),o.putInt32(n.h4),o.putInt32(n.h5),o.putInt32(n.h6),o.putInt32(n.h7),o},e};var f=null,g=!1,h=null;function i(){f="\x80",f+=d.util.fillString("\0",64),h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],g=!0}function j(a,b,c){for(var d,e,f,g,i,j,k,l,m,n,o,p,q,r,s,t=c.length();t>=64;){for(k=0;k<16;++k)b[k]=c.getInt32();for(;k<64;++k)d=((d=b[k-2])>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,e=b[k-15],e=(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3,b[k]=d+b[k-7]+e+b[k-16]|0;for(k=0,l=a.h0,m=a.h1,n=a.h2,o=a.h3,p=a.h4,q=a.h5,r=a.h6,s=a.h7;k<64;++k)g=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7),i=r^p&(q^r),f=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),j=l&m|n&(l^m),d=s+g+i+h[k]+b[k],e=f+j,s=r,r=q,q=p,p=o+d>>>0,o=n,n=m,m=l,l=d+e>>>0;a.h0=a.h0+l|0,a.h1=a.h1+m|0,a.h2=a.h2+n|0,a.h3=a.h3+o|0,a.h4=a.h4+p|0,a.h5=a.h5+q|0,a.h6=a.h6+r|0,a.h7=a.h7+s|0,t-=64}}},63219:function(a,b,c){var d=c(3832);c(28991),c(97116);var e=a.exports=d.sha512=d.sha512||{};d.md.sha512=d.md.algorithms.sha512=e;var f=d.sha384=d.sha512.sha384=d.sha512.sha384||{};f.create=function(){return e.create("SHA-384")},d.md.sha384=d.md.algorithms.sha384=f,d.sha512.sha256=d.sha512.sha256||{create:function(){return e.create("SHA-512/256")}},d.md["sha512/256"]=d.md.algorithms["sha512/256"]=d.sha512.sha256,d.sha512.sha224=d.sha512.sha224||{create:function(){return e.create("SHA-512/224")}},d.md["sha512/224"]=d.md.algorithms["sha512/224"]=d.sha512.sha224,e.create=function(a){if(h||k(),void 0===a&&(a="SHA-512"),!(a in j))throw Error("Invalid SHA-512 algorithm: "+a);for(var b=j[a],c=null,e=d.util.createBuffer(),f=Array(80),i=0;i<80;++i)f[i]=[,,];var m=64;switch(a){case"SHA-384":m=48;break;case"SHA-512/256":m=32;break;case"SHA-512/224":m=28}var n={algorithm:a.replace("-","").toLowerCase(),blockLength:128,digestLength:m,messageLength:0,fullMessageLength:null,messageLengthSize:16};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength128=[];for(var a=n.messageLengthSize/4,f=0;f<a;++f)n.fullMessageLength.push(0);e=d.util.createBuffer(),c=Array(b.length);for(var f=0;f<b.length;++f)c[f]=b[f].slice(0);return n},n.start(),n.update=function(a,b){"utf8"===b&&(a=d.util.encodeUtf8(a));var g=a.length;n.messageLength+=g,g=[g/4294967296>>>0,g>>>0];for(var h=n.fullMessageLength.length-1;h>=0;--h)n.fullMessageLength[h]+=g[1],g[1]=g[0]+(n.fullMessageLength[h]/4294967296>>>0),n.fullMessageLength[h]=n.fullMessageLength[h]>>>0,g[0]=g[1]/4294967296>>>0;return e.putBytes(a),l(c,f,e),(e.read>2048||0===e.length())&&e.compact(),n},n.digest=function(){var b,h,i,j=d.util.createBuffer();j.putBytes(e.bytes());var k=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize&n.blockLength-1;j.putBytes(g.substr(0,n.blockLength-k));for(var m=8*n.fullMessageLength[0],o=0;o<n.fullMessageLength.length-1;++o)m+=(b=8*n.fullMessageLength[o+1])/4294967296>>>0,j.putInt32(m>>>0),m=b>>>0;j.putInt32(m);for(var p=Array(c.length),o=0;o<c.length;++o)p[o]=c[o].slice(0);l(p,f,j);var q=d.util.createBuffer();i="SHA-512"===a?p.length:"SHA-384"===a?p.length-2:p.length-4;for(var o=0;o<i;++o)q.putInt32(p[o][0]),(o!==i-1||"SHA-512/224"!==a)&&q.putInt32(p[o][1]);return q},n};var g=null,h=!1,i=null,j=null;function k(){g="\x80",g+=d.util.fillString("\0",128),i=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(j={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],j["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],j["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],j["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],h=!0}function l(a,b,c){for(var d,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N=c.length();N>=128;){for(G=0;G<16;++G)b[G][0]=c.getInt32()>>>0,b[G][1]=c.getInt32()>>>0;for(;G<80;++G)H=(J=b[G-2])[0],I=J[1],d=((H>>>19|I<<13)^(I>>>29|H<<3)^H>>>6)>>>0,e=((H<<13|I>>>19)^(I<<3|H>>>29)^(H<<26|I>>>6))>>>0,L=b[G-15],H=L[0],I=L[1],f=((H>>>1|I<<31)^(H>>>8|I<<24)^H>>>7)>>>0,g=((H<<31|I>>>1)^(H<<24|I>>>8)^(H<<25|I>>>7))>>>0,K=b[G-7],M=b[G-16],I=e+K[1]+g+M[1],b[G][0]=d+K[0]+f+M[0]+(I/4294967296>>>0)>>>0,b[G][1]=I>>>0;for(G=0,q=a[0][0],r=a[0][1],s=a[1][0],t=a[1][1],u=a[2][0],v=a[2][1],w=a[3][0],x=a[3][1],y=a[4][0],z=a[4][1],A=a[5][0],B=a[5][1],C=a[6][0],D=a[6][1],E=a[7][0],F=a[7][1];G<80;++G)k=((y>>>14|z<<18)^(y>>>18|z<<14)^(z>>>9|y<<23))>>>0,l=((y<<18|z>>>14)^(y<<14|z>>>18)^(z<<23|y>>>9))>>>0,m=(C^y&(A^C))>>>0,n=(D^z&(B^D))>>>0,h=((q>>>28|r<<4)^(r>>>2|q<<30)^(r>>>7|q<<25))>>>0,j=((q<<4|r>>>28)^(r<<30|q>>>2)^(r<<25|q>>>7))>>>0,o=(q&s|u&(q^s))>>>0,p=(r&t|v&(r^t))>>>0,I=F+l+n+i[G][1]+b[G][1],d=E+k+m+i[G][0]+b[G][0]+(I/4294967296>>>0)>>>0,e=I>>>0,I=j+p,f=h+o+(I/4294967296>>>0)>>>0,g=I>>>0,E=C,F=D,C=A,D=B,A=y,B=z,I=x+e,y=w+d+(I/4294967296>>>0)>>>0,z=I>>>0,w=u,x=v,u=s,v=t,s=q,t=r,I=e+g,q=d+f+(I/4294967296>>>0)>>>0,r=I>>>0;I=a[0][1]+r,a[0][0]=a[0][0]+q+(I/4294967296>>>0)>>>0,a[0][1]=I>>>0,I=a[1][1]+t,a[1][0]=a[1][0]+s+(I/4294967296>>>0)>>>0,a[1][1]=I>>>0,I=a[2][1]+v,a[2][0]=a[2][0]+u+(I/4294967296>>>0)>>>0,a[2][1]=I>>>0,I=a[3][1]+x,a[3][0]=a[3][0]+w+(I/4294967296>>>0)>>>0,a[3][1]=I>>>0,I=a[4][1]+z,a[4][0]=a[4][0]+y+(I/4294967296>>>0)>>>0,a[4][1]=I>>>0,I=a[5][1]+B,a[5][0]=a[5][0]+A+(I/4294967296>>>0)>>>0,a[5][1]=I>>>0,I=a[6][1]+D,a[6][0]=a[6][0]+C+(I/4294967296>>>0)>>>0,a[6][1]=I>>>0,I=a[7][1]+F,a[7][0]=a[7][0]+E+(I/4294967296>>>0)>>>0,a[7][1]=I>>>0,N-=128}}},97116:function(a,b,c){var d=c(24112),e=c(62678).Buffer,f=c(3832),g=c(78807),h=a.exports=f.util=f.util||{};function i(a){if(!(8===a||16===a||24===a||32===a))throw Error("Only 8, 16, 24, or 32 bits supported: "+a)}function j(a){if(this.data="",this.read=0,"string"==typeof a)this.data=a;else if(h.isArrayBuffer(a)||h.isArrayBufferView(a)){if(void 0!==e&&a instanceof e)this.data=a.toString("binary");else{var b=new Uint8Array(a);try{this.data=String.fromCharCode.apply(null,b)}catch(c){for(var d=0;d<b.length;++d)this.putByte(b[d])}}}else(a instanceof j||"object"==typeof a&&"string"==typeof a.data&&"number"==typeof a.read)&&(this.data=a.data,this.read=a.read);this._constructedStringLength=0}!function(){if(void 0!==d&&d.nextTick,"function"==typeof setImmediate){h.setImmediate=function(){return setImmediate.apply(void 0,arguments)},h.nextTick=function(a){return setImmediate(a)};return}if(h.setImmediate=function(a){setTimeout(a,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var a="forge.setImmediate",b=[];h.setImmediate=function(c){b.push(c),1===b.length&&window.postMessage(a,"*")},window.addEventListener("message",function(c){if(c.source===window&&c.data===a){c.stopPropagation();var d=b.slice();b.length=0,d.forEach(function(a){a()})}},!0)}if("undefined"!=typeof MutationObserver){var c=Date.now(),e=!0,f=document.createElement("div"),b=[];new MutationObserver(function(){var a=b.slice();b.length=0,a.forEach(function(a){a()})}).observe(f,{attributes:!0});var g=h.setImmediate;h.setImmediate=function(a){Date.now()-c>15?(c=Date.now(),g(a)):(b.push(a),1===b.length&&f.setAttribute("a",e=!e))}}h.nextTick=h.setImmediate}(),h.isNodejs=void 0!==d&&d.versions&&d.versions.node,h.globalScope=h.isNodejs?c.g:"undefined"==typeof self?window:self,h.isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},h.isArrayBuffer=function(a){return"undefined"!=typeof ArrayBuffer&&a instanceof ArrayBuffer},h.isArrayBufferView=function(a){return a&&h.isArrayBuffer(a.buffer)&& void 0!==a.byteLength},h.ByteBuffer=j,h.ByteStringBuffer=j,h.ByteStringBuffer.prototype._optimizeConstructedString=function(a){this._constructedStringLength+=a,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},h.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},h.ByteStringBuffer.prototype.isEmpty=function(){return 0>=this.length()},h.ByteStringBuffer.prototype.putByte=function(a){return this.putBytes(String.fromCharCode(a))},h.ByteStringBuffer.prototype.fillWithByte=function(a,b){a=String.fromCharCode(a);for(var c=this.data;b>0;)1&b&&(c+=a),(b>>>=1)>0&&(a+=a);return this.data=c,this._optimizeConstructedString(b),this},h.ByteStringBuffer.prototype.putBytes=function(a){return this.data+=a,this._optimizeConstructedString(a.length),this},h.ByteStringBuffer.prototype.putString=function(a){return this.putBytes(h.encodeUtf8(a))},h.ByteStringBuffer.prototype.putInt16=function(a){return this.putBytes(String.fromCharCode(a>>8&255)+String.fromCharCode(255&a))},h.ByteStringBuffer.prototype.putInt24=function(a){return this.putBytes(String.fromCharCode(a>>16&255)+String.fromCharCode(a>>8&255)+String.fromCharCode(255&a))},h.ByteStringBuffer.prototype.putInt32=function(a){return this.putBytes(String.fromCharCode(a>>24&255)+String.fromCharCode(a>>16&255)+String.fromCharCode(a>>8&255)+String.fromCharCode(255&a))},h.ByteStringBuffer.prototype.putInt16Le=function(a){return this.putBytes(String.fromCharCode(255&a)+String.fromCharCode(a>>8&255))},h.ByteStringBuffer.prototype.putInt24Le=function(a){return this.putBytes(String.fromCharCode(255&a)+String.fromCharCode(a>>8&255)+String.fromCharCode(a>>16&255))},h.ByteStringBuffer.prototype.putInt32Le=function(a){return this.putBytes(String.fromCharCode(255&a)+String.fromCharCode(a>>8&255)+String.fromCharCode(a>>16&255)+String.fromCharCode(a>>24&255))},h.ByteStringBuffer.prototype.putInt=function(a,b){i(b);var c="";do b-=8,c+=String.fromCharCode(a>>b&255);while(b>0);return this.putBytes(c)},h.ByteStringBuffer.prototype.putSignedInt=function(a,b){return a<0&&(a+=2<<b-1),this.putInt(a,b)},h.ByteStringBuffer.prototype.putBuffer=function(a){return this.putBytes(a.getBytes())},h.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},h.ByteStringBuffer.prototype.getInt16=function(){var a=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,a},h.ByteStringBuffer.prototype.getInt24=function(){var a=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,a},h.ByteStringBuffer.prototype.getInt32=function(){var a=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,a},h.ByteStringBuffer.prototype.getInt16Le=function(){var a=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,a},h.ByteStringBuffer.prototype.getInt24Le=function(){var a=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,a},h.ByteStringBuffer.prototype.getInt32Le=function(){var a=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,a},h.ByteStringBuffer.prototype.getInt=function(a){i(a);var b=0;do b=(b<<8)+this.data.charCodeAt(this.read++),a-=8;while(a>0);return b},h.ByteStringBuffer.prototype.getSignedInt=function(a){var b=this.getInt(a),c=2<<a-2;return b>=c&&(b-=c<<1),b},h.ByteStringBuffer.prototype.getBytes=function(a){var b;return a?(a=Math.min(this.length(),a),b=this.data.slice(this.read,this.read+a),this.read+=a):0===a?b="":(b=0===this.read?this.data:this.data.slice(this.read),this.clear()),b},h.ByteStringBuffer.prototype.bytes=function(a){return void 0===a?this.data.slice(this.read):this.data.slice(this.read,this.read+a)},h.ByteStringBuffer.prototype.at=function(a){return this.data.charCodeAt(this.read+a)},h.ByteStringBuffer.prototype.setAt=function(a,b){return this.data=this.data.substr(0,this.read+a)+String.fromCharCode(b)+this.data.substr(this.read+a+1),this},h.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},h.ByteStringBuffer.prototype.copy=function(){var a=h.createBuffer(this.data);return a.read=this.read,a},h.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},h.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},h.ByteStringBuffer.prototype.truncate=function(a){var b=Math.max(0,this.length()-a);return this.data=this.data.substr(this.read,b),this.read=0,this},h.ByteStringBuffer.prototype.toHex=function(){for(var a="",b=this.read;b<this.data.length;++b){var c=this.data.charCodeAt(b);c<16&&(a+="0"),a+=c.toString(16)}return a},h.ByteStringBuffer.prototype.toString=function(){return h.decodeUtf8(this.bytes())},h.DataBuffer=function(a,b){b=b||{},this.read=b.readOffset||0,this.growSize=b.growSize||1024;var c=h.isArrayBuffer(a),d=h.isArrayBufferView(a);if(c||d){c?this.data=new DataView(a):this.data=new DataView(a.buffer,a.byteOffset,a.byteLength),this.write="writeOffset"in b?b.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=a&&this.putBytes(a),"writeOffset"in b&&(this.write=b.writeOffset)},h.DataBuffer.prototype.length=function(){return this.write-this.read},h.DataBuffer.prototype.isEmpty=function(){return 0>=this.length()},h.DataBuffer.prototype.accommodate=function(a,b){if(this.length()>=a)return this;b=Math.max(b||this.growSize,a);var c=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),d=new Uint8Array(this.length()+b);return d.set(c),this.data=new DataView(d.buffer),this},h.DataBuffer.prototype.putByte=function(a){return this.accommodate(1),this.data.setUint8(this.write++,a),this},h.DataBuffer.prototype.fillWithByte=function(a,b){this.accommodate(b);for(var c=0;c<b;++c)this.data.setUint8(a);return this},h.DataBuffer.prototype.putBytes=function(a,b){if(h.isArrayBufferView(a)){var c,d=new Uint8Array(a.buffer,a.byteOffset,a.byteLength),e=d.byteLength-d.byteOffset;this.accommodate(e);var f=new Uint8Array(this.data.buffer,this.write);return f.set(d),this.write+=e,this}if(h.isArrayBuffer(a)){var d=new Uint8Array(a);this.accommodate(d.byteLength);var f=new Uint8Array(this.data.buffer);return f.set(d,this.write),this.write+=d.byteLength,this}if(a instanceof h.DataBuffer||"object"==typeof a&&"number"==typeof a.read&&"number"==typeof a.write&&h.isArrayBufferView(a.data)){var d=new Uint8Array(a.data.byteLength,a.read,a.length());this.accommodate(d.byteLength);var f=new Uint8Array(a.data.byteLength,this.write);return f.set(d),this.write+=d.byteLength,this}if(a instanceof h.ByteStringBuffer&&(a=a.data,b="binary"),b=b||"binary","string"==typeof a){if("hex"===b)return this.accommodate(Math.ceil(a.length/2)),c=new Uint8Array(this.data.buffer,this.write),this.write+=h.binary.hex.decode(a,c,this.write),this;if("base64"===b)return this.accommodate(3*Math.ceil(a.length/4)),c=new Uint8Array(this.data.buffer,this.write),this.write+=h.binary.base64.decode(a,c,this.write),this;if("utf8"===b&&(a=h.encodeUtf8(a),b="binary"),"binary"===b||"raw"===b)return this.accommodate(a.length),c=new Uint8Array(this.data.buffer,this.write),this.write+=h.binary.raw.decode(c),this;if("utf16"===b)return this.accommodate(2*a.length),c=new Uint16Array(this.data.buffer,this.write),this.write+=h.text.utf16.encode(c),this;throw Error("Invalid encoding: "+b)}throw Error("Invalid parameter: "+a)},h.DataBuffer.prototype.putBuffer=function(a){return this.putBytes(a),a.clear(),this},h.DataBuffer.prototype.putString=function(a){return this.putBytes(a,"utf16")},h.DataBuffer.prototype.putInt16=function(a){return this.accommodate(2),this.data.setInt16(this.write,a),this.write+=2,this},h.DataBuffer.prototype.putInt24=function(a){return this.accommodate(3),this.data.setInt16(this.write,a>>8&65535),this.data.setInt8(this.write,a>>16&255),this.write+=3,this},h.DataBuffer.prototype.putInt32=function(a){return this.accommodate(4),this.data.setInt32(this.write,a),this.write+=4,this},h.DataBuffer.prototype.putInt16Le=function(a){return this.accommodate(2),this.data.setInt16(this.write,a,!0),this.write+=2,this},h.DataBuffer.prototype.putInt24Le=function(a){return this.accommodate(3),this.data.setInt8(this.write,a>>16&255),this.data.setInt16(this.write,a>>8&65535,!0),this.write+=3,this},h.DataBuffer.prototype.putInt32Le=function(a){return this.accommodate(4),this.data.setInt32(this.write,a,!0),this.write+=4,this},h.DataBuffer.prototype.putInt=function(a,b){i(b),this.accommodate(b/8);do b-=8,this.data.setInt8(this.write++,a>>b&255);while(b>0);return this},h.DataBuffer.prototype.putSignedInt=function(a,b){return i(b),this.accommodate(b/8),a<0&&(a+=2<<b-1),this.putInt(a,b)},h.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},h.DataBuffer.prototype.getInt16=function(){var a=this.data.getInt16(this.read);return this.read+=2,a},h.DataBuffer.prototype.getInt24=function(){var a=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,a},h.DataBuffer.prototype.getInt32=function(){var a=this.data.getInt32(this.read);return this.read+=4,a},h.DataBuffer.prototype.getInt16Le=function(){var a=this.data.getInt16(this.read,!0);return this.read+=2,a},h.DataBuffer.prototype.getInt24Le=function(){var a=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,a},h.DataBuffer.prototype.getInt32Le=function(){var a=this.data.getInt32(this.read,!0);return this.read+=4,a},h.DataBuffer.prototype.getInt=function(a){i(a);var b=0;do b=(b<<8)+this.data.getInt8(this.read++),a-=8;while(a>0);return b},h.DataBuffer.prototype.getSignedInt=function(a){var b=this.getInt(a),c=2<<a-2;return b>=c&&(b-=c<<1),b},h.DataBuffer.prototype.getBytes=function(a){var b;return a?(a=Math.min(this.length(),a),b=this.data.slice(this.read,this.read+a),this.read+=a):0===a?b="":(b=0===this.read?this.data:this.data.slice(this.read),this.clear()),b},h.DataBuffer.prototype.bytes=function(a){return void 0===a?this.data.slice(this.read):this.data.slice(this.read,this.read+a)},h.DataBuffer.prototype.at=function(a){return this.data.getUint8(this.read+a)},h.DataBuffer.prototype.setAt=function(a,b){return this.data.setUint8(a,b),this},h.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},h.DataBuffer.prototype.copy=function(){return new h.DataBuffer(this)},h.DataBuffer.prototype.compact=function(){if(this.read>0){var a=new Uint8Array(this.data.buffer,this.read),b=new Uint8Array(a.byteLength);b.set(a),this.data=new DataView(b),this.write-=this.read,this.read=0}return this},h.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},h.DataBuffer.prototype.truncate=function(a){return this.write=Math.max(0,this.length()-a),this.read=Math.min(this.read,this.write),this},h.DataBuffer.prototype.toHex=function(){for(var a="",b=this.read;b<this.data.byteLength;++b){var c=this.data.getUint8(b);c<16&&(a+="0"),a+=c.toString(16)}return a},h.DataBuffer.prototype.toString=function(a){var b=new Uint8Array(this.data,this.read,this.length());if("binary"===(a=a||"utf8")||"raw"===a)return h.binary.raw.encode(b);if("hex"===a)return h.binary.hex.encode(b);if("base64"===a)return h.binary.base64.encode(b);if("utf8"===a)return h.text.utf8.decode(b);if("utf16"===a)return h.text.utf16.decode(b);throw Error("Invalid encoding: "+a)},h.createBuffer=function(a,b){return b=b||"raw",void 0!==a&&"utf8"===b&&(a=h.encodeUtf8(a)),new h.ByteBuffer(a)},h.fillString=function(a,b){for(var c="";b>0;)1&b&&(c+=a),(b>>>=1)>0&&(a+=a);return c},h.xorBytes=function(a,b,c){for(var d="",e="",f="",g=0,h=0;c>0;--c,++g)e=a.charCodeAt(g)^b.charCodeAt(g),h>=10&&(d+=f,f="",h=0),f+=String.fromCharCode(e),++h;return d+f},h.hexToBytes=function(a){var b="",c=0;for(!0&a.length&&(c=1,b+=String.fromCharCode(parseInt(a[0],16)));c<a.length;c+=2)b+=String.fromCharCode(parseInt(a.substr(c,2),16));return b},h.bytesToHex=function(a){return h.createBuffer(a).toHex()},h.int32ToBytes=function(a){return String.fromCharCode(a>>24&255)+String.fromCharCode(a>>16&255)+String.fromCharCode(a>>8&255)+String.fromCharCode(255&a)};var k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],m="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";h.encode64=function(a,b){for(var c,d,e,f="",g="",h=0;h<a.length;)c=a.charCodeAt(h++),d=a.charCodeAt(h++),e=a.charCodeAt(h++),f+=k.charAt(c>>2),f+=k.charAt((3&c)<<4|d>>4),isNaN(d)?f+="==":(f+=k.charAt((15&d)<<2|e>>6),f+=isNaN(e)?"=":k.charAt(63&e)),b&&f.length>b&&(g+=f.substr(0,b)+"\r\n",f=f.substr(b));return g+f},h.decode64=function(a){a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var b,c,d,e,f="",g=0;g<a.length;)b=l[a.charCodeAt(g++)-43],c=l[a.charCodeAt(g++)-43],d=l[a.charCodeAt(g++)-43],e=l[a.charCodeAt(g++)-43],f+=String.fromCharCode(b<<2|c>>4),64!==d&&(f+=String.fromCharCode((15&c)<<4|d>>2),64!==e&&(f+=String.fromCharCode((3&d)<<6|e)));return f},h.encodeUtf8=function(a){return unescape(encodeURIComponent(a))},h.decodeUtf8=function(a){return decodeURIComponent(escape(a))},h.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:g.encode,decode:g.decode}},h.binary.raw.encode=function(a){return String.fromCharCode.apply(null,a)},h.binary.raw.decode=function(a,b,c){var d=b;d||(d=new Uint8Array(a.length));for(var e=c=c||0,f=0;f<a.length;++f)d[e++]=a.charCodeAt(f);return b?e-c:d},h.binary.hex.encode=h.bytesToHex,h.binary.hex.decode=function(a,b,c){var d=b;d||(d=new Uint8Array(Math.ceil(a.length/2)));var e=0,f=c=c||0;for(1&a.length&&(e=1,d[f++]=parseInt(a[0],16));e<a.length;e+=2)d[f++]=parseInt(a.substr(e,2),16);return b?f-c:d},h.binary.base64.encode=function(a,b){for(var c,d,e,f="",g="",h=0;h<a.byteLength;)c=a[h++],d=a[h++],e=a[h++],f+=k.charAt(c>>2),f+=k.charAt((3&c)<<4|d>>4),isNaN(d)?f+="==":(f+=k.charAt((15&d)<<2|e>>6),f+=isNaN(e)?"=":k.charAt(63&e)),b&&f.length>b&&(g+=f.substr(0,b)+"\r\n",f=f.substr(b));return g+f},h.binary.base64.decode=function(a,b,c){var d,e,f,g,h=b;h||(h=new Uint8Array(3*Math.ceil(a.length/4))),a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var i=0,j=c=c||0;i<a.length;)d=l[a.charCodeAt(i++)-43],e=l[a.charCodeAt(i++)-43],f=l[a.charCodeAt(i++)-43],g=l[a.charCodeAt(i++)-43],h[j++]=d<<2|e>>4,64!==f&&(h[j++]=(15&e)<<4|f>>2,64!==g&&(h[j++]=(3&f)<<6|g));return b?j-c:h.subarray(0,j)},h.binary.base58.encode=function(a,b){return h.binary.baseN.encode(a,m,b)},h.binary.base58.decode=function(a,b){return h.binary.baseN.decode(a,m,b)},h.text={utf8:{},utf16:{}},h.text.utf8.encode=function(a,b,c){a=h.encodeUtf8(a);var d=b;d||(d=new Uint8Array(a.length));for(var e=c=c||0,f=0;f<a.length;++f)d[e++]=a.charCodeAt(f);return b?e-c:d},h.text.utf8.decode=function(a){return h.decodeUtf8(String.fromCharCode.apply(null,a))},h.text.utf16.encode=function(a,b,c){var d=b;d||(d=new Uint8Array(2*a.length));for(var e=new Uint16Array(d.buffer),f=c=c||0,g=c,h=0;h<a.length;++h)e[g++]=a.charCodeAt(h),f+=2;return b?f-c:d},h.text.utf16.decode=function(a){return String.fromCharCode.apply(null,new Uint16Array(a.buffer))},h.deflate=function(a,b,c){if(b=h.decode64(a.deflate(h.encode64(b)).rval),c){var d=2;32&b.charCodeAt(1)&&(d=6),b=b.substring(d,b.length-4)}return b},h.inflate=function(a,b,c){var d=a.inflate(h.encode64(b)).rval;return null===d?null:h.decode64(d)};var n=function(a,b,c){if(!a)throw Error("WebStorage not available.");if(null===c?d=a.removeItem(b):(c=h.encode64(JSON.stringify(c)),d=a.setItem(b,c)),void 0!==d&& !0!==d.rval){var d,e=Error(d.error.message);throw e.id=d.error.id,e.name=d.error.name,e}},o=function(a,b){if(!a)throw Error("WebStorage not available.");var c=a.getItem(b);if(a.init){if(null===c.rval){if(c.error){var d=Error(c.error.message);throw d.id=c.error.id,d.name=c.error.name,d}c=null}else c=c.rval}return null!==c&&(c=JSON.parse(h.decode64(c))),c},p=function(a,b,c,d){var e=o(a,b);null===e&&(e={}),e[c]=d,n(a,b,e)},q=function(a,b,c){var d=o(a,b);return null!==d&&(d=c in d?d[c]:null),d},r=function(a,b,c){var d=o(a,b);if(null!==d&&c in d){delete d[c];var e=!0;for(var f in d){e=!1;break}e&&(d=null),n(a,b,d)}},s=function(a,b){n(a,b,null)},t=function(a,b,c){var d,e=null;void 0===c&&(c=["web","flash"]);var f=!1,g=null;for(var h in c){d=c[h];try{if("flash"===d||"both"===d){if(null===b[0])throw Error("Flash local storage not available.");e=a.apply(this,b),f="flash"===d}("web"===d||"both"===d)&&(b[0]=localStorage,e=a.apply(this,b),f=!0)}catch(i){g=i}if(f)break}if(!f)throw g;return e};h.setItem=function(a,b,c,d,e){t(p,arguments,e)},h.getItem=function(a,b,c,d){return t(q,arguments,d)},h.removeItem=function(a,b,c,d){t(r,arguments,d)},h.clearItems=function(a,b,c){t(s,arguments,c)},h.isEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},h.format=function(a){for(var b,c,d=/%./g,e=0,f=[],g=0;b=d.exec(a);){(c=a.substring(g,d.lastIndex-2)).length>0&&f.push(c),g=d.lastIndex;var h=b[0][1];switch(h){case"s":case"o":e<arguments.length?f.push(arguments[(e++)+1]):f.push("<?>");break;case"%":f.push("%");break;default:f.push("<%"+h+"?>")}}return f.push(a.substring(g)),f.join("")},h.formatNumber=function(a,b,c,d){var e=a,f=isNaN(b=Math.abs(b))?2:b,g=void 0===d?".":d,h=e<0?"-":"",i=parseInt(e=Math.abs(+e||0).toFixed(f),10)+"",j=i.length>3?i.length%3:0;return h+(j?i.substr(0,j)+g:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+g)+(f?(void 0===c?",":c)+Math.abs(e-i).toFixed(f).slice(2):"")},h.formatSize=function(a){return a=a>=1073741824?h.formatNumber(a/1073741824,2,".","")+" GiB":a>=1048576?h.formatNumber(a/1048576,2,".","")+" MiB":a>=1024?h.formatNumber(a/1024,0)+" KiB":h.formatNumber(a,0)+" bytes"},h.bytesFromIP=function(a){return -1!==a.indexOf(".")?h.bytesFromIPv4(a):-1!==a.indexOf(":")?h.bytesFromIPv6(a):null},h.bytesFromIPv4=function(a){if(4!==(a=a.split(".")).length)return null;for(var b=h.createBuffer(),c=0;c<a.length;++c){var d=parseInt(a[c],10);if(isNaN(d))return null;b.putByte(d)}return b.getBytes()},h.bytesFromIPv6=function(a){for(var b=0,c=(8-(a=a.split(":").filter(function(a){return 0===a.length&& ++b,!0})).length+b)*2,d=h.createBuffer(),e=0;e<8;++e){if(!a[e]||0===a[e].length){d.fillWithByte(0,c),c=0;continue}var f=h.hexToBytes(a[e]);f.length<2&&d.putByte(0),d.putBytes(f)}return d.getBytes()},h.bytesToIP=function(a){return 4===a.length?h.bytesToIPv4(a):16===a.length?h.bytesToIPv6(a):null},h.bytesToIPv4=function(a){if(4!==a.length)return null;for(var b=[],c=0;c<a.length;++c)b.push(a.charCodeAt(c));return b.join(".")},h.bytesToIPv6=function(a){if(16!==a.length)return null;for(var b=[],c=[],d=0,e=0;e<a.length;e+=2){for(var f=h.bytesToHex(a[e]+a[e+1]);"0"===f[0]&&"0"!==f;)f=f.substr(1);if("0"===f){var g=c[c.length-1],i=b.length;g&&i===g.end+1?(g.end=i,g.end-g.start>c[d].end-c[d].start&&(d=c.length-1)):c.push({start:i,end:i})}b.push(f)}if(c.length>0){var j=c[d];j.end-j.start>0&&(b.splice(j.start,j.end-j.start+1,""),0===j.start&&b.unshift(""),7===j.end&&b.push(""))}return b.join(":")},h.estimateCores=function(a,b){if("function"==typeof a&&(b=a,a={}),a=a||{},"cores"in h&&!a.update)return b(null,h.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return h.cores=navigator.hardwareConcurrency,b(null,h.cores);if("undefined"==typeof Worker)return h.cores=1,b(null,h.cores);if("undefined"==typeof Blob)return h.cores=2,b(null,h.cores);var c=URL.createObjectURL(new Blob(["(",(function(){self.addEventListener("message",function(a){for(var b=Date.now(),c=b+4;Date.now()<c;);self.postMessage({st:b,et:c})})}).toString(),")()"],{type:"application/javascript"}));function d(a,g,i){if(0===g){var j=Math.floor(a.reduce(function(a,b){return a+b},0)/a.length);return h.cores=Math.max(1,j),URL.revokeObjectURL(c),b(null,h.cores)}e(i,function(b,c){a.push(f(i,c)),d(a,g-1,i)})}function e(a,b){for(var d=[],e=[],f=0;f<a;++f){var g=new Worker(c);g.addEventListener("message",function(c){if(e.push(c.data),e.length===a){for(var f=0;f<a;++f)d[f].terminate();b(null,e)}}),d.push(g)}for(var f=0;f<a;++f)d[f].postMessage(f)}function f(a,b){for(var c=[],d=0;d<a;++d)for(var e=b[d],f=c[d]=[],g=0;g<a;++g)if(d!==g){var h=b[g];(e.st>h.st&&e.st<h.et||h.st>e.st&&h.st<e.et)&&f.push(g)}return c.reduce(function(a,b){return Math.max(a,b.length)},0)}d([],5,16)}},25414:function(a,b,c){var d=c(3832);c(8925),c(3068),c(33480),c(28991),c(86971),c(66270),c(26953),c(96007),c(28095),c(97116);var e=d.asn1,f=a.exports=d.pki=d.pki||{},g=f.oids,h={};h.CN=g.commonName,h.commonName="CN",h.C=g.countryName,h.countryName="C",h.L=g.localityName,h.localityName="L",h.ST=g.stateOrProvinceName,h.stateOrProvinceName="ST",h.O=g.organizationName,h.organizationName="O",h.OU=g.organizationalUnitName,h.organizationalUnitName="OU",h.E=g.emailAddress,h.emailAddress="E";var i=d.pki.rsa.publicKeyValidator,j={name:"Certificate",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:e.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:e.Class.UNIVERSAL,type:e.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:e.Class.UNIVERSAL,type:e.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:e.Class.UNIVERSAL,type:e.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:e.Class.UNIVERSAL,type:e.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},i,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:e.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:e.Class.UNIVERSAL,type:e.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:e.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:e.Class.UNIVERSAL,type:e.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:e.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:e.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:e.Class.UNIVERSAL,type:e.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},k={name:"rsapss",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:e.Class.UNIVERSAL,type:e.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:e.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:e.Class.UNIVERSAL,type:e.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:e.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:e.Class.UNIVERSAL,type:e.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:e.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:e.Class.UNIVERSAL,type:e.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},l={name:"CertificationRequestInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},i,{name:"CertificationRequestInfo.attributes",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,constructed:!0}]}]}]},m={name:"CertificationRequest",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[l,{name:"CertificationRequest.signatureAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:e.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:e.Class.UNIVERSAL,type:e.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function n(a,b){"string"==typeof b&&(b={shortName:b});for(var c,d=null,e=0;null===d&&e<a.attributes.length;++e)c=a.attributes[e],b.type&&b.type===c.type?d=c:b.name&&b.name===c.name?d=c:b.shortName&&b.shortName===c.shortName&&(d=c);return d}f.RDNAttributesAsArray=function(a,b){for(var c,d,f,i=[],j=0;j<a.value.length;++j){c=a.value[j];for(var k=0;k<c.value.length;++k)f={},d=c.value[k],f.type=e.derToOid(d.value[0].value),f.value=d.value[1].value,f.valueTagClass=d.value[1].type,f.type in g&&(f.name=g[f.type],f.name in h&&(f.shortName=h[f.name])),b&&(b.update(f.type),b.update(f.value)),i.push(f)}return i},f.CRIAttributesAsArray=function(a){for(var b=[],c=0;c<a.length;++c)for(var d=a[c],i=e.derToOid(d.value[0].value),j=d.value[1].value,k=0;k<j.length;++k){var l={};if(l.type=i,l.value=j[k].value,l.valueTagClass=j[k].type,l.type in g&&(l.name=g[l.type],l.name in h&&(l.shortName=h[l.name])),l.type===g.extensionRequest){l.extensions=[];for(var m=0;m<l.value.length;++m)l.extensions.push(f.certificateExtensionFromAsn1(l.value[m]))}b.push(l)}return b};var o=function(a,b,c){var d={};if(a!==g["RSASSA-PSS"])return d;c&&(d={hash:{algorithmOid:g.sha1},mgf:{algorithmOid:g.mgf1,hash:{algorithmOid:g.sha1}},saltLength:20});var f={},h=[];if(!e.validate(b,k,f,h)){var i=Error("Cannot read RSASSA-PSS parameter block.");throw i.errors=h,i}return void 0!==f.hashOid&&(d.hash=d.hash||{},d.hash.algorithmOid=e.derToOid(f.hashOid)),void 0!==f.maskGenOid&&(d.mgf=d.mgf||{},d.mgf.algorithmOid=e.derToOid(f.maskGenOid),d.mgf.hash=d.mgf.hash||{},d.mgf.hash.algorithmOid=e.derToOid(f.maskGenHashOid)),void 0!==f.saltLength&&(d.saltLength=f.saltLength.charCodeAt(0)),d},p=function(a){switch(g[a.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return d.md.sha1.create();case"md5WithRSAEncryption":return d.md.md5.create();case"sha256WithRSAEncryption":case"RSASSA-PSS":return d.md.sha256.create();case"sha384WithRSAEncryption":return d.md.sha384.create();case"sha512WithRSAEncryption":return d.md.sha512.create();default:var b=Error("Could not compute "+a.type+" digest. Unknown signature OID.");throw b.signatureOid=a.signatureOid,b}},q=function(a){var b,c,e,f=a.certificate;switch(f.signatureOid){case g.sha1WithRSAEncryption:case g.sha1WithRSASignature:break;case g["RSASSA-PSS"]:if(void 0===(c=g[f.signatureParameters.mgf.hash.algorithmOid])|| void 0===d.md[c]){var h=Error("Unsupported MGF hash function.");throw h.oid=f.signatureParameters.mgf.hash.algorithmOid,h.name=c,h}if(void 0===(e=g[f.signatureParameters.mgf.algorithmOid])|| void 0===d.mgf[e]){var h=Error("Unsupported MGF function.");throw h.oid=f.signatureParameters.mgf.algorithmOid,h.name=e,h}if(e=d.mgf[e].create(d.md[c].create()),void 0===(c=g[f.signatureParameters.hash.algorithmOid])|| void 0===d.md[c]){var h=Error("Unsupported RSASSA-PSS hash function.");throw h.oid=f.signatureParameters.hash.algorithmOid,h.name=c,h}b=d.pss.create(d.md[c].create(),e,f.signatureParameters.saltLength)}return f.publicKey.verify(a.md.digest().getBytes(),a.signature,b)};function r(a){for(var b,c,f=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]),g=a.attributes,h=0;h<g.length;++h){var i=(b=g[h]).value,j=e.Type.PRINTABLESTRING;"valueTagClass"in b&&(j=b.valueTagClass)===e.Type.UTF8&&(i=d.util.encodeUtf8(i)),c=e.create(e.Class.UNIVERSAL,e.Type.SET,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(b.type).getBytes()),e.create(e.Class.UNIVERSAL,j,!1,i)])]),f.value.push(c)}return f}function s(a){for(var b,c=0;c<a.length;++c){if(void 0===(b=a[c]).name&&(b.type&&b.type in f.oids?b.name=f.oids[b.type]:b.shortName&&b.shortName in h&&(b.name=f.oids[h[b.shortName]])),void 0===b.type){if(b.name&&b.name in f.oids)b.type=f.oids[b.name];else{var d=Error("Attribute type not specified.");throw d.attribute=b,d}}if(void 0===b.shortName&&b.name&&b.name in h&&(b.shortName=h[b.name]),b.type===g.extensionRequest&&(b.valueConstructed=!0,b.valueTagClass=e.Type.SEQUENCE,!b.value&&b.extensions)){b.value=[];for(var i=0;i<b.extensions.length;++i)b.value.push(f.certificateExtensionToAsn1(t(b.extensions[i])))}if(void 0===b.value){var d=Error("Attribute value not specified.");throw d.attribute=b,d}}}function t(a,b){if(b=b||{},void 0===a.name&&a.id&&a.id in f.oids&&(a.name=f.oids[a.id]),void 0===a.id){if(a.name&&a.name in f.oids)a.id=f.oids[a.name];else{var c=Error("Extension ID not specified.");throw c.extension=a,c}}if(void 0!==a.value)return a;if("keyUsage"===a.name){var h=0,i=0,j=0;a.digitalSignature&&(i|=128,h=7),a.nonRepudiation&&(i|=64,h=6),a.keyEncipherment&&(i|=32,h=5),a.dataEncipherment&&(i|=16,h=4),a.keyAgreement&&(i|=8,h=3),a.keyCertSign&&(i|=4,h=2),a.cRLSign&&(i|=2,h=1),a.encipherOnly&&(i|=1,h=0),a.decipherOnly&&(j|=128,h=7);var k=String.fromCharCode(h);0!==j?k+=String.fromCharCode(i)+String.fromCharCode(j):0!==i&&(k+=String.fromCharCode(i)),a.value=e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,k)}else if("basicConstraints"===a.name)a.value=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]),a.cA&&a.value.value.push(e.create(e.Class.UNIVERSAL,e.Type.BOOLEAN,!1,"\xff")),"pathLenConstraint"in a&&a.value.value.push(e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(a.pathLenConstraint).getBytes()));else if("extKeyUsage"===a.name){a.value=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]);var l=a.value.value;for(var m in a)!0===a[m]&&(m in g?l.push(e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(g[m]).getBytes())):-1!==m.indexOf(".")&&l.push(e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(m).getBytes())))}else if("nsCertType"===a.name){var h=0,i=0;a.client&&(i|=128,h=7),a.server&&(i|=64,h=6),a.email&&(i|=32,h=5),a.objsign&&(i|=16,h=4),a.reserved&&(i|=8,h=3),a.sslCA&&(i|=4,h=2),a.emailCA&&(i|=2,h=1),a.objCA&&(i|=1,h=0);var k=String.fromCharCode(h);0!==i&&(k+=String.fromCharCode(i)),a.value=e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,k)}else if("subjectAltName"===a.name||"issuerAltName"===a.name){a.value=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]);for(var n,o=0;o<a.altNames.length;++o){var k=(n=a.altNames[o]).value;if(7===n.type&&n.ip){if(null===(k=d.util.bytesFromIP(n.ip))){var c=Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw c.extension=a,c}}else 8===n.type&&(k=n.oid?e.oidToDer(e.oidToDer(n.oid)):e.oidToDer(k));a.value.value.push(e.create(e.Class.CONTEXT_SPECIFIC,n.type,!1,k))}}else if("nsComment"===a.name&&b.cert){if(!/^[\x00-\x7F]*$/.test(a.comment)||a.comment.length<1||a.comment.length>128)throw Error('Invalid "nsComment" content.');a.value=e.create(e.Class.UNIVERSAL,e.Type.IA5STRING,!1,a.comment)}else if("subjectKeyIdentifier"===a.name&&b.cert){var p=b.cert.generateSubjectKeyIdentifier();a.subjectKeyIdentifier=p.toHex(),a.value=e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,p.getBytes())}else if("authorityKeyIdentifier"===a.name&&b.cert){a.value=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]);var l=a.value.value;if(a.keyIdentifier){var q=!0===a.keyIdentifier?b.cert.generateSubjectKeyIdentifier().getBytes():a.keyIdentifier;l.push(e.create(e.Class.CONTEXT_SPECIFIC,0,!1,q))}if(a.authorityCertIssuer){var s=[e.create(e.Class.CONTEXT_SPECIFIC,4,!0,[r(!0===a.authorityCertIssuer?b.cert.issuer:a.authorityCertIssuer)])];l.push(e.create(e.Class.CONTEXT_SPECIFIC,1,!0,s))}if(a.serialNumber){var t=d.util.hexToBytes(!0===a.serialNumber?b.cert.serialNumber:a.serialNumber);l.push(e.create(e.Class.CONTEXT_SPECIFIC,2,!1,t))}}else if("cRLDistributionPoints"===a.name){a.value=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]);for(var n,l=a.value.value,u=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]),v=e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[]),o=0;o<a.altNames.length;++o){var k=(n=a.altNames[o]).value;if(7===n.type&&n.ip){if(null===(k=d.util.bytesFromIP(n.ip))){var c=Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw c.extension=a,c}}else 8===n.type&&(k=n.oid?e.oidToDer(e.oidToDer(n.oid)):e.oidToDer(k));v.value.push(e.create(e.Class.CONTEXT_SPECIFIC,n.type,!1,k))}u.value.push(e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[v])),l.push(u)}if(void 0===a.value){var c=Error("Extension value not specified.");throw c.extension=a,c}return a}function u(a,b){if(a===g["RSASSA-PSS"]){var c=[];return void 0!==b.hash.algorithmOid&&c.push(e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(b.hash.algorithmOid).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")])])),void 0!==b.mgf.algorithmOid&&c.push(e.create(e.Class.CONTEXT_SPECIFIC,1,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(b.mgf.algorithmOid).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(b.mgf.hash.algorithmOid).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")])])])),void 0!==b.saltLength&&c.push(e.create(e.Class.CONTEXT_SPECIFIC,2,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(b.saltLength).getBytes())])),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,c)}return e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")}f.certificateFromPem=function(a,b,c){var g=d.pem.decode(a)[0];if("CERTIFICATE"!==g.type&&"X509 CERTIFICATE"!==g.type&&"TRUSTED CERTIFICATE"!==g.type){var h=Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw h.headerType=g.type,h}if(g.procType&&"ENCRYPTED"===g.procType.type)throw Error("Could not convert certificate from PEM; PEM is encrypted.");var i=e.fromDer(g.body,c);return f.certificateFromAsn1(i,b)},f.certificateToPem=function(a,b){var c={type:"CERTIFICATE",body:e.toDer(f.certificateToAsn1(a)).getBytes()};return d.pem.encode(c,{maxline:b})},f.publicKeyFromPem=function(a){var b=d.pem.decode(a)[0];if("PUBLIC KEY"!==b.type&&"RSA PUBLIC KEY"!==b.type){var c=Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw c.headerType=b.type,c}if(b.procType&&"ENCRYPTED"===b.procType.type)throw Error("Could not convert public key from PEM; PEM is encrypted.");var g=e.fromDer(b.body);return f.publicKeyFromAsn1(g)},f.publicKeyToPem=function(a,b){var c={type:"PUBLIC KEY",body:e.toDer(f.publicKeyToAsn1(a)).getBytes()};return d.pem.encode(c,{maxline:b})},f.publicKeyToRSAPublicKeyPem=function(a,b){var c={type:"RSA PUBLIC KEY",body:e.toDer(f.publicKeyToRSAPublicKey(a)).getBytes()};return d.pem.encode(c,{maxline:b})},f.getPublicKeyFingerprint=function(a,b){var c,g=(b=b||{}).md||d.md.sha1.create(),h=b.type||"RSAPublicKey";switch(h){case"RSAPublicKey":c=e.toDer(f.publicKeyToRSAPublicKey(a)).getBytes();break;case"SubjectPublicKeyInfo":c=e.toDer(f.publicKeyToAsn1(a)).getBytes();break;default:throw Error('Unknown fingerprint type "'+b.type+'".')}g.start(),g.update(c);var i=g.digest();if("hex"===b.encoding){var j=i.toHex();return b.delimiter?j.match(/.{2}/g).join(b.delimiter):j}if("binary"===b.encoding)return i.getBytes();if(b.encoding)throw Error('Unknown encoding "'+b.encoding+'".');return i},f.certificationRequestFromPem=function(a,b,c){var g=d.pem.decode(a)[0];if("CERTIFICATE REQUEST"!==g.type){var h=Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw h.headerType=g.type,h}if(g.procType&&"ENCRYPTED"===g.procType.type)throw Error("Could not convert certification request from PEM; PEM is encrypted.");var i=e.fromDer(g.body,c);return f.certificationRequestFromAsn1(i,b)},f.certificationRequestToPem=function(a,b){var c={type:"CERTIFICATE REQUEST",body:e.toDer(f.certificationRequestToAsn1(a)).getBytes()};return d.pem.encode(c,{maxline:b})},f.createCertificate=function(){var a={};return a.version=2,a.serialNumber="00",a.signatureOid=null,a.signature=null,a.siginfo={},a.siginfo.algorithmOid=null,a.validity={},a.validity.notBefore=new Date,a.validity.notAfter=new Date,a.issuer={},a.issuer.getField=function(b){return n(a.issuer,b)},a.issuer.addField=function(b){s([b]),a.issuer.attributes.push(b)},a.issuer.attributes=[],a.issuer.hash=null,a.subject={},a.subject.getField=function(b){return n(a.subject,b)},a.subject.addField=function(b){s([b]),a.subject.attributes.push(b)},a.subject.attributes=[],a.subject.hash=null,a.extensions=[],a.publicKey=null,a.md=null,a.setSubject=function(b,c){s(b),a.subject.attributes=b,delete a.subject.uniqueId,c&&(a.subject.uniqueId=c),a.subject.hash=null},a.setIssuer=function(b,c){s(b),a.issuer.attributes=b,delete a.issuer.uniqueId,c&&(a.issuer.uniqueId=c),a.issuer.hash=null},a.setExtensions=function(b){for(var c=0;c<b.length;++c)t(b[c],{cert:a});a.extensions=b},a.getExtension=function(b){"string"==typeof b&&(b={name:b});for(var c,d=null,e=0;null===d&&e<a.extensions.length;++e)c=a.extensions[e],b.id&&c.id===b.id?d=c:b.name&&c.name===b.name&&(d=c);return d},a.sign=function(b,c){a.md=c||d.md.sha1.create();var h=g[a.md.algorithm+"WithRSAEncryption"];if(!h){var i=Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=a.md.algorithm,i}a.signatureOid=a.siginfo.algorithmOid=h,a.tbsCertificate=f.getTBSCertificate(a);var j=e.toDer(a.tbsCertificate);a.md.update(j.getBytes()),a.signature=b.sign(a.md)},a.verify=function(b){var c=!1;if(!a.issued(b)){var d=b.issuer,g=a.subject,h=Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw h.expectedIssuer=g.attributes,h.actualIssuer=d.attributes,h}var i=b.md;if(null===i){i=p({signatureOid:b.signatureOid,type:"certificate"});var j=b.tbsCertificate||f.getTBSCertificate(b),k=e.toDer(j);i.update(k.getBytes())}return null!==i&&(c=q({certificate:a,md:i,signature:b.signature})),c},a.isIssuer=function(b){var c=!1,d=a.issuer,e=b.subject;if(d.hash&&e.hash)c=d.hash===e.hash;else if(d.attributes.length===e.attributes.length){c=!0;for(var f,g,h=0;c&&h<d.attributes.length;++h)f=d.attributes[h],g=e.attributes[h],(f.type!==g.type||f.value!==g.value)&&(c=!1)}return c},a.issued=function(b){return b.isIssuer(a)},a.generateSubjectKeyIdentifier=function(){return f.getPublicKeyFingerprint(a.publicKey,{type:"RSAPublicKey"})},a.verifySubjectKeyIdentifier=function(){for(var b=g.subjectKeyIdentifier,c=0;c<a.extensions.length;++c){var e=a.extensions[c];if(e.id===b){var f=a.generateSubjectKeyIdentifier().getBytes();return d.util.hexToBytes(e.subjectKeyIdentifier)===f}}return!1},a},f.certificateFromAsn1=function(a,b){var c={},g=[];if(!e.validate(a,j,c,g)){var h=Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw h.errors=g,h}if(e.derToOid(c.publicKeyOid)!==f.oids.rsaEncryption)throw Error("Cannot read public key. OID is not RSA.");var i=f.createCertificate();i.version=c.certVersion?c.certVersion.charCodeAt(0):0;var k=d.util.createBuffer(c.certSerialNumber);i.serialNumber=k.toHex(),i.signatureOid=d.asn1.derToOid(c.certSignatureOid),i.signatureParameters=o(i.signatureOid,c.certSignatureParams,!0),i.siginfo.algorithmOid=d.asn1.derToOid(c.certinfoSignatureOid),i.siginfo.parameters=o(i.siginfo.algorithmOid,c.certinfoSignatureParams,!1),i.signature=c.certSignature;var l=[];if(void 0!==c.certValidity1UTCTime&&l.push(e.utcTimeToDate(c.certValidity1UTCTime)),void 0!==c.certValidity2GeneralizedTime&&l.push(e.generalizedTimeToDate(c.certValidity2GeneralizedTime)),void 0!==c.certValidity3UTCTime&&l.push(e.utcTimeToDate(c.certValidity3UTCTime)),void 0!==c.certValidity4GeneralizedTime&&l.push(e.generalizedTimeToDate(c.certValidity4GeneralizedTime)),l.length>2)throw Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(l.length<2)throw Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(i.validity.notBefore=l[0],i.validity.notAfter=l[1],i.tbsCertificate=c.tbsCertificate,b){i.md=p({signatureOid:i.signatureOid,type:"certificate"});var m=e.toDer(i.tbsCertificate);i.md.update(m.getBytes())}var q=d.md.sha1.create(),r=e.toDer(c.certIssuer);q.update(r.getBytes()),i.issuer.getField=function(a){return n(i.issuer,a)},i.issuer.addField=function(a){s([a]),i.issuer.attributes.push(a)},i.issuer.attributes=f.RDNAttributesAsArray(c.certIssuer),c.certIssuerUniqueId&&(i.issuer.uniqueId=c.certIssuerUniqueId),i.issuer.hash=q.digest().toHex();var t=d.md.sha1.create(),u=e.toDer(c.certSubject);return t.update(u.getBytes()),i.subject.getField=function(a){return n(i.subject,a)},i.subject.addField=function(a){s([a]),i.subject.attributes.push(a)},i.subject.attributes=f.RDNAttributesAsArray(c.certSubject),c.certSubjectUniqueId&&(i.subject.uniqueId=c.certSubjectUniqueId),i.subject.hash=t.digest().toHex(),c.certExtensions?i.extensions=f.certificateExtensionsFromAsn1(c.certExtensions):i.extensions=[],i.publicKey=f.publicKeyFromAsn1(c.subjectPublicKeyInfo),i},f.certificateExtensionsFromAsn1=function(a){for(var b=[],c=0;c<a.value.length;++c)for(var d=a.value[c],e=0;e<d.value.length;++e)b.push(f.certificateExtensionFromAsn1(d.value[e]));return b},f.certificateExtensionFromAsn1=function(a){var b={};if(b.id=e.derToOid(a.value[0].value),b.critical=!1,a.value[1].type===e.Type.BOOLEAN?(b.critical=0!==a.value[1].value.charCodeAt(0),b.value=a.value[2].value):b.value=a.value[1].value,b.id in g){if(b.name=g[b.id],"keyUsage"===b.name){var c=e.fromDer(b.value),f=0,h=0;c.value.length>1&&(f=c.value.charCodeAt(1),h=c.value.length>2?c.value.charCodeAt(2):0),b.digitalSignature=(128&f)==128,b.nonRepudiation=(64&f)==64,b.keyEncipherment=(32&f)==32,b.dataEncipherment=(16&f)==16,b.keyAgreement=(8&f)==8,b.keyCertSign=(4&f)==4,b.cRLSign=(2&f)==2,b.encipherOnly=(1&f)==1,b.decipherOnly=(128&h)==128}else if("basicConstraints"===b.name){var c=e.fromDer(b.value);c.value.length>0&&c.value[0].type===e.Type.BOOLEAN?b.cA=0!==c.value[0].value.charCodeAt(0):b.cA=!1;var i=null;c.value.length>0&&c.value[0].type===e.Type.INTEGER?i=c.value[0].value:c.value.length>1&&(i=c.value[1].value),null!==i&&(b.pathLenConstraint=e.derToInteger(i))}else if("extKeyUsage"===b.name)for(var c=e.fromDer(b.value),j=0;j<c.value.length;++j){var k=e.derToOid(c.value[j].value);k in g?b[g[k]]=!0:b[k]=!0}else if("nsCertType"===b.name){var c=e.fromDer(b.value),f=0;c.value.length>1&&(f=c.value.charCodeAt(1)),b.client=(128&f)==128,b.server=(64&f)==64,b.email=(32&f)==32,b.objsign=(16&f)==16,b.reserved=(8&f)==8,b.sslCA=(4&f)==4,b.emailCA=(2&f)==2,b.objCA=(1&f)==1}else if("subjectAltName"===b.name||"issuerAltName"===b.name){b.altNames=[];for(var l,c=e.fromDer(b.value),m=0;m<c.value.length;++m){var n={type:(l=c.value[m]).type,value:l.value};switch(b.altNames.push(n),l.type){case 1:case 2:case 6:break;case 7:n.ip=d.util.bytesToIP(l.value);break;case 8:n.oid=e.derToOid(l.value)}}}else if("subjectKeyIdentifier"===b.name){var c=e.fromDer(b.value);b.subjectKeyIdentifier=d.util.bytesToHex(c.value)}}return b},f.certificationRequestFromAsn1=function(a,b){var c={},g=[];if(!e.validate(a,m,c,g)){var h=Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw h.errors=g,h}if(e.derToOid(c.publicKeyOid)!==f.oids.rsaEncryption)throw Error("Cannot read public key. OID is not RSA.");var i=f.createCertificationRequest();if(i.version=c.csrVersion?c.csrVersion.charCodeAt(0):0,i.signatureOid=d.asn1.derToOid(c.csrSignatureOid),i.signatureParameters=o(i.signatureOid,c.csrSignatureParams,!0),i.siginfo.algorithmOid=d.asn1.derToOid(c.csrSignatureOid),i.siginfo.parameters=o(i.siginfo.algorithmOid,c.csrSignatureParams,!1),i.signature=c.csrSignature,i.certificationRequestInfo=c.certificationRequestInfo,b){i.md=p({signatureOid:i.signatureOid,type:"certification request"});var j=e.toDer(i.certificationRequestInfo);i.md.update(j.getBytes())}var k=d.md.sha1.create();return i.subject.getField=function(a){return n(i.subject,a)},i.subject.addField=function(a){s([a]),i.subject.attributes.push(a)},i.subject.attributes=f.RDNAttributesAsArray(c.certificationRequestInfoSubject,k),i.subject.hash=k.digest().toHex(),i.publicKey=f.publicKeyFromAsn1(c.subjectPublicKeyInfo),i.getAttribute=function(a){return n(i,a)},i.addAttribute=function(a){s([a]),i.attributes.push(a)},i.attributes=f.CRIAttributesAsArray(c.certificationRequestInfoAttributes||[]),i},f.createCertificationRequest=function(){var a={};return a.version=0,a.signatureOid=null,a.signature=null,a.siginfo={},a.siginfo.algorithmOid=null,a.subject={},a.subject.getField=function(b){return n(a.subject,b)},a.subject.addField=function(b){s([b]),a.subject.attributes.push(b)},a.subject.attributes=[],a.subject.hash=null,a.publicKey=null,a.attributes=[],a.getAttribute=function(b){return n(a,b)},a.addAttribute=function(b){s([b]),a.attributes.push(b)},a.md=null,a.setSubject=function(b){s(b),a.subject.attributes=b,a.subject.hash=null},a.setAttributes=function(b){s(b),a.attributes=b},a.sign=function(b,c){a.md=c||d.md.sha1.create();var h=g[a.md.algorithm+"WithRSAEncryption"];if(!h){var i=Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=a.md.algorithm,i}a.signatureOid=a.siginfo.algorithmOid=h,a.certificationRequestInfo=f.getCertificationRequestInfo(a);var j=e.toDer(a.certificationRequestInfo);a.md.update(j.getBytes()),a.signature=b.sign(a.md)},a.verify=function(){var b=!1,c=a.md;if(null===c){c=p({signatureOid:a.signatureOid,type:"certification request"});var d=a.certificationRequestInfo||f.getCertificationRequestInfo(a),g=e.toDer(d);c.update(g.getBytes())}return null!==c&&(b=q({certificate:a,md:c,signature:a.signature})),b},a};var v=new Date("1950-01-01T00:00:00Z"),w=new Date("2050-01-01T00:00:00Z");function x(a){return a>=v&&a<w?e.create(e.Class.UNIVERSAL,e.Type.UTCTIME,!1,e.dateToUtcTime(a)):e.create(e.Class.UNIVERSAL,e.Type.GENERALIZEDTIME,!1,e.dateToGeneralizedTime(a))}f.getTBSCertificate=function(a){var b=x(a.validity.notBefore),c=x(a.validity.notAfter),g=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(a.version).getBytes())]),e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,d.util.hexToBytes(a.serialNumber)),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(a.siginfo.algorithmOid).getBytes()),u(a.siginfo.algorithmOid,a.siginfo.parameters)]),r(a.issuer),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[b,c]),r(a.subject),f.publicKeyToAsn1(a.publicKey)]);return a.issuer.uniqueId&&g.value.push(e.create(e.Class.CONTEXT_SPECIFIC,1,!0,[e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,"\0"+a.issuer.uniqueId)])),a.subject.uniqueId&&g.value.push(e.create(e.Class.CONTEXT_SPECIFIC,2,!0,[e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,"\0"+a.subject.uniqueId)])),a.extensions.length>0&&g.value.push(f.certificateExtensionsToAsn1(a.extensions)),g},f.getCertificationRequestInfo=function(a){return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(a.version).getBytes()),r(a.subject),f.publicKeyToAsn1(a.publicKey),function(a){var b=e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===a.attributes.length)return b;for(var c=a.attributes,f=0;f<c.length;++f){var g=c[f],h=g.value,i=e.Type.UTF8;"valueTagClass"in g&&(i=g.valueTagClass),i===e.Type.UTF8&&(h=d.util.encodeUtf8(h));var j=!1;"valueConstructed"in g&&(j=g.valueConstructed);var k=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(g.type).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SET,!0,[e.create(e.Class.UNIVERSAL,i,j,h)])]);b.value.push(k)}return b}(a)])},f.distinguishedNameToAsn1=function(a){return r(a)},f.certificateToAsn1=function(a){var b=a.tbsCertificate||f.getTBSCertificate(a);return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[b,e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(a.signatureOid).getBytes()),u(a.signatureOid,a.signatureParameters)]),e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,"\0"+a.signature)])},f.certificateExtensionsToAsn1=function(a){var b=e.create(e.Class.CONTEXT_SPECIFIC,3,!0,[]),c=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]);b.value.push(c);for(var d=0;d<a.length;++d)c.value.push(f.certificateExtensionToAsn1(a[d]));return b},f.certificateExtensionToAsn1=function(a){var b=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]);b.value.push(e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(a.id).getBytes())),a.critical&&b.value.push(e.create(e.Class.UNIVERSAL,e.Type.BOOLEAN,!1,"\xff"));var c=a.value;return"string"!=typeof a.value&&(c=e.toDer(c).getBytes()),b.value.push(e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,c)),b},f.certificationRequestToAsn1=function(a){var b=a.certificationRequestInfo||f.getCertificationRequestInfo(a);return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[b,e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(a.signatureOid).getBytes()),u(a.signatureOid,a.signatureParameters)]),e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,"\0"+a.signature)])},f.createCaStore=function(a){var b={certs:{}};function c(a){return g(a),b.certs[a.hash]||null}function g(a){if(!a.hash){var b=d.md.sha1.create();a.attributes=f.RDNAttributesAsArray(r(a),b),a.hash=b.digest().toHex()}}if(b.getIssuer=function(a){return c(a.issuer)},b.addCertificate=function(a){if("string"==typeof a&&(a=d.pki.certificateFromPem(a)),g(a.subject),!b.hasCertificate(a)){if(a.subject.hash in b.certs){var c=b.certs[a.subject.hash];d.util.isArray(c)||(c=[c]),c.push(a),b.certs[a.subject.hash]=c}else b.certs[a.subject.hash]=a}},b.hasCertificate=function(a){"string"==typeof a&&(a=d.pki.certificateFromPem(a));var b=c(a.subject);if(!b)return!1;d.util.isArray(b)||(b=[b]);for(var g=e.toDer(f.certificateToAsn1(a)).getBytes(),h=0;h<b.length;++h)if(g===e.toDer(f.certificateToAsn1(b[h])).getBytes())return!0;return!1},b.listAllCertificates=function(){var a=[];for(var c in b.certs)if(b.certs.hasOwnProperty(c)){var e=b.certs[c];if(d.util.isArray(e))for(var f=0;f<e.length;++f)a.push(e[f]);else a.push(e)}return a},b.removeCertificate=function(a){if("string"==typeof a&&(a=d.pki.certificateFromPem(a)),g(a.subject),!b.hasCertificate(a))return null;var h,i=c(a.subject);if(!d.util.isArray(i))return h=b.certs[a.subject.hash],delete b.certs[a.subject.hash],h;for(var j=e.toDer(f.certificateToAsn1(a)).getBytes(),k=0;k<i.length;++k)j===e.toDer(f.certificateToAsn1(i[k])).getBytes()&&(h=i[k],i.splice(k,1));return 0===i.length&&delete b.certs[a.subject.hash],h},a)for(var h=0;h<a.length;++h){var i=a[h];b.addCertificate(i)}return b},f.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},f.verifyCertificateChain=function(a,b,c){"function"==typeof c&&(c={verify:c}),c=c||{};var e=(b=b.slice(0)).slice(0),g=c.validityCheckDate;void 0===g&&(g=new Date);var h=!0,i=null,j=0;do{var k=b.shift(),l=null,m=!1;if(g&&(g<k.validity.notBefore||g>k.validity.notAfter)&&(i={message:"Certificate is not valid yet or has expired.",error:f.certificateError.certificate_expired,notBefore:k.validity.notBefore,notAfter:k.validity.notAfter,now:g}),null===i){if(null===(l=b[0]||a.getIssuer(k))&&k.isIssuer(k)&&(m=!0,l=k),l){var n=l;d.util.isArray(n)||(n=[n]);for(var o=!1;!o&&n.length>0;){l=n.shift();try{o=l.verify(k)}catch(p){}}o||(i={message:"Certificate signature is invalid.",error:f.certificateError.bad_certificate})}null!==i||l&&!m||a.hasCertificate(k)||(i={message:"Certificate is not trusted.",error:f.certificateError.unknown_ca})}if(null===i&&l&&!k.isIssuer(l)&&(i={message:"Certificate issuer is invalid.",error:f.certificateError.bad_certificate}),null===i)for(var q={keyUsage:!0,basicConstraints:!0},r=0;null===i&&r<k.extensions.length;++r){var s=k.extensions[r];!s.critical||s.name in q||(i={message:"Certificate has an unsupported critical extension.",error:f.certificateError.unsupported_certificate})}if(null===i&&(!h||0===b.length&&(!l||m))){var t=k.getExtension("basicConstraints"),u=k.getExtension("keyUsage");null===u||u.keyCertSign&&null!==t||(i={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:f.certificateError.bad_certificate}),null!==i||null===t||t.cA||(i={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:f.certificateError.bad_certificate}),null===i&&null!==u&&"pathLenConstraint"in t&&j-1>t.pathLenConstraint&&(i={message:"Certificate basicConstraints pathLenConstraint violated.",error:f.certificateError.bad_certificate})}var v=null===i||i.error,w=c.verify?c.verify(v,j,e):v;if(!0===w)i=null;else throw!0===v&&(i={message:"The application rejected the certificate.",error:f.certificateError.bad_certificate}),(w||0===w)&&("object"!=typeof w||d.util.isArray(w)?"string"==typeof w&&(i.error=w):(w.message&&(i.message=w.message),w.error&&(i.error=w.error))),i;h=!1,++j}while(b.length>0);return!0}},35103:function(a,b,c){let d=c(91607),e=c(50603);a.exports=class{constructor(){this._buffer=new d,this._waitingConsumers=new d}push(a){let{promise:b,resolve:c}=e();return this._buffer.push({chunk:a,resolve:c}),this._consume(),b}_consume(){for(;!this._waitingConsumers.isEmpty()&&!this._buffer.isEmpty();){let a=this._waitingConsumers.shift(),b=this._buffer.shift();a.resolve(b.chunk),b.resolve()}}shift(){let{promise:a,resolve:b}=e();return this._waitingConsumers.push({resolve:b}),this._consume(),a}isEmpty(){return this._buffer.isEmpty()}}},50603:function(a){"use strict";let b=()=>{let a={};return a.promise=new Promise((b,c)=>{a.resolve=b,a.reject=c}),a};a.exports=b},27345:function(a){"use strict";a.exports=(a,b)=>(b=b||(()=>{}),a.then(a=>new Promise(a=>{a(b())}).then(()=>a),a=>new Promise(a=>{a(b())}).then(()=>{throw a})))},78939:function(a){"use strict";var b=Object.prototype.hasOwnProperty,c="~";function d(){}function e(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function f(a,b,d,f,g){if("function"!=typeof d)throw TypeError("The listener must be a function");var h=new e(d,f||a,g),i=c?c+b:b;return a._events[i]?a._events[i].fn?a._events[i]=[a._events[i],h]:a._events[i].push(h):(a._events[i]=h,a._eventsCount++),a}function g(a,b){0== --a._eventsCount?a._events=new d:delete a._events[b]}function h(){this._events=new d,this._eventsCount=0}Object.create&&(d.prototype=Object.create(null),new d().__proto__||(c=!1)),h.prototype.eventNames=function(){var a,d,e=[];if(0===this._eventsCount)return e;for(d in a=this._events)b.call(a,d)&&e.push(c?d.slice(1):d);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(a)):e},h.prototype.listeners=function(a){var b=c?c+a:a,d=this._events[b];if(!d)return[];if(d.fn)return[d.fn];for(var e=0,f=d.length,g=Array(f);e<f;e++)g[e]=d[e].fn;return g},h.prototype.listenerCount=function(a){var b=c?c+a:a,d=this._events[b];return d?d.fn?1:d.length:0},h.prototype.emit=function(a,b,d,e,f,g){var h=c?c+a:a;if(!this._events[h])return!1;var i,j,k=this._events[h],l=arguments.length;if(k.fn){switch(k.once&&this.removeListener(a,k.fn,void 0,!0),l){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,d),!0;case 4:return k.fn.call(k.context,b,d,e),!0;case 5:return k.fn.call(k.context,b,d,e,f),!0;case 6:return k.fn.call(k.context,b,d,e,f,g),!0}for(j=1,i=Array(l-1);j<l;j++)i[j-1]=arguments[j];k.fn.apply(k.context,i)}else{var m,n=k.length;for(j=0;j<n;j++)switch(k[j].once&&this.removeListener(a,k[j].fn,void 0,!0),l){case 1:k[j].fn.call(k[j].context);break;case 2:k[j].fn.call(k[j].context,b);break;case 3:k[j].fn.call(k[j].context,b,d);break;case 4:k[j].fn.call(k[j].context,b,d,e);break;default:if(!i)for(m=1,i=Array(l-1);m<l;m++)i[m-1]=arguments[m];k[j].fn.apply(k[j].context,i)}}return!0},h.prototype.on=function(a,b,c){return f(this,a,b,c,!1)},h.prototype.once=function(a,b,c){return f(this,a,b,c,!0)},h.prototype.removeListener=function(a,b,d,e){var f=c?c+a:a;if(!this._events[f])return this;if(!b)return g(this,f),this;var h=this._events[f];if(h.fn)h.fn!==b||e&&!h.once||d&&h.context!==d||g(this,f);else{for(var i=0,j=[],k=h.length;i<k;i++)(h[i].fn!==b||e&&!h[i].once||d&&h[i].context!==d)&&j.push(h[i]);j.length?this._events[f]=1===j.length?j[0]:j:g(this,f)}return this},h.prototype.removeAllListeners=function(a){var b;return a?(b=c?c+a:a,this._events[b]&&g(this,b)):(this._events=new d,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=c,h.EventEmitter=h,a.exports=h},290:function(a,b,c){"use strict";a.exports=c(96114).default},96114:function(a,b,c){"use strict";var d=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0});let e=c(28951),f=d(c(1476)),g=d(c(5003)),h=c(56512),i=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"].map(a=>new e.Netmask(a));function j(a){return/^::$/.test(a)||/^::1$/.test(a)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(a)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(a)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(a)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(a)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(a)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(a)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(a)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(a)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(a)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(a)||/^ff([0-9a-fA-F]{2,2}):/i.test(a)}b.default=a=>{if((0,h.isValid)(a)){let b=(0,h.parse)(a);if("ipv4"===b.kind())return function(a){for(let b of i)if(b.contains(a))return!0;return!1}(b.toNormalizedString());if("ipv6"===b.kind())return j(a)}else if((0,g.default)(a)&&f.default.v6().test(a))return j(a)}},54501:function(a){"use strict";var b;a.exports.timeout=function(a,c){var d,e=new b;return Promise.race([a,new Promise(function(a,b){d=setTimeout(function(){b(e)},c)}),]).then(function(a){return clearTimeout(d),a},function(a){throw clearTimeout(d),a})},(b=a.exports.TimeoutError=function(){Error.call(this),this.stack=Error().stack,this.message="Timeout"}).prototype=Object.create(Error.prototype),b.prototype.name="TimeoutError"},92703:function(a,b,c){"use strict";var d=c(50414);function e(){}function f(){}f.resetWarningCache=e,a.exports=function(){function a(a,b,c,e,f,g){if(g!==d){var h=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}function b(){return a}a.isRequired=a;var c={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:b,element:a,elementType:a,instanceOf:b,node:a,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b,checkPropTypes:f,resetWarningCache:e};return c.PropTypes=c,c}},45697:function(a,b,c){a.exports=c(92703)()},50414:function(a){"use strict";a.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},54375:function(a,b,c){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */ let d;a.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:c.g):a=>(d||(d=Promise.resolve())).then(a).catch(a=>setTimeout(()=>{throw a},0))},33286:function(a,b,c){let{instantiate:d}=c(19824);function e(a={}){if(!e.supported)return null;var b=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return d(new Response(new Blob([b],{type:"application/wasm"})),a)}e.supported="undefined"!=typeof WebAssembly,a.exports=e},63060:function(a,b,c){let d=c(57118),e=c(33286),f=async(a,b,c,f,g)=>{let h=await e();return new d(h,a,b,c,f,g)};a.exports={Rabin:d,create:f}},57118:function(a){a.exports=class{constructor(a,b=12,c=8192,d=32768,e=64,f){this.bits=b,this.min=c,this.max=d,this.asModule=a,this.rabin=new a.Rabin(b,c,d,e,f),this.polynomial=f}fingerprint(a){let{__retain:b,__release:c,__allocArray:d,__getInt32Array:e,Int32Array_ID:f,Uint8Array_ID:g}=this.asModule,h=new Int32Array(Math.ceil(a.length/this.min)),i=b(d(f,h)),j=b(d(g,a)),k=this.rabin.fingerprint(j,i),l=e(k);c(j),c(i);let m=l.indexOf(0);return m>=0?l.subarray(0,m):l}}},61798:function(a,b,c){"use strict";var d=c(34155),e=c(89509).Buffer,f=c.g.crypto||c.g.msCrypto;f&&f.getRandomValues?a.exports=function(a,b){if(a>4294967295)throw RangeError("requested too many random bytes");var c=e.allocUnsafe(a);if(a>0){if(a>65536)for(var g=0;g<a;g+=65536)f.getRandomValues(c.slice(g,g+65536));else f.getRandomValues(c)}return"function"==typeof b?d.nextTick(function(){b(null,c)}):c}:a.exports=function(){throw Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},9198:function(a,b,c){!function(a,d){d(b,c(67294),c(45697),c(94184),c(71381),c(12274),c(42298),c(58545),c(78343),c(77349),c(63500),c(11640),c(21593),c(1784),c(88330),c(7069),c(77982),c(54559),c(59319),c(77881),c(39159),c(85817),c(20466),c(55855),c(90259),c(78966),c(56605),c(95570),c(28789),c(39880),c(4543),c(37042),c(16218),c(11503),c(44749),c(37950),c(99890),c(92300),c(84129),c(52724),c(91857),c(69119),c(584),c(43703),c(94431),c(38148),c(83894),c(67090),c(4135),c(96843),c(3151),c(49160),c(60792),c(86117),c(42699),c(313),c(24257),c(19013),c(35337),c(23855),c(58949),c(73935),c(36829))}(this,function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ab,ac,ad,ae,af,ag,ah,ai){"use strict";function aj(a){return a&&"object"==typeof a&&"default"in a?a:{default:a}}var ak=aj(b),al=aj(d),am=aj(e),an=aj(f),ao=aj(g),ap=aj(h),aq=aj(i),ar=aj(j),as=aj(k),at=aj(l),au=aj(m),av=aj(p),aw=aj(q),ax=aj(r),ay=aj(s),az=aj(t),aA=aj(u),aB=aj(v),aC=aj(w),aD=aj(x),aE=aj(y),aF=aj(z),aG=aj(A),aH=aj(B),aI=aj(C),aJ=aj(D),aK=aj(E),aL=aj(F),aM=aj(G),aN=aj(H),aO=aj(I),aP=aj(J),aQ=aj(K),aR=aj(L),aS=aj(M),aT=aj(O),aU=aj(P),aV=aj(Q),aW=aj(R),aX=aj(S),aY=aj(T),aZ=aj(U),a$=aj(X),a_=aj(Y),a0=aj(Z),a1=aj($),a2=aj(_),a3=aj(aa),a4=aj(ab),a5=aj(ac),a6=aj(ad),a7=aj(ae),a8=aj(af),a9=aj(ag),ba=aj(ah);function bb(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function bc(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?bb(Object(c),!0).forEach(function(b){bh(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):bb(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function bd(a){return(bd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function be(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}function bf(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function bg(a,b,c){return b&&bf(a.prototype,b),c&&bf(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a}function bh(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function bi(){return(bi=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(this,arguments)}function bj(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Super expression must either be null or a function");Object.defineProperty(a,"prototype",{value:Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),writable:!1}),b&&bl(a,b)}function bk(a){return(bk=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function bl(a,b){return(bl=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function bm(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function bn(a){var b=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}();return function(){var c,d=bk(a);if(b){var e=bk(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return function(a,b){if(b&&("object"==typeof b||"function"==typeof b))return b;if(void 0!==b)throw TypeError("Derived constructors may only return object or undefined");return bm(a)}(this,c)}}function bo(a){return function(a){if(Array.isArray(a))return bp(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||function(a,b){if(a){if("string"==typeof a)return bp(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return bp(a,b)}}(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bp(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function bq(a,b){switch(a){case"P":return b.date({width:"short"});case"PP":return b.date({width:"medium"});case"PPP":return b.date({width:"long"});default:return b.date({width:"full"})}}function br(a,b){switch(a){case"p":return b.time({width:"short"});case"pp":return b.time({width:"medium"});case"ppp":return b.time({width:"long"});default:return b.time({width:"full"})}}var bs={p:br,P:function(a,b){var c,d=a.match(/(P+)(p+)?/)||[],e=d[1],f=d[2];if(!f)return bq(a,b);switch(e){case"P":c=b.dateTime({width:"short"});break;case"PP":c=b.dateTime({width:"medium"});break;case"PPP":c=b.dateTime({width:"long"});break;default:c=b.dateTime({width:"full"})}return c.replace("{{date}}",bq(e,b)).replace("{{time}}",br(f,b))}},bt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function bu(a){var b=a?"string"==typeof a||a instanceof String?a8.default(a):a6.default(a):new Date;return bv(b)?b:null}function bv(a,b){return b=b||new Date("1/1/1000"),an.default(a)&&!a4.default(a,b)}function bw(a,b,c){if("en"===c)return ao.default(a,b,{awareOfUnicodeTokens:!0});var d=bJ(c);return c&&!d&&console.warn('A locale object was not found for the provided string ["'.concat(c,'"].')),!d&&bI()&&bJ(bI())&&(d=bJ(bI())),ao.default(a,b,{locale:d||null,awareOfUnicodeTokens:!0})}function bx(a,b){var c=b.dateFormat,d=b.locale;return a&&bw(a,Array.isArray(c)?c[0]:c,d)||""}function by(a,b){var c=b.hour,d=b.minute,e=b.second;return aL.default(aK.default(aJ.default(a,void 0===e?0:e),void 0===d?0:d),void 0===c?0:c)}function bz(a,b,c){var d=bJ(b||bI());return aV.default(a,{locale:d,weekStartsOn:c})}function bA(a){return aW.default(a)}function bB(a){return aY.default(a)}function bC(a,b){return a&&b?a1.default(a,b):!a&&!b}function bD(a,b){return a&&b?a0.default(a,b):!a&&!b}function bE(a,b){return a&&b?a2.default(a,b):!a&&!b}function bF(a,b){return a&&b?a_.default(a,b):!a&&!b}function bG(a,b){return a&&b?a$.default(a,b):!a&&!b}function bH(a,b,c){var d,e=aU.default(b),f=aZ.default(c);try{d=a5.default(a,{start:e,end:f})}catch(g){d=!1}return d}function bI(){return("undefined"!=typeof window?window:globalThis).__localeId__}function bJ(a){if("string"==typeof a){var b="undefined"!=typeof window?window:globalThis;return b.__localeData__?b.__localeData__[a]:null}return a}function bK(a,b){return bw(aM.default(bu(),a),"LLLL",b)}function bL(a,b){return bw(aM.default(bu(),a),"LLL",b)}function bM(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},c=b.minDate,d=b.maxDate,e=b.excludeDates,f=b.excludeDateIntervals,g=b.includeDates,h=b.includeDateIntervals,i=b.filterDate;return bO(a,{minDate:c,maxDate:d})||e&&e.some(function(b){return bF(a,b)})||f&&f.some(function(b){var c=b.start,d=b.end;return a5.default(a,{start:c,end:d})})||g&&!g.some(function(b){return bF(a,b)})||h&&!h.some(function(b){var c=b.start,d=b.end;return a5.default(a,{start:c,end:d})})||i&&!i(bu(a))||!1}function bN(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},c=b.excludeDates,d=b.excludeDateIntervals;return d&&d.length>0?d.some(function(b){var c=b.start,d=b.end;return a5.default(a,{start:c,end:d})}):c&&c.some(function(b){return bF(a,b)})||!1}function bO(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},c=b.minDate,d=b.maxDate;return c&&0>aR.default(a,c)||d&&aR.default(a,d)>0}function bP(a,b){return b.some(function(b){return aB.default(b)===aB.default(a)&&aA.default(b)===aA.default(a)})}function bQ(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},c=b.excludeTimes,d=b.includeTimes,e=b.filterTime;return c&&bP(a,c)||d&&!bP(a,d)||e&&!e(a)||!1}function bR(a,b){var c=b.minTime,d=b.maxTime;if(!c||!d)throw Error("Both minTime and maxTime props required");var e,f=bu(),g=aL.default(aK.default(f,aA.default(a)),aB.default(a)),h=aL.default(aK.default(f,aA.default(c)),aB.default(c)),i=aL.default(aK.default(f,aA.default(d)),aB.default(d));try{e=!a5.default(g,{start:h,end:i})}catch(j){e=!1}return e}function bS(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},c=b.minDate,d=b.includeDates,e=ax.default(a,1);return c&&aS.default(c,e)>0||d&&d.every(function(a){return aS.default(a,e)>0})||!1}function bT(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},c=b.maxDate,d=b.includeDates,e=at.default(a,1);return c&&aS.default(e,c)>0||d&&d.every(function(a){return aS.default(e,a)>0})||!1}function bU(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},c=b.minDate,d=b.includeDates,e=ay.default(a,1);return c&&aT.default(c,e)>0||d&&d.every(function(a){return aT.default(a,e)>0})||!1}function bV(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},c=b.maxDate,d=b.includeDates,e=au.default(a,1);return c&&aT.default(e,c)>0||d&&d.every(function(a){return aT.default(e,a)>0})||!1}function bW(a){var b=a.minDate,c=a.includeDates;if(c&&b){var d=c.filter(function(a){return aR.default(a,b)>=0});return aP.default(d)}return c?aP.default(c):b}function bX(a){var b=a.maxDate,c=a.includeDates;if(c&&b){var d=c.filter(function(a){return 0>=aR.default(a,b)});return aQ.default(d)}return c?aQ.default(c):b}function bY(){for(var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:[],b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:"react-datepicker__day--highlighted",c=new Map,d=0,e=a.length;d<e;d++){var f=a[d];if(am.default(f)){var g=bw(f,"MM.dd.yyyy"),h=c.get(g)||[];h.includes(b)||(h.push(b),c.set(g,h))}else if("object"===bd(f)){var i=Object.keys(f),j=i[0],k=f[i[0]];if("string"==typeof j&&k.constructor===Array)for(var l=0,m=k.length;l<m;l++){var n=bw(k[l],"MM.dd.yyyy"),o=c.get(n)||[];o.includes(j)||(o.push(j),c.set(n,o))}}}return c}function bZ(a,b,c,d,e){for(var f=e.length,g=[],h=0;h<f;h++){var i=ap.default(aq.default(a,aB.default(e[h])),aA.default(e[h])),j=ap.default(a,(c+1)*d);a3.default(i,b)&&a4.default(i,j)&&g.push(e[h])}return g}function b$(a){return a<10?"0".concat(a):"".concat(a)}function b_(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:12,c=Math.ceil(aH.default(a)/b)*b;return{startPeriod:c-(b-1),endPeriod:c}}var b0=function(a){bj(d,a);var c=bn(d);function d(a){be(this,d),bh(bm(e=c.call(this,a)),"renderOptions",function(){var a=e.props.year,b=e.state.yearsList.map(function(b){return ak.default.createElement("div",{className:a===b?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:b,onClick:e.onChange.bind(bm(e),b),"aria-selected":a===b?"true":void 0},a===b?ak.default.createElement("span",{className:"react-datepicker__year-option--selected"},"✓"):"",b)}),c=e.props.minDate?aH.default(e.props.minDate):null,d=e.props.maxDate?aH.default(e.props.maxDate):null;return d&&e.state.yearsList.find(function(a){return a===d})||b.unshift(ak.default.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:e.incrementYears},ak.default.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),c&&e.state.yearsList.find(function(a){return a===c})||b.push(ak.default.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:e.decrementYears},ak.default.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),b}),bh(bm(e),"onChange",function(a){e.props.onChange(a)}),bh(bm(e),"handleClickOutside",function(){e.props.onCancel()}),bh(bm(e),"shiftYears",function(a){var b=e.state.yearsList.map(function(b){return b+a});e.setState({yearsList:b})}),bh(bm(e),"incrementYears",function(){return e.shiftYears(1)}),bh(bm(e),"decrementYears",function(){return e.shiftYears(-1)});var e,f=a.yearDropdownItemNumber,g=a.scrollableYearDropdown;return e.state={yearsList:function(a,b,c,d){for(var e=[],f=0;f<2*b+1;f++){var g=a+b-f,h=!0;c&&(h=aH.default(c)<=g),d&&h&&(h=aH.default(d)>=g),h&&e.push(g)}return e}(e.props.year,f||(g?10:5),e.props.minDate,e.props.maxDate)},e.dropdownRef=b.createRef(),e}return bg(d,[{key:"componentDidMount",value:function(){var a=this.dropdownRef.current;a&&(a.scrollTop=a.scrollHeight/2-a.clientHeight/2)}},{key:"render",value:function(){var a=al.default({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return ak.default.createElement("div",{className:a,ref:this.dropdownRef},this.renderOptions())}}]),d}(ak.default.Component),b1=a9.default(b0),b2=function(a){bj(c,a);var b=bn(c);function c(){var a;be(this,c);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return bh(bm(a=b.call.apply(b,[this].concat(e))),"state",{dropdownVisible:!1}),bh(bm(a),"renderSelectOptions",function(){for(var b=a.props.minDate?aH.default(a.props.minDate):1900,c=a.props.maxDate?aH.default(a.props.maxDate):2100,d=[],e=b;e<=c;e++)d.push(ak.default.createElement("option",{key:e,value:e},e));return d}),bh(bm(a),"onSelectChange",function(b){a.onChange(b.target.value)}),bh(bm(a),"renderSelectMode",function(){return ak.default.createElement("select",{value:a.props.year,className:"react-datepicker__year-select",onChange:a.onSelectChange},a.renderSelectOptions())}),bh(bm(a),"renderReadView",function(b){return ak.default.createElement("div",{key:"read",style:{visibility:b?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(b){return a.toggleDropdown(b)}},ak.default.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),ak.default.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},a.props.year))}),bh(bm(a),"renderDropdown",function(){return ak.default.createElement(b1,{key:"dropdown",year:a.props.year,onChange:a.onChange,onCancel:a.toggleDropdown,minDate:a.props.minDate,maxDate:a.props.maxDate,scrollableYearDropdown:a.props.scrollableYearDropdown,yearDropdownItemNumber:a.props.yearDropdownItemNumber})}),bh(bm(a),"renderScrollMode",function(){var b=a.state.dropdownVisible,c=[a.renderReadView(!b)];return b&&c.unshift(a.renderDropdown()),c}),bh(bm(a),"onChange",function(b){a.toggleDropdown(),b!==a.props.year&&a.props.onChange(b)}),bh(bm(a),"toggleDropdown",function(b){a.setState({dropdownVisible:!a.state.dropdownVisible},function(){a.props.adjustDateOnChange&&a.handleYearChange(a.props.date,b)})}),bh(bm(a),"handleYearChange",function(b,c){a.onSelect(b,c),a.setOpen()}),bh(bm(a),"onSelect",function(b,c){a.props.onSelect&&a.props.onSelect(b,c)}),bh(bm(a),"setOpen",function(){a.props.setOpen&&a.props.setOpen(!0)}),a}return bg(c,[{key:"render",value:function(){var a;switch(this.props.dropdownMode){case"scroll":a=this.renderScrollMode();break;case"select":a=this.renderSelectMode()}return ak.default.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},a)}}]),c}(ak.default.Component),b3=function(a){bj(c,a);var b=bn(c);function c(){var a;be(this,c);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return bh(bm(a=b.call.apply(b,[this].concat(e))),"isSelectedMonth",function(b){return a.props.month===b}),bh(bm(a),"renderOptions",function(){return a.props.monthNames.map(function(b,c){return ak.default.createElement("div",{className:a.isSelectedMonth(c)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:b,onClick:a.onChange.bind(bm(a),c),"aria-selected":a.isSelectedMonth(c)?"true":void 0},a.isSelectedMonth(c)?ak.default.createElement("span",{className:"react-datepicker__month-option--selected"},"✓"):"",b)})}),bh(bm(a),"onChange",function(b){return a.props.onChange(b)}),bh(bm(a),"handleClickOutside",function(){return a.props.onCancel()}),a}return bg(c,[{key:"render",value:function(){return ak.default.createElement("div",{className:"react-datepicker__month-dropdown"},this.renderOptions())}}]),c}(ak.default.Component),b4=a9.default(b3),b5=function(a){bj(c,a);var b=bn(c);function c(){var a;be(this,c);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return bh(bm(a=b.call.apply(b,[this].concat(e))),"state",{dropdownVisible:!1}),bh(bm(a),"renderSelectOptions",function(a){return a.map(function(a,b){return ak.default.createElement("option",{key:b,value:b},a)})}),bh(bm(a),"renderSelectMode",function(b){return ak.default.createElement("select",{value:a.props.month,className:"react-datepicker__month-select",onChange:function(b){return a.onChange(b.target.value)}},a.renderSelectOptions(b))}),bh(bm(a),"renderReadView",function(b,c){return ak.default.createElement("div",{key:"read",style:{visibility:b?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:a.toggleDropdown},ak.default.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),ak.default.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},c[a.props.month]))}),bh(bm(a),"renderDropdown",function(b){return ak.default.createElement(b4,{key:"dropdown",month:a.props.month,monthNames:b,onChange:a.onChange,onCancel:a.toggleDropdown})}),bh(bm(a),"renderScrollMode",function(b){var c=a.state.dropdownVisible,d=[a.renderReadView(!c,b)];return c&&d.unshift(a.renderDropdown(b)),d}),bh(bm(a),"onChange",function(b){a.toggleDropdown(),b!==a.props.month&&a.props.onChange(b)}),bh(bm(a),"toggleDropdown",function(){return a.setState({dropdownVisible:!a.state.dropdownVisible})}),a}return bg(c,[{key:"render",value:function(){var a,b=this,c=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(a){return bL(a,b.props.locale)}:function(a){return bK(a,b.props.locale)});switch(this.props.dropdownMode){case"scroll":a=this.renderScrollMode(c);break;case"select":a=this.renderSelectMode(c)}return ak.default.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},a)}}]),c}(ak.default.Component),b6=function(a){bj(c,a);var b=bn(c);function c(a){var d;return be(this,c),bh(bm(d=b.call(this,a)),"renderOptions",function(){return d.state.monthYearsList.map(function(a){var b=aI.default(a),c=bC(d.props.date,a)&&bD(d.props.date,a);return ak.default.createElement("div",{className:c?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:b,onClick:d.onChange.bind(bm(d),b),"aria-selected":c?"true":void 0},c?ak.default.createElement("span",{className:"react-datepicker__month-year-option--selected"},"✓"):"",bw(a,d.props.dateFormat,d.props.locale))})}),bh(bm(d),"onChange",function(a){return d.props.onChange(a)}),bh(bm(d),"handleClickOutside",function(){d.props.onCancel()}),d.state={monthYearsList:function(a,b){for(var c=[],d=bA(a),e=bA(b);!a3.default(d,e);)c.push(bu(d)),d=at.default(d,1);return c}(d.props.minDate,d.props.maxDate)},d}return bg(c,[{key:"render",value:function(){var a=al.default({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return ak.default.createElement("div",{className:a},this.renderOptions())}}]),c}(ak.default.Component),b7=a9.default(b6),b8=function(a){bj(c,a);var b=bn(c);function c(){var a;be(this,c);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return bh(bm(a=b.call.apply(b,[this].concat(e))),"state",{dropdownVisible:!1}),bh(bm(a),"renderSelectOptions",function(){for(var b=bA(a.props.minDate),c=bA(a.props.maxDate),d=[];!a3.default(b,c);){var e=aI.default(b);d.push(ak.default.createElement("option",{key:e,value:e},bw(b,a.props.dateFormat,a.props.locale))),b=at.default(b,1)}return d}),bh(bm(a),"onSelectChange",function(b){a.onChange(b.target.value)}),bh(bm(a),"renderSelectMode",function(){return ak.default.createElement("select",{value:aI.default(bA(a.props.date)),className:"react-datepicker__month-year-select",onChange:a.onSelectChange},a.renderSelectOptions())}),bh(bm(a),"renderReadView",function(b){var c=bw(a.props.date,a.props.dateFormat,a.props.locale);return ak.default.createElement("div",{key:"read",style:{visibility:b?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:function(b){return a.toggleDropdown(b)}},ak.default.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),ak.default.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},c))}),bh(bm(a),"renderDropdown",function(){return ak.default.createElement(b7,{key:"dropdown",date:a.props.date,dateFormat:a.props.dateFormat,onChange:a.onChange,onCancel:a.toggleDropdown,minDate:a.props.minDate,maxDate:a.props.maxDate,scrollableMonthYearDropdown:a.props.scrollableMonthYearDropdown,locale:a.props.locale})}),bh(bm(a),"renderScrollMode",function(){var b=a.state.dropdownVisible,c=[a.renderReadView(!b)];return b&&c.unshift(a.renderDropdown()),c}),bh(bm(a),"onChange",function(b){a.toggleDropdown();var c=bu(parseInt(b));bC(a.props.date,c)&&bD(a.props.date,c)||a.props.onChange(c)}),bh(bm(a),"toggleDropdown",function(){return a.setState({dropdownVisible:!a.state.dropdownVisible})}),a}return bg(c,[{key:"render",value:function(){var a;switch(this.props.dropdownMode){case"scroll":a=this.renderScrollMode();break;case"select":a=this.renderSelectMode()}return ak.default.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},a)}}]),c}(ak.default.Component),b9=function(a){bj(c,a);var b=bn(c);function c(){var a;be(this,c);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return bh(bm(a=b.call.apply(b,[this].concat(e))),"dayEl",ak.default.createRef()),bh(bm(a),"handleClick",function(b){!a.isDisabled()&&a.props.onClick&&a.props.onClick(b)}),bh(bm(a),"handleMouseEnter",function(b){!a.isDisabled()&&a.props.onMouseEnter&&a.props.onMouseEnter(b)}),bh(bm(a),"handleOnKeyDown",function(b){" "===b.key&&(b.preventDefault(),b.key="Enter"),a.props.handleOnKeyDown(b)}),bh(bm(a),"isSameDay",function(b){return bF(a.props.day,b)}),bh(bm(a),"isKeyboardSelected",function(){return!a.props.disabledKeyboardNavigation&&!a.isSameDay(a.props.selected)&&a.isSameDay(a.props.preSelection)}),bh(bm(a),"isDisabled",function(){return bM(a.props.day,a.props)}),bh(bm(a),"isExcluded",function(){return bN(a.props.day,a.props)}),bh(bm(a),"getHighLightedClass",function(b){var c=a.props,d=c.day,e=c.highlightDates;if(!e)return!1;var f=bw(d,"MM.dd.yyyy");return e.get(f)}),bh(bm(a),"isInRange",function(){var b=a.props,c=b.day,d=b.startDate,e=b.endDate;return!(!d||!e)&&bH(c,d,e)}),bh(bm(a),"isInSelectingRange",function(){var b,c=a.props,d=c.day,e=c.selectsStart,f=c.selectsEnd,g=c.selectsRange,h=c.selectsDisabledDaysInRange,i=c.startDate,j=c.endDate,k=null!==(b=a.props.selectingDate)&& void 0!==b?b:a.props.preSelection;return!(!(e||f||g)||!k|| !h&&a.isDisabled())&&(e&&j&&(a4.default(k,j)||bG(k,j))?bH(d,k,j):(f&&i&&(a3.default(k,i)||bG(k,i))||!(!g||!i||j|| !a3.default(k,i)&&!bG(k,i)))&&bH(d,i,k))}),bh(bm(a),"isSelectingRangeStart",function(){if(!a.isInSelectingRange())return!1;var b,c=a.props,d=c.day,e=c.startDate,f=c.selectsStart,g=null!==(b=a.props.selectingDate)&& void 0!==b?b:a.props.preSelection;return bF(d,f?g:e)}),bh(bm(a),"isSelectingRangeEnd",function(){if(!a.isInSelectingRange())return!1;var b,c=a.props,d=c.day,e=c.endDate,f=c.selectsEnd,g=null!==(b=a.props.selectingDate)&& void 0!==b?b:a.props.preSelection;return bF(d,f?g:e)}),bh(bm(a),"isRangeStart",function(){var b=a.props,c=b.day,d=b.startDate,e=b.endDate;return!(!d||!e)&&bF(d,c)}),bh(bm(a),"isRangeEnd",function(){var b=a.props,c=b.day,d=b.startDate,e=b.endDate;return!(!d||!e)&&bF(e,c)}),bh(bm(a),"isWeekend",function(){var b=aC.default(a.props.day);return 0===b||6===b}),bh(bm(a),"isAfterMonth",function(){return void 0!==a.props.month&&(a.props.month+1)%12===aF.default(a.props.day)}),bh(bm(a),"isBeforeMonth",function(){return void 0!==a.props.month&&(aF.default(a.props.day)+1)%12===a.props.month}),bh(bm(a),"isCurrentDay",function(){return a.isSameDay(bu())}),bh(bm(a),"isSelected",function(){return a.isSameDay(a.props.selected)}),bh(bm(a),"getClassNames",function(b){var c,d=a.props.dayClassName?a.props.dayClassName(b):void 0;return al.default("react-datepicker__day",d,"react-datepicker__day--"+bw(c=a.props.day,"ddd",void 0),{"react-datepicker__day--disabled":a.isDisabled(),"react-datepicker__day--excluded":a.isExcluded(),"react-datepicker__day--selected":a.isSelected(),"react-datepicker__day--keyboard-selected":a.isKeyboardSelected(),"react-datepicker__day--range-start":a.isRangeStart(),"react-datepicker__day--range-end":a.isRangeEnd(),"react-datepicker__day--in-range":a.isInRange(),"react-datepicker__day--in-selecting-range":a.isInSelectingRange(),"react-datepicker__day--selecting-range-start":a.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":a.isSelectingRangeEnd(),"react-datepicker__day--today":a.isCurrentDay(),"react-datepicker__day--weekend":a.isWeekend(),"react-datepicker__day--outside-month":a.isAfterMonth()||a.isBeforeMonth()},a.getHighLightedClass("react-datepicker__day--highlighted"))}),bh(bm(a),"getAriaLabel",function(){var b=a.props,c=b.day,d=b.ariaLabelPrefixWhenEnabled,e=b.ariaLabelPrefixWhenDisabled,f=a.isDisabled()||a.isExcluded()?void 0===e?"Not available":e:void 0===d?"Choose":d;return"".concat(f," ").concat(bw(c,"PPPP",a.props.locale))}),bh(bm(a),"getTabIndex",function(b,c){var d=b||a.props.selected,e=c||a.props.preSelection;return a.isKeyboardSelected()||a.isSameDay(d)&&bF(e,d)?0:-1}),bh(bm(a),"handleFocusDay",function(){var b=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{},c=!1;0===a.getTabIndex()&&!b.isInputFocused&&a.isSameDay(a.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(c=!0),a.props.inline&&!a.props.shouldFocusDayInline&&(c=!1),a.props.containerRef&&a.props.containerRef.current&&a.props.containerRef.current.contains(document.activeElement)&&document.activeElement.classList.contains("react-datepicker__day")&&(c=!0)),c&&a.dayEl.current.focus({preventScroll:!0})}),bh(bm(a),"renderDayContents",function(){return a.props.monthShowsDuplicateDaysEnd&&a.isAfterMonth()||a.props.monthShowsDuplicateDaysStart&&a.isBeforeMonth()?null:a.props.renderDayContents?a.props.renderDayContents(aD.default(a.props.day),a.props.day):aD.default(a.props.day)}),bh(bm(a),"render",function(){return ak.default.createElement("div",{ref:a.dayEl,className:a.getClassNames(a.props.day),onKeyDown:a.handleOnKeyDown,onClick:a.handleClick,onMouseEnter:a.handleMouseEnter,tabIndex:a.getTabIndex(),"aria-label":a.getAriaLabel(),role:"option","aria-disabled":a.isDisabled(),"aria-current":a.isCurrentDay()?"date":void 0,"aria-selected":a.isSelected()},a.renderDayContents())}),a}return bg(c,[{key:"componentDidMount",value:function(){this.handleFocusDay()}},{key:"componentDidUpdate",value:function(a){this.handleFocusDay(a)}}]),c}(ak.default.Component),ca=function(a){bj(c,a);var b=bn(c);function c(){var a;be(this,c);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return bh(bm(a=b.call.apply(b,[this].concat(e))),"handleClick",function(b){a.props.onClick&&a.props.onClick(b)}),a}return bg(c,[{key:"render",value:function(){var a=this.props,b=a.weekNumber,c=a.ariaLabelPrefix,d={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!a.onClick};return ak.default.createElement("div",{className:al.default(d),"aria-label":"".concat(void 0===c?"week ":c," ").concat(this.props.weekNumber),onClick:this.handleClick},b)}}]),c}(ak.default.Component),cb=function(a){bj(c,a);var b=bn(c);function c(){var a;be(this,c);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return bh(bm(a=b.call.apply(b,[this].concat(e))),"handleDayClick",function(b,c){a.props.onDayClick&&a.props.onDayClick(b,c)}),bh(bm(a),"handleDayMouseEnter",function(b){a.props.onDayMouseEnter&&a.props.onDayMouseEnter(b)}),bh(bm(a),"handleWeekClick",function(b,c,d){"function"==typeof a.props.onWeekSelect&&a.props.onWeekSelect(b,c,d),a.props.shouldCloseOnSelect&&a.props.setOpen(!1)}),bh(bm(a),"formatWeekNumber",function(b){var c,d,e;return a.props.formatWeekNumber?a.props.formatWeekNumber(b):(c=b,e=d&&bJ(d)||bI()&&bJ(bI()),aE.default(c,e?{locale:e}:null))}),bh(bm(a),"renderDays",function(){var b=bz(a.props.day,a.props.locale,a.props.calendarStartDay),c=[],d=a.formatWeekNumber(b);if(a.props.showWeekNumber){var e=a.props.onWeekSelect?a.handleWeekClick.bind(bm(a),b,d):void 0;c.push(ak.default.createElement(ca,{key:"W",weekNumber:d,onClick:e,ariaLabelPrefix:a.props.ariaLabelPrefix}))}return c.concat([0,1,2,3,4,5,6].map(function(c){var d=ar.default(b,c);return ak.default.createElement(b9,{ariaLabelPrefixWhenEnabled:a.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:a.props.disabledDayAriaLabelPrefix,key:d.valueOf(),day:d,month:a.props.month,onClick:a.handleDayClick.bind(bm(a),d),onMouseEnter:a.handleDayMouseEnter.bind(bm(a),d),minDate:a.props.minDate,maxDate:a.props.maxDate,excludeDates:a.props.excludeDates,excludeDateIntervals:a.props.excludeDateIntervals,includeDates:a.props.includeDates,includeDateIntervals:a.props.includeDateIntervals,highlightDates:a.props.highlightDates,selectingDate:a.props.selectingDate,filterDate:a.props.filterDate,preSelection:a.props.preSelection,selected:a.props.selected,selectsStart:a.props.selectsStart,selectsEnd:a.props.selectsEnd,selectsRange:a.props.selectsRange,selectsDisabledDaysInRange:a.props.selectsDisabledDaysInRange,startDate:a.props.startDate,endDate:a.props.endDate,dayClassName:a.props.dayClassName,renderDayContents:a.props.renderDayContents,disabledKeyboardNavigation:a.props.disabledKeyboardNavigation,handleOnKeyDown:a.props.handleOnKeyDown,isInputFocused:a.props.isInputFocused,containerRef:a.props.containerRef,inline:a.props.inline,shouldFocusDayInline:a.props.shouldFocusDayInline,monthShowsDuplicateDaysEnd:a.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:a.props.monthShowsDuplicateDaysStart,locale:a.props.locale})}))}),a}return bg(c,[{key:"render",value:function(){return ak.default.createElement("div",{className:"react-datepicker__week"},this.renderDays())}}],[{key:"defaultProps",get:function(){return{shouldCloseOnSelect:!0}}}]),c}(ak.default.Component),cc=function(a){bj(c,a);var b=bn(c);function c(){var a;be(this,c);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return bh(bm(a=b.call.apply(b,[this].concat(e))),"MONTH_REFS",bo(Array(12)).map(function(){return ak.default.createRef()})),bh(bm(a),"isDisabled",function(b){return bM(b,a.props)}),bh(bm(a),"isExcluded",function(b){return bN(b,a.props)}),bh(bm(a),"handleDayClick",function(b,c){a.props.onDayClick&&a.props.onDayClick(b,c,a.props.orderInDisplay)}),bh(bm(a),"handleDayMouseEnter",function(b){a.props.onDayMouseEnter&&a.props.onDayMouseEnter(b)}),bh(bm(a),"handleMouseLeave",function(){a.props.onMouseLeave&&a.props.onMouseLeave()}),bh(bm(a),"isRangeStartMonth",function(b){var c=a.props,d=c.day,e=c.startDate,f=c.endDate;return!(!e||!f)&&bD(aM.default(d,b),e)}),bh(bm(a),"isRangeStartQuarter",function(b){var c=a.props,d=c.day,e=c.startDate,f=c.endDate;return!(!e||!f)&&bE(aN.default(d,b),e)}),bh(bm(a),"isRangeEndMonth",function(b){var c=a.props,d=c.day,e=c.startDate,f=c.endDate;return!(!e||!f)&&bD(aM.default(d,b),f)}),bh(bm(a),"isRangeEndQuarter",function(b){var c=a.props,d=c.day,e=c.startDate,f=c.endDate;return!(!e||!f)&&bE(aN.default(d,b),f)}),bh(bm(a),"isWeekInMonth",function(b){var c=a.props.day,d=ar.default(b,6);return bD(b,c)||bD(d,c)}),bh(bm(a),"isCurrentMonth",function(a,b){return aH.default(a)===aH.default(bu())&&b===aF.default(bu())}),bh(bm(a),"isSelectedMonth",function(a,b,c){return aF.default(a)===b&&aH.default(a)===aH.default(c)}),bh(bm(a),"isSelectedQuarter",function(a,b,c){return aG.default(a)===b&&aH.default(a)===aH.default(c)}),bh(bm(a),"renderWeeks",function(){for(var b=[],c=a.props.fixedHeight,d=0,e=!1,f=bz(bA(a.props.day),a.props.locale,a.props.calendarStartDay);b.push(ak.default.createElement(cb,{ariaLabelPrefix:a.props.weekAriaLabelPrefix,chooseDayAriaLabelPrefix:a.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:a.props.disabledDayAriaLabelPrefix,key:d,day:f,month:aF.default(a.props.day),onDayClick:a.handleDayClick,onDayMouseEnter:a.handleDayMouseEnter,onWeekSelect:a.props.onWeekSelect,formatWeekNumber:a.props.formatWeekNumber,locale:a.props.locale,minDate:a.props.minDate,maxDate:a.props.maxDate,excludeDates:a.props.excludeDates,excludeDateIntervals:a.props.excludeDateIntervals,includeDates:a.props.includeDates,includeDateIntervals:a.props.includeDateIntervals,inline:a.props.inline,shouldFocusDayInline:a.props.shouldFocusDayInline,highlightDates:a.props.highlightDates,selectingDate:a.props.selectingDate,filterDate:a.props.filterDate,preSelection:a.props.preSelection,selected:a.props.selected,selectsStart:a.props.selectsStart,selectsEnd:a.props.selectsEnd,selectsRange:a.props.selectsRange,selectsDisabledDaysInRange:a.props.selectsDisabledDaysInRange,showWeekNumber:a.props.showWeekNumbers,startDate:a.props.startDate,endDate:a.props.endDate,dayClassName:a.props.dayClassName,setOpen:a.props.setOpen,shouldCloseOnSelect:a.props.shouldCloseOnSelect,disabledKeyboardNavigation:a.props.disabledKeyboardNavigation,renderDayContents:a.props.renderDayContents,handleOnKeyDown:a.props.handleOnKeyDown,isInputFocused:a.props.isInputFocused,containerRef:a.props.containerRef,calendarStartDay:a.props.calendarStartDay,monthShowsDuplicateDaysEnd:a.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:a.props.monthShowsDuplicateDaysStart})),!e;){d++,f=as.default(f,1);var g=c&&d>=6,h=!c&&!a.isWeekInMonth(f);if(g||h){if(!a.props.peekNextMonth)break;e=!0}}return b}),bh(bm(a),"onMonthClick",function(b,c){a.handleDayClick(bA(aM.default(a.props.day,c)),b)}),bh(bm(a),"handleMonthNavigation",function(b,c){a.isDisabled(c)||a.isExcluded(c)||(a.props.setPreSelection(c),a.MONTH_REFS[b].current&&a.MONTH_REFS[b].current.focus())}),bh(bm(a),"onMonthKeyDown",function(b,c){var d=b.key;if(!a.props.disabledKeyboardNavigation)switch(d){case"Enter":a.onMonthClick(b,c),a.props.setPreSelection(a.props.selected);break;case"ArrowRight":a.handleMonthNavigation(11===c?0:c+1,at.default(a.props.preSelection,1));break;case"ArrowLeft":a.handleMonthNavigation(0===c?11:c-1,ax.default(a.props.preSelection,1))}}),bh(bm(a),"onQuarterClick",function(b,c){var d;a.handleDayClick((d=aN.default(a.props.day,c),aX.default(d)),b)}),bh(bm(a),"getMonthClassNames",function(b){var c,d,e,f,g,h,i,j,k,l=a.props,m=l.day,n=l.startDate,o=l.endDate,p=l.selected,q=l.minDate,r=l.maxDate,s=l.preSelection,t=l.monthClassName,u=t?t(m):void 0;return al.default("react-datepicker__month-text","react-datepicker__month-".concat(b),u,{"react-datepicker__month--disabled":(q||r)&&function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},c=b.minDate,d=b.maxDate,e=b.excludeDates,f=b.includeDates,g=b.filterDate;return bO(a,{minDate:c,maxDate:d})||e&&e.some(function(b){return bD(a,b)})||f&&!f.some(function(b){return bD(a,b)})||g&&!g(bu(a))||!1}(aM.default(m,b),a.props),"react-datepicker__month--selected":a.isSelectedMonth(m,b,p),"react-datepicker__month-text--keyboard-selected":aF.default(s)===b,"react-datepicker__month--in-range":(c=n,d=o,e=b,f=m,g=aH.default(c),h=aF.default(c),i=aH.default(d),j=aF.default(d),k=aH.default(f),g===i&&g===k?h<=e&&e<=j:g<i?k===g&&h<=e||k===i&&j>=e||k<i&&k>g:void 0),"react-datepicker__month--range-start":a.isRangeStartMonth(b),"react-datepicker__month--range-end":a.isRangeEndMonth(b),"react-datepicker__month-text--today":a.isCurrentMonth(m,b)})}),bh(bm(a),"getTabIndex",function(b){var c=aF.default(a.props.preSelection);return a.props.disabledKeyboardNavigation||b!==c?"-1":"0"}),bh(bm(a),"getAriaLabel",function(b){var c=a.props,d=c.chooseDayAriaLabelPrefix,e=c.disabledDayAriaLabelPrefix,f=c.day,g=aM.default(f,b),h=a.isDisabled(g)||a.isExcluded(g)?void 0===e?"Not available":e:void 0===d?"Choose":d;return"".concat(h," ").concat(bw(g,"MMMM yyyy"))}),bh(bm(a),"getQuarterClassNames",function(b){var c,d,e,f,g,h,i,j,k,l=a.props,m=l.day,n=l.startDate,o=l.endDate,p=l.selected,q=l.minDate,r=l.maxDate;return al.default("react-datepicker__quarter-text","react-datepicker__quarter-".concat(b),{"react-datepicker__quarter--disabled":(q||r)&&function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},c=b.minDate,d=b.maxDate,e=b.excludeDates,f=b.includeDates,g=b.filterDate;return bO(a,{minDate:c,maxDate:d})||e&&e.some(function(b){return bE(a,b)})||f&&!f.some(function(b){return bE(a,b)})||g&&!g(bu(a))||!1}(aN.default(m,b),a.props),"react-datepicker__quarter--selected":a.isSelectedQuarter(m,b,p),"react-datepicker__quarter--in-range":(c=n,d=o,e=b,f=m,g=aH.default(c),h=aG.default(c),i=aH.default(d),j=aG.default(d),k=aH.default(f),g===i&&g===k?h<=e&&e<=j:g<i?k===g&&h<=e||k===i&&j>=e||k<i&&k>g:void 0),"react-datepicker__quarter--range-start":a.isRangeStartQuarter(b),"react-datepicker__quarter--range-end":a.isRangeEndQuarter(b)})}),bh(bm(a),"renderMonths",function(){var b=a.props,c=b.showFullMonthYearPicker,d=b.showTwoColumnMonthYearPicker,e=b.showFourColumnMonthYearPicker,f=b.locale,g=b.day,h=b.selected;return(e?[[0,1,2,3],[4,5,6,7],[8,9,10,11]]:d?[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]]:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]]).map(function(b,d){return ak.default.createElement("div",{className:"react-datepicker__month-wrapper",key:d},b.map(function(b,d){return ak.default.createElement("div",{ref:a.MONTH_REFS[b],key:d,onClick:function(c){a.onMonthClick(c,b)},onKeyDown:function(c){a.onMonthKeyDown(c,b)},tabIndex:a.getTabIndex(b),className:a.getMonthClassNames(b),role:"option","aria-label":a.getAriaLabel(b),"aria-current":a.isCurrentMonth(g,b)?"date":void 0,"aria-selected":a.isSelectedMonth(g,b,h)},c?bK(b,f):bL(b,f))}))})}),bh(bm(a),"renderQuarters",function(){var b=a.props,c=b.day,d=b.selected;return ak.default.createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map(function(b,e){var f,g;return ak.default.createElement("div",{key:e,role:"option",onClick:function(c){a.onQuarterClick(c,b)},className:a.getQuarterClassNames(b),"aria-selected":a.isSelectedQuarter(c,b,d)},(f=b,g=a.props.locale,bw(aN.default(bu(),f),"QQQ",g)))}))}),bh(bm(a),"getClassNames",function(){var b=a.props;b.day;var c=b.selectingDate,d=b.selectsStart,e=b.selectsEnd,f=b.showMonthYearPicker,g=b.showQuarterYearPicker;return al.default("react-datepicker__month",{"react-datepicker__month--selecting-range":c&&(d||e)},{"react-datepicker__monthPicker":f},{"react-datepicker__quarterPicker":g})}),a}return bg(c,[{key:"render",value:function(){var a=this.props,b=a.showMonthYearPicker,c=a.showQuarterYearPicker,d=a.day,e=a.ariaLabelPrefix;return ak.default.createElement("div",{className:this.getClassNames(),onMouseLeave:this.handleMouseLeave,"aria-label":"".concat(void 0===e?"month ":e," ").concat(bw(d,"yyyy-MM")),role:"listbox"},b?this.renderMonths():c?this.renderQuarters():this.renderWeeks())}}]),c}(ak.default.Component),cd=function(a){bj(c,a);var b=bn(c);function c(){var a;be(this,c);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return bh(bm(a=b.call.apply(b,[this].concat(e))),"state",{height:null}),bh(bm(a),"handleClick",function(b){(a.props.minTime||a.props.maxTime)&&bR(b,a.props)||(a.props.excludeTimes||a.props.includeTimes||a.props.filterTime)&&bQ(b,a.props)||a.props.onChange(b)}),bh(bm(a),"isSelectedTime",function(b,c,d){return a.props.selected&&c===aB.default(b)&&d===aA.default(b)}),bh(bm(a),"liClasses",function(b,c,d){var e=["react-datepicker__time-list-item",a.props.timeClassName?a.props.timeClassName(b,c,d):void 0];return a.isSelectedTime(b,c,d)&&e.push("react-datepicker__time-list-item--selected"),((a.props.minTime||a.props.maxTime)&&bR(b,a.props)||(a.props.excludeTimes||a.props.includeTimes||a.props.filterTime)&&bQ(b,a.props))&&e.push("react-datepicker__time-list-item--disabled"),a.props.injectTimes&&(60*aB.default(b)+aA.default(b))%a.props.intervals!=0&&e.push("react-datepicker__time-list-item--injected"),e.join(" ")}),bh(bm(a),"handleOnKeyDown",function(b,c){" "===b.key&&(b.preventDefault(),b.key="Enter"),"Enter"===b.key&&a.handleClick(c),a.props.handleOnKeyDown(b)}),bh(bm(a),"renderTimes",function(){for(var b,c=[],d=a.props.format?a.props.format:"p",e=a.props.intervals,f=(b=bu(a.props.selected),aU.default(b)),g=1440/e,h=a.props.injectTimes&&a.props.injectTimes.sort(function(a,b){return a-b}),i=a.props.selected||a.props.openToDate||bu(),j=aB.default(i),k=aA.default(i),l=aL.default(aK.default(f,k),j),m=0;m<g;m++){var n=ap.default(f,m*e);if(c.push(n),h){var o=bZ(f,n,m,e,h);c=c.concat(o)}}return c.map(function(b,c){return ak.default.createElement("li",{key:c,onClick:a.handleClick.bind(bm(a),b),className:a.liClasses(b,j,k),ref:function(c){(a4.default(b,l)||bG(b,l))&&(a.centerLi=c)},onKeyDown:function(c){a.handleOnKeyDown(c,b)},tabIndex:"0","aria-selected":a.isSelectedTime(b,j,k)?"true":void 0},bw(b,d,a.props.locale))})}),a}return bg(c,[{key:"componentDidMount",value:function(){this.list.scrollTop=c.calcCenterPosition(this.props.monthRef?this.props.monthRef.clientHeight-this.header.clientHeight:this.list.clientHeight,this.centerLi),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})}},{key:"render",value:function(){var a=this,b=this.state.height;return ak.default.createElement("div",{className:"react-datepicker__time-container ".concat(this.props.todayButton?"react-datepicker__time-container--with-today-button":"")},ak.default.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(this.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(b){a.header=b}},ak.default.createElement("div",{className:"react-datepicker-time__header"},this.props.timeCaption)),ak.default.createElement("div",{className:"react-datepicker__time"},ak.default.createElement("div",{className:"react-datepicker__time-box"},ak.default.createElement("ul",{className:"react-datepicker__time-list",ref:function(b){a.list=b},style:b?{height:b}:{},tabIndex:"0"},this.renderTimes()))))}}],[{key:"defaultProps",get:function(){return{intervals:30,onTimeChange:function(){},todayButton:null,timeCaption:"Time"}}}]),c}(ak.default.Component);bh(cd,"calcCenterPosition",function(a,b){return b.offsetTop-(a/2-b.clientHeight/2)});var ce=function(a){bj(c,a);var b=bn(c);function c(a){var d;return be(this,c),bh(bm(d=b.call(this,a)),"YEAR_REFS",bo(Array(d.props.yearItemNumber)).map(function(){return ak.default.createRef()})),bh(bm(d),"isDisabled",function(a){return bM(a,d.props)}),bh(bm(d),"isExcluded",function(a){return bN(a,d.props)}),bh(bm(d),"updateFocusOnPaginate",function(a){var b=(function(){this.YEAR_REFS[a].current.focus()}).bind(bm(d));window.requestAnimationFrame(b)}),bh(bm(d),"handleYearClick",function(a,b){d.props.onDayClick&&d.props.onDayClick(a,b)}),bh(bm(d),"handleYearNavigation",function(a,b){var c=d.props,e=c.date,f=c.yearItemNumber,g=b_(e,f).startPeriod;d.isDisabled(b)||d.isExcluded(b)||(d.props.setPreSelection(b),a-g== -1?d.updateFocusOnPaginate(f-1):a-g===f?d.updateFocusOnPaginate(0):d.YEAR_REFS[a-g].current.focus())}),bh(bm(d),"isSameDay",function(a,b){return bF(a,b)}),bh(bm(d),"isCurrentYear",function(a){return a===aH.default(bu())}),bh(bm(d),"isKeyboardSelected",function(a){var b=bB(aO.default(d.props.date,a));return!d.props.disabledKeyboardNavigation&&!d.props.inline&&!bF(b,bB(d.props.selected))&&bF(b,bB(d.props.preSelection))}),bh(bm(d),"onYearClick",function(a,b){var c=d.props.date;d.handleYearClick(bB(aO.default(c,b)),a)}),bh(bm(d),"onYearKeyDown",function(a,b){var c=a.key;if(!d.props.disabledKeyboardNavigation)switch(c){case"Enter":d.onYearClick(a,b),d.props.setPreSelection(d.props.selected);break;case"ArrowRight":d.handleYearNavigation(b+1,au.default(d.props.preSelection,1));break;case"ArrowLeft":d.handleYearNavigation(b-1,ay.default(d.props.preSelection,1))}}),bh(bm(d),"getYearClassNames",function(a){var b=d.props,c=b.minDate,e=b.maxDate,f=b.selected;return al.default("react-datepicker__year-text",{"react-datepicker__year-text--selected":a===aH.default(f),"react-datepicker__year-text--disabled":(c||e)&&function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},c=b.minDate,d=b.maxDate,e=new Date(a,0,1);return bO(e,{minDate:c,maxDate:d})||!1}(a,d.props),"react-datepicker__year-text--keyboard-selected":d.isKeyboardSelected(a),"react-datepicker__year-text--today":d.isCurrentYear(a)})}),bh(bm(d),"getYearTabIndex",function(a){return d.props.disabledKeyboardNavigation?"-1":a===aH.default(d.props.preSelection)?"0":"-1"}),d}return bg(c,[{key:"render",value:function(){for(var a=this,b=[],c=this.props,d=b_(c.date,c.yearItemNumber),e=d.startPeriod,f=d.endPeriod,g=function(c){b.push(ak.default.createElement("div",{ref:a.YEAR_REFS[c-e],onClick:function(b){a.onYearClick(b,c)},onKeyDown:function(b){a.onYearKeyDown(b,c)},tabIndex:a.getYearTabIndex(c),className:a.getYearClassNames(c),key:c,"aria-current":a.isCurrentYear(c)?"date":void 0},c))},h=e;h<=f;h++)g(h);return ak.default.createElement("div",{className:"react-datepicker__year"},ak.default.createElement("div",{className:"react-datepicker__year-wrapper"},b))}}]),c}(ak.default.Component),cf=function(a){bj(c,a);var b=bn(c);function c(a){var d;return be(this,c),bh(bm(d=b.call(this,a)),"onTimeChange",function(a){d.setState({time:a});var b=new Date;b.setHours(a.split(":")[0]),b.setMinutes(a.split(":")[1]),d.props.onChange(b)}),bh(bm(d),"renderTimeInput",function(){var a=d.state.time,b=d.props,c=b.date,e=b.timeString,f=b.customTimeInput;return f?ak.default.cloneElement(f,{date:c,value:a,onChange:d.onTimeChange}):ak.default.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",required:!0,value:a,onChange:function(a){d.onTimeChange(a.target.value||e)}})}),d.state={time:d.props.timeString},d}return bg(c,[{key:"render",value:function(){return ak.default.createElement("div",{className:"react-datepicker__input-time-container"},ak.default.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),ak.default.createElement("div",{className:"react-datepicker-time__input-container"},ak.default.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))}}],[{key:"getDerivedStateFromProps",value:function(a,b){return a.timeString!==b.time?{time:a.timeString}:null}}]),c}(ak.default.Component);function cg(a){var b=a.className,c=a.children,d=a.showPopperArrow,e=a.arrowProps;return ak.default.createElement("div",{className:b},d&&ak.default.createElement("div",bi({className:"react-datepicker__triangle"},void 0===e?{}:e)),c)}var ch=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],ci=function(a){bj(c,a);var b=bn(c);function c(a){var d;return be(this,c),bh(bm(d=b.call(this,a)),"handleClickOutside",function(a){d.props.onClickOutside(a)}),bh(bm(d),"setClickOutsideRef",function(){return d.containerRef.current}),bh(bm(d),"handleDropdownFocus",function(a){(function(){var a=((arguments.length>0&& void 0!==arguments[0]?arguments[0]:{}).className||"").split(/\s+/);return ch.some(function(b){return a.indexOf(b)>=0})})(a.target)&&d.props.onDropdownFocus()}),bh(bm(d),"getDateInView",function(){var a=d.props,b=a.preSelection,c=a.selected,e=a.openToDate,f=bW(d.props),g=bX(d.props),h=bu();return e||c||b||(f&&a4.default(h,f)?f:g&&a3.default(h,g)?g:h)}),bh(bm(d),"increaseMonth",function(){d.setState(function(a){var b=a.date;return{date:at.default(b,1)}},function(){return d.handleMonthChange(d.state.date)})}),bh(bm(d),"decreaseMonth",function(){d.setState(function(a){var b=a.date;return{date:ax.default(b,1)}},function(){return d.handleMonthChange(d.state.date)})}),bh(bm(d),"handleDayClick",function(a,b,c){d.props.onSelect(a,b,c),d.props.setPreSelection&&d.props.setPreSelection(a)}),bh(bm(d),"handleDayMouseEnter",function(a){d.setState({selectingDate:a}),d.props.onDayMouseEnter&&d.props.onDayMouseEnter(a)}),bh(bm(d),"handleMonthMouseLeave",function(){d.setState({selectingDate:null}),d.props.onMonthMouseLeave&&d.props.onMonthMouseLeave()}),bh(bm(d),"handleYearChange",function(a){d.props.onYearChange&&d.props.onYearChange(a),d.props.adjustDateOnChange&&(d.props.onSelect&&d.props.onSelect(a),d.props.setOpen&&d.props.setOpen(!0)),d.props.setPreSelection&&d.props.setPreSelection(a)}),bh(bm(d),"handleMonthChange",function(a){d.props.onMonthChange&&d.props.onMonthChange(a),d.props.adjustDateOnChange&&(d.props.onSelect&&d.props.onSelect(a),d.props.setOpen&&d.props.setOpen(!0)),d.props.setPreSelection&&d.props.setPreSelection(a)}),bh(bm(d),"handleMonthYearChange",function(a){d.handleYearChange(a),d.handleMonthChange(a)}),bh(bm(d),"changeYear",function(a){d.setState(function(b){var c=b.date;return{date:aO.default(c,a)}},function(){return d.handleYearChange(d.state.date)})}),bh(bm(d),"changeMonth",function(a){d.setState(function(b){var c=b.date;return{date:aM.default(c,a)}},function(){return d.handleMonthChange(d.state.date)})}),bh(bm(d),"changeMonthYear",function(a){d.setState(function(b){var c=b.date;return{date:aO.default(aM.default(c,aF.default(a)),aH.default(a))}},function(){return d.handleMonthYearChange(d.state.date)})}),bh(bm(d),"header",function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:d.state.date,b=bz(a,d.props.locale,d.props.calendarStartDay),c=[];return d.props.showWeekNumbers&&c.push(ak.default.createElement("div",{key:"W",className:"react-datepicker__day-name"},d.props.weekLabel||"#")),c.concat([0,1,2,3,4,5,6].map(function(a){var c=ar.default(b,a),e=d.formatWeekday(c,d.props.locale),f=d.props.weekDayClassName?d.props.weekDayClassName(c):void 0;return ak.default.createElement("div",{key:a,className:al.default("react-datepicker__day-name",f)},e)}))}),bh(bm(d),"formatWeekday",function(a,b){var c,e,f,g,h,i,j;return d.props.formatWeekDay?(c=a,e=d.props.formatWeekDay,e(bw(c,"EEEE",f=b))):d.props.useWeekdaysShort?(g=a,bw(g,"EEE",h=b)):(i=a,bw(i,"EEEEEE",j=b))}),bh(bm(d),"decreaseYear",function(){d.setState(function(a){var b=a.date;return{date:ay.default(b,d.props.showYearPicker?d.props.yearItemNumber:1)}},function(){return d.handleYearChange(d.state.date)})}),bh(bm(d),"renderPreviousButton",function(){if(!d.props.renderCustomHeader){var a;switch(!0){case d.props.showMonthYearPicker:a=bU(d.state.date,d.props);break;case d.props.showYearPicker:a=function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},c=b.minDate,d=b.yearItemNumber,e=void 0===d?12:d,f=b_(bB(ay.default(a,e)),e).endPeriod,g=c&&aH.default(c);return g&&g>f||!1}(d.state.date,d.props);break;default:a=bS(d.state.date,d.props)}if((d.props.forceShowMonthNavigation||d.props.showDisabledMonthNavigation||!a)&&!d.props.showTimeSelectOnly){var b=["react-datepicker__navigation","react-datepicker__navigation--previous"],c=d.decreaseMonth;(d.props.showMonthYearPicker||d.props.showQuarterYearPicker||d.props.showYearPicker)&&(c=d.decreaseYear),a&&d.props.showDisabledMonthNavigation&&(b.push("react-datepicker__navigation--previous--disabled"),c=null);var e=d.props.showMonthYearPicker||d.props.showQuarterYearPicker||d.props.showYearPicker,f=d.props,g=f.previousMonthButtonLabel,h=f.previousYearButtonLabel,i=d.props,j=i.previousMonthAriaLabel,k=void 0===j?"string"==typeof g?g:"Previous Month":j,l=i.previousYearAriaLabel,m=void 0===l?"string"==typeof h?h:"Previous Year":l;return ak.default.createElement("button",{type:"button",className:b.join(" "),onClick:c,onKeyDown:d.props.handleOnKeyDown,"aria-label":e?m:k},ak.default.createElement("span",{className:"react-datepicker__navigation-icon react-datepicker__navigation-icon--previous"},e?d.props.previousYearButtonLabel:d.props.previousMonthButtonLabel))}}}),bh(bm(d),"increaseYear",function(){d.setState(function(a){var b=a.date;return{date:au.default(b,d.props.showYearPicker?d.props.yearItemNumber:1)}},function(){return d.handleYearChange(d.state.date)})}),bh(bm(d),"renderNextButton",function(){if(!d.props.renderCustomHeader){var a;switch(!0){case d.props.showMonthYearPicker:a=bV(d.state.date,d.props);break;case d.props.showYearPicker:a=function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},c=b.maxDate,d=b.yearItemNumber,e=void 0===d?12:d,f=b_(au.default(a,e),e).startPeriod,g=c&&aH.default(c);return g&&g<f||!1}(d.state.date,d.props);break;default:a=bT(d.state.date,d.props)}if((d.props.forceShowMonthNavigation||d.props.showDisabledMonthNavigation||!a)&&!d.props.showTimeSelectOnly){var b=["react-datepicker__navigation","react-datepicker__navigation--next"];d.props.showTimeSelect&&b.push("react-datepicker__navigation--next--with-time"),d.props.todayButton&&b.push("react-datepicker__navigation--next--with-today-button");var c=d.increaseMonth;(d.props.showMonthYearPicker||d.props.showQuarterYearPicker||d.props.showYearPicker)&&(c=d.increaseYear),a&&d.props.showDisabledMonthNavigation&&(b.push("react-datepicker__navigation--next--disabled"),c=null);var e=d.props.showMonthYearPicker||d.props.showQuarterYearPicker||d.props.showYearPicker,f=d.props,g=f.nextMonthButtonLabel,h=f.nextYearButtonLabel,i=d.props,j=i.nextMonthAriaLabel,k=void 0===j?"string"==typeof g?g:"Next Month":j,l=i.nextYearAriaLabel,m=void 0===l?"string"==typeof h?h:"Next Year":l;return ak.default.createElement("button",{type:"button",className:b.join(" "),onClick:c,onKeyDown:d.props.handleOnKeyDown,"aria-label":e?m:k},ak.default.createElement("span",{className:"react-datepicker__navigation-icon react-datepicker__navigation-icon--next"},e?d.props.nextYearButtonLabel:d.props.nextMonthButtonLabel))}}}),bh(bm(d),"renderCurrentMonth",function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:d.state.date,b=["react-datepicker__current-month"];return d.props.showYearDropdown&&b.push("react-datepicker__current-month--hasYearDropdown"),d.props.showMonthDropdown&&b.push("react-datepicker__current-month--hasMonthDropdown"),d.props.showMonthYearDropdown&&b.push("react-datepicker__current-month--hasMonthYearDropdown"),ak.default.createElement("div",{className:b.join(" ")},bw(a,d.props.dateFormat,d.props.locale))}),bh(bm(d),"renderYearDropdown",function(){var a=arguments.length>0&& void 0!==arguments[0]&&arguments[0];if(d.props.showYearDropdown&&!a)return ak.default.createElement(b2,{adjustDateOnChange:d.props.adjustDateOnChange,date:d.state.date,onSelect:d.props.onSelect,setOpen:d.props.setOpen,dropdownMode:d.props.dropdownMode,onChange:d.changeYear,minDate:d.props.minDate,maxDate:d.props.maxDate,year:aH.default(d.state.date),scrollableYearDropdown:d.props.scrollableYearDropdown,yearDropdownItemNumber:d.props.yearDropdownItemNumber})}),bh(bm(d),"renderMonthDropdown",function(){var a=arguments.length>0&& void 0!==arguments[0]&&arguments[0];if(d.props.showMonthDropdown&&!a)return ak.default.createElement(b5,{dropdownMode:d.props.dropdownMode,locale:d.props.locale,onChange:d.changeMonth,month:aF.default(d.state.date),useShortMonthInDropdown:d.props.useShortMonthInDropdown})}),bh(bm(d),"renderMonthYearDropdown",function(){var a=arguments.length>0&& void 0!==arguments[0]&&arguments[0];if(d.props.showMonthYearDropdown&&!a)return ak.default.createElement(b8,{dropdownMode:d.props.dropdownMode,locale:d.props.locale,dateFormat:d.props.dateFormat,onChange:d.changeMonthYear,minDate:d.props.minDate,maxDate:d.props.maxDate,date:d.state.date,scrollableMonthYearDropdown:d.props.scrollableMonthYearDropdown})}),bh(bm(d),"renderTodayButton",function(){if(d.props.todayButton&&!d.props.showTimeSelectOnly)return ak.default.createElement("div",{className:"react-datepicker__today-button",onClick:function(a){return d.props.onSelect(aU.default(bu()),a)}},d.props.todayButton)}),bh(bm(d),"renderDefaultHeader",function(a){var b=a.monthDate,c=a.i;return ak.default.createElement("div",{className:"react-datepicker__header ".concat(d.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},d.renderCurrentMonth(b),ak.default.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(d.props.dropdownMode),onFocus:d.handleDropdownFocus},d.renderMonthDropdown(0!==c),d.renderMonthYearDropdown(0!==c),d.renderYearDropdown(0!==c)),ak.default.createElement("div",{className:"react-datepicker__day-names"},d.header(b)))}),bh(bm(d),"renderCustomHeader",function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{},b=a.monthDate,c=a.i;if(d.props.showTimeSelect&&!d.state.monthContainer||d.props.showTimeSelectOnly)return null;var e=bS(d.state.date,d.props),f=bT(d.state.date,d.props),g=bU(d.state.date,d.props),h=bV(d.state.date,d.props),i=!d.props.showMonthYearPicker&&!d.props.showQuarterYearPicker&&!d.props.showYearPicker;return ak.default.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:d.props.onDropdownFocus},d.props.renderCustomHeader(bc(bc({},d.state),{},{customHeaderCount:c,monthDate:b,changeMonth:d.changeMonth,changeYear:d.changeYear,decreaseMonth:d.decreaseMonth,increaseMonth:d.increaseMonth,decreaseYear:d.decreaseYear,increaseYear:d.increaseYear,prevMonthButtonDisabled:e,nextMonthButtonDisabled:f,prevYearButtonDisabled:g,nextYearButtonDisabled:h})),i&&ak.default.createElement("div",{className:"react-datepicker__day-names"},d.header(b)))}),bh(bm(d),"renderYearHeader",function(){var a=d.state.date,b=d.props,c=b.showYearPicker,e=b_(a,b.yearItemNumber),f=e.startPeriod,g=e.endPeriod;return ak.default.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},c?"".concat(f," - ").concat(g):aH.default(a))}),bh(bm(d),"renderHeader",function(a){switch(!0){case void 0!==d.props.renderCustomHeader:return d.renderCustomHeader(a);case d.props.showMonthYearPicker||d.props.showQuarterYearPicker||d.props.showYearPicker:return d.renderYearHeader(a);default:return d.renderDefaultHeader(a)}}),bh(bm(d),"renderMonths",function(){if(!d.props.showTimeSelectOnly&&!d.props.showYearPicker){for(var a=[],b=d.props.showPreviousMonths?d.props.monthsShown-1:0,c=ax.default(d.state.date,b),e=0;e<d.props.monthsShown;++e){var f=e-d.props.monthSelectedIn,g=at.default(c,f),h="month-".concat(e),i=e<d.props.monthsShown-1,j=e>0;a.push(ak.default.createElement("div",{key:h,ref:function(a){d.monthContainer=a},className:"react-datepicker__month-container"},d.renderHeader({monthDate:g,i:e}),ak.default.createElement(cc,{chooseDayAriaLabelPrefix:d.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:d.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:d.props.weekAriaLabelPrefix,ariaLabelPrefix:d.props.monthAriaLabelPrefix,onChange:d.changeMonthYear,day:g,dayClassName:d.props.dayClassName,calendarStartDay:d.props.calendarStartDay,monthClassName:d.props.monthClassName,onDayClick:d.handleDayClick,handleOnKeyDown:d.props.handleOnDayKeyDown,onDayMouseEnter:d.handleDayMouseEnter,onMouseLeave:d.handleMonthMouseLeave,onWeekSelect:d.props.onWeekSelect,orderInDisplay:e,formatWeekNumber:d.props.formatWeekNumber,locale:d.props.locale,minDate:d.props.minDate,maxDate:d.props.maxDate,excludeDates:d.props.excludeDates,excludeDateIntervals:d.props.excludeDateIntervals,highlightDates:d.props.highlightDates,selectingDate:d.state.selectingDate,includeDates:d.props.includeDates,includeDateIntervals:d.props.includeDateIntervals,inline:d.props.inline,shouldFocusDayInline:d.props.shouldFocusDayInline,fixedHeight:d.props.fixedHeight,filterDate:d.props.filterDate,preSelection:d.props.preSelection,setPreSelection:d.props.setPreSelection,selected:d.props.selected,selectsStart:d.props.selectsStart,selectsEnd:d.props.selectsEnd,selectsRange:d.props.selectsRange,selectsDisabledDaysInRange:d.props.selectsDisabledDaysInRange,showWeekNumbers:d.props.showWeekNumbers,startDate:d.props.startDate,endDate:d.props.endDate,peekNextMonth:d.props.peekNextMonth,setOpen:d.props.setOpen,shouldCloseOnSelect:d.props.shouldCloseOnSelect,renderDayContents:d.props.renderDayContents,disabledKeyboardNavigation:d.props.disabledKeyboardNavigation,showMonthYearPicker:d.props.showMonthYearPicker,showFullMonthYearPicker:d.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:d.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:d.props.showFourColumnMonthYearPicker,showYearPicker:d.props.showYearPicker,showQuarterYearPicker:d.props.showQuarterYearPicker,isInputFocused:d.props.isInputFocused,containerRef:d.containerRef,monthShowsDuplicateDaysEnd:i,monthShowsDuplicateDaysStart:j})))}return a}}),bh(bm(d),"renderYears",function(){if(!d.props.showTimeSelectOnly)return d.props.showYearPicker?ak.default.createElement("div",{className:"react-datepicker__year--container"},d.renderHeader(),ak.default.createElement(ce,bi({onDayClick:d.handleDayClick,date:d.state.date},d.props))):void 0}),bh(bm(d),"renderTimeSection",function(){if(d.props.showTimeSelect&&(d.state.monthContainer||d.props.showTimeSelectOnly))return ak.default.createElement(cd,{selected:d.props.selected,openToDate:d.props.openToDate,onChange:d.props.onTimeChange,timeClassName:d.props.timeClassName,format:d.props.timeFormat,includeTimes:d.props.includeTimes,intervals:d.props.timeIntervals,minTime:d.props.minTime,maxTime:d.props.maxTime,excludeTimes:d.props.excludeTimes,filterTime:d.props.filterTime,timeCaption:d.props.timeCaption,todayButton:d.props.todayButton,showMonthDropdown:d.props.showMonthDropdown,showMonthYearDropdown:d.props.showMonthYearDropdown,showYearDropdown:d.props.showYearDropdown,withPortal:d.props.withPortal,monthRef:d.state.monthContainer,injectTimes:d.props.injectTimes,locale:d.props.locale,handleOnKeyDown:d.props.handleOnKeyDown,showTimeSelectOnly:d.props.showTimeSelectOnly})}),bh(bm(d),"renderInputTimeSection",function(){var a=new Date(d.props.selected),b=bv(a)&&Boolean(d.props.selected)?"".concat(b$(a.getHours()),":").concat(b$(a.getMinutes())):"";if(d.props.showTimeInput)return ak.default.createElement(cf,{date:a,timeString:b,timeInputLabel:d.props.timeInputLabel,onChange:d.props.onTimeChange,customTimeInput:d.props.customTimeInput})}),d.containerRef=ak.default.createRef(),d.state={date:d.getDateInView(),selectingDate:null,monthContainer:null},d}return bg(c,[{key:"componentDidMount",value:function(){this.props.showTimeSelect&&(this.assignMonthContainer=void this.setState({monthContainer:this.monthContainer}))}},{key:"componentDidUpdate",value:function(a){this.props.preSelection&&!bF(this.props.preSelection,a.preSelection)?this.setState({date:this.props.preSelection}):this.props.openToDate&&!bF(this.props.openToDate,a.openToDate)&&this.setState({date:this.props.openToDate})}},{key:"render",value:function(){var a=this.props.container||cg;return ak.default.createElement("div",{ref:this.containerRef},ak.default.createElement(a,{className:al.default("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showPopperArrow:this.props.showPopperArrow,arrowProps:this.props.arrowProps},this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.props.children))}}],[{key:"defaultProps",get:function(){return{onDropdownFocus:function(){},monthsShown:1,monthSelectedIn:0,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",customTimeInput:null,yearItemNumber:12}}}]),c}(ak.default.Component),cj=function(a){bj(c,a);var b=bn(c);function c(a){var d;return be(this,c),(d=b.call(this,a)).el=document.createElement("div"),d}return bg(c,[{key:"componentDidMount",value:function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.portalRoot.removeChild(this.el)}},{key:"render",value:function(){return ba.default.createPortal(this.props.children,this.el)}}]),c}(ak.default.Component),ck=function(a){return!a.disabled&& -1!==a.tabIndex},cl=function(a){bj(c,a);var b=bn(c);function c(a){var d;return be(this,c),bh(bm(d=b.call(this,a)),"getTabChildren",function(){return Array.prototype.slice.call(d.tabLoopRef.current.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(ck)}),bh(bm(d),"handleFocusStart",function(a){var b=d.getTabChildren();b&&b.length>1&&b[b.length-1].focus()}),bh(bm(d),"handleFocusEnd",function(a){var b=d.getTabChildren();b&&b.length>1&&b[0].focus()}),d.tabLoopRef=ak.default.createRef(),d}return bg(c,[{key:"render",value:function(){return this.props.enableTabLoop?ak.default.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},ak.default.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:"0",onFocus:this.handleFocusStart}),this.props.children,ak.default.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:"0",onFocus:this.handleFocusEnd})):this.props.children}}],[{key:"defaultProps",get:function(){return{enableTabLoop:!0}}}]),c}(ak.default.Component),cm=function(a){bj(c,a);var b=bn(c);function c(){return be(this,c),b.apply(this,arguments)}return bg(c,[{key:"render",value:function(){var a,b=this.props,c=b.className,d=b.wrapperClassName,e=b.hidePopper,f=b.popperComponent,g=b.popperModifiers,h=b.popperPlacement,i=b.popperProps,j=b.targetComponent,k=b.enableTabLoop,l=b.popperOnKeyDown,m=b.portalId,n=b.portalHost;if(!e){var o=al.default("react-datepicker-popper",c);a=ak.default.createElement(ai.Popper,bi({modifiers:g,placement:h},i),function(a){var b=a.ref,c=a.style,d=a.placement,e=a.arrowProps;return ak.default.createElement(cl,{enableTabLoop:k},ak.default.createElement("div",{ref:b,style:c,className:o,"data-placement":d,onKeyDown:l},ak.default.cloneElement(f,{arrowProps:e})))})}this.props.popperContainer&&(a=ak.default.createElement(this.props.popperContainer,{},a)),m&&!e&&(a=ak.default.createElement(cj,{portalId:m,portalHost:n},a));var p=al.default("react-datepicker-wrapper",d);return ak.default.createElement(ai.Manager,{className:"react-datepicker-manager"},ak.default.createElement(ai.Reference,null,function(a){var b=a.ref;return ak.default.createElement("div",{ref:b,className:p},j)}),a)}}],[{key:"defaultProps",get:function(){return{hidePopper:!0,popperModifiers:[],popperProps:{},popperPlacement:"bottom-start"}}}]),c}(ak.default.Component),cn="react-datepicker-ignore-onclickoutside",co=a9.default(ci),cp="Date input not valid.",cq=function(a){bj(c,a);var b=bn(c);function c(a){var d;return be(this,c),bh(bm(d=b.call(this,a)),"getPreSelection",function(){return d.props.openToDate?d.props.openToDate:d.props.selectsEnd&&d.props.startDate?d.props.startDate:d.props.selectsStart&&d.props.endDate?d.props.endDate:bu()}),bh(bm(d),"calcInitialState",function(){var a,b=d.getPreSelection(),c=bW(d.props),e=bX(d.props),f=c&&a4.default(b,aU.default(c))?c:e&&a3.default(b,aZ.default(e))?e:b;return{open:d.props.startOpen||!1,preventFocus:!1,preSelection:null!==(a=d.props.selectsRange?d.props.startDate:d.props.selected)&& void 0!==a?a:f,highlightDates:bY(d.props.highlightDates),focused:!1,shouldFocusDayInline:!1}}),bh(bm(d),"clearPreventFocusTimeout",function(){d.preventFocusTimeout&&clearTimeout(d.preventFocusTimeout)}),bh(bm(d),"setFocus",function(){d.input&&d.input.focus&&d.input.focus({preventScroll:!0})}),bh(bm(d),"setBlur",function(){d.input&&d.input.blur&&d.input.blur(),d.cancelFocusInput()}),bh(bm(d),"setOpen",function(a){var b=arguments.length>1&& void 0!==arguments[1]&&arguments[1];d.setState({open:a,preSelection:a&&d.state.open?d.state.preSelection:d.calcInitialState().preSelection,lastPreSelectChange:cs},function(){a||d.setState(function(a){return{focused:!!b&&a.focused}},function(){b||d.setBlur(),d.setState({inputValue:null})})})}),bh(bm(d),"inputOk",function(){return am.default(d.state.preSelection)}),bh(bm(d),"isCalendarOpen",function(){return void 0===d.props.open?d.state.open&&!d.props.disabled&&!d.props.readOnly:d.props.open}),bh(bm(d),"handleFocus",function(a){d.state.preventFocus||(d.props.onFocus(a),d.props.preventOpenOnFocus||d.props.readOnly||d.setOpen(!0)),d.setState({focused:!0})}),bh(bm(d),"cancelFocusInput",function(){clearTimeout(d.inputFocusTimeout),d.inputFocusTimeout=null}),bh(bm(d),"deferFocusInput",function(){d.cancelFocusInput(),d.inputFocusTimeout=setTimeout(function(){return d.setFocus()},1)}),bh(bm(d),"handleDropdownFocus",function(){d.cancelFocusInput()}),bh(bm(d),"handleBlur",function(a){(!d.state.open||d.props.withPortal||d.props.showTimeInput)&&d.props.onBlur(a),d.setState({focused:!1})}),bh(bm(d),"handleCalendarClickOutside",function(a){d.props.inline||d.setOpen(!1),d.props.onClickOutside(a),d.props.withPortal&&a.preventDefault()}),bh(bm(d),"handleChange",function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var e=b[0];if(!d.props.onChangeRaw||(d.props.onChangeRaw.apply(bm(d),b),"function"==typeof e.isDefaultPrevented&&!e.isDefaultPrevented())){d.setState({inputValue:e.target.value,lastPreSelectChange:cr});var f,g,h,i,j,k,l,m,n=(f=e.target.value,g=d.props.dateFormat,h=d.props.locale,i=d.props.strictParsing,j=d.props.minDate,k=null,l=bJ(h)||bJ(bI()),m=!0,Array.isArray(g)?(g.forEach(function(a){var b=a7.default(f,a,new Date,{locale:l});i&&(m=bv(b,j)&&f===bw(b,a,h)),bv(b,j)&&m&&(k=b)}),k):(k=a7.default(f,g,new Date,{locale:l}),i?m=bv(k)&&f===bw(k,g,h):bv(k)||(g=g.match(bt).map(function(a){var b=a[0];return"p"===b||"P"===b?l?(0,bs[b])(a,l.formatLong):b:a}).join(""),f.length>0&&(k=a7.default(f,g.slice(0,f.length),new Date)),bv(k)||(k=new Date(f))),bv(k)&&m?k:null));!n&&e.target.value||d.setSelected(n,e,!0)}}),bh(bm(d),"handleSelect",function(a,b,c){if(d.setState({preventFocus:!0},function(){return d.preventFocusTimeout=setTimeout(function(){return d.setState({preventFocus:!1})},50),d.preventFocusTimeout}),d.props.onChangeRaw&&d.props.onChangeRaw(b),d.setSelected(a,b,!1,c),!d.props.shouldCloseOnSelect||d.props.showTimeSelect)d.setPreSelection(a);else if(!d.props.inline){d.props.selectsRange||d.setOpen(!1);var e=d.props,f=e.startDate,g=e.endDate;!f||g||a4.default(a,f)||d.setOpen(!1)}}),bh(bm(d),"setSelected",function(a,b,c,e){var f=a;if(null===f||!bM(f,d.props)){var g=d.props,h=g.onChange,i=g.selectsRange,j=g.startDate,k=g.endDate;if(!bG(d.props.selected,f)||d.props.allowSameDay||i){if(null!==f&&(!d.props.selected||c&&(d.props.showTimeSelect||d.props.showTimeSelectOnly||d.props.showTimeInput)||(f=by(f,{hour:aB.default(d.props.selected),minute:aA.default(d.props.selected),second:az.default(d.props.selected)})),d.props.inline||d.setState({preSelection:f}),d.props.focusSelectedMonth||d.setState({monthSelectedIn:e})),i){var l=j&&!k,m=j&&k;j||k?l&&h(a4.default(f,j)?[f,null]:[j,f],b):h([f,null],b),m&&h([f,null],b)}else h(f,b)}c||(d.props.onSelect(f,b),d.setState({inputValue:null}))}}),bh(bm(d),"setPreSelection",function(a){var b=void 0!==d.props.minDate,c=void 0!==d.props.maxDate,e=!0;if(a){var f=aU.default(a);if(b&&c)e=bH(a,d.props.minDate,d.props.maxDate);else if(b){var g=aU.default(d.props.minDate);e=a3.default(a,g)||bG(f,g)}else if(c){var h=aZ.default(d.props.maxDate);e=a4.default(a,h)||bG(f,h)}}e&&d.setState({preSelection:a})}),bh(bm(d),"handleTimeChange",function(a){var b=by(d.props.selected?d.props.selected:d.getPreSelection(),{hour:aB.default(a),minute:aA.default(a)});d.setState({preSelection:b}),d.props.onChange(b),d.props.shouldCloseOnSelect&&d.setOpen(!1),d.props.showTimeInput&&d.setOpen(!0),d.setState({inputValue:null})}),bh(bm(d),"onInputClick",function(){d.props.disabled||d.props.readOnly||d.setOpen(!0),d.props.onInputClick()}),bh(bm(d),"onInputKeyDown",function(a){d.props.onKeyDown(a);var b=a.key;if(d.state.open||d.props.inline||d.props.preventOpenOnFocus){if(d.state.open){if("ArrowDown"===b||"ArrowUp"===b){a.preventDefault();var c=d.calendar.componentNode&&d.calendar.componentNode.querySelector('.react-datepicker__day[tabindex="0"]');return void(c&&c.focus({preventScroll:!0}))}var e=bu(d.state.preSelection);"Enter"===b?(a.preventDefault(),d.inputOk()&&d.state.lastPreSelectChange===cs?(d.handleSelect(e,a),d.props.shouldCloseOnSelect||d.setPreSelection(e)):d.setOpen(!1)):"Escape"===b&&(a.preventDefault(),d.setOpen(!1)),d.inputOk()||d.props.onInputError({code:1,msg:cp})}}else"ArrowDown"!==b&&"ArrowUp"!==b&&"Enter"!==b||d.onInputClick()}),bh(bm(d),"onDayKeyDown",function(a){d.props.onKeyDown(a);var b,c=a.key,e=bu(d.state.preSelection);if("Enter"===c)a.preventDefault(),d.handleSelect(e,a),d.props.shouldCloseOnSelect||d.setPreSelection(e);else if("Escape"===c)a.preventDefault(),d.setOpen(!1),d.inputOk()||d.props.onInputError({code:1,msg:cp});else if(!d.props.disabledKeyboardNavigation){switch(c){case"ArrowLeft":b=av.default(e,1);break;case"ArrowRight":b=ar.default(e,1);break;case"ArrowUp":b=aw.default(e,1);break;case"ArrowDown":b=as.default(e,1);break;case"PageUp":b=ax.default(e,1);break;case"PageDown":b=at.default(e,1);break;case"Home":b=ay.default(e,1);break;case"End":b=au.default(e,1)}if(!b)return void(d.props.onInputError&&d.props.onInputError({code:1,msg:cp}));if(a.preventDefault(),d.setState({lastPreSelectChange:cs}),d.props.adjustDateOnChange&&d.setSelected(b),d.setPreSelection(b),d.props.inline){var f=aF.default(e),g=aF.default(b),h=aH.default(e),i=aH.default(b);f!==g||h!==i?d.setState({shouldFocusDayInline:!0}):d.setState({shouldFocusDayInline:!1})}}}),bh(bm(d),"onPopperKeyDown",function(a){"Escape"===a.key&&(a.preventDefault(),d.setState({preventFocus:!0},function(){d.setOpen(!1),setTimeout(function(){d.setFocus(),d.setState({preventFocus:!1})})}))}),bh(bm(d),"onClearClick",function(a){a&&a.preventDefault&&a.preventDefault(),d.props.selectsRange?d.props.onChange([null,null],a):d.props.onChange(null,a),d.setState({inputValue:null})}),bh(bm(d),"clear",function(){d.onClearClick()}),bh(bm(d),"onScroll",function(a){"boolean"==typeof d.props.closeOnScroll&&d.props.closeOnScroll?a.target!==document&&a.target!==document.documentElement&&a.target!==document.body||d.setOpen(!1):"function"==typeof d.props.closeOnScroll&&d.props.closeOnScroll(a)&&d.setOpen(!1)}),bh(bm(d),"renderCalendar",function(){return d.props.inline||d.isCalendarOpen()?ak.default.createElement(co,{ref:function(a){d.calendar=a},locale:d.props.locale,calendarStartDay:d.props.calendarStartDay,chooseDayAriaLabelPrefix:d.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:d.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:d.props.weekAriaLabelPrefix,monthAriaLabelPrefix:d.props.monthAriaLabelPrefix,adjustDateOnChange:d.props.adjustDateOnChange,setOpen:d.setOpen,shouldCloseOnSelect:d.props.shouldCloseOnSelect,dateFormat:d.props.dateFormatCalendar,useWeekdaysShort:d.props.useWeekdaysShort,formatWeekDay:d.props.formatWeekDay,dropdownMode:d.props.dropdownMode,selected:d.props.selected,preSelection:d.state.preSelection,onSelect:d.handleSelect,onWeekSelect:d.props.onWeekSelect,openToDate:d.props.openToDate,minDate:d.props.minDate,maxDate:d.props.maxDate,selectsStart:d.props.selectsStart,selectsEnd:d.props.selectsEnd,selectsRange:d.props.selectsRange,startDate:d.props.startDate,endDate:d.props.endDate,excludeDates:d.props.excludeDates,excludeDateIntervals:d.props.excludeDateIntervals,filterDate:d.props.filterDate,onClickOutside:d.handleCalendarClickOutside,formatWeekNumber:d.props.formatWeekNumber,highlightDates:d.state.highlightDates,includeDates:d.props.includeDates,includeDateIntervals:d.props.includeDateIntervals,includeTimes:d.props.includeTimes,injectTimes:d.props.injectTimes,inline:d.props.inline,shouldFocusDayInline:d.state.shouldFocusDayInline,peekNextMonth:d.props.peekNextMonth,showMonthDropdown:d.props.showMonthDropdown,showPreviousMonths:d.props.showPreviousMonths,useShortMonthInDropdown:d.props.useShortMonthInDropdown,showMonthYearDropdown:d.props.showMonthYearDropdown,showWeekNumbers:d.props.showWeekNumbers,showYearDropdown:d.props.showYearDropdown,withPortal:d.props.withPortal,forceShowMonthNavigation:d.props.forceShowMonthNavigation,showDisabledMonthNavigation:d.props.showDisabledMonthNavigation,scrollableYearDropdown:d.props.scrollableYearDropdown,scrollableMonthYearDropdown:d.props.scrollableMonthYearDropdown,todayButton:d.props.todayButton,weekLabel:d.props.weekLabel,outsideClickIgnoreClass:cn,fixedHeight:d.props.fixedHeight,monthsShown:d.props.monthsShown,monthSelectedIn:d.state.monthSelectedIn,onDropdownFocus:d.handleDropdownFocus,onMonthChange:d.props.onMonthChange,onYearChange:d.props.onYearChange,dayClassName:d.props.dayClassName,weekDayClassName:d.props.weekDayClassName,monthClassName:d.props.monthClassName,timeClassName:d.props.timeClassName,showTimeSelect:d.props.showTimeSelect,showTimeSelectOnly:d.props.showTimeSelectOnly,onTimeChange:d.handleTimeChange,timeFormat:d.props.timeFormat,timeIntervals:d.props.timeIntervals,minTime:d.props.minTime,maxTime:d.props.maxTime,excludeTimes:d.props.excludeTimes,filterTime:d.props.filterTime,timeCaption:d.props.timeCaption,className:d.props.calendarClassName,container:d.props.calendarContainer,yearItemNumber:d.props.yearItemNumber,yearDropdownItemNumber:d.props.yearDropdownItemNumber,previousMonthAriaLabel:d.props.previousMonthAriaLabel,previousMonthButtonLabel:d.props.previousMonthButtonLabel,nextMonthAriaLabel:d.props.nextMonthAriaLabel,nextMonthButtonLabel:d.props.nextMonthButtonLabel,previousYearAriaLabel:d.props.previousYearAriaLabel,previousYearButtonLabel:d.props.previousYearButtonLabel,nextYearAriaLabel:d.props.nextYearAriaLabel,nextYearButtonLabel:d.props.nextYearButtonLabel,timeInputLabel:d.props.timeInputLabel,disabledKeyboardNavigation:d.props.disabledKeyboardNavigation,renderCustomHeader:d.props.renderCustomHeader,popperProps:d.props.popperProps,renderDayContents:d.props.renderDayContents,onDayMouseEnter:d.props.onDayMouseEnter,onMonthMouseLeave:d.props.onMonthMouseLeave,selectsDisabledDaysInRange:d.props.selectsDisabledDaysInRange,showTimeInput:d.props.showTimeInput,showMonthYearPicker:d.props.showMonthYearPicker,showFullMonthYearPicker:d.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:d.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:d.props.showFourColumnMonthYearPicker,showYearPicker:d.props.showYearPicker,showQuarterYearPicker:d.props.showQuarterYearPicker,showPopperArrow:d.props.showPopperArrow,excludeScrollbar:d.props.excludeScrollbar,handleOnKeyDown:d.props.onKeyDown,handleOnDayKeyDown:d.onDayKeyDown,isInputFocused:d.state.focused,customTimeInput:d.props.customTimeInput,setPreSelection:d.setPreSelection},d.props.children):null}),bh(bm(d),"renderDateInput",function(){var a,b=al.default(d.props.className,bh({},cn,d.state.open)),c=d.props.customInput||ak.default.createElement("input",{type:"text"}),e=d.props.customInputRef||"ref",f="string"==typeof d.props.value?d.props.value:"string"==typeof d.state.inputValue?d.state.inputValue:d.props.selectsRange?function(a,b,c){if(!a)return"";var d=bx(a,c),e=b?bx(b,c):"";return"".concat(d," - ").concat(e)}(d.props.startDate,d.props.endDate,d.props):bx(d.props.selected,d.props);return ak.default.cloneElement(c,(bh(a={},e,function(a){d.input=a}),bh(a,"value",f),bh(a,"onBlur",d.handleBlur),bh(a,"onChange",d.handleChange),bh(a,"onClick",d.onInputClick),bh(a,"onFocus",d.handleFocus),bh(a,"onKeyDown",d.onInputKeyDown),bh(a,"id",d.props.id),bh(a,"name",d.props.name),bh(a,"autoFocus",d.props.autoFocus),bh(a,"placeholder",d.props.placeholderText),bh(a,"disabled",d.props.disabled),bh(a,"autoComplete",d.props.autoComplete),bh(a,"className",al.default(c.props.className,b)),bh(a,"title",d.props.title),bh(a,"readOnly",d.props.readOnly),bh(a,"required",d.props.required),bh(a,"tabIndex",d.props.tabIndex),bh(a,"aria-describedby",d.props.ariaDescribedBy),bh(a,"aria-invalid",d.props.ariaInvalid),bh(a,"aria-labelledby",d.props.ariaLabelledBy),bh(a,"aria-required",d.props.ariaRequired),a))}),bh(bm(d),"renderClearButton",function(){var a=d.props,b=a.isClearable,c=a.selected,e=a.startDate,f=a.endDate,g=a.clearButtonTitle,h=a.clearButtonClassName,i=a.ariaLabelClose;return b&&(null!=c||null!=e||null!=f)?ak.default.createElement("button",{type:"button",className:"react-datepicker__close-icon ".concat(void 0===h?"":h).trim(),"aria-label":void 0===i?"Close":i,onClick:d.onClearClick,title:g,tabIndex:-1}):null}),d.state=d.calcInitialState(),d}return bg(c,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll,!0)}},{key:"componentDidUpdate",value:function(a,b){var c,d;a.inline&&(c=a.selected,d=this.props.selected,c&&d?aF.default(c)!==aF.default(d)||aH.default(c)!==aH.default(d):c!==d)&&this.setPreSelection(this.props.selected),void 0!==this.state.monthSelectedIn&&a.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),a.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:bY(this.props.highlightDates)}),b.focused||bG(a.selected,this.props.selected)||this.setState({inputValue:null}),b.open!==this.state.open&&(!1===b.open&& !0===this.state.open&&this.props.onCalendarOpen(),!0===b.open&& !1===this.state.open&&this.props.onCalendarClose())}},{key:"componentWillUnmount",value:function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0)}},{key:"renderInputContainer",value:function(){return ak.default.createElement("div",{className:"react-datepicker__input-container"},this.renderDateInput(),this.renderClearButton())}},{key:"render",value:function(){var a=this.renderCalendar();if(this.props.inline)return a;if(this.props.withPortal){var b=this.state.open?ak.default.createElement("div",{className:"react-datepicker__portal"},a):null;return this.state.open&&this.props.portalId&&(b=ak.default.createElement(cj,{portalId:this.props.portalId,portalHost:this.props.portalHost},b)),ak.default.createElement("div",null,this.renderInputContainer(),b)}return ak.default.createElement(cm,{className:this.props.popperClassName,wrapperClassName:this.props.wrapperClassName,hidePopper:!this.isCalendarOpen(),portalId:this.props.portalId,portalHost:this.props.portalHost,popperModifiers:this.props.popperModifiers,targetComponent:this.renderInputContainer(),popperContainer:this.props.popperContainer,popperComponent:a,popperPlacement:this.props.popperPlacement,popperProps:this.props.popperProps,popperOnKeyDown:this.onPopperKeyDown,enableTabLoop:this.props.enableTabLoop})}}],[{key:"defaultProps",get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",onChange:function(){},disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",onFocus:function(){},onBlur:function(){},onKeyDown:function(){},onInputClick:function(){},onSelect:function(){},onClickOutside:function(){},onMonthChange:function(){},onCalendarOpen:function(){},onCalendarClose:function(){},preventOpenOnFocus:!1,onYearChange:function(){},onInputError:function(){},monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,strictParsing:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:12,renderDayContents:function(a){return a},focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0}}}]),c}(ak.default.Component),cr="input",cs="navigate";a.CalendarContainer=cg,a.default=cq,a.getDefaultLocale=bI,a.registerLocale=function(a,b){var c="undefined"!=typeof window?window:globalThis;c.__localeData__||(c.__localeData__={}),c.__localeData__[a]=b},a.setDefaultLocale=function(a){("undefined"!=typeof window?window:globalThis).__localeId__=a},Object.defineProperty(a,"__esModule",{value:!0})})},69590:function(a){var b="undefined"!=typeof Element,c="function"==typeof Map,d="function"==typeof Set,e="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function f(a,g){if(a===g)return!0;if(a&&g&&"object"==typeof a&&"object"==typeof g){var h,i,j,k;if(a.constructor!==g.constructor)return!1;if(Array.isArray(a)){if((h=a.length)!=g.length)return!1;for(i=h;0!=i--;)if(!f(a[i],g[i]))return!1;return!0}if(c&&a instanceof Map&&g instanceof Map){if(a.size!==g.size)return!1;for(k=a.entries();!(i=k.next()).done;)if(!g.has(i.value[0]))return!1;for(k=a.entries();!(i=k.next()).done;)if(!f(i.value[1],g.get(i.value[0])))return!1;return!0}if(d&&a instanceof Set&&g instanceof Set){if(a.size!==g.size)return!1;for(k=a.entries();!(i=k.next()).done;)if(!g.has(i.value[0]))return!1;return!0}if(e&&ArrayBuffer.isView(a)&&ArrayBuffer.isView(g)){if((h=a.length)!=g.length)return!1;for(i=h;0!=i--;)if(a[i]!==g[i])return!1;return!0}if(a.constructor===RegExp)return a.source===g.source&&a.flags===g.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===g.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===g.toString();if((h=(j=Object.keys(a)).length)!==Object.keys(g).length)return!1;for(i=h;0!=i--;)if(!Object.prototype.hasOwnProperty.call(g,j[i]))return!1;if(b&&a instanceof Element)return!1;for(i=h;0!=i--;)if(("_owner"!==j[i]&&"__v"!==j[i]&&"__o"!==j[i]||!a.$$typeof)&&!f(a[j[i]],g[j[i]]))return!1;return!0}return a!=a&&g!=g}a.exports=function(a,b){try{return f(a,b)}catch(c){if((c.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw c}}},58949:function(a,b,c){"use strict";c.r(b),c.d(b,{IGNORE_CLASS_NAME:function(){return p}});var d,e=c(67294),f=c(73935);function g(a,b){return(g=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function h(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function i(a,b,c){return a===b||(a.correspondingElement?a.correspondingElement.classList.contains(c):a.classList.contains(c))}var j,k=function(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}}),c=function(){};return window.addEventListener("testPassiveEventSupport",c,b),window.removeEventListener("testPassiveEventSupport",c,b),a}},l=(void 0===j&&(j=0),function(){return++j}),m={},n={},o=["touchstart","touchmove"],p="ignore-react-onclickoutside";function q(a,b){var c=null;return -1!==o.indexOf(b)&&d&&(c={passive:!a.props.preventDefault}),c}b.default=function(a,b){var c,j,o=a.displayName||a.name||"Component";return j=c=function(c){function j(a){var e;return(e=c.call(this,a)||this).__outsideClickHandler=function(a){if("function"==typeof e.__clickOutsideHandlerProp){e.__clickOutsideHandlerProp(a);return}var b=e.getInstance();if("function"==typeof b.props.handleClickOutside){b.props.handleClickOutside(a);return}if("function"==typeof b.handleClickOutside){b.handleClickOutside(a);return}throw Error("WrappedComponent: "+o+" lacks a handleClickOutside(event) function for processing outside click events.")},e.__getComponentNode=function(){var a=e.getInstance();return b&&"function"==typeof b.setClickOutsideRef?b.setClickOutsideRef()(a):"function"==typeof a.setClickOutsideRef?a.setClickOutsideRef():(0,f.findDOMNode)(a)},e.enableOnClickOutside=function(){if("undefined"!=typeof document&&!n[e._uid]){void 0===d&&(d=k()),n[e._uid]=!0;var a=e.props.eventTypes;a.forEach||(a=[a]),m[e._uid]=function(a){var b;if(null!==e.componentNode&&(e.props.preventDefault&&a.preventDefault(),e.props.stopPropagation&&a.stopPropagation(),!(e.props.excludeScrollbar&&(b=a,document.documentElement.clientWidth<=b.clientX||document.documentElement.clientHeight<=b.clientY)))){if(function(a,b,c){if(a===b)return!0;for(;a.parentNode||a.host;){if(a.parentNode&&i(a,b,c))return!0;a=a.parentNode||a.host}return a}(a.composed&&a.composedPath&&a.composedPath().shift()||a.target,e.componentNode,e.props.outsideClickIgnoreClass)!==document)return;e.__outsideClickHandler(a)}},a.forEach(function(a){document.addEventListener(a,m[e._uid],q(h(e),a))})}},e.disableOnClickOutside=function(){delete n[e._uid];var a=m[e._uid];if(a&&"undefined"!=typeof document){var b=e.props.eventTypes;b.forEach||(b=[b]),b.forEach(function(b){return document.removeEventListener(b,a,q(h(e),b))}),delete m[e._uid]}},e.getRef=function(a){return e.instanceRef=a},e._uid=l(),e}p=j,r=c,p.prototype=Object.create(r.prototype),p.prototype.constructor=p,g(p,r);var p,r,s=j.prototype;return s.getInstance=function(){if(a.prototype&&!a.prototype.isReactComponent)return this;var b=this.instanceRef;return b.getInstance?b.getInstance():b},s.componentDidMount=function(){if("undefined"!=typeof document&&document.createElement){var a=this.getInstance();if(b&&"function"==typeof b.handleClickOutside&&(this.__clickOutsideHandlerProp=b.handleClickOutside(a),"function"!=typeof this.__clickOutsideHandlerProp))throw Error("WrappedComponent: "+o+" lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=this.__getComponentNode(),this.props.disableOnClickOutside||this.enableOnClickOutside()}},s.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},s.componentWillUnmount=function(){this.disableOnClickOutside()},s.render=function(){var b=this.props;b.excludeScrollbar;var c=function(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)b.indexOf(c=f[d])>=0||(e[c]=a[c]);return e}(b,["excludeScrollbar"]);return a.prototype&&a.prototype.isReactComponent?c.ref=this.getRef:c.wrappedRef=this.getRef,c.disableOnClickOutside=this.disableOnClickOutside,c.enableOnClickOutside=this.enableOnClickOutside,(0,e.createElement)(a,c)},j}(e.Component),c.displayName="OnClickOutside("+o+")",c.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:b&&b.excludeScrollbar||!1,outsideClickIgnoreClass:p,preventDefault:!1,stopPropagation:!1},c.getClass=function(){return a.getClass?a.getClass():a},j}},36829:function(a,b,c){"use strict";c.r(b),c.d(b,{Manager:function(){return g},Popper:function(){return aF},Reference:function(){return aI},usePopper:function(){return aB}});var d=c(67294),e=d.createContext(),f=d.createContext();function g(a){var b=a.children,c=d.useState(null),g=c[0],h=c[1],i=d.useRef(!1);d.useEffect(function(){return function(){i.current=!0}},[]);var j=d.useCallback(function(a){i.current||h(a)},[]);return d.createElement(e.Provider,{value:g},d.createElement(f.Provider,{value:j},b))}var h=function(a){return Array.isArray(a)?a[0]:a},i=function(a){if("function"==typeof a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return a.apply(void 0,c)}},j=function(a,b){if("function"==typeof a)return i(a,b);null!=a&&(a.current=b)},k=function(a){return a.reduce(function(a,b){var c=b[0],d=b[1];return a[c]=d,a},{})},l="undefined"!=typeof window&&window.document&&window.document.createElement?d.useLayoutEffect:d.useEffect,m=c(73935);function n(a){if(null==a)return window;if("[object Window]"!==a.toString()){var b=a.ownerDocument;return b&&b.defaultView||window}return a}function o(a){var b=n(a).Element;return a instanceof b||a instanceof Element}function p(a){var b=n(a).HTMLElement;return a instanceof b||a instanceof HTMLElement}function q(a){if("undefined"==typeof ShadowRoot)return!1;var b=n(a).ShadowRoot;return a instanceof b||a instanceof ShadowRoot}var r=Math.max,s=Math.min,t=Math.round;function u(){var a=navigator.userAgentData;return null!=a&&a.brands?a.brands.map(function(a){return a.brand+"/"+a.version}).join(" "):navigator.userAgent}function v(){return!/^((?!chrome|android).)*safari/i.test(u())}function w(a,b,c){void 0===b&&(b=!1),void 0===c&&(c=!1);var d=a.getBoundingClientRect(),e=1,f=1;b&&p(a)&&(e=a.offsetWidth>0&&t(d.width)/a.offsetWidth||1,f=a.offsetHeight>0&&t(d.height)/a.offsetHeight||1);var g=(o(a)?n(a):window).visualViewport,h=!v()&&c,i=(d.left+(h&&g?g.offsetLeft:0))/e,j=(d.top+(h&&g?g.offsetTop:0))/f,k=d.width/e,l=d.height/f;return{width:k,height:l,top:j,right:i+k,bottom:j+l,left:i,x:i,y:j}}function x(a){var b=n(a),c=b.pageXOffset,d=b.pageYOffset;return{scrollLeft:c,scrollTop:d}}function y(a){return a?(a.nodeName||"").toLowerCase():null}function z(a){return((o(a)?a.ownerDocument:a.document)||window.document).documentElement}function A(a){return w(z(a)).left+x(a).scrollLeft}function B(a){return n(a).getComputedStyle(a)}function C(a){var b=B(a),c=b.overflow,d=b.overflowX,e=b.overflowY;return/auto|scroll|overlay|hidden/.test(c+e+d)}function D(a){var b=w(a),c=a.offsetWidth,d=a.offsetHeight;return 1>=Math.abs(b.width-c)&&(c=b.width),1>=Math.abs(b.height-d)&&(d=b.height),{x:a.offsetLeft,y:a.offsetTop,width:c,height:d}}function E(a){return"html"===y(a)?a:a.assignedSlot||a.parentNode||(q(a)?a.host:null)||z(a)}function F(a){return["html","body","#document"].indexOf(y(a))>=0?a.ownerDocument.body:p(a)&&C(a)?a:F(E(a))}function G(a,b){void 0===b&&(b=[]);var c,d=F(a),e=d===(null==(c=a.ownerDocument)?void 0:c.body),f=n(d),g=e?[f].concat(f.visualViewport||[],C(d)?d:[]):d,h=b.concat(g);return e?h:h.concat(G(E(g)))}function H(a){return["table","td","th"].indexOf(y(a))>=0}function I(a){return p(a)&&"fixed"!==B(a).position?a.offsetParent:null}function J(a){for(var b=n(a),c=I(a);c&&H(c)&&"static"===B(c).position;)c=I(c);return c&&("html"===y(c)||"body"===y(c)&&"static"===B(c).position)?b:c||function(a){var b=/firefox/i.test(u());if(/Trident/i.test(u())&&p(a)&&"fixed"===B(a).position)return null;var c=E(a);for(q(c)&&(c=c.host);p(c)&&0>["html","body"].indexOf(y(c));){var d=B(c);if("none"!==d.transform||"none"!==d.perspective||"paint"===d.contain|| -1!==["transform","perspective"].indexOf(d.willChange)||b&&"filter"===d.willChange||b&&d.filter&&"none"!==d.filter)return c;c=c.parentNode}return null}(a)||b}var K="top",L="bottom",M="right",N="left",O="auto",P=[K,L,M,N],Q="start",R="viewport",S="popper",T=P.reduce(function(a,b){return a.concat([b+"-"+Q,b+"-end"])},[]),U=[].concat(P,[O]).reduce(function(a,b){return a.concat([b,b+"-"+Q,b+"-end"])},[]),V=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"],W={placement:"bottom",modifiers:[],strategy:"absolute"};function X(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return!b.some(function(a){return!(a&&"function"==typeof a.getBoundingClientRect)})}var Y={passive:!0};function Z(a){return a.split("-")[0]}function $(a){return a.split("-")[1]}function _(a){return["top","bottom"].indexOf(a)>=0?"x":"y"}function aa(a){var b,c=a.reference,d=a.element,e=a.placement,f=e?Z(e):null,g=e?$(e):null,h=c.x+c.width/2-d.width/2,i=c.y+c.height/2-d.height/2;switch(f){case K:b={x:h,y:c.y-d.height};break;case L:b={x:h,y:c.y+c.height};break;case M:b={x:c.x+c.width,y:i};break;case N:b={x:c.x-d.width,y:i};break;default:b={x:c.x,y:c.y}}var j=f?_(f):null;if(null!=j){var k="y"===j?"height":"width";switch(g){case Q:b[j]=b[j]-(c[k]/2-d[k]/2);break;case"end":b[j]=b[j]+(c[k]/2-d[k]/2)}}return b}var ab={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ac(a){var b,c,d=a.popper,e=a.popperRect,f=a.placement,g=a.variation,h=a.offsets,i=a.position,j=a.gpuAcceleration,k=a.adaptive,l=a.roundOffsets,m=a.isFixed,o=h.x,p=void 0===o?0:o,q=h.y,r=void 0===q?0:q,s="function"==typeof l?l({x:p,y:r}):{x:p,y:r};p=s.x,r=s.y;var u=h.hasOwnProperty("x"),v=h.hasOwnProperty("y"),w=N,x=K,y=window;if(k){var A=J(d),C="clientHeight",D="clientWidth";if(A===n(d)&&(A=z(d),"static"!==B(A).position&&"absolute"===i&&(C="scrollHeight",D="scrollWidth")),f===K||(f===N||f===M)&&"end"===g){x=L;var E=m&&A===y&&y.visualViewport?y.visualViewport.height:A[C];r-=E-e.height,r*=j?1:-1}if(f===N||(f===K||f===L)&&"end"===g){w=M;var F=m&&A===y&&y.visualViewport?y.visualViewport.width:A[D];p-=F-e.width,p*=j?1:-1}}var G,H,I,O,P,Q=Object.assign({position:i},k&&ab),R=!0===l?(H=(G={x:p,y:r}).x,I=G.y,O=window,P=O.devicePixelRatio||1,{x:t(H*P)/P||0,y:t(I*P)/P||0}):{x:p,y:r};return(p=R.x,r=R.y,j)?Object.assign({},Q,((c={})[x]=v?"0":"",c[w]=u?"0":"",c.transform=1>=(y.devicePixelRatio||1)?"translate("+p+"px, "+r+"px)":"translate3d("+p+"px, "+r+"px, 0)",c)):Object.assign({},Q,((b={})[x]=v?r+"px":"",b[w]=u?p+"px":"",b.transform="",b))}var ad={left:"right",right:"left",bottom:"top",top:"bottom"};function ae(a){return a.replace(/left|right|bottom|top/g,function(a){return ad[a]})}var af={start:"end",end:"start"};function ag(a){return a.replace(/start|end/g,function(a){return af[a]})}function ah(a,b){var c=b.getRootNode&&b.getRootNode();if(a.contains(b))return!0;if(c&&q(c)){var d=b;do{if(d&&a.isSameNode(d))return!0;d=d.parentNode||d.host}while(d)}return!1}function ai(a){return Object.assign({},a,{left:a.x,top:a.y,right:a.x+a.width,bottom:a.y+a.height})}function aj(a,b,c){var d,e,f,g,h,i,j,k,l,m,p,q;return b===R?ai(function(a,b){var c=n(a),d=z(a),e=c.visualViewport,f=d.clientWidth,g=d.clientHeight,h=0,i=0;if(e){f=e.width,g=e.height;var j=v();(j|| !j&&"fixed"===b)&&(h=e.offsetLeft,i=e.offsetTop)}return{width:f,height:g,x:h+A(a),y:i}}(a,c)):o(b)?(d=b,(f=w(d,!1,"fixed"===(e=c))).top=f.top+d.clientTop,f.left=f.left+d.clientLeft,f.bottom=f.top+d.clientHeight,f.right=f.left+d.clientWidth,f.width=d.clientWidth,f.height=d.clientHeight,f.x=f.left,f.y=f.top,f):ai((g=z(a),i=z(g),j=x(g),k=null==(h=g.ownerDocument)?void 0:h.body,l=r(i.scrollWidth,i.clientWidth,k?k.scrollWidth:0,k?k.clientWidth:0),m=r(i.scrollHeight,i.clientHeight,k?k.scrollHeight:0,k?k.clientHeight:0),p=-j.scrollLeft+A(g),q=-j.scrollTop,"rtl"===B(k||i).direction&&(p+=r(i.clientWidth,k?k.clientWidth:0)-l),{width:l,height:m,x:p,y:q}))}function ak(){return{top:0,right:0,bottom:0,left:0}}function al(a){return Object.assign({},ak(),a)}function am(a,b){return b.reduce(function(b,c){return b[c]=a,b},{})}function an(a,b){void 0===b&&(b={});var c,d,e,f,g,h,i,j,k,l,m=b,n=m.placement,q=void 0===n?a.placement:n,t=m.strategy,u=void 0===t?a.strategy:t,v=m.boundary,x=m.rootBoundary,A=m.elementContext,C=void 0===A?S:A,D=m.altBoundary,F=m.padding,H=void 0===F?0:F,I=al("number"!=typeof H?H:am(H,P)),N=a.rects.popper,O=a.elements[void 0!==D&&D?C===S?"reference":S:C],Q=(c=o(O)?O:O.contextElement||z(a.elements.popper),d=void 0===v?"clippingParents":v,e=void 0===x?R:x,f=u,k=(j=[].concat("clippingParents"===d?(h=G(E(g=c)),i=["absolute","fixed"].indexOf(B(g).position)>=0&&p(g)?J(g):g,o(i)?h.filter(function(a){return o(a)&&ah(a,i)&&"body"!==y(a)}):[]):[].concat(d),[e]))[0],l=j.reduce(function(a,b){var d=aj(c,b,f);return a.top=r(d.top,a.top),a.right=s(d.right,a.right),a.bottom=s(d.bottom,a.bottom),a.left=r(d.left,a.left),a},aj(c,k,f)),l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l),T=w(a.elements.reference),U=aa({reference:T,element:N,strategy:"absolute",placement:q}),V=ai(Object.assign({},N,U)),W=C===S?V:T,X={top:Q.top-W.top+I.top,bottom:W.bottom-Q.bottom+I.bottom,left:Q.left-W.left+I.left,right:W.right-Q.right+I.right},Y=a.modifiersData.offset;if(C===S&&Y){var Z=Y[q];Object.keys(X).forEach(function(a){var b=[M,L].indexOf(a)>=0?1:-1,c=[K,L].indexOf(a)>=0?"y":"x";X[a]+=Z[c]*b})}return X}function ao(a,b,c){return r(a,s(b,c))}function ap(a,b,c){return void 0===c&&(c={x:0,y:0}),{top:a.top-b.height-c.y,right:a.right-b.width+c.x,bottom:a.bottom-b.height+c.y,left:a.left-b.width-c.x}}function aq(a){return[K,M,L,N].some(function(b){return a[b]>=0})}var ar,as,at,au,av,aw,ax=(ar={defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(a){var b=a.state,c=a.instance,d=a.options,e=d.scroll,f=void 0===e||e,g=d.resize,h=void 0===g||g,i=n(b.elements.popper),j=[].concat(b.scrollParents.reference,b.scrollParents.popper);return f&&j.forEach(function(a){a.addEventListener("scroll",c.update,Y)}),h&&i.addEventListener("resize",c.update,Y),function(){f&&j.forEach(function(a){a.removeEventListener("scroll",c.update,Y)}),h&&i.removeEventListener("resize",c.update,Y)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(a){var b=a.state,c=a.name;b.modifiersData[c]=aa({reference:b.rects.reference,element:b.rects.popper,strategy:"absolute",placement:b.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(a){var b=a.state,c=a.options,d=c.gpuAcceleration,e=c.adaptive,f=c.roundOffsets,g=void 0===f||f,h={placement:Z(b.placement),variation:$(b.placement),popper:b.elements.popper,popperRect:b.rects.popper,gpuAcceleration:void 0===d||d,isFixed:"fixed"===b.options.strategy};null!=b.modifiersData.popperOffsets&&(b.styles.popper=Object.assign({},b.styles.popper,ac(Object.assign({},h,{offsets:b.modifiersData.popperOffsets,position:b.options.strategy,adaptive:void 0===e||e,roundOffsets:g})))),null!=b.modifiersData.arrow&&(b.styles.arrow=Object.assign({},b.styles.arrow,ac(Object.assign({},h,{offsets:b.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:g})))),b.attributes.popper=Object.assign({},b.attributes.popper,{"data-popper-placement":b.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(a){var b=a.state;Object.keys(b.elements).forEach(function(a){var c=b.styles[a]||{},d=b.attributes[a]||{},e=b.elements[a];p(e)&&y(e)&&(Object.assign(e.style,c),Object.keys(d).forEach(function(a){var b=d[a];!1===b?e.removeAttribute(a):e.setAttribute(a,!0===b?"":b)}))})},effect:function(a){var b=a.state,c={popper:{position:b.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(b.elements.popper.style,c.popper),b.styles=c,b.elements.arrow&&Object.assign(b.elements.arrow.style,c.arrow),function(){Object.keys(b.elements).forEach(function(a){var d=b.elements[a],e=b.attributes[a]||{},f=Object.keys(b.styles.hasOwnProperty(a)?b.styles[a]:c[a]),g=f.reduce(function(a,b){return a[b]="",a},{});p(d)&&y(d)&&(Object.assign(d.style,g),Object.keys(e).forEach(function(a){d.removeAttribute(a)}))})}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(a){var b=a.state,c=a.options,d=a.name,e=c.offset,f=void 0===e?[0,0]:e,g=U.reduce(function(a,c){var d,e,g,h,i,j,k,l;return a[c]=(d=c,e=b.rects,g=f,i=[N,K].indexOf(h=Z(d))>=0?-1:1,k=(j="function"==typeof g?g(Object.assign({},e,{placement:d})):g)[0],l=j[1],k=k||0,l=(l||0)*i,[N,M].indexOf(h)>=0?{x:l,y:k}:{x:k,y:l}),a},{}),h=g[b.placement],i=h.x,j=h.y;null!=b.modifiersData.popperOffsets&&(b.modifiersData.popperOffsets.x+=i,b.modifiersData.popperOffsets.y+=j),b.modifiersData[d]=g}},{name:"flip",enabled:!0,phase:"main",fn:function(a){var b=a.state,c=a.options,d=a.name;if(!b.modifiersData[d]._skip){for(var e=c.mainAxis,f=void 0===e||e,g=c.altAxis,h=void 0===g||g,i=c.fallbackPlacements,j=c.padding,k=c.boundary,l=c.rootBoundary,m=c.altBoundary,n=c.flipVariations,o=void 0===n||n,p=c.allowedAutoPlacements,q=b.options.placement,r=Z(q),s=i||(r!==q&&o?function(a){if(Z(a)===O)return[];var b=ae(a);return[ag(a),b,ag(b)]}(q):[ae(q)]),t=[q].concat(s).reduce(function(a,c){var d,e,f,g,h,i,m,n,q,r,s,t,u,v;return a.concat(Z(c)===O?(d=b,e={placement:c,boundary:k,rootBoundary:l,padding:j,flipVariations:o,allowedAutoPlacements:p},g=(f=e).placement,h=f.boundary,i=f.rootBoundary,m=f.padding,n=f.flipVariations,q=f.allowedAutoPlacements,r=void 0===q?U:q,s=$(g),t=s?n?T:T.filter(function(a){return $(a)===s}):P,u=t.filter(function(a){return r.indexOf(a)>=0}),0===u.length&&(u=t),v=u.reduce(function(a,b){return a[b]=an(d,{placement:b,boundary:h,rootBoundary:i,padding:m})[Z(b)],a},{}),Object.keys(v).sort(function(a,b){return v[a]-v[b]})):c)},[]),u=b.rects.reference,v=b.rects.popper,w=new Map,x=!0,y=t[0],z=0;z<t.length;z++){var A=t[z],B=Z(A),C=$(A)===Q,D=[K,L].indexOf(B)>=0,E=D?"width":"height",F=an(b,{placement:A,boundary:k,rootBoundary:l,altBoundary:m,padding:j}),G=D?C?M:N:C?L:K;u[E]>v[E]&&(G=ae(G));var H=ae(G),I=[];if(f&&I.push(F[B]<=0),h&&I.push(F[G]<=0,F[H]<=0),I.every(function(a){return a})){y=A,x=!1;break}w.set(A,I)}if(x)for(var J=o?3:1,R=function(a){var b=t.find(function(b){var c=w.get(b);if(c)return c.slice(0,a).every(function(a){return a})});if(b)return y=b,"break"},S=J;S>0&&"break"!==R(S);S--);b.placement!==y&&(b.modifiersData[d]._skip=!0,b.placement=y,b.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(a){var b,c=a.state,d=a.options,e=a.name,f=d.mainAxis,g=d.altAxis,h=d.boundary,i=d.rootBoundary,j=d.altBoundary,k=d.padding,l=d.tether,m=void 0===l||l,n=d.tetherOffset,o=void 0===n?0:n,p=an(c,{boundary:h,rootBoundary:i,padding:k,altBoundary:j}),q=Z(c.placement),t=$(c.placement),u=!t,v=_(q),w="x"===(b=v)?"y":"x",x=c.modifiersData.popperOffsets,y=c.rects.reference,z=c.rects.popper,A="function"==typeof o?o(Object.assign({},c.rects,{placement:c.placement})):o,B="number"==typeof A?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),C=c.modifiersData.offset?c.modifiersData.offset[c.placement]:null,E={x:0,y:0};if(x){if(void 0===f||f){var F,G="y"===v?K:N,H="y"===v?L:M,I="y"===v?"height":"width",O=x[v],P=O+p[G],R=O-p[H],S=m?-z[I]/2:0,T=t===Q?y[I]:z[I],U=t===Q?-z[I]:-y[I],V=c.elements.arrow,W=m&&V?D(V):{width:0,height:0},X=c.modifiersData["arrow#persistent"]?c.modifiersData["arrow#persistent"].padding:ak(),Y=X[G],aa=X[H],ab=ao(0,y[I],W[I]),ac=u?y[I]/2-S-ab-Y-B.mainAxis:T-ab-Y-B.mainAxis,ad=u?-y[I]/2+S+ab+aa+B.mainAxis:U+ab+aa+B.mainAxis,ae=c.elements.arrow&&J(c.elements.arrow),af=ae?"y"===v?ae.clientTop||0:ae.clientLeft||0:0,ag=null!=(F=null==C?void 0:C[v])?F:0,ah=O+ac-ag-af,ai=O+ad-ag,aj=ao(m?s(P,ah):P,O,m?r(R,ai):R);x[v]=aj,E[v]=aj-O}if(void 0!==g&&g){var al,am,ap,aq,ar,as="x"===v?K:N,at="x"===v?L:M,au=x[w],av="y"===w?"height":"width",aw=au+p[as],ax=au-p[at],ay=-1!==[K,N].indexOf(q),az=null!=(al=null==C?void 0:C[w])?al:0,aA=ay?aw:au-y[av]-z[av]-az+B.altAxis,aB=ay?au+y[av]+z[av]-az-B.altAxis:ax,aC=m&&ay?(am=aA,ap=au,(ar=ao(am,ap,aq=aB))>aq?aq:ar):ao(m?aA:aw,au,m?aB:ax);x[w]=aC,E[w]=aC-au}c.modifiersData[e]=E}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(a){var b,c=a.state,d=a.name,e=a.options,f=c.elements.arrow,g=c.modifiersData.popperOffsets,h=Z(c.placement),i=_(h),j=[N,M].indexOf(h)>=0,k=j?"height":"width";if(f&&g){var l,m,n=(l=e.padding,m=c,al("number"!=typeof(l="function"==typeof l?l(Object.assign({},m.rects,{placement:m.placement})):l)?l:am(l,P))),o=D(f),p=c.rects.reference[k]+c.rects.reference[i]-g[i]-c.rects.popper[k],q=g[i]-c.rects.reference[i],r=J(f),s=r?"y"===i?r.clientHeight||0:r.clientWidth||0:0,t=n["y"===i?K:N],u=s-o[k]-n["y"===i?L:M],v=s/2-o[k]/2+(p/2-q/2),w=ao(t,v,u),x=i;c.modifiersData[d]=((b={})[x]=w,b.centerOffset=w-v,b)}},effect:function(a){var b=a.state,c=a.options.element,d=void 0===c?"[data-popper-arrow]":c;if(null!=d&&("string"!=typeof d||(d=b.elements.popper.querySelector(d))))ah(b.elements.popper,d)&&(b.elements.arrow=d)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(a){var b=a.state,c=a.name,d=b.rects.reference,e=b.rects.popper,f=b.modifiersData.preventOverflow,g=an(b,{elementContext:"reference"}),h=an(b,{altBoundary:!0}),i=ap(g,d),j=ap(h,e,f),k=aq(i),l=aq(j);b.modifiersData[c]={referenceClippingOffsets:i,popperEscapeOffsets:j,isReferenceHidden:k,hasPopperEscaped:l},b.attributes.popper=Object.assign({},b.attributes.popper,{"data-popper-reference-hidden":k,"data-popper-escaped":l})}}]},au=void 0===(at=(as=ar).defaultModifiers)?[]:at,av=as.defaultOptions,aw=void 0===av?W:av,function(a,b,c){void 0===c&&(c=aw);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},W,aw),modifiersData:{},elements:{reference:a,popper:b},attributes:{},styles:{}},e=[],f=!1,g={state:d,setOptions:function(c){var e,f,j,k,l="function"==typeof c?c(d.options):c;i(),d.options=Object.assign({},aw,d.options,l),d.scrollParents={reference:o(a)?G(a):a.contextElement?G(a.contextElement):[],popper:G(b)};var m=(k=function(a){var b=new Map,c=new Set,d=[];function e(a){c.add(a.name),[].concat(a.requires||[],a.requiresIfExists||[]).forEach(function(a){if(!c.has(a)){var d=b.get(a);d&&e(d)}}),d.push(a)}return a.forEach(function(a){b.set(a.name,a)}),a.forEach(function(a){c.has(a.name)||e(a)}),d}(j=Object.keys(f=(e=[].concat(au,d.options.modifiers)).reduce(function(a,b){var c=a[b.name];return a[b.name]=c?Object.assign({},c,b,{options:Object.assign({},c.options,b.options),data:Object.assign({},c.data,b.data)}):b,a},{})).map(function(a){return f[a]})),V.reduce(function(a,b){return a.concat(k.filter(function(a){return a.phase===b}))},[]));return d.orderedModifiers=m.filter(function(a){return a.enabled}),h(),g.update()},forceUpdate:function(){if(!f){var a,b,c,e,h,i,j,k,l,m,o,q,r,s,u,v=d.elements,B=v.reference,E=v.popper;if(X(B,E)){d.rects={reference:(c=B,e=J(E),h="fixed"===d.options.strategy,i=p(e),o=p(e)&&(l=t((k=(j=e).getBoundingClientRect()).width)/j.offsetWidth||1,m=t(k.height)/j.offsetHeight||1,1!==l||1!==m),q=z(e),r=w(c,o,h),s={scrollLeft:0,scrollTop:0},u={x:0,y:0},(i|| !i&&!h)&&(("body"!==y(e)||C(q))&&(s=(a=e,a!==n(a)&&p(a)?{scrollLeft:(b=a).scrollLeft,scrollTop:b.scrollTop}:x(a))),p(e)?(u=w(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):q&&(u.x=A(q))),{x:r.left+s.scrollLeft-u.x,y:r.top+s.scrollTop-u.y,width:r.width,height:r.height}),popper:D(E)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(a){return d.modifiersData[a.name]=Object.assign({},a.data)});for(var F=0;F<d.orderedModifiers.length;F++){if(!0===d.reset){d.reset=!1,F=-1;continue}var G=d.orderedModifiers[F],H=G.fn,I=G.options,K=void 0===I?{}:I,L=G.name;"function"==typeof H&&(d=H({state:d,options:K,name:L,instance:g})||d)}}}},update:function(a){var b;return function(){return b||(b=new Promise(function(c){Promise.resolve().then(function(){b=void 0,c(a())})})),b}}(function(){return new Promise(function(a){g.forceUpdate(),a(d)})}),destroy:function(){i(),f=!0}};if(!X(a,b))return g;function h(){d.orderedModifiers.forEach(function(a){var b=a.name,c=a.options,f=a.effect;if("function"==typeof f){var h=f({state:d,name:b,instance:g,options:void 0===c?{}:c}),i=function(){};e.push(h||i)}})}function i(){e.forEach(function(a){return a()}),e=[]}return g.setOptions(c).then(function(a){!f&&c.onFirstUpdate&&c.onFirstUpdate(a)}),g}),ay=c(69590),az=c.n(ay),aA=[],aB=function(a,b,c){void 0===c&&(c={});var e=d.useRef(null),f={onFirstUpdate:c.onFirstUpdate,placement:c.placement||"bottom",strategy:c.strategy||"absolute",modifiers:c.modifiers||aA},g=d.useState({styles:{popper:{position:f.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),h=g[0],i=g[1],j=d.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(a){var b=a.state,c=Object.keys(b.elements);m.flushSync(function(){i({styles:k(c.map(function(a){return[a,b.styles[a]||{}]})),attributes:k(c.map(function(a){return[a,b.attributes[a]]}))})})},requires:["computeStyles"]}},[]),n=d.useMemo(function(){var a={onFirstUpdate:f.onFirstUpdate,placement:f.placement,strategy:f.strategy,modifiers:[].concat(f.modifiers,[j,{name:"applyStyles",enabled:!1}])};return az()(e.current,a)?e.current||a:(e.current=a,a)},[f.onFirstUpdate,f.placement,f.strategy,f.modifiers,j]),o=d.useRef();return l(function(){o.current&&o.current.setOptions(n)},[n]),l(function(){if(null!=a&&null!=b){var d=(c.createPopper||ax)(a,b,n);return o.current=d,function(){d.destroy(),o.current=null}}},[a,b,c.createPopper]),{state:o.current?o.current.state:null,styles:h.styles,attributes:h.attributes,update:o.current?o.current.update:null,forceUpdate:o.current?o.current.forceUpdate:null}},aC=function(){},aD=function(){return Promise.resolve(null)},aE=[];function aF(a){var b=a.placement,c=void 0===b?"bottom":b,f=a.strategy,g=void 0===f?"absolute":f,i=a.modifiers,k=void 0===i?aE:i,l=a.referenceElement,m=a.onFirstUpdate,n=a.innerRef,o=a.children,p=d.useContext(e),q=d.useState(null),r=q[0],s=q[1],t=d.useState(null),u=t[0],v=t[1];d.useEffect(function(){j(n,r)},[n,r]);var w=d.useMemo(function(){return{placement:c,strategy:g,onFirstUpdate:m,modifiers:[].concat(k,[{name:"arrow",enabled:null!=u,options:{element:u}}])}},[c,g,m,k,u]),x=aB(l||p,r,w),y=x.state,z=x.styles,A=x.forceUpdate,B=x.update,C=d.useMemo(function(){return{ref:s,style:z.popper,placement:y?y.placement:c,hasPopperEscaped:y&&y.modifiersData.hide?y.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:y&&y.modifiersData.hide?y.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:z.arrow,ref:v},forceUpdate:A||aC,update:B||aD}},[s,v,c,y,z,B,A]);return h(o)(C)}var aG=c(42473),aH=c.n(aG);function aI(a){var b=a.children,c=a.innerRef,e=d.useContext(f),g=d.useCallback(function(a){j(c,a),i(e,a)},[c,e]);return d.useEffect(function(){return function(){return j(c,null)}},[]),d.useEffect(function(){aH()(Boolean(e),"`Reference` should not be used outside of a `Manager` component.")},[e]),h(b)({ref:g})}},94281:function(a){"use strict";var b={};function c(a,c,d){d||(d=Error);var e=function(a){var b,d;function e(b,d,e){var f,g,h;return a.call(this,(f=b,g=d,h=e,"string"==typeof c?c:c(f,g,h)))||this}return b=e,d=a,b.prototype=Object.create(d.prototype),b.prototype.constructor=b,b.__proto__=d,e}(d);e.prototype.name=d.name,e.prototype.code=a,b[a]=e}function d(a,b){if(!Array.isArray(a))return"of ".concat(b," ").concat(String(a));var c=a.length;return(a=a.map(function(a){return String(a)}),c>2)?"one of ".concat(b," ").concat(a.slice(0,c-1).join(", "),", or ")+a[c-1]:2===c?"one of ".concat(b," ").concat(a[0]," or ").concat(a[1]):"of ".concat(b," ").concat(a[0])}c("ERR_INVALID_OPT_VALUE",function(a,b){return'The value "'+b+'" is invalid for option "'+a+'"'},TypeError),c("ERR_INVALID_ARG_TYPE",function(a,b,c){if("string"==typeof b&&(f="not ",(e=b).substr(!g||g<0?0:+g,f.length)===f)?(n="must not be",b=b.replace(/^not /,"")):n="must be",h=a,i=" argument",(void 0===j||j>h.length)&&(j=h.length),h.substring(j-i.length,j)===i)o="The ".concat(a," ").concat(n," ").concat(d(b,"type"));else{var e,f,g,h,i,j,k,l,m,n,o,p=(k=a,"number"!=typeof m&&(m=0),m+(l=".").length>k.length|| -1===k.indexOf(l,m))?"argument":"property";o='The "'.concat(a,'" ').concat(p," ").concat(n," ").concat(d(b,"type"))}return o+". Received type ".concat(typeof c)},TypeError),c("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),c("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),c("ERR_STREAM_PREMATURE_CLOSE","Premature close"),c("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),c("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),c("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),c("ERR_STREAM_WRITE_AFTER_END","write after end"),c("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),c("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),c("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),a.exports.q=b},56753:function(a,b,c){"use strict";var d=c(34155),e=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b};a.exports=k;var f=c(79481),g=c(64229);c(35717)(k,f);for(var h=e(g.prototype),i=0;i<h.length;i++){var j=h[i];k.prototype[j]||(k.prototype[j]=g.prototype[j])}function k(a){if(!(this instanceof k))return new k(a);f.call(this,a),g.call(this,a),this.allowHalfOpen=!0,a&&(!1===a.readable&&(this.readable=!1),!1===a.writable&&(this.writable=!1),!1===a.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||d.nextTick(m,this)}function m(a){a.end()}Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&& void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&& void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}})},82725:function(a,b,c){"use strict";a.exports=e;var d=c(74605);function e(a){if(!(this instanceof e))return new e(a);d.call(this,a)}c(35717)(e,d),e.prototype._transform=function(a,b,c){c(null,a)}},79481:function(a,b,c){"use strict";var d,e,f,g,h,i=c(34155);a.exports=z,z.ReadableState=y,c(17187).EventEmitter;var j=function(a,b){return a.listeners(b).length},k=c(22503),l=c(48764).Buffer,m=c.g.Uint8Array||function(){},n=c(94616);e=n&&n.debuglog?n.debuglog("stream"):function(){};var o=c(57327),p=c(61195),q=c(82457).getHighWaterMark,r=c(94281).q,s=r.ERR_INVALID_ARG_TYPE,t=r.ERR_STREAM_PUSH_AFTER_EOF,u=r.ERR_METHOD_NOT_IMPLEMENTED,v=r.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;c(35717)(z,k);var w=p.errorOrDestroy,x=["error","close","destroy","pause","resume"];function y(a,b,e){d=d||c(56753),a=a||{},"boolean"!=typeof e&&(e=b instanceof d),this.objectMode=!!a.objectMode,e&&(this.objectMode=this.objectMode||!!a.readableObjectMode),this.highWaterMark=q(this,a,"readableHighWaterMark",e),this.buffer=new o,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==a.emitClose,this.autoDestroy=!!a.autoDestroy,this.destroyed=!1,this.defaultEncoding=a.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,a.encoding&&(f||(f=c(94626).s),this.decoder=new f(a.encoding),this.encoding=a.encoding)}function z(a){if(d=d||c(56753),!(this instanceof z))return new z(a);var b=this instanceof d;this._readableState=new y(a,this,b),this.readable=!0,a&&("function"==typeof a.read&&(this._read=a.read),"function"==typeof a.destroy&&(this._destroy=a.destroy)),k.call(this)}function A(a,b,c,d,f){e("readableAddChunk",b);var g,h,i=a._readableState;if(null===b)i.reading=!1,E(a,i);else if(f||(h=C(i,b)),h)w(a,h);else if(i.objectMode||b&&b.length>0){if("string"!=typeof b&&!i.objectMode&&Object.getPrototypeOf(b)!==l.prototype&&(b=(g=b,l.from(g))),d)i.endEmitted?w(a,new v):B(a,i,b,!0);else if(i.ended)w(a,new t);else{if(i.destroyed)return!1;i.reading=!1,i.decoder&&!c?(b=i.decoder.write(b),i.objectMode||0!==b.length?B(a,i,b,!1):H(a,i)):B(a,i,b,!1)}}else d||(i.reading=!1,H(a,i));return!i.ended&&(i.length<i.highWaterMark||0===i.length)}function B(a,b,c,d){b.flowing&&0===b.length&&!b.sync?(b.awaitDrain=0,a.emit("data",c)):(b.length+=b.objectMode?1:c.length,d?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&F(a)),H(a,b)}function C(a,b){var c,d;return d=b,!l.isBuffer(d)&&!(d instanceof m)&&"string"!=typeof b&& void 0!==b&&!a.objectMode&&(c=new s("chunk",["string","Buffer","Uint8Array"],b)),c}function D(a,b){if(a<=0||0===b.length&&b.ended)return 0;if(b.objectMode)return 1;if(a!=a)return b.flowing&&b.length?b.buffer.head.data.length:b.length;if(a>b.highWaterMark){var c;b.highWaterMark=((c=a)>=1073741824?c=1073741824:(c--,c|=c>>>1,c|=c>>>2,c|=c>>>4,c|=c>>>8,c|=c>>>16,c++),c)}return a<=b.length?a:b.ended?b.length:(b.needReadable=!0,0)}function E(a,b){if(e("onEofChunk"),!b.ended){if(b.decoder){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,b.sync?F(a):(b.needReadable=!1,b.emittedReadable||(b.emittedReadable=!0,G(a)))}}function F(a){var b=a._readableState;e("emitReadable",b.needReadable,b.emittedReadable),b.needReadable=!1,b.emittedReadable||(e("emitReadable",b.flowing),b.emittedReadable=!0,i.nextTick(G,a))}function G(a){var b=a._readableState;e("emitReadable_",b.destroyed,b.length,b.ended),!b.destroyed&&(b.length||b.ended)&&(a.emit("readable"),b.emittedReadable=!1),b.needReadable=!b.flowing&&!b.ended&&b.length<=b.highWaterMark,M(a)}function H(a,b){b.readingMore||(b.readingMore=!0,i.nextTick(I,a,b))}function I(a,b){for(;!b.reading&&!b.ended&&(b.length<b.highWaterMark||b.flowing&&0===b.length);){var c=b.length;if(e("maybeReadMore read 0"),a.read(0),c===b.length)break}b.readingMore=!1}Object.defineProperty(z.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(a){this._readableState&&(this._readableState.destroyed=a)}}),z.prototype.destroy=p.destroy,z.prototype._undestroy=p.undestroy,z.prototype._destroy=function(a,b){b(a)},z.prototype.push=function(a,b){var c,d=this._readableState;return d.objectMode?c=!0:"string"==typeof a&&((b=b||d.defaultEncoding)!==d.encoding&&(a=l.from(a,b),b=""),c=!0),A(this,a,b,!1,c)},z.prototype.unshift=function(a){return A(this,a,null,!0,!1)},z.prototype.isPaused=function(){return!1===this._readableState.flowing},z.prototype.setEncoding=function(a){f||(f=c(94626).s);var b=new f(a);this._readableState.decoder=b,this._readableState.encoding=this._readableState.decoder.encoding;for(var d=this._readableState.buffer.head,e="";null!==d;)e+=b.write(d.data),d=d.next;return this._readableState.buffer.clear(),""!==e&&this._readableState.buffer.push(e),this._readableState.length=e.length,this};function J(a){var b=a._readableState;b.readableListening=a.listenerCount("readable")>0,b.resumeScheduled&&!b.paused?b.flowing=!0:a.listenerCount("data")>0&&a.resume()}function K(a){e("readable nexttick read 0"),a.read(0)}function L(a,b){e("resume",b.reading),b.reading||a.read(0),b.resumeScheduled=!1,a.emit("resume"),M(a),b.flowing&&!b.reading&&a.read(0)}function M(a){var b=a._readableState;for(e("flow",b.flowing);b.flowing&&null!==a.read(););}function N(a,b){var c;return 0===b.length?null:(b.objectMode?c=b.buffer.shift():!a||a>=b.length?(c=b.decoder?b.buffer.join(""):1===b.buffer.length?b.buffer.first():b.buffer.concat(b.length),b.buffer.clear()):c=b.buffer.consume(a,b.decoder),c)}function O(a){var b=a._readableState;e("endReadable",b.endEmitted),b.endEmitted||(b.ended=!0,i.nextTick(P,b,a))}function P(a,b){if(e("endReadableNT",a.endEmitted,a.length),!a.endEmitted&&0===a.length&&(a.endEmitted=!0,b.readable=!1,b.emit("end"),a.autoDestroy)){var c=b._writableState;(!c||c.autoDestroy&&c.finished)&&b.destroy()}}function Q(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return -1}z.prototype.read=function(a){e("read",a),a=parseInt(a,10);var b,c=this._readableState,d=a;if(0!==a&&(c.emittedReadable=!1),0===a&&c.needReadable&&((0!==c.highWaterMark?c.length>=c.highWaterMark:c.length>0)||c.ended))return e("read: emitReadable",c.length,c.ended),0===c.length&&c.ended?O(this):F(this),null;if(0===(a=D(a,c))&&c.ended)return 0===c.length&&O(this),null;var f=c.needReadable;return e("need readable",f),(0===c.length||c.length-a<c.highWaterMark)&&e("length less than watermark",f=!0),c.ended||c.reading?e("reading or ended",f=!1):f&&(e("do read"),c.reading=!0,c.sync=!0,0===c.length&&(c.needReadable=!0),this._read(c.highWaterMark),c.sync=!1,c.reading||(a=D(d,c))),null===(b=a>0?N(a,c):null)?(c.needReadable=c.length<=c.highWaterMark,a=0):(c.length-=a,c.awaitDrain=0),0===c.length&&(c.ended||(c.needReadable=!0),d!==a&&c.ended&&O(this)),null!==b&&this.emit("data",b),b},z.prototype._read=function(a){w(this,new u("_read()"))},z.prototype.pipe=function(a,b){var c,d=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=a;break;case 1:f.pipes=[f.pipes,a];break;default:f.pipes.push(a)}f.pipesCount+=1,e("pipe count=%d opts=%j",f.pipesCount,b);var g=b&& !1===b.end||a===i.stdout||a===i.stderr?s:k;function h(a,b){e("onunpipe"),a===d&&b&& !1===b.hasUnpiped&&(b.hasUnpiped=!0,n())}function k(){e("onend"),a.end()}f.endEmitted?i.nextTick(g):d.once("end",g),a.on("unpipe",h);var l=(c=d,function(){var a=c._readableState;e("pipeOnDrain",a.awaitDrain),a.awaitDrain&&a.awaitDrain--,0===a.awaitDrain&&j(c,"data")&&(a.flowing=!0,M(c))});a.on("drain",l);var m=!1;function n(){e("cleanup"),a.removeListener("close",q),a.removeListener("finish",r),a.removeListener("drain",l),a.removeListener("error",p),a.removeListener("unpipe",h),d.removeListener("end",k),d.removeListener("end",s),d.removeListener("data",o),m=!0,f.awaitDrain&&(!a._writableState||a._writableState.needDrain)&&l()}function o(b){e("ondata");var c=a.write(b);e("dest.write",c),!1===c&&((1===f.pipesCount&&f.pipes===a||f.pipesCount>1&& -1!==Q(f.pipes,a))&&!m&&(e("false write response, pause",f.awaitDrain),f.awaitDrain++),d.pause())}function p(b){e("onerror",b),s(),a.removeListener("error",p),0===j(a,"error")&&w(a,b)}function q(){a.removeListener("finish",r),s()}function r(){e("onfinish"),a.removeListener("close",q),s()}function s(){e("unpipe"),d.unpipe(a)}return d.on("data",o),function(a,b,c){if("function"==typeof a.prependListener)return a.prependListener(b,c);a._events&&a._events[b]?Array.isArray(a._events[b])?a._events[b].unshift(c):a._events[b]=[c,a._events[b]]:a.on(b,c)}(a,"error",p),a.once("close",q),a.once("finish",r),a.emit("pipe",d),f.flowing||(e("pipe resume"),d.resume()),a},z.prototype.unpipe=function(a){var b=this._readableState,c={hasUnpiped:!1};if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes||(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,b.flowing=!1,a&&a.emit("unpipe",this,c)),this;if(!a){var d=b.pipes,e=b.pipesCount;b.pipes=null,b.pipesCount=0,b.flowing=!1;for(var f=0;f<e;f++)d[f].emit("unpipe",this,{hasUnpiped:!1});return this}var g=Q(b.pipes,a);return -1===g||(b.pipes.splice(g,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this,c)),this},z.prototype.on=function(a,b){var c=k.prototype.on.call(this,a,b),d=this._readableState;return"data"===a?(d.readableListening=this.listenerCount("readable")>0,!1!==d.flowing&&this.resume()):"readable"!==a||d.endEmitted||d.readableListening||(d.readableListening=d.needReadable=!0,d.flowing=!1,d.emittedReadable=!1,e("on readable",d.length,d.reading),d.length?F(this):d.reading||i.nextTick(K,this)),c},z.prototype.addListener=z.prototype.on,z.prototype.removeListener=function(a,b){var c=k.prototype.removeListener.call(this,a,b);return"readable"===a&&i.nextTick(J,this),c},z.prototype.removeAllListeners=function(a){var b=k.prototype.removeAllListeners.apply(this,arguments);return("readable"===a|| void 0===a)&&i.nextTick(J,this),b},z.prototype.resume=function(){var a,b,c=this._readableState;return c.flowing||(e("resume"),c.flowing=!c.readableListening,a=this,(b=c).resumeScheduled||(b.resumeScheduled=!0,i.nextTick(L,a,b))),c.paused=!1,this},z.prototype.pause=function(){return e("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(e("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},z.prototype.wrap=function(a){var b=this,c=this._readableState,d=!1;for(var f in a.on("end",function(){if(e("wrapped end"),c.decoder&&!c.ended){var a=c.decoder.end();a&&a.length&&b.push(a)}b.push(null)}),a.on("data",function(f){if(e("wrapped data"),c.decoder&&(f=c.decoder.write(f)),!c.objectMode||null!=f)(c.objectMode||f&&f.length)&&(b.push(f)||(d=!0,a.pause()))}),a)void 0===this[f]&&"function"==typeof a[f]&&(this[f]=function(b){return function(){return a[b].apply(a,arguments)}}(f));for(var g=0;g<x.length;g++)a.on(x[g],this.emit.bind(this,x[g]));return this._read=function(b){e("wrapped _read",b),d&&(d=!1,a.resume())},this},"function"==typeof Symbol&&(z.prototype[Symbol.asyncIterator]=function(){return void 0===g&&(g=c(45850)),g(this)}),Object.defineProperty(z.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(z.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(z.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(a){this._readableState&&(this._readableState.flowing=a)}}),z._fromList=N,Object.defineProperty(z.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(z.from=function(a,b){return void 0===h&&(h=c(15167)),h(z,a,b)})},74605:function(a,b,c){"use strict";a.exports=k;var d=c(94281).q,e=d.ERR_METHOD_NOT_IMPLEMENTED,f=d.ERR_MULTIPLE_CALLBACK,g=d.ERR_TRANSFORM_ALREADY_TRANSFORMING,h=d.ERR_TRANSFORM_WITH_LENGTH_0,i=c(56753);function j(a,b){var c=this._transformState;c.transforming=!1;var d=c.writecb;if(null===d)return this.emit("error",new f);c.writechunk=null,c.writecb=null,null!=b&&this.push(b),d(a);var e=this._readableState;e.reading=!1,(e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}function k(a){if(!(this instanceof k))return new k(a);i.call(this,a),this._transformState={afterTransform:j.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,a&&("function"==typeof a.transform&&(this._transform=a.transform),"function"==typeof a.flush&&(this._flush=a.flush)),this.on("prefinish",l)}function l(){var a=this;"function"!=typeof this._flush||this._readableState.destroyed?m(this,null,null):this._flush(function(b,c){m(a,b,c)})}function m(a,b,c){if(b)return a.emit("error",b);if(null!=c&&a.push(c),a._writableState.length)throw new h;if(a._transformState.transforming)throw new g;return a.push(null)}c(35717)(k,i),k.prototype.push=function(a,b){return this._transformState.needTransform=!1,i.prototype.push.call(this,a,b)},k.prototype._transform=function(a,b,c){c(new e("_transform()"))},k.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},k.prototype._read=function(a){var b=this._transformState;null===b.writechunk||b.transforming?b.needTransform=!0:(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform))},k.prototype._destroy=function(a,b){i.prototype._destroy.call(this,a,function(a){b(a)})}},64229:function(a,b,c){"use strict";var d,e,f=c(34155);function g(a){var b=this;this.next=null,this.entry=null,this.finish=function(){K(b,a)}}a.exports=z,z.WritableState=y;var h={deprecate:c(94927)},i=c(22503),j=c(48764).Buffer,k=c.g.Uint8Array||function(){},l=c(61195),m=c(82457).getHighWaterMark,n=c(94281).q,o=n.ERR_INVALID_ARG_TYPE,p=n.ERR_METHOD_NOT_IMPLEMENTED,q=n.ERR_MULTIPLE_CALLBACK,r=n.ERR_STREAM_CANNOT_PIPE,s=n.ERR_STREAM_DESTROYED,t=n.ERR_STREAM_NULL_VALUES,u=n.ERR_STREAM_WRITE_AFTER_END,v=n.ERR_UNKNOWN_ENCODING,w=l.errorOrDestroy;function x(){}function y(a,b,e){d=d||c(56753),a=a||{},"boolean"!=typeof e&&(e=b instanceof d),this.objectMode=!!a.objectMode,e&&(this.objectMode=this.objectMode||!!a.writableObjectMode),this.highWaterMark=m(this,a,"writableHighWaterMark",e),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var f=!1===a.decodeStrings;this.decodeStrings=!f,this.defaultEncoding=a.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){C(b,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==a.emitClose,this.autoDestroy=!!a.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new g(this)}function z(a){var b=this instanceof(d=d||c(56753));if(!b&&!e.call(z,this))return new z(a);this._writableState=new y(a,this,b),this.writable=!0,a&&("function"==typeof a.write&&(this._write=a.write),"function"==typeof a.writev&&(this._writev=a.writev),"function"==typeof a.destroy&&(this._destroy=a.destroy),"function"==typeof a.final&&(this._final=a.final)),i.call(this)}function A(a,b,c,d,e,f){if(!c){var g,h,i,k=(g=b,h=d,i=e,g.objectMode|| !1===g.decodeStrings||"string"!=typeof h||(h=j.from(h,i)),h);d!==k&&(c=!0,e="buffer",d=k)}var l=b.objectMode?1:d.length;b.length+=l;var m=b.length<b.highWaterMark;if(m||(b.needDrain=!0),b.writing||b.corked){var n=b.lastBufferedRequest;b.lastBufferedRequest={chunk:d,encoding:e,isBuf:c,callback:f,next:null},n?n.next=b.lastBufferedRequest:b.bufferedRequest=b.lastBufferedRequest,b.bufferedRequestCount+=1}else B(a,b,!1,l,d,e,f);return m}function B(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,b.destroyed?b.onwrite(new s("write")):c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function C(a,b){var c,d,e,g,h,i,j=a._writableState,k=j.sync,l=j.writecb;if("function"!=typeof l)throw new q;if((c=j).writing=!1,c.writecb=null,c.length-=c.writelen,c.writelen=0,b)d=a,e=j,g=k,h=b,i=l,--e.pendingcb,g?(f.nextTick(i,h),f.nextTick(I,d,e),d._writableState.errorEmitted=!0,w(d,h)):(i(h),d._writableState.errorEmitted=!0,w(d,h),I(d,e));else{var m=G(j)||a.destroyed;m||j.corked||j.bufferProcessing||!j.bufferedRequest||F(a,j),k?f.nextTick(D,a,j,m,l):D(a,j,m,l)}}function D(a,b,c,d){c||E(a,b),b.pendingcb--,d(),I(a,b)}function E(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function F(a,b){b.bufferProcessing=!0;var c=b.bufferedRequest;if(a._writev&&c&&c.next){var d=Array(b.bufferedRequestCount),e=b.corkedRequestsFree;e.entry=c;for(var f=0,h=!0;c;)d[f]=c,c.isBuf||(h=!1),c=c.next,f+=1;d.allBuffers=h,B(a,b,!0,b.length,d,"",e.finish),b.pendingcb++,b.lastBufferedRequest=null,e.next?(b.corkedRequestsFree=e.next,e.next=null):b.corkedRequestsFree=new g(b),b.bufferedRequestCount=0}else{for(;c;){var i=c.chunk,j=c.encoding,k=c.callback,l=b.objectMode?1:i.length;if(B(a,b,!1,l,i,j,k),c=c.next,b.bufferedRequestCount--,b.writing)break}null===c&&(b.lastBufferedRequest=null)}b.bufferedRequest=c,b.bufferProcessing=!1}function G(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function H(a,b){a._final(function(c){b.pendingcb--,c&&w(a,c),b.prefinished=!0,a.emit("prefinish"),I(a,b)})}function I(a,b){var c,d,e=G(b);if(e&&(c=a,(d=b).prefinished||d.finalCalled||("function"!=typeof c._final||d.destroyed?(d.prefinished=!0,c.emit("prefinish")):(d.pendingcb++,d.finalCalled=!0,f.nextTick(H,c,d))),0===b.pendingcb&&(b.finished=!0,a.emit("finish"),b.autoDestroy))){var g=a._readableState;(!g||g.autoDestroy&&g.endEmitted)&&a.destroy()}return e}function J(a,b,c){b.ending=!0,I(a,b),c&&(b.finished?f.nextTick(c):a.once("finish",c)),b.ended=!0,a.writable=!1}function K(a,b,c){var d=a.entry;for(a.entry=null;d;){var e=d.callback;b.pendingcb--,e(c),d=d.next}b.corkedRequestsFree.next=a}c(35717)(z,i),y.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b},function(){try{Object.defineProperty(y.prototype,"buffer",{get:h.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(a){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(e=Function.prototype[Symbol.hasInstance],Object.defineProperty(z,Symbol.hasInstance,{value:function(a){return!!e.call(this,a)||this===z&&a&&a._writableState instanceof y}})):e=function(a){return a instanceof this},z.prototype.pipe=function(){w(this,new r)},z.prototype.write=function(a,b,c){var d,e,g,h,i,l,m,n,p,q,r=this._writableState,s=!1,v=!r.objectMode&&(q=a,j.isBuffer(q)||q instanceof k);return v&&!j.isBuffer(a)&&(a=(d=a,j.from(d))),("function"==typeof b&&(c=b,b=null),v?b="buffer":b||(b=r.defaultEncoding),"function"!=typeof c&&(c=x),r.ending)?(e=this,g=c,h=new u,w(e,h),f.nextTick(g,h)):(v||(i=this,l=r,m=a,n=c,null===m?p=new t:"string"==typeof m||l.objectMode||(p=new o("chunk",["string","Buffer"],m)),!p||(w(i,p),f.nextTick(n,p),0)))&&(r.pendingcb++,s=A(this,r,v,a,b,c)),s},z.prototype.cork=function(){this._writableState.corked++},z.prototype.uncork=function(){var a=this._writableState;!a.corked||(a.corked--,a.writing||a.corked||a.bufferProcessing||!a.bufferedRequest||F(this,a))},z.prototype.setDefaultEncoding=function(a){if("string"==typeof a&&(a=a.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((a+"").toLowerCase())> -1))throw new v(a);return this._writableState.defaultEncoding=a,this},Object.defineProperty(z.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(z.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),z.prototype._write=function(a,b,c){c(new p("_write()"))},z.prototype._writev=null,z.prototype.end=function(a,b,c){var d=this._writableState;return"function"==typeof a?(c=a,a=null,b=null):"function"==typeof b&&(c=b,b=null),null!=a&&this.write(a,b),d.corked&&(d.corked=1,this.uncork()),d.ending||J(this,d,c),this},Object.defineProperty(z.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(z.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(a){this._writableState&&(this._writableState.destroyed=a)}}),z.prototype.destroy=l.destroy,z.prototype._undestroy=l.undestroy,z.prototype._destroy=function(a,b){b(a)}},45850:function(a,b,c){"use strict";var d,e=c(34155);function f(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var g=c(8610),h=Symbol("lastResolve"),i=Symbol("lastReject"),j=Symbol("error"),k=Symbol("ended"),l=Symbol("lastPromise"),m=Symbol("handlePromise"),n=Symbol("stream");function o(a,b){return{value:a,done:b}}function p(a){var b=a[h];if(null!==b){var c=a[n].read();null!==c&&(a[l]=null,a[h]=null,a[i]=null,b(o(c,!1)))}}function q(a){e.nextTick(p,a)}var r=Object.getPrototypeOf(function(){}),s=Object.setPrototypeOf((d={get stream(){return this[n]},next:function(){var a,b,c,d=this,f=this[j];if(null!==f)return Promise.reject(f);if(this[k])return Promise.resolve(o(void 0,!0));if(this[n].destroyed)return new Promise(function(a,b){e.nextTick(function(){d[j]?b(d[j]):a(o(void 0,!0))})});var g=this[l];if(g)c=new Promise((a=g,b=this,function(c,d){a.then(function(){if(b[k]){c(o(void 0,!0));return}b[m](c,d)},d)}));else{var h=this[n].read();if(null!==h)return Promise.resolve(o(h,!1));c=new Promise(this[m])}return this[l]=c,c}},f(d,Symbol.asyncIterator,function(){return this}),f(d,"return",function(){var a=this;return new Promise(function(b,c){a[n].destroy(null,function(a){if(a){c(a);return}b(o(void 0,!0))})})}),d),r),t=function(a){var b,c=Object.create(s,(f(b={},n,{value:a,writable:!0}),f(b,h,{value:null,writable:!0}),f(b,i,{value:null,writable:!0}),f(b,j,{value:null,writable:!0}),f(b,k,{value:a._readableState.endEmitted,writable:!0}),f(b,m,{value:function(a,b){var d=c[n].read();d?(c[l]=null,c[h]=null,c[i]=null,a(o(d,!1))):(c[h]=a,c[i]=b)},writable:!0}),b));return c[l]=null,g(a,function(a){if(a&&"ERR_STREAM_PREMATURE_CLOSE"!==a.code){var b=c[i];null!==b&&(c[l]=null,c[h]=null,c[i]=null,b(a)),c[j]=a;return}var d=c[h];null!==d&&(c[l]=null,c[h]=null,c[i]=null,d(o(void 0,!0))),c[k]=!0}),a.on("readable",q.bind(null,c)),c};a.exports=t},57327:function(a,b,c){"use strict";function d(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}var g=c(48764).Buffer,h=c(52361).inspect,i=h&&h.custom||"inspect";function j(a,b,c){g.prototype.copy.call(a,b,c)}a.exports=function(){var a,b,c;function k(){!function(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}(this,k),this.head=null,this.tail=null,this.length=0}return a=k,b=[{key:"push",value:function(a){var b={data:a,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length}},{key:"unshift",value:function(a){var b={data:a,next:this.head};0===this.length&&(this.tail=b),this.head=b,++this.length}},{key:"shift",value:function(){if(0!==this.length){var a=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,a}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(a){if(0===this.length)return"";for(var b=this.head,c=""+b.data;b=b.next;)c+=a+b.data;return c}},{key:"concat",value:function(a){if(0===this.length)return g.alloc(0);for(var b=g.allocUnsafe(a>>>0),c=this.head,d=0;c;)j(c.data,b,d),d+=c.data.length,c=c.next;return b}},{key:"consume",value:function(a,b){var c;return a<this.head.data.length?(c=this.head.data.slice(0,a),this.head.data=this.head.data.slice(a)):c=a===this.head.data.length?this.shift():b?this._getString(a):this._getBuffer(a),c}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(a){var b=this.head,c=1,d=b.data;for(a-=d.length;b=b.next;){var e=b.data,f=a>e.length?e.length:a;if(f===e.length?d+=e:d+=e.slice(0,a),0==(a-=f)){f===e.length?(++c,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=e.slice(f));break}++c}return this.length-=c,d}},{key:"_getBuffer",value:function(a){var b=g.allocUnsafe(a),c=this.head,d=1;for(c.data.copy(b),a-=c.data.length;c=c.next;){var e=c.data,f=a>e.length?e.length:a;if(e.copy(b,b.length-a,0,f),0==(a-=f)){f===e.length?(++d,c.next?this.head=c.next:this.head=this.tail=null):(this.head=c,c.data=e.slice(f));break}++d}return this.length-=d,b}},{key:i,value:function(a,b){return h(this,function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?d(Object(c),!0).forEach(function(b){e(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):d(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}({},b,{depth:0,customInspect:!1}))}}],f(a.prototype,b),c&&f(a,c),k}()},61195:function(a,b,c){"use strict";var d=c(34155);function e(a,b){g(a,b),f(a)}function f(a){(!a._writableState||a._writableState.emitClose)&&(!a._readableState||a._readableState.emitClose)&&a.emit("close")}function g(a,b){a.emit("error",b)}a.exports={destroy:function(a,b){var c=this,h=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return h||i?(b?b(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,d.nextTick(g,this,a)):d.nextTick(g,this,a)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(a){!b&&a?c._writableState?c._writableState.errorEmitted?d.nextTick(f,c):(c._writableState.errorEmitted=!0,d.nextTick(e,c,a)):d.nextTick(e,c,a):b?(d.nextTick(f,c),b(a)):d.nextTick(f,c)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(a,b){var c=a._readableState,d=a._writableState;c&&c.autoDestroy||d&&d.autoDestroy?a.destroy(b):a.emit("error",b)}}},8610:function(a,b,c){"use strict";var d=c(94281).q.ERR_STREAM_PREMATURE_CLOSE;function e(){}function f(a,b,c){if("function"==typeof b)return f(a,null,b);b||(b={}),c=(g=c||e,h=!1,function(){if(!h){h=!0;for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];g.apply(this,b)}});var g,h,i,j=b.readable|| !1!==b.readable&&a.readable,k=b.writable|| !1!==b.writable&&a.writable,l=function(){a.writable||n()},m=a._writableState&&a._writableState.finished,n=function(){k=!1,m=!0,j||c.call(a)},o=a._readableState&&a._readableState.endEmitted,p=function(){j=!1,o=!0,k||c.call(a)},q=function(b){c.call(a,b)},r=function(){var b;return j&&!o?(a._readableState&&a._readableState.ended||(b=new d),c.call(a,b)):k&&!m?(a._writableState&&a._writableState.ended||(b=new d),c.call(a,b)):void 0},s=function(){a.req.on("finish",n)};return(i=a).setHeader&&"function"==typeof i.abort?(a.on("complete",n),a.on("abort",r),a.req?s():a.on("request",s)):k&&!a._writableState&&(a.on("end",l),a.on("close",l)),a.on("end",p),a.on("finish",n),!1!==b.error&&a.on("error",q),a.on("close",r),function(){a.removeListener("complete",n),a.removeListener("abort",r),a.removeListener("request",s),a.req&&a.req.removeListener("finish",n),a.removeListener("end",l),a.removeListener("close",l),a.removeListener("finish",n),a.removeListener("end",p),a.removeListener("error",q),a.removeListener("close",r)}}a.exports=f},15167:function(a){a.exports=function(){throw Error("Readable.from is not available in the browser")}},59946:function(a,b,c){"use strict";var d,e=c(94281).q,f=e.ERR_MISSING_ARGS,g=e.ERR_STREAM_DESTROYED;function h(a){if(a)throw a}function i(a){a()}function j(a,b){return a.pipe(b)}a.exports=function(){for(var a,b=arguments.length,e=Array(b),k=0;k<b;k++)e[k]=arguments[k];var l,m=(l=e).length&&"function"==typeof l[l.length-1]?l.pop():h;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new f("streams");var n=e.map(function(b,f){var h=f<e.length-1;return function(a,b,e,f){f=(h=f,i=!1,function(){i||(i=!0,h.apply(void 0,arguments))});var h,i,j=!1;a.on("close",function(){j=!0}),void 0===d&&(d=c(8610)),d(a,{readable:b,writable:e},function(a){if(a)return f(a);j=!0,f()});var k=!1;return function(b){if(!j&&!k){var c;if(k=!0,(c=a).setHeader&&"function"==typeof c.abort)return a.abort();if("function"==typeof a.destroy)return a.destroy();f(b||new g("pipe"))}}}(b,h,f>0,function(b){a||(a=b),b&&n.forEach(i),h||(n.forEach(i),m(a))})});return e.reduce(j)}},82457:function(a,b,c){"use strict";var d=c(94281).q.ERR_INVALID_OPT_VALUE;a.exports={getHighWaterMark:function(a,b,c,e){var f,g,h,i=(f=b,g=e,h=c,null!=f.highWaterMark?f.highWaterMark:g?f[h]:null);if(null!=i){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var j=e?c:"highWaterMark";throw new d(j,i)}return Math.floor(i)}return a.objectMode?16:16384}}},22503:function(a,b,c){a.exports=c(17187).EventEmitter},94626:function(a,b,c){"use strict";var d=c(89509).Buffer,e=d.isEncoding||function(a){switch((a=""+a)&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function f(a){var b;switch(this.encoding=function(a){var b=function(a){var b;if(!a)return"utf8";for(;;)switch(a){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return a;default:if(b)return;a=(""+a).toLowerCase(),b=!0}}(a);if("string"!=typeof b&&(d.isEncoding===e||!e(a)))throw Error("Unknown encoding: "+a);return b||a}(a),this.encoding){case"utf16le":this.text=i,this.end=j,b=4;break;case"utf8":this.fillLast=h,b=4;break;case"base64":this.text=k,this.end=l,b=3;break;default:this.write=m,this.end=n;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=d.allocUnsafe(b)}function g(a){return a<=127?0:a>>5==6?2:a>>4==14?3:a>>3==30?4:a>>6==2?-1:-2}function h(a){var b=this.lastTotal-this.lastNeed,c=function(a,b,c){if((192&b[0])!=128)return a.lastNeed=0,"�";if(a.lastNeed>1&&b.length>1){if((192&b[1])!=128)return a.lastNeed=1,"�";if(a.lastNeed>2&&b.length>2&&(192&b[2])!=128)return a.lastNeed=2,"�"}}(this,a,b);return void 0!==c?c:this.lastNeed<=a.length?(a.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(a.copy(this.lastChar,b,0,a.length),this.lastNeed-=a.length)}function i(a,b){if((a.length-b)%2==0){var c=a.toString("utf16le",b);if(c){var d=c.charCodeAt(c.length-1);if(d>=55296&&d<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",b,a.length-1)}function j(a){var b=a&&a.length?this.write(a):"";if(this.lastNeed){var c=this.lastTotal-this.lastNeed;return b+this.lastChar.toString("utf16le",0,c)}return b}function k(a,b){var c=(a.length-b)%3;return 0===c?a.toString("base64",b):(this.lastNeed=3-c,this.lastTotal=3,1===c?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",b,a.length-c))}function l(a){var b=a&&a.length?this.write(a):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function m(a){return a.toString(this.encoding)}function n(a){return a&&a.length?this.write(a):""}b.s=f,f.prototype.write=function(a){var b,c;if(0===a.length)return"";if(this.lastNeed){if(void 0===(b=this.fillLast(a)))return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<a.length?b?b+this.text(a,c):this.text(a,c):b||""},f.prototype.end=function(a){var b=a&&a.length?this.write(a):"";return this.lastNeed?b+"�":b},f.prototype.text=function(a,b){var c=function(a,b,c){var d=b.length-1;if(d<c)return 0;var e=g(b[d]);return e>=0?(e>0&&(a.lastNeed=e-1),e):--d<c|| -2===e?0:(e=g(b[d]))>=0?(e>0&&(a.lastNeed=e-2),e):--d<c|| -2===e?0:(e=g(b[d]))>=0?(e>0&&(2===e?e=0:a.lastNeed=e-3),e):0}(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=c;var d=a.length-(c-this.lastNeed);return a.copy(this.lastChar,0,d),a.toString("utf8",b,d)},f.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length}},88473:function(a,b,c){(b=a.exports=c(79481)).Stream=b,b.Readable=b,b.Writable=c(64229),b.Duplex=c(56753),b.Transform=c(74605),b.PassThrough=c(82725),b.finished=c(8610),b.pipeline=c(59946)},73692:function(a,b,c){"use strict";a.exports=g;var d=c(57824),e=g.prototype,f=new Date%1e9;function g(a){a=a||{},this.id=a.id||(1e9*Math.random()>>>0)+f++,this.max=a.max||1/0,this.items=a.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(a.lastModified||new Date);for(var b,c,d=this.items.length;d--;)b=this.items[d],c=new Date(b.expires)-new Date,this._lookup[b.key]=b,c>0?this.expire(b.key,c):c<=0&&this.delete(b.key)}e.has=function(a){return a in this._lookup},e.get=function(a){if(!this.has(a))return null;var b=this._lookup[a];return b.refresh&&this.expire(a,b.refresh),this.items.splice(this.items.indexOf(b),1),this.items.push(b),b.value},e.meta=function(a){if(!this.has(a))return null;var b=this._lookup[a];return"meta"in b?b.meta:null},e.set=function(a,b,c){var d=this._lookup[a],e=this._lookup[a]={key:a,value:b};return this.lastModified=new Date,d?(clearTimeout(d.timeout),this.items.splice(this.items.indexOf(d),1,e)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(e),this.size++),c&&("ttl"in c&&this.expire(a,c.ttl),"meta"in c&&(e.meta=c.meta),c.refresh&&(e.refresh=c.ttl)),this},e.delete=function(a){var b=this._lookup[a];return!!b&&(this.lastModified=new Date,this.items.splice(this.items.indexOf(b),1),clearTimeout(b.timeout),delete this._lookup[a],this.size--,this)},e.expire=function(a,b){var c=b||0,e=this._lookup[a];if(!e)return this;if("string"==typeof c&&(c=d(b)),"number"!=typeof c)throw TypeError("Expiration time must be a string or number.");return clearTimeout(e.timeout),e.timeout=setTimeout(this.delete.bind(this,e.key),c),e.expires=Number(new Date)+c,this},e.clear=function(){for(var a=this.items.length;a--;)this.delete(this.items[a].key);return this},e.toJSON=function(){for(var a,b=Array(this.items.length),c=b.length;c--;)a=this.items[c],b[c]={key:a.key,meta:a.meta,value:a.value,expires:a.expires,refresh:a.refresh};return{id:this.id,max:isFinite(this.max)?this.max:void 0,lastModified:this.lastModified,items:b}}},82916:function(a,b,c){"use strict";let d=c(41807);class e{constructor(a,b,c){let e=this;this._started=d(),this._rescheduled=0,this._scheduled=b,this._args=c,this._triggered=!1,this._timerWrapper=()=>{e._rescheduled>0?(e._scheduled=e._rescheduled-(d()-e._started),e._schedule(e._scheduled)):(e._triggered=!0,a.apply(null,e._args))},this._timer=setTimeout(this._timerWrapper,b)}reschedule(a){a||(a=this._scheduled);let b=d();b+a-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(a)):this._triggered?this._schedule(a):(this._started=b,this._rescheduled=a)}_schedule(a){this._triggered=!1,this._started=d(),this._rescheduled=0,this._scheduled=a,this._timer=setTimeout(this._timerWrapper,a)}clear(){clearTimeout(this._timer)}}a.exports=function(){if("function"!=typeof arguments[0])throw Error("callback needed");if("number"!=typeof arguments[1])throw Error("timeout needed");let a;if(arguments.length>0){a=Array(arguments.length-2);for(var b=0;b<a.length;b++)a[b]=arguments[b+2]}return new e(arguments[0],arguments[1],a)}},41807:function(a){"use strict";a.exports=function(){return Date.now()}},29967:function(a,b,c){/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */ a.exports=function(a,b,c){if("number"!=typeof b)throw Error("second argument must be a Number");let e,f,g,h,i,j=!0,k;function l(a){function b(){c&&c(a,e),c=null}j?d(b):b()}function m(b,c,d){if(e[b]=d,c&&(i=!0),0== --g||c)l(c);else if(!i&&k<f){let j;h?(j=h[k],k+=1,a[j](function(a,b){m(j,a,b)})):(j=k,k+=1,a[j](function(a,b){m(j,a,b)}))}}Array.isArray(a)?(e=[],g=f=a.length):(h=Object.keys(a),e={},g=f=h.length),k=b,g?h?h.some(function(c,d){return a[c](function(a,b){m(c,a,b)}),d===b-1}):a.some(function(a,c){return a(function(a,b){m(c,a,b)}),c===b-1}):l(null),j=!1};let d=c(54375)},89509:function(a,b,c){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */ var d=c(48764),e=d.Buffer;function f(a,b){for(var c in a)b[c]=a[c]}function g(a,b,c){return e(a,b,c)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?a.exports=d:(f(d,b),b.Buffer=g),g.prototype=Object.create(e.prototype),f(e,g),g.from=function(a,b,c){if("number"==typeof a)throw TypeError("Argument must not be a number");return e(a,b,c)},g.alloc=function(a,b,c){if("number"!=typeof a)throw TypeError("Argument must be a number");var d=e(a);return void 0!==b?"string"==typeof c?d.fill(b,c):d.fill(b):d.fill(0),d},g.allocUnsafe=function(a){if("number"!=typeof a)throw TypeError("Argument must be a number");return e(a)},g.allocUnsafeSlow=function(a){if("number"!=typeof a)throw TypeError("Argument must be a number");return d.SlowBuffer(a)}},50202:function(a,b,c){"use strict";var d=c(63700),e=/[\/\?<>\\:\*\|"]/g,f=/[\x00-\x1f\x80-\x9f]/g,g=/^\.+$/,h=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,i=/[\. ]+$/;function j(a,b){if("string"!=typeof a)throw Error("Input must be string");return d(a.replace(e,b).replace(f,b).replace(g,b).replace(h,b).replace(i,b),255)}a.exports=function(a,b){var c=b&&b.replacement||"",d=j(a,c);return""===c?d:j(d,"")}},27695:function(a){"use strict";let b=new Map,c=()=>`${Date.now()}:${Math.floor(1e6*Math.random())}`;async function d(a,c,d){for(;b.get(d);){try{await a()}catch(e){setTimeout(()=>{throw e},1);break}if(!b.get(d))break;await new Promise(a=>{let e=setTimeout(a,c);b.set(d,e)})}}a.exports={setDelayedInterval:function(a,e,f){f=f||e;let g=c(),h=setTimeout(()=>{d(a,e,g)},f);return b.set(g,h),g},clearDelayedInterval:function(a){let c=b.get(a);c&&(clearTimeout(c),b.delete(a))}}},33694:function(a,b,c){"use strict";let d=c(33310);a.exports=(a,b={})=>{if(!d(a)&&!Array.isArray(a))throw TypeError("Expected a plain object or array");let{deep:c}=b,e=[],f=[],g=a=>{let b=e.indexOf(a);if(-1!==b)return f[b];let c=[];return e.push(a),f.push(c),c.push(...a.map(a=>Array.isArray(a)?g(a):d(a)?h(a):a)),c},h=a=>{let i=e.indexOf(a);if(-1!==i)return f[i];let j={},k=Object.keys(a).sort(b.compare);for(let l of(e.push(a),f.push(j),k)){let m=a[l],n;n=c&&Array.isArray(m)?g(m):c&&d(m)?h(m):m,Object.defineProperty(j,l,{...Object.getOwnPropertyDescriptor(a,l),value:n})}return j};return Array.isArray(a)?c?g(a):a.slice():h(a)}},20544:function(a){"use strict";function b(a,b){return a+c(b)}function c(a){let b=a;return b-=b>>1&1431655765,((b=(858993459&b)+(b>>2&858993459))+(b>>4)&252645135)*16843009>>24}function d(a,b){return a[0]-b[0]}function e(a){return a[1]}a.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(a,b){let c=this._internalPositionFor(a,!1);if(void 0===b)-1!==c&&(this._unsetInternalPos(c),this._unsetBit(a),this._changedLength=!0,this._changedData=!0);else{let d=!1;-1===c?(c=this._data.length,this._setBit(a),this._changedData=!0):d=!0,this._setInternalPos(c,a,b,d),this._changedLength=!0}}unset(a){this.set(a,void 0)}get(a){this._sortData();let b=this._internalPositionFor(a,!0);if(-1!==b)return this._data[b][1]}push(a){return this.set(this.length,a),this.length}get length(){if(this._sortData(),this._changedLength){let a=this._data[this._data.length-1];this._length=a?a[0]+1:0,this._changedLength=!1}return this._length}forEach(a){let b=0;for(;b<this.length;)a(this.get(b),b,this),b++}map(a){let b=0,c=Array(this.length);for(;b<this.length;)c[b]=a(this.get(b),b,this),b++;return c}reduce(a,b){let c=0,d=b;for(;c<this.length;){let e=this.get(c);d=a(d,e,c),c++}return d}find(a){let b=0,c,d;for(;b<this.length&&!c;)c=a(d=this.get(b)),b++;return c?d:void 0}_internalPositionFor(a,d){let e=this._bytePosFor(a,d);if(e>=this._bitArrays.length)return -1;let f=this._bitArrays[e],g=a-7*e;if(!((f&1<<g)>0))return -1;let h=this._bitArrays.slice(0,e).reduce(b,0),i=c(f& ~(4294967295<<g+1));return h+i-1}_bytePosFor(a,b){let c=Math.floor(a/7),d=c+1;for(;!b&&this._bitArrays.length<d;)this._bitArrays.push(0);return c}_setBit(a){let b=this._bytePosFor(a,!1);this._bitArrays[b]|=1<<a-7*b}_unsetBit(a){let b=this._bytePosFor(a,!1);this._bitArrays[b]&=~(1<<a-7*b)}_setInternalPos(a,b,c,d){let e=this._data,f=[b,c];if(d)this._sortData(),e[a]=f;else{if(e.length){if(e[e.length-1][0]>=b)e.push(f);else if(e[0][0]<=b)e.unshift(f);else{let g=Math.round(e.length/2);this._data=e.slice(0,g).concat(f).concat(e.slice(g))}}else this._data.push(f);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(a){this._data.splice(a,1)}_sortData(){this._changedData&&this._data.sort(d),this._changedData=!1}bitField(){let a=[],b=8,c=0,d=0,e,f=this._bitArrays.slice();for(;f.length||c;){0===c&&(e=f.shift(),c=7);let g=Math.min(c,b),h=~(255<<g),i=e&h;d|=i<<8-b,e>>>=g,c-=g,b-=g,b&&(c||f.length)||(a.push(d),d=0,b=8)}for(var j=a.length-1;j>0;j--){let k=a[j];if(0===k)a.pop();else break}return a}compactArray(){return this._sortData(),this._data.map(e)}}},10715:function(a,b,c){"use strict";let{AbortController:d}=globalThis,e=c(82916);class f extends d{constructor(a){super(),this._ms=a,this._timer=e(()=>this.abort(),a),Object.setPrototypeOf(this,f.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=e(()=>this.abort(),this._ms)}}a.exports={TimeoutController:f}},84957:function(a){!function(){a.exports=l;var b=1168776,c=86400*b,d=1e3*c,e=1e6,f="000000000",g=Math.trunc||function(a){var b=a-a%1;return 0===b&&(a<0||0===a&&1/a!=1/0)?-0:b},h=l.prototype;l.fromDate=function(a){return new l(+a)},l.fromInt64BE=q(0,1,2,3,0,4),l.fromInt64LE=q(3,2,1,0,4,0),l.fromString=function(a){var b,c=new l,d=(a+="").replace(/^\s*[+\-]?\d+/,function(a){var b=+a,d=1970+(b-1970)%400;return c.year=b-d,d}).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,function(a,c,d){return c<0&&(d*=-1),b=(60*+c+ +d)*6e4,""}).replace(/\.\d+$/,function(a){return c.nano=+(a+f).substr(1,9),""}).split(/\D+/);if(d.length>1?d[1]--:d[1]=0,c.time=b=Date.UTC.apply(Date,d)-(b||0),isNaN(b))throw TypeError("Invalid Date");return m(c)},l.fromTimeT=function(a){return o(a,0)},h.year=0,h.time=0,h.nano=0,h.addNano=function(a){return this.nano+=+a||0,this},h.getNano=function(){var a=m(this);return(a.time%1e3*e+ +a.nano+1e9)%1e9},h.getTimeT=function(){var a=m(this),c=Math.floor(a.time/1e3),d=a.year;return d&&(c+=d*b*86400/3200),c},h.getYear=function(){return this.toDate().getUTCFullYear()+this.year},h.toDate=function(){var a=m(this);return n(a.time)},h.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},h.toString=function(a){var b=this,c=b.toDate(),d={H:function(){return t(c.getUTCHours())},L:function(){return u(c.getUTCMilliseconds(),3)},M:function(){return t(c.getUTCMinutes())},N:function(){return u(b.getNano(),9)},S:function(){return t(c.getUTCSeconds())},Y:function(){var a=b.getYear();return a>999999?"+"+a:a>9999?"+"+u(a,6):a>=0?u(a,4):a>= -999999?"-"+u(-a,6):a},a:function(){return j[c.getUTCDay()]},b:function(){return i[c.getUTCMonth()]},d:function(){return t(c.getUTCDate())},e:function(){return s(c.getUTCDate())},m:function(){return t(c.getUTCMonth()+1)}};return e(a||"%Y-%m-%dT%H:%M:%S.%NZ");function e(a){return a.replace(/%./g,function(a){var b=a[1],c=k[b],f=d[b];return c?e(c):f?f():a})}},h.writeInt64BE=p(0,1,2,3,0,4),h.writeInt64LE=p(3,2,1,0,4,0);var i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],j=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],k={"%":"%",F:"%Y-%m-%d",n:"\n",R:"%H:%M",T:"%H:%M:%S",t:"	",X:"%T",Z:"GMT",z:"+0000"};function l(a,b,c){var d=this;if(!(d instanceof l))return new l(a,b,c);d.time=+a||0,d.nano=+b||0,d.year=+c||0,m(d)}function m(a){var b,c,f=a.year,h=a.time,i=a.nano;if(i<0||e<=i){var j=Math.floor(i/e);i-=j*e,h+=j,b=1}var k=f%3200;if(h< -864e13||864e13<h||k){(c=g(h/d))&&(f+=3200*c,h-=c*d);var l=n(h);l.setUTCFullYear(k+l.getUTCFullYear()),f-=k,h=+l,c=g(f/3200);var m=h+c*d;c&& -864e13<=m&&m<=864e13&&(f-=3200*c,h=m),b=1}return b&&(a.year=f,a.time=h,a.nano=i),a}function n(a){var b=new Date(0);return b.setTime(a),b}function o(a,b){b|=0,a=+a||0;var d=g((b*=4294967296)/c)+g(a/c),e=b%c+a%c,f=g(e/c);return f&&(d+=f,e-=f*c),new l(1e3*e,0,3200*d)}function p(a,c,d,e,f,h){return function(a,c){var d=m(this);a||(a=Array(8)),r(a,c|=0);var e=Math.floor(d.time/1e3),j=d.year*(86400*b/3200),k=g(j/4294967296)+g(e/4294967296),l=j%4294967296+e%4294967296,n=Math.floor(l/4294967296);return n&&(k+=n,l-=4294967296*n),i(a,c+f,k),i(a,c+h,l),a};function i(b,f,g){b[f+a]=g>>24&255,b[f+c]=g>>16&255,b[f+d]=g>>8&255,b[f+e]=255&g}}function q(a,b,c,d,e,f){return function(a,b){r(a,b|=0);var c=g(a,b+e),d=g(a,b+f);return o(d,c)};function g(e,f){return 16777216*e[f+a]+(e[f+b]<<16|e[f+c]<<8|e[f+d])}}function r(a,b){var c=a&&a.length;if(null==c)throw TypeError("Invalid Buffer");if(c<b+8)throw RangeError("Out of range")}function s(a){return(a>9?"":" ")+(0|a)}function t(a){return(a>9?"":"0")+(0|a)}function u(a,b){return(f+(0|a)).substr(-b)}}()},63700:function(a,b,c){"use strict";var d=c(71156),e=c(90793);a.exports=d.bind(null,e)},71156:function(a){"use strict";function b(a){return a>=55296&&a<=56319}function c(a){return a>=56320&&a<=57343}a.exports=function(a,d,e){if("string"!=typeof d)throw Error("Input must be string");for(var f,g,h=d.length,i=0,j=0;j<h;j+=1){if(f=d.charCodeAt(j),g=d[j],b(f)&&c(d.charCodeAt(j+1))&&(j+=1,g+=d[j]),i+=a(g),i===e)return d.slice(0,j+1);if(i>e)return d.slice(0,j-g.length+1)}return d}},90793:function(a){"use strict";function b(a){return a>=55296&&a<=56319}function c(a){return a>=56320&&a<=57343}a.exports=function(a){if("string"!=typeof a)throw Error("Input must be string");for(var d=a.length,e=0,f=null,g=null,h=0;h<d;h++)c(f=a.charCodeAt(h))?null!=g&&b(g)?e+=1:e+=3:f<=127?e+=1:f>=128&&f<=2047?e+=2:f>=2048&&f<=65535&&(e+=3),g=f;return e}},94927:function(a,b,c){a.exports=function(a,b){if(d("noDeprecation"))return a;var c=!1;return function(){if(!c){if(d("throwDeprecation"))throw Error(b);d("traceDeprecation")?console.trace(b):console.warn(b),c=!0}return a.apply(this,arguments)}};function d(a){try{if(!c.g.localStorage)return!1}catch(b){return!1}var d=c.g.localStorage[a];return null!=d&&"true"===String(d).toLowerCase()}},91496:function(a){"function"==typeof Object.create?a.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:a.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},20384:function(a){a.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},89539:function(a,b,c){var d,e=c(34155),f=/%[sdj%]/g;b.format=function(a){if(!u(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(h(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,e=d.length,g=String(a).replace(f,function(a){if("%%"===a)return"%";if(c>=e)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(b){return"[Circular]"}default:return a}}),i=d[c];c<e;i=d[++c])s(i)||!x(i)?g+=" "+i:g+=" "+h(i);return g},b.deprecate=function(a,d){if(v(c.g.process))return function(){return b.deprecate(a,d).apply(this,arguments)};if(!0===e.noDeprecation)return a;var f=!1;return function(){if(!f){if(e.throwDeprecation)throw Error(d);e.traceDeprecation?console.trace(d):console.error(d),f=!0}return a.apply(this,arguments)}};var g={};function h(a,c){var d={seen:[],stylize:j};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),r(c)?d.showHidden=c:c&&b._extend(d,c),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=i),k(d,a,d.depth)}function i(a,b){var c=h.styles[b];return c?"\x1b["+h.colors[c][0]+"m"+a+"\x1b["+h.colors[c][1]+"m":a}function j(a,b){return a}function k(a,c,d){if(a.customInspect&&c&&A(c.inspect)&&c.inspect!==b.inspect&&!(c.constructor&&c.constructor.prototype===c)){var e,f=c.inspect(d,a);return u(f)||(f=k(a,f,d)),f}var g=l(a,c);if(g)return g;var h,i,j=Object.keys(c),r=(i={},(h=j).forEach(function(a,b){i[a]=!0}),i);if(a.showHidden&&(j=Object.getOwnPropertyNames(c)),z(c)&&(j.indexOf("message")>=0||j.indexOf("description")>=0))return m(c);if(0===j.length){if(A(c)){var s=c.name?": "+c.name:"";return a.stylize("[Function"+s+"]","special")}if(w(c))return a.stylize(RegExp.prototype.toString.call(c),"regexp");if(y(c))return a.stylize(Date.prototype.toString.call(c),"date");if(z(c))return m(c)}var t="",v=!1,x=["{","}"];return(q(c)&&(v=!0,x=["[","]"]),A(c)&&(t=" [Function"+(c.name?": "+c.name:"")+"]"),w(c)&&(t=" "+RegExp.prototype.toString.call(c)),y(c)&&(t=" "+Date.prototype.toUTCString.call(c)),z(c)&&(t=" "+m(c)),0!==j.length||v&&0!=c.length)?d<0?w(c)?a.stylize(RegExp.prototype.toString.call(c),"regexp"):a.stylize("[Object]","special"):(a.seen.push(c),e=v?n(a,c,d,r,j):j.map(function(b){return o(a,c,d,r,b,v)}),a.seen.pop(),p(e,t,x)):x[0]+t+x[1]}function l(a,b){if(v(b))return a.stylize("undefined","undefined");if(u(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return t(b)?a.stylize(""+b,"number"):r(b)?a.stylize(""+b,"boolean"):s(b)?a.stylize("null","null"):void 0}function m(a){return"["+Error.prototype.toString.call(a)+"]"}function n(a,b,c,d,e){for(var f=[],g=0,h=b.length;g<h;++g)E(b,String(g))?f.push(o(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(o(a,b,c,d,e,!0))}),f}function o(a,b,c,d,e,f){var g,h,i;if((i=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]}).get?h=i.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):i.set&&(h=a.stylize("[Setter]","special")),E(d,e)||(g="["+e+"]"),!h&&(0>a.seen.indexOf(i.value)?(h=s(c)?k(a,i.value,null):k(a,i.value,c-1)).indexOf("\n")> -1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n")):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;(g=JSON.stringify(""+e)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function p(a,b,c){var d=0;return a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function q(a){return Array.isArray(a)}function r(a){return"boolean"==typeof a}function s(a){return null===a}function t(a){return"number"==typeof a}function u(a){return"string"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===B(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===B(a)}function z(a){return x(a)&&("[object Error]"===B(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return Object.prototype.toString.call(a)}function C(a){return a<10?"0"+a.toString(10):a.toString(10)}b.debuglog=function(a){if(v(d)&&(d=e.env.NODE_DEBUG||""),!g[a=a.toUpperCase()]){if(RegExp("\\b"+a+"\\b","i").test(d)){var c=e.pid;g[a]=function(){var d=b.format.apply(b,arguments);console.error("%s %d: %s",a,c,d)}}else g[a]=function(){}}return g[a]},b.inspect=h,h.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},h.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},b.isArray=q,b.isBoolean=r,b.isNull=s,b.isNullOrUndefined=function(a){return null==a},b.isNumber=t,b.isString=u,b.isSymbol=function(a){return"symbol"==typeof a},b.isUndefined=v,b.isRegExp=w,b.isObject=x,b.isDate=y,b.isError=z,b.isFunction=A,b.isPrimitive=function(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a|| void 0===a},b.isBuffer=c(20384);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.log=function(){var a,c;console.log("%s - %s",(a=new Date,c=[C(a.getHours()),C(a.getMinutes()),C(a.getSeconds())].join(":"),[a.getDate(),D[a.getMonth()],c].join(" ")),b.format.apply(b,arguments))},b.inherits=c(91496),b._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}},23209:function(a){a.exports=b;function b(a,c){var d,e=0,c=c||0,f=0,g=c,h=a.length;do{if(g>=h)throw b.bytes=0,RangeError("Could not decode varint");d=a[g++],e+=f<28?(127&d)<<f:(127&d)*Math.pow(2,f),f+=7}while(d>=128);return b.bytes=g-c,e}},7089:function(a){a.exports=b;function b(a,c,d){c=c||[];for(var e=d=d||0;a>=2147483648;)c[d++]=255&a|128,a/=128;for(;-128&a;)c[d++]=255&a|128,a>>>=7;return c[d]=0|a,b.bytes=d-e+1,c}},13924:function(a,b,c){a.exports={encode:c(7089),decode:c(23209),encodingLength:c(64146)}},64146:function(a){a.exports=function(a){return a<128?1:a<16384?2:a<2097152?3:a<268435456?4:a<34359738368?5:a<4398046511104?6:a<562949953421312?7:a<72057594037927940?8:a<0x7fffffffffffffff?9:10}},82838:function(a,b,c){"use strict";let d=c(13924);a.exports=a=>{if(!(a instanceof Uint8Array))throw Error("arg needs to be a Uint8Array");let b=[];for(;a.length>0;){let c=d.decode(a);b.push(c),a=a.slice(d.decode.bytes)}return b}},42473:function(a){"use strict";var b=function(){};a.exports=b},97916:function(a,b,c){"use strict";let d=c(59134),e="object"==typeof window&&"object"==typeof document&&9===document.nodeType,f=d(),g=void 0!==globalThis.process&& void 0!==globalThis.process.release&&"node"===globalThis.process.release.name&&!f,h="function"==typeof importScripts&&"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,i=void 0!==globalThis.process&& void 0!==globalThis.process.env&&"test"===globalThis.process.env.NODE_ENV,j="undefined"!=typeof navigator&&"ReactNative"===navigator.product;a.exports={isTest:i,isElectron:f,isElectronMain:f&&!e,isElectronRenderer:f&&e,isNode:g,isBrowser:e&&!f,isWebWorker:h,isEnvWithDom:e,isReactNative:j}},2236:function(a,b,c){"use strict";function d(a){var b;if("function"==typeof Symbol&&(Symbol.asyncIterator&&null!=(b=a[Symbol.asyncIterator])||Symbol.iterator&&null!=(b=a[Symbol.iterator])))return b.call(a);throw TypeError("Object is not async iterable")}c.d(b,{Z:function(){return d}})},99903:function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP={};c.r(aP),c.d(aP,{RsaPrivateKey:function(){return dp},RsaPublicKey:function(){return dn},fromJwk:function(){return ds},generateKeyPair:function(){return dt},unmarshalRsaPrivateKey:function(){return dq},unmarshalRsaPublicKey:function(){return dr}});var aQ={};c.r(aQ),c.d(aQ,{Ed25519PrivateKey:function(){return ep},Ed25519PublicKey:function(){return eo},generateKeyPair:function(){return es},generateKeyPairFromSeed:function(){return et},unmarshalEd25519PrivateKey:function(){return eq},unmarshalEd25519PublicKey:function(){return er}});var aR={};c.r(aR),c.d(aR,{Secp256k1PrivateKey:function(){return fw},Secp256k1PublicKey:function(){return fv},generateKeyPair:function(){return fz},unmarshalSecp256k1PrivateKey:function(){return fx},unmarshalSecp256k1PublicKey:function(){return fy}});var aS={};c.r(aS),c.d(aS,{Decoder:function(){return oG},Encoder:function(){return oF},PacketType:function(){return au},protocol:function(){return oE}});var aT={};c.r(aT),c.d(aT,{RsaPrivateKey:function(){return qh},RsaPublicKey:function(){return qg},fromJwk:function(){return qk},generateKeyPair:function(){return ql},unmarshalRsaPrivateKey:function(){return qi},unmarshalRsaPublicKey:function(){return qj}});var aU={};c.r(aU),c.d(aU,{Ed25519PrivateKey:function(){return qt},Ed25519PublicKey:function(){return qs},generateKeyPair:function(){return qw},generateKeyPairFromSeed:function(){return qx},unmarshalEd25519PrivateKey:function(){return qu},unmarshalEd25519PublicKey:function(){return qv}});var aV={};c.r(aV),c.d(aV,{Secp256k1PrivateKey:function(){return qD},Secp256k1PublicKey:function(){return qC},generateKeyPair:function(){return qG},unmarshalSecp256k1PrivateKey:function(){return qE},unmarshalSecp256k1PublicKey:function(){return qF}});var aW={};c.r(aW),c.d(aW,{abortedError:function(){return sj},notFoundError:function(){return si}});var aX=c(40726);c(106);var aY=c(69860),aZ=c(32114),a$=c(4956),a_=c(81972),a0=c(49101);c(23085),c(28630);var a1=c(78103);c(37211);class a2 extends Error{constructor(a="not initialized"){super(a),this.name="NotInitializedError",this.code=a2.code}}a2.code="ERR_NOT_INITIALIZED",(class extends Error{constructor(a="cannot initialize an initializing node"){super(a),this.name="AlreadyInitializingError",this.code=a3.code}}).code="ERR_ALREADY_INITIALIZING";class a3 extends Error{constructor(a="cannot re-initialize an initialized node"){super(a),this.name="AlreadyInitializedError",this.code=a3.code}}a3.code="ERR_ALREADY_INITIALIZED";class a4 extends Error{constructor(a="not started"){super(a),this.name="NotStartedError",this.code=a4.code}}a4.code="ERR_NOT_STARTED";class a5 extends Error{constructor(a="cannot start, already startin"){super(a),this.name="AlreadyStartingError",this.code=a5.code}}a5.code="ERR_ALREADY_STARTING";class a6 extends Error{constructor(a="cannot start, already started"){super(a),this.name="AlreadyStartedError",this.code=a6.code}}a6.code="ERR_ALREADY_STARTED";class a7 extends Error{constructor(a="not enabled"){super(a),this.name="NotEnabledError",this.code=a7.code}}a7.code="ERR_NOT_ENABLED";var a8=c(52217);c(24981);var a9=c(81362),ba=c(78647),bb=c(92263);let bc=new TextEncoder().encode("/"),bd=bc[0];class be{constructor(a,b){if("string"==typeof a)this._buf=(0,a8.fromString)(a);else if(a instanceof Uint8Array)this._buf=a;else throw Error("Invalid key, should be String of Uint8Array");if(null==b&&(b=!0),b&&this.clean(),0===this._buf.byteLength||this._buf[0]!==bd)throw Error("Invalid key")}toString(a="utf8"){return(0,bb.toString)(this._buf,a)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(a){return new be(a.join("/"))}static random(){return new be((0,ba.nanoid)().replace(/-/g,""))}static asKey(a){return a instanceof Uint8Array||"string"==typeof a?new be(a):a.uint8Array?new be(a.uint8Array()):null}clean(){if(this._buf&&0!==this._buf.byteLength||(this._buf=bc),this._buf[0]!==bd){let a=new Uint8Array(this._buf.byteLength+1);a.fill(bd,0,1),a.set(this._buf,1),this._buf=a}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===bd;)this._buf=this._buf.subarray(0,-1)}less(a){let b=this.list(),c=a.list();for(let d=0;d<b.length;d++){if(c.length<d+1)return!1;let e=b[d],f=c[d];if(e<f)return!0;if(e>f)return!1}return b.length<c.length}reverse(){return be.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let a=this.namespaces();return a[a.length-1]}list(){return this.toString().split("/").slice(1)}type(){return bf(this.baseNamespace())}name(){return bg(this.baseNamespace())}instance(a){return new be(this.toString()+":"+a)}path(){let a=this.parent().toString();return a.endsWith("/")||(a+="/"),a+=this.type(),new be(a)}parent(){let a=this.list();return new be(1===a.length?"/":a.slice(0,-1).join("/"))}child(a){return"/"===this.toString()?a:"/"===a.toString()?this:new be(this.toString()+a.toString(),!1)}isAncestorOf(a){return a.toString()!==this.toString()&&a.toString().startsWith(this.toString())}isDecendantOf(a){return a.toString()!==this.toString()&&this.toString().startsWith(a.toString())}isTopLevel(){return 1===this.list().length}concat(...a){return be.withNamespaces([...this.namespaces(),...bh(a.map(a=>a.namespaces()))])}}function bf(a){let b=a.split(":");return b.length<2?"":b.slice(0,-1).join(":")}function bg(a){let b=a.split(":");return b[b.length-1]}function bh(a){return[].concat(...a)}var bi=c(10715),bj=c(32044),bk=c(92816);class bl extends Error{constructor(a="request timed out"){super(a),this.name="TimeoutError",this.code=bl.code}}function bm(a,b){return(...c)=>{let d=c[null==b?c.length-1:b];if(!d||!d.timeout)return a(...c);let e="string"==typeof d.timeout?(0,bk.Z)(d.timeout):d.timeout,f=new bi.TimeoutController(e);d.signal=(0,bj.anySignal)([d.signal,f.signal]);let g=a(...c),h=new Promise((a,b)=>{f.signal.addEventListener("abort",()=>{b(new bl)})}),i=Date.now(),j=()=>{if(f.signal.aborted)throw new bl;let a=Date.now()-i;if(a>e)throw f.abort(),new bl};return g[Symbol.asyncIterator]?async function*(){let a=g[Symbol.asyncIterator]();try{for(;;){let{value:b,done:c}=await Promise.race([a.next(),h]);if(c)break;j(),yield b}}catch(d){throw j(),d}finally{f.clear(),a.return&&a.return()}}():(async()=>{try{let a=await Promise.race([g,h]);return j(),a}catch(b){throw j(),b}finally{f.clear()}})()}}bl.code="ERR_TIMEOUT";let bn=new be("/local/filesroot"),bo=262144,bp=async function(a,b,c,d={}){let{cid:e,path:f}=toCidAndPath(c);f&&(d.path=f);let g=e,h=d.path||"";if(h.startsWith("/")&&(h=h.substring(1)),d.path)try{for await(let{value:i,remainderPath:j}of bq(e,d.path,b,a,{signal:d.signal})){if(!CID.asCID(i))break;h=j,g=i}}catch(k){throw k.message.startsWith("Object has no property")&&(k.message=`no link named "${h.split("/")[0]}" under ${g}`,k.code="ERR_NO_LINK"),k}return{cid:g,remainderPath:h||""}};bm(async(a,b)=>await a);let bq=async function*(a,b,c,d,e){let f=async a=>{let b=await c.getCodec(a.code),f=await d.blocks.get(a,e);return b.decode(f)},g=b.split("/").filter(Boolean),h=await f(a),i=a;for(;g.length;){let j=g.shift();if(!j)throw errCode(Error(`Could not resolve path "${b}"`),"ERR_INVALID_PATH");if(a.code===dagPB.code&&Array.isArray(h.Links)){let k=h.Links.find(a=>a.Name===j);if(k){yield{value:k.Hash,remainderPath:g.join("/")},h=await f(k.Hash),i=k.Hash;continue}}if(Object.prototype.hasOwnProperty.call(h,j))yield{value:h=h[j],remainderPath:g.join("/")};else throw errCode(Error(`no link named "${j}" under ${i}`),"ERR_NO_LINK");CID.asCID(h)&&(i=h,h=await f(h))}yield{value:h,remainderPath:""}};class br{static create({start:a,stop:b}){return new br(a,b)}static async start(a,b){let{state:c,activate:d}=a;switch(c.status){case"stopped":try{let e=d(b);a.state={status:"starting",ready:e};let f=await e;return a.state={status:"started",value:f},f}catch(g){throw a.state={status:"stopped"},g}case"starting":throw new AlreadyStartingError;case"started":throw new AlreadyStartedError;case"stopping":return await c.ready,await br.start(a,b);default:return br.panic(a)}}static async stop(a){let{state:b,deactivate:c}=a;switch(b.status){case"stopped":break;case"starting":try{await b.ready}catch(d){}return await br.stop(a);case"stopping":return await b.ready;case"started":c&&await c(b.value),a.state={status:"stopped"};break;default:br.panic(b)}}static try({state:a}){return"started"===a.status?a.value:null}static async use({state:a},b){switch(a.status){case"started":return a.value;case"starting":return await withTimeout(a.ready,b);default:throw new NotStartedError}}static panic({state:a}){let b=JSON.stringify({status:a.status});throw RangeError(`Service in invalid state ${b}, should never happen if you see this please report a bug`)}constructor(a,b){this.activate=a,this.deactivate=b,this.state={status:"stopped"}}async use(a){return await br.use(this,a)}try(){return br.try(this)}}var bs=c(70248),bt=c(78939);class bu extends Error{constructor(a){super(a),this.name="TimeoutError"}}class bv extends Error{constructor(a){super(),this.name="AbortError",this.message=a}}let bw=a=>void 0===globalThis.DOMException?new bv(a):new DOMException(a),bx=a=>{let b=void 0===a.reason?bw("This operation was aborted."):a.reason;return b instanceof Error?b:bw(b)};var by=function(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)};w=new WeakMap;var bz=function(a,b,c,d,e){if("m"===d)throw TypeError("Private method is not writable");if("a"===d&&!e)throw TypeError("Private accessor was defined without a setter");if("function"==typeof b?a!==b||!e:!b.has(a))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c},bA=function(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)};let bB=new bu;class bC extends Error{}class bD extends bt{constructor(a){var b,c,d,e;if(super(),x.add(this),y.set(this,void 0),z.set(this,void 0),A.set(this,0),B.set(this,void 0),C.set(this,void 0),D.set(this,0),E.set(this,void 0),F.set(this,void 0),G.set(this,void 0),H.set(this,void 0),I.set(this,0),J.set(this,void 0),K.set(this,void 0),L.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"==typeof(a={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:class{constructor(){w.set(this,[])}enqueue(a,b){b={priority:0,...b};let c={priority:b.priority,run:a};if(this.size&&by(this,w,"f")[this.size-1].priority>=b.priority){by(this,w,"f").push(c);return}let d=function(a,b,c){let d=0,e=a.length;for(;e>0;){let f=Math.trunc(e/2),g=d+f;0>=c(a[g],b)?(d=++g,e-=f+1):e=f}return d}(by(this,w,"f"),c,(a,b)=>b.priority-a.priority);by(this,w,"f").splice(d,0,c)}dequeue(){let a=by(this,w,"f").shift();return null==a?void 0:a.run}filter(a){return by(this,w,"f").filter(b=>b.priority===a.priority).map(a=>a.run)}get size(){return by(this,w,"f").length}},...a}).intervalCap&&a.intervalCap>=1))throw TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(c=null===(b=a.intervalCap)|| void 0===b?void 0:b.toString())&& void 0!==c?c:""}\` (${typeof a.intervalCap})`);if(void 0===a.interval||!(Number.isFinite(a.interval)&&a.interval>=0))throw TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(e=null===(d=a.interval)|| void 0===d?void 0:d.toString())&& void 0!==e?e:""}\` (${typeof a.interval})`);bz(this,y,a.carryoverConcurrencyCount,"f"),bz(this,z,a.intervalCap===Number.POSITIVE_INFINITY||0===a.interval,"f"),bz(this,B,a.intervalCap,"f"),bz(this,C,a.interval,"f"),bz(this,G,new a.queueClass,"f"),bz(this,H,a.queueClass,"f"),this.concurrency=a.concurrency,this.timeout=a.timeout,bz(this,L,!0===a.throwOnTimeout,"f"),bz(this,K,!1===a.autoStart,"f")}get concurrency(){return bA(this,J,"f")}set concurrency(a){if(!("number"==typeof a&&a>=1))throw TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${a}\` (${typeof a})`);bz(this,J,a,"f"),bA(this,x,"m",V).call(this)}async add(a,b={}){return new Promise((c,d)=>{let e=async()=>{var e,f,g;bz(this,I,(f=bA(this,I,"f"),++f),"f"),bz(this,A,(g=bA(this,A,"f"),++g),"f");try{if(null===(e=b.signal)|| void 0===e?void 0:e.aborted){d(new bC("The task was aborted."));return}let h=void 0===this.timeout&& void 0===b.timeout?a({signal:b.signal}):function(a,b,c,d){let e,f=new Promise((f,g)=>{if("number"!=typeof b||1!==Math.sign(b))throw TypeError(`Expected \`milliseconds\` to be a positive number, got \`${b}\``);if(b===Number.POSITIVE_INFINITY){f(a);return}if((d={customTimers:{setTimeout,clearTimeout},...d}).signal){let{signal:h}=d;h.aborted&&g(bx(h)),h.addEventListener("abort",()=>{g(bx(h))})}e=d.customTimers.setTimeout.call(void 0,()=>{if("function"==typeof c){try{f(c())}catch(d){g(d)}return}let e="string"==typeof c?c:`Promise timed out after ${b} milliseconds`,h=c instanceof Error?c:new bu(e);"function"==typeof a.cancel&&a.cancel(),g(h)},b),(async()=>{try{f(await a)}catch(b){g(b)}finally{d.customTimers.clearTimeout.call(void 0,e)}})()});return f.clear=()=>{clearTimeout(e),e=void 0},f}(Promise.resolve(a({signal:b.signal})),void 0===b.timeout?this.timeout:b.timeout,()=>{(void 0===b.throwOnTimeout?bA(this,L,"f"):b.throwOnTimeout)&&d(bB)}),i=await h;c(i),this.emit("completed",i)}catch(j){d(j),this.emit("error",j)}bA(this,x,"m",O).call(this)};bA(this,G,"f").enqueue(e,b),bA(this,x,"m",S).call(this),this.emit("add")})}async addAll(a,b){return Promise.all(a.map(async a=>this.add(a,b)))}start(){return bA(this,K,"f")&&(bz(this,K,!1,"f"),bA(this,x,"m",V).call(this)),this}pause(){bz(this,K,!0,"f")}clear(){bz(this,G,new(bA(this,H,"f")),"f")}async onEmpty(){0!==bA(this,G,"f").size&&await bA(this,x,"m",W).call(this,"empty")}async onSizeLessThan(a){!(bA(this,G,"f").size<a)&&await bA(this,x,"m",W).call(this,"next",()=>bA(this,G,"f").size<a)}async onIdle(){(0!==bA(this,I,"f")||0!==bA(this,G,"f").size)&&await bA(this,x,"m",W).call(this,"idle")}get size(){return bA(this,G,"f").size}sizeBy(a){return bA(this,G,"f").filter(a).length}get pending(){return bA(this,I,"f")}get isPaused(){return bA(this,K,"f")}}y=new WeakMap,z=new WeakMap,A=new WeakMap,B=new WeakMap,C=new WeakMap,D=new WeakMap,E=new WeakMap,F=new WeakMap,G=new WeakMap,H=new WeakMap,I=new WeakMap,J=new WeakMap,K=new WeakMap,L=new WeakMap,x=new WeakSet,M=function(){return bA(this,z,"f")||bA(this,A,"f")<bA(this,B,"f")},N=function(){return bA(this,I,"f")<bA(this,J,"f")},O=function(){var a;bz(this,I,(a=bA(this,I,"f"),--a),"f"),bA(this,x,"m",S).call(this),this.emit("next")},P=function(){this.emit("empty"),0===bA(this,I,"f")&&this.emit("idle")},Q=function(){bA(this,x,"m",U).call(this),bA(this,x,"m",T).call(this),bz(this,F,void 0,"f")},R=function(){let a=Date.now();if(void 0===bA(this,E,"f")){let b=bA(this,D,"f")-a;if(!(b<0))return void 0===bA(this,F,"f")&&bz(this,F,setTimeout(()=>{bA(this,x,"m",Q).call(this)},b),"f"),!0;bz(this,A,bA(this,y,"f")?bA(this,I,"f"):0,"f")}return!1},S=function(){if(0===bA(this,G,"f").size)return bA(this,E,"f")&&clearInterval(bA(this,E,"f")),bz(this,E,void 0,"f"),bA(this,x,"m",P).call(this),!1;if(!bA(this,K,"f")){let a=!bA(this,x,"a",R);if(bA(this,x,"a",M)&&bA(this,x,"a",N)){let b=bA(this,G,"f").dequeue();return!!b&&(this.emit("active"),b(),a&&bA(this,x,"m",T).call(this),!0)}}return!1},T=function(){!bA(this,z,"f")&& void 0===bA(this,E,"f")&&(bz(this,E,setInterval(()=>{bA(this,x,"m",U).call(this)},bA(this,C,"f")),"f"),bz(this,D,Date.now()+bA(this,C,"f"),"f"))},U=function(){0===bA(this,A,"f")&&0===bA(this,I,"f")&&bA(this,E,"f")&&(clearInterval(bA(this,E,"f")),bz(this,E,void 0,"f")),bz(this,A,bA(this,y,"f")?bA(this,I,"f"):0,"f"),bA(this,x,"m",V).call(this)},V=function(){for(;bA(this,x,"m",S).call(this););},W=async function(a,b){return new Promise(c=>{let d=()=>{(!b||b())&&(this.off(a,d),c())};this.on(a,d)})},c(67137),new class{constructor(a){this.lru=bs(a)}get(a){let b=this.lru.get(a);if(b){if(b.expire&&b.expire<Date.now()){this.lru.remove(a);return}return b.value}}set(a,b,c){this.lru.set(a,{value:b,expire:Date.now()+c})}has(a){let b=this.get(a);return!!b}remove(a){this.lru.remove(a)}clear(){this.lru.clear()}}(1e3);let bE=bD.default?bD.default:bD;new bE({concurrency:4});var bF=c(25809),bG=c(93093);c(73297);let bH=Symbol.for("@libp2p/peer-id");function bI(a){return null!=a&&Boolean(a[bH])}function bJ(a){return aZ(a=a||Error("Not Found"),"ERR_NOT_FOUND")}var bK=c(19588),bL=c(84957),bM=c(20605);let bN=Symbol.for("@achingbrain/uint8arraylist");function bO(a,b,c){if(null==b||b<0||b>=c)throw RangeError("index is out of bounds");let d=0;for(let e of a){let f=d+e.byteLength;if(b<f)return{buf:e,index:b-d};d=f}throw RangeError("index is out of bounds")}function bP(a){return Boolean(a?.[bN])}class bQ{constructor(...a){Object.defineProperty(this,bN,{value:!0}),this.bufs=[],this.length=0,this.appendAll(a)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...a){this.appendAll(a)}appendAll(a){let b=0;for(let c of a)if(c instanceof Uint8Array)b+=c.byteLength,this.bufs.push(c);else if(bP(c))b+=c.length,this.bufs=this.bufs.concat(c.bufs);else throw Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=b}get(a){let b=bO(this.bufs,a,this.length);return b.buf[b.index]}set(a,b){let c=bO(this.bufs,a,this.length);c.buf[c.index]=b}write(a,b=0){if(a instanceof Uint8Array)for(let c=0;c<a.length;c++)this.set(b+c,a[c]);else if(bP(a))for(let d=0;d<a.length;d++)this.set(b+d,a.get(d));else throw Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(a){if(!Number.isNaN(a=Math.trunc(a))&&!(a<=0))for(;this.bufs.length>0;)if(a>=this.bufs[0].byteLength)a-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(a),this.length-=a;break}}slice(a,b){let{bufs:c,length:d}=this._subList(a,b);return(0,bM.concat)(c,d)}subarray(a,b){let{bufs:c}=this._subList(a,b),d=new bQ;return d.appendAll(c),d}_subList(a,b){if(null==a&&null==b)return{bufs:this.bufs,length:this.length};if(a=a??0,b=b??(this.length>0?this.length:0),a<0&&(a=this.length+a),b<0&&(b=this.length+b),a<0||b>this.length)throw RangeError("index out of bounds");if(a===b)return{bufs:[],length:0};let c=[],d=0;for(let e of this.bufs){let f=d,g=f+e.byteLength,h=a>=f&&a<g,i=b>f&&b<=g,j=a<f&&b>=g;d=g;let k,l;if(h&&(k=a-f,l=e.byteLength),i&&(l=b-f,null==k&&(k=0)),j&&(k=0,l=e.byteLength),null!=k&&null!=l&&c.push(e.subarray(k,l)),i)break}return{bufs:c,length:b-a}}getInt8(a){let b=this.slice(a,a+1),c=new DataView(b.buffer,b.byteOffset,b.byteLength);return c.getInt8(0)}setInt8(a,b){let c=new Uint8Array(1),d=new DataView(c.buffer,c.byteOffset,c.byteLength);d.setInt8(0,b),this.write(c,a)}getInt16(a,b){let c=this.slice(a,a+2),d=new DataView(c.buffer,c.byteOffset,c.byteLength);return d.getInt16(0,b)}setInt16(a,b,c){let d=new Uint8Array(2),e=new DataView(d.buffer,d.byteOffset,d.byteLength);e.setInt16(0,b,c),this.write(d,a)}getInt32(a,b){let c=this.slice(a,a+4),d=new DataView(c.buffer,c.byteOffset,c.byteLength);return d.getInt32(0,b)}setInt32(a,b,c){let d=new Uint8Array(4),e=new DataView(d.buffer,d.byteOffset,d.byteLength);e.setInt32(0,b,c),this.write(d,a)}getBigInt64(a,b){let c=this.slice(a,a+8),d=new DataView(c.buffer,c.byteOffset,c.byteLength);return d.getBigInt64(0,b)}setBigInt64(a,b,c){let d=new Uint8Array(8),e=new DataView(d.buffer,d.byteOffset,d.byteLength);e.setBigInt64(0,b,c),this.write(d,a)}getUint8(a){let b=this.slice(a,a+1),c=new DataView(b.buffer,b.byteOffset,b.byteLength);return c.getUint8(0)}setUint8(a,b){let c=new Uint8Array(1),d=new DataView(c.buffer,c.byteOffset,c.byteLength);d.setUint8(0,b),this.write(c,a)}getUint16(a,b){let c=this.slice(a,a+2),d=new DataView(c.buffer,c.byteOffset,c.byteLength);return d.getUint16(0,b)}setUint16(a,b,c){let d=new Uint8Array(2),e=new DataView(d.buffer,d.byteOffset,d.byteLength);e.setUint16(0,b,c),this.write(d,a)}getUint32(a,b){let c=this.slice(a,a+4),d=new DataView(c.buffer,c.byteOffset,c.byteLength);return d.getUint32(0,b)}setUint32(a,b,c){let d=new Uint8Array(4),e=new DataView(d.buffer,d.byteOffset,d.byteLength);e.setUint32(0,b,c),this.write(d,a)}getBigUint64(a,b){let c=this.slice(a,a+8),d=new DataView(c.buffer,c.byteOffset,c.byteLength);return d.getBigUint64(0,b)}setBigUint64(a,b,c){let d=new Uint8Array(8),e=new DataView(d.buffer,d.byteOffset,d.byteLength);e.setBigUint64(0,b,c),this.write(d,a)}getFloat32(a,b){let c=this.slice(a,a+4),d=new DataView(c.buffer,c.byteOffset,c.byteLength);return d.getFloat32(0,b)}setFloat32(a,b,c){let d=new Uint8Array(4),e=new DataView(d.buffer,d.byteOffset,d.byteLength);e.setFloat32(0,b,c),this.write(d,a)}getFloat64(a,b){let c=this.slice(a,a+8),d=new DataView(c.buffer,c.byteOffset,c.byteLength);return d.getFloat64(0,b)}setFloat64(a,b,c){let d=new Uint8Array(8),e=new DataView(d.buffer,d.byteOffset,d.byteLength);e.setFloat64(0,b,c),this.write(d,a)}}function bR(a){return a instanceof Uint8Array?{get(b){return a[b]},set(b,c){a[b]=c}}:{get(b){return a.get(b)},set(b,c){a.set(b,c)}}}class bS{constructor(a=0,b=0){this.hi=a,this.lo=b}toBigInt(a){if(a)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31!=0){let b=~this.lo+1>>>0,c=~this.hi>>>0;return 0===b&&(c=c+1>>>0),-(BigInt(b)+(BigInt(c)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}zzDecode(){let a=-(1&this.lo),b=((this.lo>>>1|this.hi<<31)^a)>>>0,c=(this.hi>>>1^a)>>>0;return new bS(c,b)}zzEncode(){let a=this.hi>>31,b=((this.hi<<1|this.lo>>>31)^a)>>>0,c=(this.lo<<1^a)>>>0;return new bS(b,c)}toBytes(a,b=0){let c=bR(a);for(;this.hi>0;)c.set(b++,127&this.lo|128),this.lo=(this.lo>>>7|this.hi<<25)>>>0,this.hi>>>=7;for(;this.lo>127;)c.set(b++,127&this.lo|128),this.lo=this.lo>>>7;c.set(b++,this.lo)}static fromBigInt(a){if(0n===a)return new bS;let b=a<0;b&&(a=-a);let c=0|Number(a>>32n),d=0|Number(a-(BigInt(c)<<32n));return b&&(c=~c>>>0,d=~d>>>0,++d>4294967296&&(d=0,++c>4294967296&&(c=0))),new bS(c,d)}static fromNumber(a){if(0===a)return new bS;let b=a<0;b&&(a=-a);let c=a>>>0,d=(a-c)/4294967296>>>0;return b&&(d=~d>>>0,c=~c>>>0,++c>4294967295&&(c=0,++d>4294967295&&(d=0))),new bS(d,c)}static fromBytes(a,b){let c=bR(a),d=new bS,e=0;if(a.length-b>4){for(;e<4;++e)if(d.lo=(d.lo|(127&c.get(b))<<7*e)>>>0,128>c.get(b++))return d;if(d.lo=(d.lo|(127&c.get(b))<<28)>>>0,d.hi=(d.hi|(127&c.get(b))>>4)>>>0,128>c.get(b++))return d;e=0}else{for(;e<3;++e){if(b>=a.length)throw RangeError(`index out of range: ${b} > ${a.length}`);if(d.lo=(d.lo|(127&c.get(b))<<7*e)>>>0,128>c.get(b++))return d}return d.lo=(d.lo|(127&c.get(b++))<<7*e)>>>0,d}if(a.length-b>4){for(;e<5;++e)if(d.hi=(d.hi|(127&c.get(b))<<7*e+3)>>>0,128>c.get(b++))return d}else for(;e<5;++e){if(b>=a.length)throw RangeError(`index out of range: ${b} > ${a.length}`);if(d.hi=(d.hi|(127&c.get(b))<<7*e+3)>>>0,128>c.get(b++))return d}throw Error("invalid varint encoding")}}let bT=128,bU=127,bV=~bU,bW=2147483648,bX=128,bY=16384,bZ=2097152,b$=268435456,b_=34359738368,b0=4398046511104,b1=562949953421312,b2=72057594037927940,b3=0x7fffffffffffffff,b4={encodingLength(a){return a<bX?1:a<bY?2:a<bZ?3:a<b$?4:a<b_?5:a<b0?6:a<b1?7:a<b2?8:a<b3?9:10},encode(a,b){let c=0,d=bR(b);for(;a>=bW;)d.set(c++,255&a|bT),a/=128;for(;(a&bV)>0;)d.set(c++,255&a|bT),a>>>=7;d.set(c,0|a)},decode(a,b=0){let c=bR(a),d=4294967295;if(d=(127&c.get(b))>>>0,128>c.get(b++)||(d=(d|(127&c.get(b))<<7)>>>0,128>c.get(b++))||(d=(d|(127&c.get(b))<<14)>>>0,128>c.get(b++))||(d=(d|(127&c.get(b))<<21)>>>0,128>c.get(b++))||(d=(d|(15&c.get(b))<<28)>>>0,128>c.get(b++)))return d;if((b+=5)>a.length)throw RangeError(`index out of range: ${b} > ${a.length}`);return d}},b5={encodingLength(a){return a<0?10:b4.encodingLength(a)},encode(a,b){if(a<0){let c=0,d=bR(b),e=bS.fromNumber(a);for(;e.hi>0;)d.set(c++,127&e.lo|128),e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)d.set(c++,127&e.lo|128),e.lo=e.lo>>>7;d.set(c++,e.lo);return}b4.encode(a,b)},decode(a,b=0){return 0|b4.decode(a,b)}},b6={encodingLength(a){return a=(a<<1^a>>31)>>>0,b4.encodingLength(a)},encode(a,b,c=0){return a=(a<<1^a>>31)>>>0,b4.encode(a,b)},decode(a,b=0){let c=b4.decode(a,b);return c>>>1^ -(1&c)|0}};function b7(a,b){let c=new Uint8Array(b4.encodingLength(a.length));return b4.encode(a.length,c),b.decode(new bQ(c,a),0)}function b8(a,b){let c=b.encode(a),d=b4.encodingLength(b4.decode(c));return c.slice(d)}function b9(a,b,c,d,e){return{name:a,type:b,encode:c,decode:d,encodingLength:e}}(mV=X||(X={}))[mV.VARINT=0]="VARINT",mV[mV.BIT64=1]="BIT64",mV[mV.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",mV[mV.START_GROUP=3]="START_GROUP",mV[mV.END_GROUP=4]="END_GROUP",mV[mV.BIT32=5]="BIT32";let ca=function(){return 1},cb=function(a){return Uint8Array.from([a?1:0])},cc=function(a,b){return a.get(b)>0},cd=b9("bool",X.VARINT,cb,cc,ca),ce=function(a){let b=a.byteLength;return b4.encodingLength(b)+b},cf=function(a){let b=new Uint8Array(b4.encodingLength(a.byteLength));return b4.encode(a.byteLength,b),new bQ(b,a)},cg=function(a,b){let c=b4.decode(a,b);return b+=b4.encodingLength(c),a.slice(b,b+c)},ch=b9("bytes",X.LENGTH_DELIMITED,cf,cg,ce),ci=function(){return 8},cj=function(a){let b=new bQ(new Uint8Array(ci(a)));return b.setFloat64(0,a,!0),b},ck=function(a,b){return a.getFloat64(b,!0)};function cl(a){function b(b){if(null==a[b.toString()])throw Error("Invalid enum value");return"number"==typeof b?b:a[b]}let c=function(a){return b4.encodingLength(b(a))},d=function(a){let c=b(a),d=new Uint8Array(b4.encodingLength(c));return b4.encode(c,d),d},e=function(b,c){let d=b4.decode(b,c),e=d.toString();if(null==a[e])throw Error("Invalid enum value");return a[e]};return b9("enum",X.VARINT,d,e,c)}b9("double",X.BIT64,cj,ck,ci);let cm=function(){return 4},cn=function(a){let b=new bQ(new Uint8Array(cm(a)));return b.setInt32(0,a,!0),b},co=function(a,b){return a.getInt32(b,!0)};b9("fixed32",X.BIT32,cn,co,cm);let cp=function(a){return 8},cq=function(a){let b=new bQ(new Uint8Array(cp(a)));return b.setBigInt64(0,a,!0),b},cr=function(a,b){return a.getBigInt64(b,!0)};b9("fixed64",X.BIT64,cq,cr,cp);let cs=function(){return 4},ct=function(a){let b=new bQ(new Uint8Array(cs(1)));return b.setFloat32(0,a,!0),b},cu=function(a,b){return a.getFloat32(b,!0)};b9("float",X.BIT32,ct,cu,cs);let cv=function(a){return b5.encodingLength(a)},cw=function(a){let b=new Uint8Array(cv(a));return b5.encode(a,b),b},cx=function(a,b){return b5.decode(a,b)},cy=b9("int32",X.VARINT,cw,cx,cv),cz=127n,cA={encodingLength(a){let b=0;for(;a>=128n;b++)a>>=7n;return b+1},encode(a,b){let c=bR(b),d=0;for(;cz<a;)c.set(d++,128|Number(a&cz)),a>>=7n;c.set(d,Number(a))},decode(a,b=0){return bS.fromBytes(a,b).toBigInt(!0)}},cB={encodingLength(a){return a<0n?10:cA.encodingLength(a)},encode(a,b,c=0){if(a<0n){bS.fromBigInt(a).toBytes(b,c);return}return cA.encode(a,b)},decode(a,b=0){return bS.fromBytes(a,b).toBigInt(!1)}},cC={encodingLength(a){return cA.encodingLength(a>=0?2n*a:-(2n*a)-1n)},encode(a,b,c=0){bS.fromBigInt(a).zzEncode().toBytes(b,c)},decode(a,b=0){return bS.fromBytes(a,b).zzDecode().toBigInt(!1)}},cD=function(a){return cB.encodingLength(a)},cE=function(a){let b=new Uint8Array(cD(a));return cB.encode(a,b),b},cF=function(a,b){return 0n|cB.decode(a,b)};function cG(a){let b=function(b){let c=0;for(let d of Object.values(a))c+=d.codec.encodingLength(b[d.name]);return b4.encodingLength(c)+c},c=function(b){let c=new bQ;function d(a,b,d){if(null==a){if(!0===d.optional)return;throw Error(`Non optional field "${d.name}" was ${null===a?"null":"undefined"}`)}let e=b<<3|d.codec.type,f=new Uint8Array(b4.encodingLength(e));b4.encode(e,f);let g=d.codec.encode(a);c.append(f),c.append(g)}for(let[e,f]of Object.entries(a)){let g=parseInt(e);if(!0===f.repeats){if(!Array.isArray(b[f.name]))throw Error(`Repeating field "${f.name}" was not an array`);for(let h of b[f.name])d(h,g,f)}else d(b[f.name],g,f)}let i=new Uint8Array(b4.encodingLength(c.length));return b4.encode(c.length,i),new bQ(i,c)},d=function(b,c){let d=b4.decode(b,c);c+=b4.encodingLength(d);let e=c+d,f={};for(;c<e;){let g=b4.decode(b,c);c+=b4.encodingLength(g);let h=7&g,i=g>>3,j=a[i],k=0;if(h===X.VARINT){if(null!=j){let l=j.codec.decode(b,c);k=j.codec.encodingLength(l)}else{let m=b4.decode(b,c);k=b4.encodingLength(m)}}else if(h===X.BIT64)k=8;else if(h===X.LENGTH_DELIMITED){let n=b4.decode(b,c);k=n+b4.encodingLength(n)}else if(h===X.BIT32)k=4;else if(h===X.START_GROUP)throw Error("Unsupported wire type START_GROUP");else if(h===X.END_GROUP)throw Error("Unsupported wire type END_GROUP");if(null!=j){let o=j.codec.decode(b,c);!0===j.repeats?(null==f[j.name]&&(f[j.name]=[]),f[j.name].push(o)):f[j.name]=o}c+=k}for(let p of Object.values(a))!0===p.repeats&&null==f[p.name]&&(f[p.name]=[]);return f};return b9("message",X.LENGTH_DELIMITED,c,d,b)}b9("int64",X.VARINT,cE,cF,cD);let cH=function(){return 4},cI=function(a){let b=new bQ(new Uint8Array(cH(a)));return b.setInt32(0,a,!0),b},cJ=function(a,b){return a.getInt32(b,!0)};b9("sfixed32",X.BIT32,cI,cJ,cH);let cK=function(){return 8},cL=function(a){let b=new bQ(new Uint8Array(cK(a)));return b.setBigInt64(0,a,!0),b},cM=function(a,b){return a.getBigInt64(b,!0)};b9("sfixed64",X.BIT64,cL,cM,cK);let cN=function(a){return b6.encodingLength(a)},cO=function(a){let b=new Uint8Array(cN(a));return b6.encode(a,b),b},cP=function(a,b){return b6.decode(a,b)};b9("sint32",X.VARINT,cO,cP,cN);let cQ=function(a){return cC.encodingLength(a)},cR=function(a){let b=new Uint8Array(cQ(a));return cC.encode(a,b),b},cS=function(a,b){return cC.decode(a,b)};b9("sint64",X.VARINT,cR,cS,cQ);let cT=function(a){let b=(0,a8.fromString)(a).byteLength;return b4.encodingLength(b)+b},cU=function(a){let b=(0,a8.fromString)(a),c=new Uint8Array(b4.encodingLength(b.byteLength));return b4.encode(b.length,c),new bQ(c,b)},cV=function(a,b){let c=b4.decode(a,b);return b+=b4.encodingLength(c),(0,bb.toString)(a.slice(b,b+c))},cW=b9("string",X.LENGTH_DELIMITED,cU,cV,cT),cX=function(a){return b4.encodingLength(a)},cY=function(a){let b=new Uint8Array(cX(a));return b4.encode(a,b),b},cZ=function(a,b){return b4.decode(a,b)};b9("uint32",X.VARINT,cY,cZ,cX);let c$=function(a){return cA.encodingLength(a)},c_=function(a){let b=new Uint8Array(cA.encodingLength(a));return cA.encode(a,b),b},c0=function(a,b){return cA.decode(a,b)},c1=b9("uint64",X.VARINT,c_,c0,c$);(mW=Y||(Y={})).RSA="RSA",mW.Ed25519="Ed25519",mW.Secp256k1="Secp256k1",(mX=Z||(Z={}))[mX.RSA=0]="RSA",mX[mX.Ed25519=1]="Ed25519",mX[mX.Secp256k1=2]="Secp256k1",(mY=Y||(Y={})).codec=()=>cl(Z),(mZ=$||($={})).codec=()=>cG({1:{name:"Type",codec:Y.codec()},2:{name:"Data",codec:ch}}),mZ.encode=a=>b8(a,mZ.codec()),mZ.decode=a=>b7(a,mZ.codec()),(m$=_||(_={})).codec=()=>cG({1:{name:"Type",codec:Y.codec()},2:{name:"Data",codec:ch}}),m$.encode=a=>b8(a,m$.codec()),m$.decode=a=>b7(a,m$.codec()),c(3068),c(97450);var c2=c(3832),c3={get(a=globalThis){let b=a.crypto;if(null==b||null==b.subtle)throw Object.assign(Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return b}};function c4(a,b){let c=Uint8Array.from(a.abs().toByteArray());if(c=0===c[0]?c.slice(1):c,null!=b){if(c.length>b)throw Error("byte array longer than desired length");c=(0,bM.concat)([new Uint8Array(b-c.length),c])}return(0,bb.toString)(c,"base64url")}function c5(a){let b=c6(a);return new c2.jsbn.BigInteger((0,bb.toString)(b,"base16"),16)}function c6(a,b){let c=(0,a8.fromString)(a,"base64urlpad");if(null!=b){if(c.length>b)throw Error("byte array longer than desired length");c=(0,bM.concat)([new Uint8Array(b-c.length),c])}return c}c(97116),c(15764);let c7={"P-256":256,"P-384":384,"P-521":521},c8=Object.keys(c7),c9=c8.join(" / "),da={"P-256":32,"P-384":48,"P-521":66};var db=c(9885),dc=c(56155);c(63219);var dd=c(1914);function de(a,b){return b.map(b=>c5(a[b]))}async function df(a){let b=await c3.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:a,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),c=await dj(b);return{privateKey:c[0],publicKey:c[1]}}async function dg(a){let b=await c3.get().subtle.importKey("jwk",a,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),c=[b,await dk(a)],d=await dj({privateKey:c[0],publicKey:c[1]});return{privateKey:d[0],publicKey:d[1]}}async function dh(a,b){let c=await c3.get().subtle.importKey("jwk",a,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),d=await c3.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},c,Uint8Array.from(b));return new Uint8Array(d,0,d.byteLength)}async function di(a,b,c){let d=await c3.get().subtle.importKey("jwk",a,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return await c3.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},d,b,c)}async function dj(a){if(null==a.privateKey||null==a.publicKey)throw aZ(Error("Private and public key are required"),"ERR_INVALID_PARAMETERS");return await Promise.all([c3.get().subtle.exportKey("jwk",a.privateKey),c3.get().subtle.exportKey("jwk",a.publicKey)])}async function dk(a){return await c3.get().subtle.importKey("jwk",{kty:a.kty,n:a.n,e:a.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function dl(a,b,c,d){var e,f;let g=b?(e=a,c2.pki.setRsaPublicKey(...de(e,["n","e"]))):(f=a,c2.pki.setRsaPrivateKey(...de(f,["n","e","d","p","q","dp","dq","qi"]))),h=(0,bb.toString)(Uint8Array.from(c),"ascii"),i=d(h,g);return(0,a8.fromString)(i,"ascii")}async function dm(a,b){let c=function(a){let b=a?.algorithm??"AES-GCM",c=a?.keyLength??16,d=a?.nonceLength??12,e=a?.digest??"SHA-256",f=a?.saltLength??16,g=a?.iterations??32767,h=c3.get();async function i(a,i){let j=h.getRandomValues(new Uint8Array(f)),k=h.getRandomValues(new Uint8Array(d)),l={name:b,iv:k};"string"==typeof i&&(i=(0,a8.fromString)(i));let m={name:"PBKDF2",salt:j,iterations:g,hash:{name:e}},n=await h.subtle.importKey("raw",i,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),o=await h.subtle.deriveKey(m,n,{name:b,length:c},!0,["encrypt"]),p=await h.subtle.encrypt(l,o,a);return(0,bM.concat)([j,l.iv,new Uint8Array(p)])}async function j(a,i){let j=a.slice(0,f),k=a.slice(f,f+d),l=a.slice(f+d),m={name:b,iv:k};"string"==typeof i&&(i=(0,a8.fromString)(i));let n={name:"PBKDF2",salt:j,iterations:g,hash:{name:e}},o=await h.subtle.importKey("raw",i,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),p=await h.subtle.deriveKey(n,o,{name:b,length:c},!0,["decrypt"]),q=await h.subtle.decrypt(m,p,l);return new Uint8Array(q)}return c*=8,{encrypt:i,decrypt:j}}(),d=await c.encrypt(a,b);return db.base64.encode(d)}c(28095);class dn{constructor(a){this._key=a}async verify(a,b){return await di(this._key,b,a)}marshal(){return function(a){if(null==a.n||null==a.e)throw aZ(Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");let b=c2.pki.publicKeyToAsn1({n:c5(a.n),e:c5(a.e)});return(0,a8.fromString)(c2.asn1.toDer(b).getBytes(),"ascii")}(this._key)}get bytes(){return $.encode({Type:Y.RSA,Data:this.marshal()})}encrypt(a){var b,c;return b=this._key,dl(b,!0,c=a,(a,b)=>b.encrypt(a))}equals(a){return(0,bK.equals)(this.bytes,a.bytes)}async hash(){let{bytes:a}=await dc.sha256.digest(this.bytes);return a}}class dp{constructor(a,b){this._key=a,this._publicKey=b}genSecret(){return function(a){if(isNaN(a)||a<=0)throw aZ(Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return dd(a)}(16)}async sign(a){return await dh(this._key,a)}get public(){if(null==this._publicKey)throw aZ(Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new dn(this._publicKey)}decrypt(a){var b,c;return b=this._key,dl(b,!1,c=a,(a,b)=>b.decrypt(a))}marshal(){return function(a){if(null==a.n||null==a.e||null==a.d||null==a.p||null==a.q||null==a.dp||null==a.dq||null==a.qi)throw aZ(Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");let b=c2.pki.privateKeyToAsn1({n:c5(a.n),e:c5(a.e),d:c5(a.d),p:c5(a.p),q:c5(a.q),dP:c5(a.dp),dQ:c5(a.dq),qInv:c5(a.qi)});return(0,a8.fromString)(c2.asn1.toDer(b).getBytes(),"ascii")}(this._key)}get bytes(){return _.encode({Type:Y.RSA,Data:this.marshal()})}equals(a){return(0,bK.equals)(this.bytes,a.bytes)}async hash(){let{bytes:a}=await dc.sha256.digest(this.bytes);return a}async id(){let a=await this.public.hash();return(0,bb.toString)(a,"base58btc")}async export(a,b="pkcs-8"){if("pkcs-8"===b){let c=new c2.util.ByteBuffer(this.marshal()),d=c2.asn1.fromDer(c),e=c2.pki.privateKeyFromAsn1(d),f={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"};return c2.pki.encryptRsaPrivateKey(e,a,f)}if("libp2p-key"===b)return await dm(this.bytes,a);throw aZ(Error(`export format '${b}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}async function dq(a){let b=function(a){let b=c2.asn1.fromDer((0,bb.toString)(a,"ascii")),c=c2.pki.privateKeyFromAsn1(b);return{kty:"RSA",n:c4(c.n),e:c4(c.e),d:c4(c.d),p:c4(c.p),q:c4(c.q),dp:c4(c.dP),dq:c4(c.dQ),qi:c4(c.qInv),alg:"RS256"}}(a),c=await dg(b);return new dp(c.privateKey,c.publicKey)}function dr(a){let b=function(a){let b=c2.asn1.fromDer((0,bb.toString)(a,"ascii")),c=c2.pki.publicKeyFromAsn1(b);return{kty:"RSA",n:c4(c.n),e:c4(c.e)}}(a);return new dn(b)}async function ds(a){let b=await dg(a);return new dp(b.privateKey,b.publicKey)}async function dt(a){let b=await df(a);return new dp(b.privateKey,b.publicKey)}var du=c(99086),dv=c(7420);/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */ let dw=BigInt(0),dx=BigInt(1),dy=BigInt(2),dz=BigInt(255),dA=dy**BigInt(252)+BigInt("27742317777372353535851937790883648493"),dB={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:dy**dz-BigInt(19),l:dA,n:dA,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")},dC=dy**BigInt(256),dD=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");let dE=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),dF=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),dG=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),dH=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class dI{constructor(a,b,c,d){this.x=a,this.y=b,this.z=c,this.t=d}static fromAffine(a){if(!(a instanceof dO))throw TypeError("ExtendedPoint#fromAffine: expected Point");return a.equals(dO.ZERO)?dI.ZERO:new dI(a.x,a.y,dx,dY(a.x*a.y))}static toAffineBatch(a){let b=d$(a.map(a=>a.z));return a.map((a,c)=>a.toAffine(b[c]))}static normalizeZ(a){return this.toAffineBatch(a).map(this.fromAffine)}equals(a){dJ(a);let{x:b,y:c,z:d}=this,{x:e,y:f,z:g}=a,h=dY(b*g),i=dY(e*d),j=dY(c*g),k=dY(f*d);return h===i&&j===k}negate(){return new dI(dY(-this.x),this.y,this.z,dY(-this.t))}double(){let{x:a,y:b,z:c}=this,{a:d}=dB,e=dY(a**dy),f=dY(b**dy),g=dY(dy*dY(c**dy)),h=dY(d*e),i=dY(dY((a+b)**dy)-e-f),j=h+f,k=j-g,l=h-f,m=dY(i*k),n=dY(j*l),o=dY(i*l),p=dY(k*j);return new dI(m,n,p,o)}add(a){dJ(a);let{x:b,y:c,z:d,t:e}=this,{x:f,y:g,z:h,t:i}=a,j=dY((c-b)*(g+f)),k=dY((c+b)*(g-f)),l=dY(k-j);if(l===dw)return this.double();let m=dY(d*dy*i),n=dY(e*dy*h),o=n+m,p=k+j,q=n-m,r=dY(o*l),s=dY(p*q),t=dY(o*q),u=dY(l*p);return new dI(r,s,u,t)}subtract(a){return this.add(a.negate())}precomputeWindow(a){let b=1+256/a,c=[],d=this,e=d;for(let f=0;f<b;f++){e=d,c.push(e);for(let g=1;g<2**(a-1);g++)e=e.add(d),c.push(e);d=e.double()}return c}wNAF(a,b){!b&&this.equals(dI.BASE)&&(b=dO.BASE);let c=b&&b._WINDOW_SIZE||1;if(256%c)throw Error("Point#wNAF: Invalid precomputation window, must be power of 2");let d=b&&dN.get(b);!d&&(d=this.precomputeWindow(c),b&&1!==c&&(d=dI.normalizeZ(d),dN.set(b,d)));let e=dI.ZERO,f=dI.ZERO,g=1+256/c,h=2**(c-1),i=BigInt(2**c-1),j=2**c,k=BigInt(c);for(let l=0;l<g;l++){let m=l*h,n=Number(a&i);if(a>>=k,n>h&&(n-=j,a+=dx),0===n){let o=d[m];l%2&&(o=o.negate()),f=f.add(o)}else{let p=d[m+Math.abs(n)-1];n<0&&(p=p.negate()),e=e.add(p)}}return dI.normalizeZ([e,f])[0]}multiply(a,b){return this.wNAF(d6(a,dB.l),b)}multiplyUnsafe(a){let b=d6(a,dB.l,!1),c=dI.BASE,d=dI.ZERO;if(b===dw)return d;if(this.equals(d)||b===dx)return this;if(this.equals(c))return this.wNAF(b);let e=d,f=this;for(;b>dw;)b&dx&&(e=e.add(f)),f=f.double(),b>>=dx;return e}isSmallOrder(){return this.multiplyUnsafe(dB.h).equals(dI.ZERO)}isTorsionFree(){return this.multiplyUnsafe(dB.l).equals(dI.ZERO)}toAffine(a=dZ(this.z)){let{x:b,y:c,z:d}=this,e=dY(b*a),f=dY(c*a),g=dY(d*a);if(g!==dx)throw Error("invZ was invalid");return new dO(e,f)}fromRistrettoBytes(){dL()}toRistrettoBytes(){dL()}fromRistrettoHash(){dL()}}function dJ(a){if(!(a instanceof dI))throw TypeError("ExtendedPoint expected")}function dK(a){if(!(a instanceof dM))throw TypeError("RistrettoPoint expected")}function dL(){throw Error("Legacy method: switch to RistrettoPoint")}dI.BASE=new dI(dB.Gx,dB.Gy,dx,dY(dB.Gx*dB.Gy)),dI.ZERO=new dI(dw,dx,dx,dw);class dM{constructor(a){this.ep=a}static calcElligatorRistrettoMap(a){let{d:b}=dB,c=dY(dD*a*a),d=dY((c+dx)*dG),e=BigInt(-1),f=dY((e-b*c)*dY(c+b)),{isValid:g,value:h}=d1(d,f),i=dY(h*a);dV(i)||(i=dY(-i)),g||(h=i),g||(e=c);let j=dY(e*(c-dx)*dH-f),k=h*h,l=dY((h+h)*f),m=dY(j*dE),n=dY(dx-k),o=dY(dx+k);return new dI(dY(l*o),dY(n*m),dY(m*o),dY(l*n))}static hashToCurve(a){a=d5(a,64);let b=dX(a.slice(0,32)),c=this.calcElligatorRistrettoMap(b),d=dX(a.slice(32,64)),e=this.calcElligatorRistrettoMap(d);return new dM(c.add(e))}static fromHex(a){a=d5(a,32);let{a:b,d:c}=dB,d="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",e=dX(a);if(!d4(dU(e),a)||dV(e))throw Error(d);let f=dY(e*e),g=dY(dx+b*f),h=dY(dx-b*f),i=dY(g*g),j=dY(h*h),k=dY(b*c*i-j),{isValid:l,value:m}=d2(dY(k*j)),n=dY(m*h),o=dY(m*n*k),p=dY((e+e)*n);dV(p)&&(p=dY(-p));let q=dY(g*o),r=dY(p*q);if(!l||dV(r)||q===dw)throw Error(d);return new dM(new dI(p,q,dx,r))}toRawBytes(){let{x:a,y:b,z:c,t:d}=this.ep,e=dY(dY(c+b)*dY(c-b)),f=dY(a*b),{value:g}=d2(dY(e*f**dy)),h=dY(g*e),i=dY(g*f),j=dY(h*i*d),k;if(dV(d*j)){let l=dY(b*dD),m=dY(a*dD);a=l,b=m,k=dY(h*dF)}else k=i;dV(a*j)&&(b=dY(-b));let n=dY((c-b)*k);return dV(n)&&(n=dY(-n)),dU(n)}toHex(){return dR(this.toRawBytes())}toString(){return this.toHex()}equals(a){dK(a);let b=this.ep,c=a.ep,d=dY(b.x*c.y)===dY(b.y*c.x),e=dY(b.y*c.y)===dY(b.x*c.x);return d||e}add(a){return dK(a),new dM(this.ep.add(a.ep))}subtract(a){return dK(a),new dM(this.ep.subtract(a.ep))}multiply(a){return new dM(this.ep.multiply(a))}multiplyUnsafe(a){return new dM(this.ep.multiplyUnsafe(a))}}dM.BASE=new dM(dI.BASE),dM.ZERO=new dM(dI.ZERO);let dN=new WeakMap;class dO{constructor(a,b){this.x=a,this.y=b}_setWindowSize(a){this._WINDOW_SIZE=a,dN.delete(this)}static fromHex(a,b=!0){let{d:c,P:d}=dB;a=d5(a,32);let e=a.slice();e[31]=-129&a[31];let f=dW(e);if(b&&f>=d)throw Error("Expected 0 < hex < P");if(!b&&f>=dC)throw Error("Expected 0 < hex < 2**256");let g=dY(f*f),h=dY(g-dx),i=dY(c*g+dx),{isValid:j,value:k}=d1(h,i);if(!j)throw Error("Point.fromHex: invalid y coordinate");let l=(k&dx)===dx,m=(128&a[31])!=0;return m!==l&&(k=dY(-k)),new dO(k,f)}static async fromPrivateKey(a){return(await d8(a)).point}toRawBytes(){let a=dU(this.y);return a[31]|=this.x&dx?128:0,a}toHex(){return dR(this.toRawBytes())}toX25519(){let{y:a}=this,b=dY((dx+a)*dZ(dx-a));return dU(b)}isTorsionFree(){return dI.fromAffine(this).isTorsionFree()}equals(a){return this.x===a.x&&this.y===a.y}negate(){return new dO(dY(-this.x),this.y)}add(a){return dI.fromAffine(this).add(dI.fromAffine(a)).toAffine()}subtract(a){return this.add(a.negate())}multiply(a){return dI.fromAffine(this).multiply(a,this).toAffine()}}dO.BASE=new dO(dB.Gx,dB.Gy),dO.ZERO=new dO(dw,dx);class dP{constructor(a,b){this.r=a,this.s=b,this.assertValidity()}static fromHex(a){let b=d5(a,64),c=dO.fromHex(b.slice(0,32),!1),d=dW(b.slice(32,64));return new dP(c,d)}assertValidity(){let{r:a,s:b}=this;if(!(a instanceof dO))throw Error("Expected Point instance");return d6(b,dB.l,!1),this}toRawBytes(){let a=new Uint8Array(64);return a.set(this.r.toRawBytes()),a.set(dU(this.s),32),a}toHex(){return dR(this.toRawBytes())}}let dQ=Array.from({length:256},(a,b)=>b.toString(16).padStart(2,"0"));function dR(a){if(!(a instanceof Uint8Array))throw Error("Uint8Array expected");let b="";for(let c=0;c<a.length;c++)b+=dQ[a[c]];return b}function dS(a){if("string"!=typeof a)throw TypeError("hexToBytes: expected string, got "+typeof a);if(a.length%2)throw Error("hexToBytes: received invalid unpadded hex");let b=new Uint8Array(a.length/2);for(let c=0;c<b.length;c++){let d=2*c,e=a.slice(d,d+2),f=Number.parseInt(e,16);if(Number.isNaN(f)||f<0)throw Error("Invalid byte sequence");b[c]=f}return b}function dT(a){let b=a.toString(16).padStart(64,"0");return dS(b)}function dU(a){return dT(a).reverse()}function dV(a){return(dY(a)&dx)===dx}function dW(a){if(!(a instanceof Uint8Array))throw Error("Expected Uint8Array");return BigInt("0x"+dR(Uint8Array.from(a).reverse()))}function dX(a){return dY(dW(a)&dy**dz-dx)}function dY(a,b=dB.P){let c=a%b;return c>=dw?c:b+c}function dZ(a,b=dB.P){if(a===dw||b<=dw)throw Error(`invert: expected positive integers, got n=${a} mod=${b}`);let c=dY(a,b),d=b,e=dw,f=dx,g=dx,h=dw;for(;c!==dw;){let i=d/c,j=d%c,k=e-g*i,l=f-h*i;d=c,c=j,e=g,f=h,g=k,h=l}let m=d;if(m!==dx)throw Error("invert: does not exist");return dY(e,b)}function d$(a,b=dB.P){let c=Array(a.length),d=a.reduce((a,d,e)=>d===dw?a:(c[e]=a,dY(a*d,b)),dx),e=dZ(d,b);return a.reduceRight((a,d,e)=>d===dw?a:(c[e]=dY(a*c[e],b),dY(a*d,b)),e),c}function d_(a,b){let{P:c}=dB,d=a;for(;(b--)>dw;)d*=d,d%=c;return d}function d0(a){let{P:b}=dB,c=BigInt(5),d=BigInt(10),e=BigInt(20),f=BigInt(40),g=BigInt(80),h=a*a%b,i=h*a%b,j=d_(i,dy)*i%b,k=d_(j,dx)*a%b,l=d_(k,c)*k%b,m=d_(l,d)*l%b,n=d_(m,e)*m%b,o=d_(n,f)*n%b,p=d_(o,g)*o%b,q=d_(p,g)*o%b,r=d_(q,d)*l%b,s=d_(r,dy)*a%b;return{pow_p_5_8:s,b2:i}}function d1(a,b){let c=dY(b*b*b),d=dY(c*c*b),e=d0(a*d).pow_p_5_8,f=dY(a*c*e),g=dY(b*f*f),h=f,i=dY(f*dD),j=g===a,k=g===dY(-a),l=g===dY(-a*dD);return j&&(f=h),(k||l)&&(f=i),dV(f)&&(f=dY(-f)),{isValid:j||k,value:f}}function d2(a){return d1(dx,a)}async function d3(...a){let b=await ef.sha512(function(...a){if(!a.every(a=>a instanceof Uint8Array))throw Error("Expected Uint8Array list");if(1===a.length)return a[0];let b=a.reduce((a,b)=>a+b.length,0),c=new Uint8Array(b);for(let d=0,e=0;d<a.length;d++){let f=a[d];c.set(f,e),e+=f.length}return c}(...a)),c=dW(b);return dY(c,dB.l)}function d4(a,b){if(a.length!==b.length)return!1;for(let c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}function d5(a,b){let c=a instanceof Uint8Array?Uint8Array.from(a):dS(a);if("number"==typeof b&&c.length!==b)throw Error(`Expected ${b} bytes`);return c}function d6(a,b,c=!0){if(!b)throw TypeError("Specify max value");if("number"==typeof a&&Number.isSafeInteger(a)&&(a=BigInt(a)),"bigint"==typeof a&&a<b){if(c){if(dw<a)return a}else if(dw<=a)return a}throw TypeError("Expected valid scalar: 0 < scalar < max")}function d7(a){return a[0]&=248,a[31]&=127,a[31]|=64,a}async function d8(a){if(32!==(a="bigint"==typeof a||"number"==typeof a?dT(d6(a,dC)):d5(a)).length)throw Error("Expected 32 bytes");let b=await ef.sha512(a),c=d7(b.slice(0,32)),d=b.slice(32,64),e=dY(dW(c),dB.l),f=dO.BASE.multiply(e),g=f.toRawBytes();return{head:c,prefix:d,scalar:e,point:f,pointBytes:g}}async function d9(a){return(await d8(a)).pointBytes}async function ea(a,b){a=d5(a);let{prefix:c,scalar:d,pointBytes:e}=await d8(b),f=await d3(c,a),g=dO.BASE.multiply(f),h=await d3(g.toRawBytes(),e,a),i=dY(f+h*d,dB.l);return new dP(g,i).toRawBytes()}async function eb(a,b,c){b=d5(b),c instanceof dO||(c=dO.fromHex(c,!1));let{r:d,s:e}=a instanceof dP?a.assertValidity():dP.fromHex(a),f=dI.BASE.multiplyUnsafe(e),g=await d3(d.toRawBytes(),c.toRawBytes(),b),h=dI.fromAffine(c).multiplyUnsafe(g),i=dI.fromAffine(d).add(h);return i.subtract(f).multiplyUnsafe(dB.h).equals(dI.ZERO)}function ec(a,b,c){let d=dY(a*(b-c));return b=dY(b-d),c=dY(c+d),[b,c]}dO.BASE._setWindowSize(8);let ed={BASE_POINT_U:"0900000000000000000000000000000000000000000000000000000000000000",scalarMult(a,b){var c,d;let e=function(a){let b=d5(a,32);return b[31]&=127,dW(b)}(b),f=dW(d7(d5(c=a,32))),g=function(a,b){let{P:c}=dB,d=d6(a,c),e=d6(b,c),f=BigInt(121665),g=d,h=dx,i=dw,j=d,k=dx,l=dw,m;for(let n=BigInt(254);n>=dw;n--){let o=e>>n&dx;l^=o,h=(m=ec(l,h,j))[0],j=m[1],m=ec(l,i,k),i=m[0],k=m[1],l=o;let p=h+i,q=dY(p*p),r=h-i,s=dY(r*r),t=q-s,u=j+k,v=j-k,w=dY(v*p),x=dY(u*r);j=dY((w+x)**dy),k=dY(g*(w-x)**dy),h=dY(q*s),i=dY(t*(q+dY(f*t)))}h=(m=ec(l,h,j))[0],j=m[1],m=ec(l,i,k),i=m[0],k=m[1];let{pow_p_5_8:y,b2:z}=d0(i),A=dY(d_(y,BigInt(3))*z);return dY(h*A)}(e,f);if(g===dw)throw Error("Invalid private or public key received");return dU(dY(d=g,dB.P))},scalarMultBase(a){return ed.scalarMult(a,ed.BASE_POINT_U)}},ee={node:dv,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},ef={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa",],bytesToHex:dR,getExtendedPublicKey:d8,mod:dY,invert:dZ,hashToPrivateScalar:a=>{if((a=d5(a)).length<40||a.length>1024)throw Error("Expected 40-1024 bytes of private key as per FIPS 186");let b=dY(dW(a),dB.l);if(b===dw||b===dx)throw Error("Invalid private key");return b},randomBytes:(a=32)=>{if(ee.web)return ee.web.getRandomValues(new Uint8Array(a));if(ee.node){let{randomBytes:b}=ee.node;return new Uint8Array(b(a).buffer)}throw Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>ef.randomBytes(32),sha512:async a=>{if(ee.web){let b=await ee.web.subtle.digest("SHA-512",a.buffer);return new Uint8Array(b)}if(ee.node)return Uint8Array.from(ee.node.createHash("sha512").update(a).digest());throw Error("The environment doesn't have sha512 function")},precompute(a=8,b=dO.BASE){let c=b.equals(dO.BASE)?b:new dO(b.x,b.y);return c._setWindowSize(a),c.multiply(dy),c}},eg=32,eh=64,ei=32;async function ej(){let a=ef.randomPrivateKey(),b=await d9(a),c=en(a,b);return{privateKey:c,publicKey:b}}async function ek(a){if(a.length!==ei)throw TypeError('"seed" must be 32 bytes in length.');if(!(a instanceof Uint8Array))throw TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let b=a,c=await d9(b),d=en(b,c);return{privateKey:d,publicKey:c}}async function el(a,b){let c=a.slice(0,ei);return await ea(b,c)}async function em(a,b,c){return await eb(b,c,a)}function en(a,b){let c=new Uint8Array(eh);for(let d=0;d<ei;d++)c[d]=a[d],c[ei+d]=b[d];return c}class eo{constructor(a){this._key=eu(a,eg)}async verify(a,b){return await em(this._key,b,a)}marshal(){return this._key}get bytes(){return $.encode({Type:Y.Ed25519,Data:this.marshal()})}equals(a){return(0,bK.equals)(this.bytes,a.bytes)}async hash(){let{bytes:a}=await dc.sha256.digest(this.bytes);return a}}class ep{constructor(a,b){this._key=eu(a,eh),this._publicKey=eu(b,eg)}async sign(a){return await el(this._key,a)}get public(){return new eo(this._publicKey)}marshal(){return this._key}get bytes(){return _.encode({Type:Y.Ed25519,Data:this.marshal()})}equals(a){return(0,bK.equals)(this.bytes,a.bytes)}async hash(){let{bytes:a}=await dc.sha256.digest(this.bytes);return a}async id(){let a=await a1.identity.digest(this.public.bytes);return du.base58btc.encode(a.bytes).substring(1)}async export(a,b="libp2p-key"){if("libp2p-key"===b)return await dm(this.bytes,a);throw aZ(Error(`export format '${b}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function eq(a){if(a.length>eh){a=eu(a,eh+eg);let b=a.slice(0,eh),c=a.slice(eh,a.length);return new ep(b,c)}a=eu(a,eh);let d=a.slice(0,eh),e=a.slice(eg);return new ep(d,e)}function er(a){return a=eu(a,eg),new eo(a)}async function es(){let{privateKey:a,publicKey:b}=await ej();return new ep(a,b)}async function et(a){let{privateKey:b,publicKey:c}=await ek(a);return new ep(b,c)}function eu(a,b){if((a=Uint8Array.from(a??[])).length!==b)throw aZ(Error(`Key must be a Uint8Array of length ${b}, got ${a.length}`),"ERR_INVALID_KEY_TYPE");return a}var ev=c(95856),ew=c.t(ev,2);/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */ let ex=BigInt(0),ey=BigInt(1),ez=BigInt(2),eA=BigInt(3),eB=BigInt(8),eC=ez**BigInt(256),eD={a:ex,b:BigInt(7),P:eC-ez**BigInt(32)-BigInt(977),n:eC-BigInt("432420386565659656852420866394968145599"),h:ey,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")};function eE(a){let{a:b,b:c}=eD,d=eY(a*a),e=eY(d*a);return eY(e+b*a+c)}let eF=eD.a===ex;class eG{constructor(a,b,c){this.x=a,this.y=b,this.z=c}static fromAffine(a){if(!(a instanceof eI))throw TypeError("JacobianPoint#fromAffine: expected Point");return new eG(a.x,a.y,ey)}static toAffineBatch(a){let b=e0(a.map(a=>a.z));return a.map((a,c)=>a.toAffine(b[c]))}static normalizeZ(a){return eG.toAffineBatch(a).map(eG.fromAffine)}equals(a){if(!(a instanceof eG))throw TypeError("JacobianPoint expected");let{x:b,y:c,z:d}=this,{x:e,y:f,z:g}=a,h=eY(d**ez),i=eY(g**ez),j=eY(b*i),k=eY(e*h),l=eY(eY(c*g)*i),m=eY(eY(f*d)*h);return j===k&&l===m}negate(){return new eG(this.x,eY(-this.y),this.z)}double(){let{x:a,y:b,z:c}=this,d=eY(a**ez),e=eY(b**ez),f=eY(e**ez),g=eY(ez*(eY((a+e)**ez)-d-f)),h=eY(eA*d),i=eY(h**ez),j=eY(i-ez*g),k=eY(h*(g-j)-eB*f),l=eY(ez*b*c);return new eG(j,k,l)}add(a){if(!(a instanceof eG))throw TypeError("JacobianPoint expected");let{x:b,y:c,z:d}=this,{x:e,y:f,z:g}=a;if(e===ex||f===ex)return this;if(b===ex||c===ex)return a;let h=eY(d**ez),i=eY(g**ez),j=eY(b*i),k=eY(e*h),l=eY(eY(c*g)*i),m=eY(eY(f*d)*h),n=eY(k-j),o=eY(m-l);if(n===ex)return o===ex?this.double():eG.ZERO;let p=eY(n**ez),q=eY(n*p),r=eY(j*p),s=eY(o**ez-q-ez*r),t=eY(o*(r-s)-l*q),u=eY(d*g*n);return new eG(s,t,u)}subtract(a){return this.add(a.negate())}multiplyUnsafe(a){let b=eG.ZERO;if("bigint"==typeof a&&a===ex)return b;let c=eX(a);if(c===ey)return this;if(!eF){let d=b,e=this;for(;c>ex;)c&ey&&(d=d.add(e)),e=e.double(),c>>=ey;return d}let{k1neg:f,k1:g,k2neg:h,k2:i}=e3(c),j=b,k=b,l=this;for(;g>ex||i>ex;)g&ey&&(j=j.add(l)),i&ey&&(k=k.add(l)),l=l.double(),g>>=ey,i>>=ey;return f&&(j=j.negate()),h&&(k=k.negate()),k=new eG(eY(k.x*eD.beta),k.y,k.z),j.add(k)}precomputeWindow(a){let b=eF?128/a+1:256/a+1,c=[],d=this,e=d;for(let f=0;f<b;f++){e=d,c.push(e);for(let g=1;g<2**(a-1);g++)e=e.add(d),c.push(e);d=e.double()}return c}wNAF(a,b){!b&&this.equals(eG.BASE)&&(b=eI.BASE);let c=b&&b._WINDOW_SIZE||1;if(256%c)throw Error("Point#wNAF: Invalid precomputation window, must be power of 2");let d=b&&eH.get(b);!d&&(d=this.precomputeWindow(c),b&&1!==c&&(d=eG.normalizeZ(d),eH.set(b,d)));let e=eG.ZERO,f=eG.ZERO,g=1+(eF?128/c:256/c),h=2**(c-1),i=BigInt(2**c-1),j=2**c,k=BigInt(c);for(let l=0;l<g;l++){let m=l*h,n=Number(a&i);if(a>>=k,n>h&&(n-=j,a+=ey),0===n){let o=d[m];l%2&&(o=o.negate()),f=f.add(o)}else{let p=d[m+Math.abs(n)-1];n<0&&(p=p.negate()),e=e.add(p)}}return{p:e,f}}multiply(a,b){let c=eX(a),d,e;if(eF){let{k1neg:f,k1:g,k2neg:h,k2:i}=e3(c),{p:j,f:k}=this.wNAF(g,b),{p:l,f:m}=this.wNAF(i,b);f&&(j=j.negate()),h&&(l=l.negate()),l=new eG(eY(l.x*eD.beta),l.y,l.z),d=j.add(l),e=k.add(m)}else{let{p:n,f:o}=this.wNAF(c,b);d=n,e=o}return eG.normalizeZ([d,e])[0]}toAffine(a=e_(this.z)){let{x:b,y:c,z:d}=this,e=a,f=eY(e*e),g=eY(f*e),h=eY(b*f),i=eY(c*g),j=eY(d*e);if(j!==ey)throw Error("invZ was invalid");return new eI(h,i)}}eG.BASE=new eG(eD.Gx,eD.Gy,ey),eG.ZERO=new eG(ex,ey,ex);let eH=new WeakMap;class eI{constructor(a,b){this.x=a,this.y=b}_setWindowSize(a){this._WINDOW_SIZE=a,eH.delete(this)}static fromCompressedHex(a){let b=32===a.length,c=eV(b?a:a.subarray(1));if(!e7(c))throw Error("Point is not on curve");let d=eE(c),e=e$(d),f=(e&ey)===ey;if(b)f&&(e=eY(-e));else{let g=(1&a[0])==1;g!==f&&(e=eY(-e))}let h=new eI(c,e);return h.assertValidity(),h}static fromUncompressedHex(a){let b=eV(a.subarray(1,33)),c=eV(a.subarray(33,65)),d=new eI(b,c);return d.assertValidity(),d}static fromHex(a){let b=eW(a),c=b.length,d=b[0];if(32===c||33===c&&(2===d||3===d))return this.fromCompressedHex(b);if(65===c&&4===d)return this.fromUncompressedHex(b);throw Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${c}`)}static fromPrivateKey(a){return eI.BASE.multiply(e9(a))}static fromSignature(a,b,c){a=eW(a);let d=e4(a),{r:e,s:f}=fb(b);if(0!==c&&1!==c)throw Error("Cannot recover signature: invalid recovery bit");let g=1&c?"03":"02",h=eI.fromHex(g+eQ(e)),{n:i}=eD,j=e_(e,i),k=eY(-d*j,i),l=eY(f*j,i),m=eI.BASE.multiplyAndAddUnsafe(h,k,l);if(!m)throw Error("Cannot recover signature: point at infinify");return m.assertValidity(),m}toRawBytes(a=!1){return eU(this.toHex(a))}toHex(a=!1){let b=eQ(this.x);if(!a)return`04${b}${eQ(this.y)}`;{let c=this.y&ey?"03":"02";return`${c}${b}`}}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let a="Point is not on elliptic curve",{x:b,y:c}=this;if(!e7(b)||!e7(c))throw Error(a);let d=eY(c*c),e=eE(b);if(eY(d-e)!==ex)throw Error(a)}equals(a){return this.x===a.x&&this.y===a.y}negate(){return new eI(this.x,eY(-this.y))}double(){return eG.fromAffine(this).double().toAffine()}add(a){return eG.fromAffine(this).add(eG.fromAffine(a)).toAffine()}subtract(a){return this.add(a.negate())}multiply(a){return eG.fromAffine(this).multiply(a,this).toAffine()}multiplyAndAddUnsafe(a,b,c){let d=eG.fromAffine(this),e=b===ex||b===ey||this!==eI.BASE?d.multiplyUnsafe(b):d.multiply(b),f=eG.fromAffine(a).multiplyUnsafe(c),g=e.add(f);return g.equals(eG.ZERO)?void 0:g.toAffine()}}function eJ(a){return Number.parseInt(a[0],16)>=8?"00"+a:a}function eK(a){if(a.length<2||2!==a[0])throw Error(`Invalid signature integer tag: ${eP(a)}`);let b=a[1],c=a.subarray(2,b+2);if(!b||c.length!==b)throw Error("Invalid signature integer: wrong length");if(0===c[0]&&c[1]<=127)throw Error("Invalid signature integer: trailing length");return{data:eV(c),left:a.subarray(b+2)}}eI.BASE=new eI(eD.Gx,eD.Gy),eI.ZERO=new eI(ex,ex);class eL{constructor(a,b){this.r=a,this.s=b,this.assertValidity()}static fromCompact(a){let b=eN(a),c="Signature.fromCompact";if("string"!=typeof a&&!b)throw TypeError(`${c}: Expected string or Uint8Array`);let d=b?eP(a):a;if(128!==d.length)throw Error(`${c}: Expected 64-byte hex`);return new eL(eT(d.slice(0,64)),eT(d.slice(64,128)))}static fromDER(a){let b=eN(a);if("string"!=typeof a&&!b)throw TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:c,s:d}=function(a){if(a.length<2||48!=a[0])throw Error(`Invalid signature tag: ${eP(a)}`);if(a[1]!==a.length-2)throw Error("Invalid signature: incorrect length");let{data:b,left:c}=eK(a.subarray(2)),{data:d,left:e}=eK(c);if(e.length)throw Error(`Invalid signature: left bytes after parsing: ${eP(e)}`);return{r:b,s:d}}(b?a:eU(a));return new eL(c,d)}static fromHex(a){return this.fromDER(a)}assertValidity(){let{r:a,s:b}=this;if(!e6(a))throw Error("Invalid Signature: r must be 0 < r < n");if(!e6(b))throw Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let a=eD.n>>ey;return this.s>a}normalizeS(){return this.hasHighS()?new eL(this.r,eD.n-this.s):this}toDERRawBytes(a=!1){return eU(this.toDERHex(a))}toDERHex(a=!1){let b=eJ(eS(this.s));if(a)return b;let c=eJ(eS(this.r)),d=eS(c.length/2),e=eS(b.length/2),f=eS(c.length/2+b.length/2+4);return`30${f}02${d}${c}02${e}${b}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return eU(this.toCompactHex())}toCompactHex(){return eQ(this.r)+eQ(this.s)}}function eM(...a){if(!a.every(eN))throw Error("Uint8Array list expected");if(1===a.length)return a[0];let b=a.reduce((a,b)=>a+b.length,0),c=new Uint8Array(b);for(let d=0,e=0;d<a.length;d++){let f=a[d];c.set(f,e),e+=f.length}return c}function eN(a){return a instanceof Uint8Array}let eO=Array.from({length:256},(a,b)=>b.toString(16).padStart(2,"0"));function eP(a){if(!(a instanceof Uint8Array))throw Error("Expected Uint8Array");let b="";for(let c=0;c<a.length;c++)b+=eO[a[c]];return b}function eQ(a){if(a>eC)throw Error("Expected number < 2^256");return a.toString(16).padStart(64,"0")}function eR(a){return eU(eQ(a))}function eS(a){let b=a.toString(16);return 1&b.length?`0${b}`:b}function eT(a){if("string"!=typeof a)throw TypeError("hexToNumber: expected string, got "+typeof a);return BigInt(`0x${a}`)}function eU(a){if("string"!=typeof a)throw TypeError("hexToBytes: expected string, got "+typeof a);if(a.length%2)throw Error("hexToBytes: received invalid unpadded hex"+a.length);let b=new Uint8Array(a.length/2);for(let c=0;c<b.length;c++){let d=2*c,e=a.slice(d,d+2),f=Number.parseInt(e,16);if(Number.isNaN(f)||f<0)throw Error("Invalid byte sequence");b[c]=f}return b}function eV(a){return eT(eP(a))}function eW(a){return a instanceof Uint8Array?Uint8Array.from(a):eU(a)}function eX(a){if("number"==typeof a&&Number.isSafeInteger(a)&&a>0)return BigInt(a);if("bigint"==typeof a&&e6(a))return a;throw TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function eY(a,b=eD.P){let c=a%b;return c>=ex?c:b+c}function eZ(a,b){let{P:c}=eD,d=a;for(;(b--)>ex;)d*=d,d%=c;return d}function e$(a){let{P:b}=eD,c=BigInt(6),d=BigInt(11),e=BigInt(22),f=BigInt(23),g=BigInt(44),h=BigInt(88),i=a*a*a%b,j=i*i*a%b,k=eZ(j,eA)*j%b,l=eZ(k,eA)*j%b,m=eZ(l,ez)*i%b,n=eZ(m,d)*m%b,o=eZ(n,e)*n%b,p=eZ(o,g)*o%b,q=eZ(p,h)*p%b,r=eZ(q,g)*o%b,s=eZ(r,eA)*j%b,t=eZ(s,f)*n%b,u=eZ(t,c)*i%b;return eZ(u,ez)}function e_(a,b=eD.P){if(a===ex||b<=ex)throw Error(`invert: expected positive integers, got n=${a} mod=${b}`);let c=eY(a,b),d=b,e=ex,f=ey,g=ey,h=ex;for(;c!==ex;){let i=d/c,j=d%c,k=e-g*i,l=f-h*i;d=c,c=j,e=g,f=h,g=k,h=l}let m=d;if(m!==ey)throw Error("invert: does not exist");return eY(e,b)}function e0(a,b=eD.P){let c=Array(a.length),d=a.reduce((a,d,e)=>d===ex?a:(c[e]=a,eY(a*d,b)),ey),e=e_(d,b);return a.reduceRight((a,d,e)=>d===ex?a:(c[e]=eY(a*c[e],b),eY(a*d,b)),e),c}let e1=(a,b)=>(a+b/ez)/b,e2=ez**BigInt(128);function e3(a){let{n:b}=eD,c=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),d=-ey*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),e=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),f=c,g=e1(f*a,b),h=e1(-d*a,b),i=eY(a-g*c-h*e,b),j=eY(-g*d-h*f,b),k=i>e2,l=j>e2;if(k&&(i=b-i),l&&(j=b-j),i>e2||j>e2)throw Error("splitScalarEndo: Endomorphism failed, k="+a);return{k1neg:k,k1:i,k2neg:l,k2:j}}function e4(a){let{n:b}=eD,c=a.length,d=8*c-256,e=eV(a);return d>0&&(e>>=BigInt(d)),e>=b&&(e-=b),e}class e5{constructor(){this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}hmac(...a){return fr.hmacSha256(this.k,...a)}hmacSync(...a){if("function"!=typeof fr.hmacSha256Sync)throw Error("utils.hmacSha256Sync is undefined, you need to set it");let b=fr.hmacSha256Sync(this.k,...a);if(b instanceof Promise)throw Error("To use sync sign(), ensure utils.hmacSha256 is sync");return b}incr(){if(this.counter>=1e3)throw Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(a=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),a),this.v=await this.hmac(this.v),0!==a.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),a),this.v=await this.hmac(this.v))}reseedSync(a=new Uint8Array){this.k=this.hmacSync(this.v,Uint8Array.from([0]),a),this.v=this.hmacSync(this.v),0!==a.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),a),this.v=this.hmacSync(this.v))}async generate(){return this.incr(),this.v=await this.hmac(this.v),this.v}generateSync(){return this.incr(),this.v=this.hmacSync(this.v),this.v}}function e6(a){return ex<a&&a<eD.n}function e7(a){return ex<a&&a<eD.P}function e8(a,b,c){let d=eV(a);if(!e6(d))return;let{n:e}=eD,f=eI.BASE.multiply(d),g=eY(f.x,e);if(g===ex)return;let h=eY(e_(d,e)*eY(b+c*g,e),e);if(h===ex)return;let i=new eL(g,h),j=(f.x===i.r?0:2)|Number(f.y&ey);return{sig:i,recovery:j}}function e9(a){let b;if("bigint"==typeof a)b=a;else if("number"==typeof a&&Number.isSafeInteger(a)&&a>0)b=BigInt(a);else if("string"==typeof a){if(64!==a.length)throw Error("Expected 32 bytes of private key");b=eT(a)}else if(eN(a)){if(32!==a.length)throw Error("Expected 32 bytes of private key");b=eV(a)}else throw TypeError("Expected valid private key");if(!e6(b))throw Error("Expected private key: 0 < key < n");return b}function fa(a){return a instanceof eI?(a.assertValidity(),a):eI.fromHex(a)}function fb(a){if(a instanceof eL)return a.assertValidity(),a;try{return eL.fromDER(a)}catch(b){return eL.fromCompact(a)}}function fc(a,b=!1){return eI.fromPrivateKey(a).toRawBytes(b)}function fd(a){let b=a.length>32?a.slice(0,32):a;return eV(b)}function fe(a){if("bigint"!=typeof a)throw Error("Expected bigint");let b=eQ(a);return eU(b)}async function ff(a,b,c={}){let{seed:d,m:e,d:f}=function a(b,c,d){if(null==b)throw Error(`sign: expected valid message hash, not "${b}"`);let e=eW(b),f=e9(c),g=[fe(f),function(a){let b=fd(a),c=eY(b,eD.n);return fe(c<ex?b:c)}(e)];if(null!=d){!0===d&&(d=fr.randomBytes(32));let h=eW(d);if(32!==h.length)throw Error("sign: Expected 32 bytes of extra data");g.push(h)}let i=eM(...g),j=fd(e);return{seed:i,m:j,d:f}}(a,b,c.extraEntropy),g,h=new e5;for(await h.reseed(d);!(g=e8(await h.generate(),e,f));)await h.reseed();return function a(b,c){let{sig:d,recovery:e}=b,{canonical:f,der:g,recovered:h}=Object.assign({canonical:!0,der:!0},c);f&&d.hasHighS()&&(d=d.normalizeS(),e^=1);let i=g?d.toDERRawBytes():d.toCompactRawBytes();return h?[i,e]:i}(g,c)}let fg={strict:!0};function fh(a,b,c,d=fg){let e;try{e=fb(a),b=eW(b)}catch(f){return!1}let{r:g,s:h}=e;if(d.strict&&e.hasHighS())return!1;let i=e4(b),j;try{j=fa(c)}catch(k){return!1}let{n:l}=eD,m=e_(h,l),n=eY(i*m,l),o=eY(g*m,l),p=eI.BASE.multiplyAndAddUnsafe(j,n,o);if(!p)return!1;let q=eY(p.x,l);return q===g}function fi(a){return eY(eV(a),eD.n)}function fj(a){return(a.y&ey)===ex}class fk{constructor(a,b){this.r=a,this.s=b,this.assertValidity()}static fromHex(a){let b=eW(a);if(64!==b.length)throw TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${b.length}`);let c=eV(b.subarray(0,32)),d=eV(b.subarray(32,64));return new fk(c,d)}assertValidity(){let{r:a,s:b}=this;if(!e7(a)||!e6(b))throw Error("Invalid signature")}toHex(){return eQ(this.r)+eQ(this.s)}toRawBytes(){return eU(this.toHex())}}function fl(a,b,c){let d=a instanceof fk,e=d?a:fk.fromHex(a);return d&&e.assertValidity(),{...e,m:eW(b),P:fa(c)}}function fm(a,b,c,d){let e=eI.BASE.multiplyAndAddUnsafe(b,e9(c),eY(-d,eD.n));return!!(e&&fj(e))&&e.x===a}async function fn(a,b,c){try{let{r:d,s:e,m:f,P:g}=fl(a,b,c),h=fi(await fr.taggedHash(fp.challenge,eR(d),g.toRawX(),f));return fm(d,g,e,h)}catch(i){return!1}}eI.BASE._setWindowSize(8);let fo={node:ew,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},fp={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},fq={},fr={isValidPrivateKey(a){try{return e9(a),!0}catch(b){return!1}},privateAdd:(a,b)=>{let c=e9(a),d=e9(b);return eR(eY(c+d,eD.n))},privateNegate:a=>{let b=e9(a);return eR(eD.n-b)},pointAddScalar:(a,b,c)=>{let d=eI.fromHex(a),e=e9(b),f=eI.BASE.multiplyAndAddUnsafe(d,e,ey);if(!f)throw Error("Tweaked point at infinity");return f.toRawBytes(c)},pointMultiply:(a,b,c)=>{let d=eI.fromHex(a),e=eV(eW(b));return d.multiply(e).toRawBytes(c)},hashToPrivateKey:a=>{if((a=eW(a)).length<40||a.length>1024)throw Error("Expected 40-1024 bytes of private key as per FIPS 186");let b=eY(eV(a),eD.n-ey)+ey;return eR(b)},randomBytes:(a=32)=>{if(fo.web)return fo.web.getRandomValues(new Uint8Array(a));if(fo.node){let{randomBytes:b}=fo.node;return Uint8Array.from(b(a))}throw Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>fr.hashToPrivateKey(fr.randomBytes(40)),bytesToHex:eP,hexToBytes:eU,concatBytes:eM,mod:eY,invert:e_,sha256:async(...a)=>{if(fo.web){let b=await fo.web.subtle.digest("SHA-256",eM(...a));return new Uint8Array(b)}if(fo.node){let{createHash:c}=fo.node,d=c("sha256");return a.forEach(a=>d.update(a)),Uint8Array.from(d.digest())}throw Error("The environment doesn't have sha256 function")},hmacSha256:async(a,...b)=>{if(fo.web){let c=await fo.web.subtle.importKey("raw",a,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),d=eM(...b),e=await fo.web.subtle.sign("HMAC",c,d);return new Uint8Array(e)}if(fo.node){let{createHmac:f}=fo.node,g=f("sha256",a);return b.forEach(a=>g.update(a)),Uint8Array.from(g.digest())}throw Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(a,...b)=>{let c=fq[a];if(void 0===c){let d=await fr.sha256(Uint8Array.from(a,a=>a.charCodeAt(0)));c=eM(d,d),fq[a]=c}return fr.sha256(c,...b)},taggedHashSync:(a,...b)=>{if("function"!=typeof fr.sha256Sync)throw Error("utils.sha256Sync is undefined, you need to set it");let c=fq[a];if(void 0===c){let d=fr.sha256Sync(Uint8Array.from(a,a=>a.charCodeAt(0)));c=eM(d,d),fq[a]=c}return fr.sha256Sync(c,...b)},precompute(a=8,b=eI.BASE){let c=b===eI.BASE?b:new eI(b.x,b.y);return c._setWindowSize(a),c.multiply(eA),c}};async function fs(a,b){let{digest:c}=await dc.sha256.digest(b);try{return await ff(c,a)}catch(d){throw aZ(d,"ERR_INVALID_INPUT")}}async function ft(a,b,c){try{let{digest:d}=await dc.sha256.digest(c);return fh(b,d,a)}catch(e){throw aZ(e,"ERR_INVALID_INPUT")}}function fu(a){try{eI.fromHex(a)}catch(b){throw aZ(b,"ERR_INVALID_PUBLIC_KEY")}}class fv{constructor(a){fu(a),this._key=a}async verify(a,b){return await ft(this._key,b,a)}marshal(){return function(a){let b=eI.fromHex(a).toRawBytes(!0);return b}(this._key)}get bytes(){return $.encode({Type:Y.Secp256k1,Data:this.marshal()})}equals(a){return(0,bK.equals)(this.bytes,a.bytes)}async hash(){let{bytes:a}=await dc.sha256.digest(this.bytes);return a}}class fw{constructor(a,b){this._key=a,this._publicKey=b??function(a){try{return fc(a,!0)}catch(b){throw aZ(b,"ERR_INVALID_PRIVATE_KEY")}}(a),function(a){try{fc(a,!0)}catch(b){throw aZ(b,"ERR_INVALID_PRIVATE_KEY")}}(this._key),fu(this._publicKey)}async sign(a){return await fs(this._key,a)}get public(){return new fv(this._publicKey)}marshal(){return this._key}get bytes(){return _.encode({Type:Y.Secp256k1,Data:this.marshal()})}equals(a){return(0,bK.equals)(this.bytes,a.bytes)}async hash(){let{bytes:a}=await dc.sha256.digest(this.bytes);return a}async id(){let a=await this.public.hash();return(0,bb.toString)(a,"base58btc")}async export(a,b="libp2p-key"){if("libp2p-key"===b)return await dm(this.bytes,a);throw aZ(Error(`export format '${b}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function fx(a){return new fw(a)}function fy(a){return new fv(a)}async function fz(){let a=await fr.randomPrivateKey();return new fw(a)}let fA={rsa:aP,ed25519:aQ,secp256k1:aR};function fB(a){let b=Object.keys(fA).join(" / ");return aZ(Error(`invalid or unsupported key type ${a}. Must be ${b}`),"ERR_UNSUPPORTED_KEY_TYPE")}function fC(a){let b=$.decode(a),c=b.Data;switch(b.Type){case Y.RSA:return fA.rsa.unmarshalRsaPublicKey(c);case Y.Ed25519:return fA.ed25519.unmarshalEd25519PublicKey(c);case Y.Secp256k1:return fA.secp256k1.unmarshalSecp256k1PublicKey(c);default:throw fB(b.Type)}}async function fD(a){let b=_.decode(a),c=b.Data;switch(b.Type){case Y.RSA:return await fA.rsa.unmarshalRsaPrivateKey(c);case Y.Ed25519:return fA.ed25519.unmarshalEd25519PrivateKey(c);case Y.Secp256k1:return fA.secp256k1.unmarshalSecp256k1PrivateKey(c);default:throw fB(b.Type)}}var fE=c(22817);let fF="ERR_UNRECOGNIZED_VALIDITY",fG="ERR_SIGNATURE_CREATION",fH="ERR_MISSING_PRIVATE_KEY",fI;(m0=(m_=aa||(aa={})).ValidityType||(m_.ValidityType={})).EOL="EOL",(m1=fI||(fI={}))[m1.EOL=0]="EOL",(m2=m_.ValidityType||(m_.ValidityType={})).codec=()=>cl(fI),m_.codec=()=>cG({1:{name:"value",codec:ch,optional:!0},2:{name:"signature",codec:ch,optional:!0},3:{name:"validityType",codec:m_.ValidityType.codec(),optional:!0},4:{name:"validity",codec:ch,optional:!0},5:{name:"sequence",codec:c1,optional:!0},6:{name:"ttl",codec:c1,optional:!0},7:{name:"pubKey",codec:ch,optional:!0},8:{name:"signatureV2",codec:ch,optional:!0},9:{name:"data",codec:ch,optional:!0}}),m_.encode=a=>b8(a,m_.codec()),m_.decode=a=>b7(a,m_.codec());var fJ=c(64936);(0,aY.kg)("ipns:utils");let fK=(0,a8.fromString)("/ipns/"),fL=(a,b,c)=>{let d=(0,a8.fromString)(b);return(0,bM.concat)([a,c,d])},fM=a=>{let b=(0,a8.fromString)("ipns-signature:");return(0,bM.concat)([b,a])},fN=a=>aa.encode(a),fO=a=>{let b=aa.decode(a);return{value:b.value??new Uint8Array(0),signature:b.signature??new Uint8Array(0),validityType:b.validityType??aa.ValidityType.EOL,validity:b.validity??new Uint8Array(0),sequence:b.sequence??0n,pubKey:b.pubKey,ttl:b.ttl??void 0,signatureV2:b.signatureV2,data:b.data}},fP=a=>(0,bM.concat)([fK,a.toBytes()]),fQ=(a,b,c,d,e)=>{let f;if(c===aa.ValidityType.EOL)f=0;else throw aZ(Error("Unknown validity type"),fF);let g={Value:a,Validity:b,ValidityType:f,Sequence:d,TTL:e};return fJ.cv(g)};var fR=c(28924);let fS=(0,aY.kg)("ipns"),fT=a1.identity.code,fU=async(a,b,c,d)=>{let e=new bL(Date.now()+Number(d)),f=aa.ValidityType.EOL,[g,h]=d.toString().split("."),i=BigInt(g)*BigInt(1e5)+BigInt(h??"0");return await fV(a,b,c,f,e,i)},fV=async(a,b,c,d,e,f)=>{c=BigInt(c);let g=(0,a8.fromString)(e.toString());if(null==a.privateKey)throw aZ(Error("Missing private key"),fH);let h=await fD(a.privateKey),i=await fY(h,b,d,g),j=fQ(b,g,d,c,f),k=fM(j),l=await h.sign(k),m={value:b,signature:i,validityType:d,validity:g,sequence:c,ttl:f,signatureV2:l,data:j};if(null!=a.publicKey){let n=fR.decode(a.toBytes());n.code===fT&&(0,bK.equals)(a.publicKey,n.digest)||(m.pubKey=a.publicKey)}return fS("ipns entry for %b created",b),m},fW=a=>fE.base32upper.encode(a).slice(1),fX=a=>new be(`/ipns/${fW(a)}`),fY=async(a,b,c,d)=>{try{let e=fL(b,c,d);return await a.sign(e)}catch(f){throw fS.error("record signature creation failed",f),aZ(Error("record signature creation failed"),fG)}},fZ=(0,aY.kg)("ipfs:ipns:publisher"),f$=bJ().code;(class{constructor(a,b){this._routing=a,this._datastore=b}async publishWithEOL(a,b,c){let d=await this._updateOrCreateRecord(a,b,c);return this._putRecordToRouting(d,a)}publish(a,b){return this.publishWithEOL(a,b,36e5)}async _putRecordToRouting(a,b){if(!bI(b)){let c="peerId received is not valid";throw fZ.error(c),aZ(Error(c),"ERR_INVALID_PEER_ID")}if(null==b.publicKey)throw aZ(Error("Public key was missing"),"ERR_MISSING_PUBLIC_KEY");let d=fP(b);return await this._publishEntry(d,a),a}async _publishEntry(a,b){try{let c=await this._routing.put(a,b);return fZ(`ipns record for ${(0,bb.toString)(a,"base32")} was stored in the routing`),c}catch(d){let e=`ipns record for ${(0,bb.toString)(a,"base32")} could not be stored in the routing - ${d.stack}`;throw fZ.error(e),fZ.error(d),aZ(Error(e),"ERR_PUTTING_TO_ROUTING")}}async _getPublished(a,b={}){if(!bI(a)){let c="peerId received is not valid";throw fZ.error(c),aZ(Error(c),"ERR_INVALID_PEER_ID")}let d=!1!==b.checkRouting;try{let e=await this._datastore.get(fX(a.toBytes()));return this._unmarshalData(e)}catch(f){if(f.code!==f$){let g=`unexpected error getting the ipns record ${a.toString()} from datastore`;throw fZ.error(g),aZ(Error(g),"ERR_UNEXPECTED_DATASTORE_RESPONSE")}if(!d)throw aZ(f,"ERR_NOT_FOUND_AND_CHECK_ROUTING_NOT_ENABLED");try{let h=fP(a),i=await this._routing.get(h);return this._unmarshalData(i)}catch(j){throw fZ.error(j),j}}}_unmarshalData(a){try{return fO(a)}catch(b){throw aZ(b,"ERR_INVALID_RECORD_DATA")}}async _updateOrCreateRecord(a,b,c){if(!bI(a)){let d="peerId received is not valid";throw fZ.error(d),aZ(Error(d),"ERR_INVALID_PEER_ID")}let e;try{e=await this._getPublished(a,{checkRouting:!0})}catch(f){if(f.code!==f$){let g=`unexpected error when determining the last published IPNS record for ${a.toString()} ${f.stack}`;throw fZ.error(g),aZ(Error(g),"ERR_DETERMINING_PUBLISHED_RECORD")}}let h=0n;e&& void 0!==e.sequence&&(h=(0,bK.equals)(e.value,b)?e.sequence:e.sequence+BigInt(1));let i;try{i=await fU(a,b,h,c)}catch(j){let k=`ipns record for ${b} could not be created`;throw fZ.error(j),aZ(Error(k),"ERR_CREATING_IPNS_RECORD")}try{let l=fN(i);return await this._datastore.put(fX(a.toBytes()),l),fZ(`ipns record for ${(0,bb.toString)(b,"base32")} was stored in the datastore`),l}catch(m){let n=`ipns record for ${b} could not be stored in the datastore`;throw fZ.error(n),aZ(Error(n),"ERR_STORING_IN_DATASTORE")}}}).defaultRecordLifetime=36e5,(0,aY.kg)("ipfs:ipns:republisher");let f_=(0,aY.kg)("ipns:validator"),f0=a=>{if(null==a.data)throw errCode(Error("Record data is missing"),ERRORS.ERR_INVALID_RECORD_DATA);let b=parseCborData(a.data);if(!uint8ArrayEquals(b.Value,a.value))throw errCode(Error('Field "value" did not match between protobuf and CBOR'),ERRORS.ERR_SIGNATURE_VERIFICATION);if(!uint8ArrayEquals(b.Validity,a.validity))throw errCode(Error('Field "validity" did not match between protobuf and CBOR'),ERRORS.ERR_SIGNATURE_VERIFICATION);if(b.ValidityType!==a.validityType)throw errCode(Error('Field "validityType" did not match between protobuf and CBOR'),ERRORS.ERR_SIGNATURE_VERIFICATION);if(b.Sequence!==a.sequence)throw errCode(Error('Field "sequence" did not match between protobuf and CBOR'),ERRORS.ERR_SIGNATURE_VERIFICATION);if(b.TTL!==a.ttl)throw errCode(Error('Field "ttl" did not match between protobuf and CBOR'),ERRORS.ERR_SIGNATURE_VERIFICATION)};(0,aY.kg)("ipfs:ipns:resolver"),bJ().code,(0,aY.kg)("ipfs:ipns");var f1=c(31303);c(64593),c(55565),c(37939);var f2=c(11227);c(77416),f2("datastore:core:tiered"),c(26905);let f3="SHARDING",f4="_README";var f5=c(32121);c(74664);let f6=new be(f3),f7=new be(f4);class f8 extends null{constructor(a,b){super(),this.child=new KeyTransformDatastore(a,{convert:this._convertKey.bind(this),invert:this._invertKey.bind(this)}),this.shard=b}async open(){await this.child.open(),this.shard=await f8.create(this.child,this.shard)}_convertKey(a){let b=a.toString();if(b===f6.toString()||b===f7.toString())return a;let c=new Key(this.shard.fun(b));return c.child(a)}_invertKey(a){let b=a.toString();return b===f6.toString()||b===f7.toString()?a:Key.withNamespaces(a.list().slice(1))}static async createOrOpen(a,b){try{await f8.create(a,b)}catch(c){if(c&&"datastore exists"!==c.message)throw c}return f8.open(a)}static async open(a){let b=await readShardFun("/",a);return new f8(a,b)}static async create(a,b){let c=await a.has(f6);if(!c&&!b)throw Errors.dbOpenFailedError(Error("Shard is required when datastore doesn't have a shard key already."));if(!c){let d="function"==typeof a.putRaw?a.putRaw.bind(a):a.put.bind(a);return await Promise.all([d(f6,new TextEncoder().encode(b.toString()+"\n")),d(f7,new TextEncoder().encode(readme))]),b}let e=await readShardFun("/",a),f=(e||"").toString(),g=b.toString();if(f!==g)throw Error(`specified fun ${g} does not match repo shard fun ${f}`);return e}put(a,b,c){return this.child.put(a,b,c)}get(a,b){return this.child.get(a,b)}has(a,b){return this.child.has(a,b)}delete(a,b){return this.child.delete(a,b)}async *putMany(a,b={}){yield*this.child.putMany(a,b)}async *getMany(a,b={}){yield*this.child.getMany(a,b)}async *deleteMany(a,b={}){yield*this.child.deleteMany(a,b)}batch(){return this.child.batch()}query(a,b){let c={...a,filters:[({key:a})=>a.toString()!==f6.toString(),({key:a})=>a.toString()!==f7.toString()].concat(a.filters||[])};return this.child.query(c,b)}queryKeys(a,b){let c={...a,filters:[a=>a.toString()!==f6.toString(),a=>a.toString()!==f7.toString()].concat(a.filters||[])};return this.child.queryKeys(c,b)}close(){return this.child.close()}}var f9=c(74014);(0,aY.kg)("datastore-pubsub:publisher"),(0,aY.kg)("ipfs:ipns:pubsub"),(m3=ab||(ab={})).codec=()=>cG({1:{name:"key",codec:ch},2:{name:"value",codec:ch},5:{name:"timeReceived",codec:cW}}),m3.encode=a=>b8(a,m3.codec()),m3.decode=a=>b7(a,m3.codec());class ga{constructor(a,b,c){if(!(a instanceof Uint8Array))throw Error("key must be a Uint8Array");if(!(b instanceof Uint8Array))throw Error("value must be a Uint8Array");this.key=a,this.value=b,this.timeReceived=c}serialize(){return Record.encode(this.prepareSerialize())}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:utils.toRFC3339(this.timeReceived)}}static deserialize(a){let b=Record.decode(a);return new ga(b.key,b.value,new Date(b.timeReceived))}static fromDeserialized(a){let b=utils.parseRFC3339(a.timeReceived);if(null==a.key)throw Error("key missing from deserialized object");if(null==a.value)throw Error("value missing from deserialized object");let c=new ga(a.key,a.value,b);return c}}(0,aY.kg)("ipfs:ipns:offline-datastore"),(0,aY.kg)("ipfs:ipns:dht-datastore"),(0,aY.kg)("ipfs:components:ipns"),(0,aY.kg)("ipfs:name:publish"),c(98441),c(82734),aX.Z.bind({ignoreUndefined:!0}),(0,aY.kg)("ipfs:name:resolve");let gb=bJ().code,gc={default:"<dst>",edges:"<src> -> <dst>"};function gd(a,b,c="",d=gc.default){let e=d.replace(/<src>/g,a.toString());return(e=e.replace(/<dst>/g,b.toString())).replace(/<linkname>/g,c)}async function*ge(a,b,c,d,e,f){let g=new Set;async function*h(c,i){let j=i+1;if(!(j>d))try{for await(let k of gf(a,b,c.cid,f))yield{parent:c,node:k,isDuplicate:e&&g.has(k.cid.toString())},e&&g.add(k.cid.toString()),yield*h(k,j)}catch(l){throw l.code===gb&&(l.message=`Could not find object with CID: ${c.cid}`),l}}yield*h({cid:c},0)}async function*gf(a,b,c,d){let e=await a.blocks.get(c,d),f=await b.getCodec(c.code),g=f.decode(e),h=c.code===dagPB.code;for(let[i,j]of gg(g,[])){if(h){let k=i.match(/^Links\/(\d+)\/Hash$/);if(k){let l=Number(k[1]);if(l<g.Links.length){yield{name:g.Links[l].Name,cid:j};continue}}}yield{name:i,cid:j}}}let gg=function*(a,b){if(!(null==a||a instanceof Uint8Array)){for(let[c,d]of Object.entries(a)){let e=[...b,c];if(null!=d&&"object"==typeof d){if(Array.isArray(d))for(let[f,g]of d.entries()){let h=[...e,f],i=CID.asCID(g);i?yield[h.join("/"),i]:"object"==typeof g&&(yield*gg(g,h))}else{let j=CID.asCID(d);j?yield[e.join("/"),j]:yield*gg(d,e)}}}return[]}};var gh=c(266);let gi=gG("dns4"),gj=gG("dns6"),gk=gG("dnsaddr"),gl=gF(gG("dns"),gk,gi,gj),gm=gF(gG("ip4"),gG("ip6")),gn=gF(gE(gm,gG("tcp")),gE(gl,gG("tcp"))),go=gE(gm,gG("udp")),gp=gE(go,gG("utp")),gq=gE(go,gG("quic")),gr=gF(gE(gn,gG("ws")),gE(gl,gG("ws"))),gs=gF(gE(gn,gG("wss")),gE(gl,gG("wss"))),gt=gF(gE(gn,gG("http")),gE(gm,gG("http")),gE(gl,gG("http"))),gu=gF(gE(gn,gG("https")),gE(gm,gG("https")),gE(gl,gG("https"))),gv=gF(gE(gr,gG("p2p-webrtc-star"),gG("p2p")),gE(gs,gG("p2p-webrtc-star"),gG("p2p")),gE(gr,gG("p2p-webrtc-star")),gE(gs,gG("p2p-webrtc-star")));gF(gE(gr,gG("p2p-websocket-star"),gG("p2p")),gE(gs,gG("p2p-websocket-star"),gG("p2p")),gE(gr,gG("p2p-websocket-star")),gE(gs,gG("p2p-websocket-star")));let gw=gF(gE(gt,gG("p2p-webrtc-direct"),gG("p2p")),gE(gu,gG("p2p-webrtc-direct"),gG("p2p")),gE(gt,gG("p2p-webrtc-direct")),gE(gu,gG("p2p-webrtc-direct"))),gx=gF(gr,gs,gt,gu,gv,gw,gn,gp,gq,gl);gF(gE(gx,gG("p2p-stardust"),gG("p2p")),gE(gx,gG("p2p-stardust")));let gy=gF(gE(gx,gG("p2p")),gv,gw,gG("p2p")),gz=gF(gE(gy,gG("p2p-circuit"),gy),gE(gy,gG("p2p-circuit")),gE(gG("p2p-circuit"),gy),gE(gx,gG("p2p-circuit")),gE(gG("p2p-circuit"),gx),gG("p2p-circuit")),gA=()=>gF(gE(gz,gA),gz),gB=gA(),gC=gF(gE(gB,gy,gB),gE(gy,gB),gE(gB,gy),gB,gy);function gD(a){return function(b){let c;try{c=new gh.sc(b)}catch(d){return!1}let e=a(c.protoNames());return null!==e&&(!0===e|| !1===e?e:0===e.length)}}function gE(...a){function b(b){if(b.length<a.length)return null;let c=b;return a.some(a=>(Array.isArray(c="function"==typeof a?a().partialMatch(b):a.partialMatch(b))&&(b=c),null===c)),c}return{toString:function(){return"{ "+a.join(" ")+" }"},input:a,matches:gD(b),partialMatch:b}}function gF(...a){function b(b){let c=null;return a.some(a=>{let d="function"==typeof a?a().partialMatch(b):a.partialMatch(b);return null!=d&&(c=d,!0)}),c}let c={toString:function(){return"{ "+a.join(" ")+" }"},input:a,matches:gD(b),partialMatch:b};return c}function gG(a){let b=a;return{toString:function(){return b},matches:function(a){let c;try{c=new gh.sc(a)}catch(d){return!1}let e=c.protoNames();return 1===e.length&&e[0]===b},partialMatch:function(a){return 0===a.length?null:a[0]===b?a.slice(1):null}}}c(58869);class gH{constructor(a){if(!(a>0)||(a-1&a)!=0)throw Error("Max size for a FixedFIFO should be a power of two");this.buffer=Array(a),this.mask=a-1,this.top=0,this.btm=0,this.next=null}push(a){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=a,this.top=this.top+1&this.mask,!0)}shift(){let a=this.buffer[this.btm];if(void 0!==a)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,a}isEmpty(){return void 0===this.buffer[this.btm]}}class gI{constructor(a={}){this.hwm=a.splitLimit??16,this.head=new gH(this.hwm),this.tail=this.head,this.size=0}calculateSize(a){return a?.byteLength!=null?a.byteLength:1}push(a){if(a?.value!=null&&(this.size+=this.calculateSize(a.value)),!this.head.push(a)){let b=this.head;this.head=b.next=new gH(2*this.head.buffer.length),this.head.push(a)}}shift(){let a=this.tail.shift();if(void 0===a&&null!=this.tail.next){let b=this.tail.next;this.tail.next=null,this.tail=b,a=this.tail.shift()}return a?.value!=null&&(this.size-=this.calculateSize(a.value)),a}isEmpty(){return this.head.isEmpty()}}let gJ=(...a)=>{let b;for(;a.length>0;)b=a.shift()(b);return b},gK=a=>null!=a&&("function"==typeof a[Symbol.asyncIterator]||"function"==typeof a[Symbol.iterator]||"function"==typeof a.next),gL=a=>null!=a&&"function"==typeof a.sink&&gK(a.source),gM=a=>b=>{let c=a.sink(b);if(null!=c.then){let d=function(a={}){let b=a=>{let b=a.shift();if(null==b)return{done:!0};if(null!=b.error)throw b.error;return{done:!0===b.done,value:b.value}};return function a(b,c){let d=(c=c??{}).onEnd,e=new gI,f,g,h,i=async()=>e.isEmpty()?h?{done:!0}:await new Promise((a,c)=>{g=d=>{g=null,e.push(d);try{a(b(e))}catch(h){c(h)}return f}}):b(e),j=a=>null!=g?g(a):(e.push(a),f),k=a=>(e=new gI,null!=g)?g({error:a}):(e.push({error:a}),f),l=a=>{if(h)return f;if(c?.objectMode!== !0&&a?.byteLength==null)throw Error("objectMode was not true but tried to push non-Uint8Array value");return j({done:!1,value:a})},m=a=>h?f:(h=!0,null!=a?k(a):j({done:!0})),n=()=>(e=new gI,m(),{done:!0}),o=a=>(m(a),{done:!0});if(f={[Symbol.asyncIterator](){return this},next:i,return:n,throw:o,push:l,end:m,get readableLength(){return e.size}},null==d)return f;let p=f;return f={[Symbol.asyncIterator](){return this},next(){return p.next()},throw(a){return p.throw(a),null!=d&&(d(a),d=void 0),{done:!0}},return(){return p.return(),null!=d&&(d(),d=void 0),{done:!0}},push:l,end(a){return p.end(a),null!=d&&(d(a),d=void 0),f},get readableLength(){return p.readableLength}}}(b,a)}({objectMode:!0});c.then(()=>{d.end()},a=>{d.end(a)});let e=async function*(){yield*a.source,d.end()};return f9(d,e())}return a.source};function gN(a,...b){if(gL(a)){let c=a;a=()=>c.source}else if(gK(a)){let d=a;a=()=>d}let e=[a,...b];if(e.length>1&&gL(e[e.length-1])&&(e[e.length-1]=e[e.length-1].sink),e.length>2)for(let f=1;f<e.length-1;f++)gL(e[f])&&(e[f]=gM(e[f]));return gJ(...e)}c(35266);var gO=c(84810),gP=c(7225),gQ=c(16441),gR=c(40469);(0,gP.D)({name:"murmur3-32",code:35,encode:a=>(function(a){let b=[,,,,];for(let c=0;c<4;c++)b[c]=255&a,a>>=8;return new Uint8Array(b)})(gR.x86.hash32(a))});let gS=(0,gP.D)({name:"murmur3-128",code:34,encode:a=>gQ.aI.fromHex(gR.x64.hash128(a))});async function gT(a){return(await gS.encode(a)).slice(0,8).reverse()}let gU={chunker:"fixed",strategy:"balanced",rawLeaves:!1,onlyHash:!1,reduceSingleLeafToSelf:!0,hasher:dc.sha256,leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:!1,recursive:!1,hidden:!1,timeout:void 0,hamtHashFn:gT,hamtHashCode:34,hamtBucketBits:8};var gV=(a={})=>{let b=aX.Z.bind({ignoreUndefined:!0});return b(gU,a)};let gW=async(a,b,c)=>{c.codec||(c.codec=a_),c.hasher||(c.hasher=dc.sha256),void 0===c.cidVersion&&(c.cidVersion=1),c.codec===a_&&c.hasher!==dc.sha256&&(c.cidVersion=1);let d=await c.hasher.digest(a),e=a9.CID.create(c.cidVersion,c.codec.code,d);return c.onlyHash||await b.put(e,a,{signal:c.signal}),e};var gX=gW;let gY=async(a,b,c)=>{let d=new a$.fL({type:"directory",mtime:a.mtime,mode:a.mode}),e=(0,a_.encode)((0,a_.prepare)({Data:d.marshal()})),f=await gX(e,b,c),g=a.path;return{cid:f,path:g,unixfs:d,size:e.length}};var gZ=gY,g$=c(96945);async function g_(a,b){return b(await f1(a))}var g0=g_,g1=c(78165);function g2(a,b,c){return g3(a,b,c)}async function g3(a,b,c){let d=[];for await(let e of g1(a,c.maxChildrenPerNode))d.push(await b(e));return d.length>1?g3(d,b,c):d[0]}var g4=g2;async function g5(a,b,c){let d=new g8(c.layerRepeat),e=0,f=1,g=d;for await(let h of g1(a,c.maxChildrenPerNode))g.isFull()&&(g!==d&&d.addChild(await g.reduce(b)),e&&e%c.layerRepeat==0&&f++,g=new g7(f,c.layerRepeat,e),e++),g.append(h);return g&&g!==d&&d.addChild(await g.reduce(b)),d.reduce(b)}var g6=g5;class g7{constructor(a,b,c=0){this.maxDepth=a,this.layerRepeat=b,this.currentDepth=1,this.iteration=c,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:a,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;let a=this._findParent(this.node,this.currentDepth);return!a||(this._addNextNodeToParent(a),!1)}_addNextNodeToParent(a){this.parent=a;let b={children:[],depth:a.depth+1,parent:a,maxDepth:this.maxDepth,maxChildren:Math.floor(a.children.length/this.layerRepeat)*this.layerRepeat};a.children.push(b),this.currentDepth=b.depth,this.node=b}append(a){this.node.data=a}reduce(a){return this._reduce(this.root,a)}async _reduce(a,b){let c=[];return a.children.length&&(c=await Promise.all(a.children.filter(a=>a.data).map(a=>this._reduce(a,b)))),b((a.data||[]).concat(c))}_findParent(a,b){let c=a.parent;return c&&0!==c.depth?c.children.length!==c.maxChildren&&c.maxChildren?c:this._findParent(c,b):void 0}}class g8 extends g7{constructor(a){super(0,a),this.root.depth=0,this.currentDepth=1}addChild(a){this.root.children.push(a)}reduce(a){return a((this.root.data||[]).concat(this.root.children))}}async function*g9(a,b,c){for await(let d of a.content)yield async()=>{c.progress(d.length,a.path);let e,f={codec:a_,cidVersion:c.cidVersion,hasher:c.hasher,onlyHash:c.onlyHash};return c.rawLeaves?(f.codec=g$,f.cidVersion=1):(e=new a$.fL({type:c.leafType,data:d}),d=a_.encode({Data:e.marshal(),Links:[]})),{cid:await gX(d,b,f),unixfs:e,size:d.length}}}var ha=g9;let hb={flat:g0,balanced:g4,trickle:g6};async function*hc(a,b,c){let d=-1,e,f;for await(let g of(f="function"==typeof c.bufferImporter?c.bufferImporter:ha,gO(f(a,b,c),c.blockWriteConcurrency))){if(0== ++d){e=g;continue}1===d&&e&&(yield e,e=null),yield g}e&&(e.single=!0,yield e)}let hd=(a,b,c)=>{async function d(d){if(1===d.length&&d[0].single&&c.reduceSingleLeafToSelf){let e=d[0];if(void 0!==a.mtime|| void 0!==a.mode){let f=await b.get(e.cid);e.unixfs=new a$.fL({type:"file",mtime:a.mtime,mode:a.mode,data:f}),f=(0,a_.encode)((0,a_.prepare)({Data:e.unixfs.marshal()})),e.cid=await gX(f,b,{...c,codec:a_,hasher:c.hasher,cidVersion:c.cidVersion}),e.size=f.length}return{cid:e.cid,path:a.path,unixfs:e.unixfs,size:e.size}}let g=new a$.fL({type:"file",mtime:a.mtime,mode:a.mode}),h=d.filter(a=>!!(a.cid.code===g$.code&&a.size||a.unixfs&&!a.unixfs.data&&a.unixfs.fileSize())||Boolean(a.unixfs&&a.unixfs.data&&a.unixfs.data.length)).map(a=>a.cid.code===g$.code?(g.addBlockSize(a.size),{Name:"",Tsize:a.size,Hash:a.cid}):(a.unixfs&&a.unixfs.data?g.addBlockSize(a.unixfs.data.length):g.addBlockSize(a.unixfs&&a.unixfs.fileSize()||0),{Name:"",Tsize:a.size,Hash:a.cid})),i={Data:g.marshal(),Links:h},j=(0,a_.encode)((0,a_.prepare)(i)),k=await gX(j,b,c);return{cid:k,path:a.path,unixfs:g,size:j.length+i.Links.reduce((a,b)=>a+b.Tsize,0)}}return d};var he=function(a,b,c){let d=hb[c.strategy];if(!d)throw aZ(Error(`Unknown importer build strategy name: ${c.strategy}`),"ERR_BAD_STRATEGY");return d(hc(a,b,c),hd(a,b,c),c)},hf=c(9668),hg=c(63060);async function*hh(a,b){let c,d,e;if(b.minChunkSize&&b.maxChunkSize&&b.avgChunkSize)e=b.avgChunkSize,c=b.minChunkSize,d=b.maxChunkSize;else if(b.avgChunkSize)c=(e=b.avgChunkSize)/3,d=e+e/2;else throw aZ(Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");if(c<16)throw aZ(Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");d<c&&(d=c),e<c&&(e=c);let f=Math.floor(Math.log2(e));for await(let g of hj(a,{min:c,max:d,bits:f,window:b.window,polynomial:b.polynomial}))yield g}var hi=hh;async function*hj(a,b){let c=await (0,hg.create)(b.bits,b.min,b.max,b.window),d=new hf;for await(let e of a){d.append(e);let f=c.fingerprint(e);for(let g=0;g<f.length;g++){let h=f[g],i=d.slice(0,h);d.consume(h),yield i}}d.length&&(yield d.slice(0))}async function*hk(a,b){let c=new hf,d=0,e=!1,f=b.maxChunkSize;for await(let g of a)for(c.append(g),d+=g.length;d>=f;)if(yield c.slice(0,f),e=!0,f===c.length)c=new hf,d=0;else{let h=new hf;h.append(c.shallowSlice(f)),c=h,d-=f}(!e||d)&&(yield c.slice(0,d))}var hl=hk;async function*hm(a){for await(let b of a){if(void 0===b.length)throw aZ(Error("Content was invalid"),"ERR_INVALID_CONTENT");if("string"==typeof b||b instanceof String)yield(0,a8.fromString)(b.toString());else if(Array.isArray(b))yield Uint8Array.from(b);else if(b instanceof Uint8Array)yield b;else throw aZ(Error("Content was invalid"),"ERR_INVALID_CONTENT")}}var hn=hm;function ho(a){try{var b,c;if(a instanceof Uint8Array)return async function*(){yield a}();if(b=a,Symbol.iterator in b)return async function*(){yield*a}();if(c=a,Symbol.asyncIterator in c)return a}catch{throw aZ(Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw aZ(Error("Content was invalid"),"ERR_INVALID_CONTENT")}async function*hp(a,b,c){for await(let d of a)if(d.path&&("./"===d.path.substring(0,2)&&(c.wrapWithDirectory=!0),d.path=d.path.split("/").filter(a=>a&&"."!==a).join("/")),d.content){let e;e="function"==typeof c.chunker?c.chunker:"rabin"===c.chunker?hi:hl;let f;f="function"==typeof c.chunkValidator?c.chunkValidator:hn;let g={path:d.path,mtime:d.mtime,mode:d.mode,content:e(f(ho(d.content),c),c)};yield()=>he(g,b,c)}else if(d.path){let h={path:d.path,mtime:d.mtime,mode:d.mode};yield()=>gZ(h,b,c)}else throw Error("Import candidate must have content or path or both")}var hq=hp,hr=class{constructor(a,b){this.options=b||{},this.root=a.root,this.dir=a.dir,this.path=a.path,this.dirty=a.dirty,this.flat=a.flat,this.parent=a.parent,this.parentKey=a.parentKey,this.unixfs=a.unixfs,this.mode=a.mode,this.mtime=a.mtime,this.cid=void 0,this.size=void 0}async put(a,b){}get(a){return Promise.resolve(this)}async *eachChildSeries(){}async *flush(a){}},hs=class extends hr{constructor(a,b){super(a,b),this._children={}}async put(a,b){this.cid=void 0,this.size=void 0,this._children[a]=b}get(a){return Promise.resolve(this._children[a])}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}async *eachChildSeries(){let a=Object.keys(this._children);for(let b=0;b<a.length;b++){let c=a[b];yield{key:c,child:this._children[c]}}}async *flush(a){let b=Object.keys(this._children),c=[];for(let d=0;d<b.length;d++){let e=this._children[b[d]];if(e instanceof hr)for await(let f of e.flush(a))yield e=f;null!=e.size&&e.cid&&c.push({Name:b[d],Tsize:e.size,Hash:e.cid})}let g=new a$.fL({type:"directory",mtime:this.mtime,mode:this.mode}),h={Data:g.marshal(),Links:c},i=(0,a_.encode)((0,a_.prepare)(h)),j=await gX(i,a,this.options),k=i.length+h.Links.reduce((a,b)=>a+(null==b.Tsize?0:b.Tsize),0);this.cid=j,this.size=k,yield{cid:j,unixfs:g,path:this.path,size:k}}},ht=c(54563),hu=class extends hr{constructor(a,b){super(a,b),this._bucket=(0,ht.createHAMT)({hashFn:b.hamtHashFn,bits:b.hamtBucketBits})}async put(a,b){await this._bucket.put(a,b)}get(a){return this._bucket.get(a)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async *eachChildSeries(){for await(let{key:a,value:b}of this._bucket.eachLeafSeries())yield{key:a,child:b}}async *flush(a){for await(let b of hv(this._bucket,a,this,this.options))yield{...b,path:this.path}}};async function*hv(a,b,c,d){let e=a._children,f=[],g=0;for(let h=0;h<e.length;h++){let i=e.get(h);if(!i)continue;let j=h.toString(16).toUpperCase().padStart(2,"0");if(i instanceof ht.Bucket){let k;for await(let l of(await hv(i,b,null,d)))k=l;if(!k)throw Error("Could not flush sharded directory, no subshard found");f.push({Name:j,Tsize:k.size,Hash:k.cid}),g+=k.size}else if("function"==typeof i.value.flush){let m=i.value,n;for await(let o of m.flush(b))yield n=o;let p=j+i.key;f.push({Name:p,Tsize:n.size,Hash:n.cid}),g+=n.size}else{let q=i.value;if(!q.cid)continue;let r=j+i.key,s=q.size;f.push({Name:r,Tsize:s,Hash:q.cid}),g+=s}}let t=Uint8Array.from(e.bitField().reverse()),u=new a$.fL({type:"hamt-sharded-directory",data:t,fanout:a.tableSize(),hashType:d.hamtHashCode,mtime:c&&c.mtime,mode:c&&c.mode}),v={Data:u.marshal(),Links:f},w=(0,a_.encode)((0,a_.prepare)(v)),x=await gX(w,b,d),y=w.length+g;yield{cid:x,unixfs:u,size:y}}async function hw(a,b,c,d){let e=b;b instanceof hs&&b.directChildrenCount()>=c&&(e=await hx(b,d));let f=e.parent;if(f){if(e!==b){if(a&&(a.parent=e),!e.parentKey)throw Error("No parent key found");await f.put(e.parentKey,e)}return hw(e,f,c,d)}return e}async function hx(a,b){let c=new hu({root:a.root,dir:!0,parent:a.parent,parentKey:a.parentKey,path:a.path,dirty:a.dirty,flat:!1,mtime:a.mtime,mode:a.mode},b);for await(let{key:d,child:e}of a.eachChildSeries())await c.put(d,e);return c}var hy=hw;let hz=(a="")=>(a.trim().match(/([^\\/]|\\\/)+/g)||[]).filter(Boolean);var hA=hz;async function hB(a,b,c){let d=hA(a.path||""),e=d.length-1,f=b,g="";for(let h=0;h<d.length;h++){let i=d[h];g+=`${g?"/":""}${i}`;let j=h===e;if(f.dirty=!0,f.cid=void 0,f.size=void 0,j)await f.put(i,a),b=await hy(null,f,c.shardSplitThreshold,c);else{let k=await f.get(i);k&&k instanceof hr||(k=new hs({root:!1,dir:!0,parent:f,parentKey:i,path:g,dirty:!0,flat:!0,mtime:k&&k.unixfs&&k.unixfs.mtime,mode:k&&k.unixfs&&k.unixfs.mode},c)),await f.put(i,k),f=k}}return b}async function*hC(a,b){if(!(a instanceof hr)){a&&a.unixfs&&a.unixfs.isDirectory()&&(yield a);return}yield*a.flush(b)}async function*hD(a,b,c){let d=new hs({root:!0,dir:!0,path:"",dirty:!0,flat:!0},c);for await(let e of a)e&&(d=await hB(e,d,c),e.unixfs&&e.unixfs.isDirectory()||(yield e));if(c.wrapWithDirectory)yield*hC(d,b);else for await(let f of d.eachChildSeries())f&&(yield*hC(f.child,b))}var hE=hD;async function*hF(a,b,c={}){let d=gV(c),e;e="function"==typeof c.dagBuilder?c.dagBuilder:hq;let f;f="function"==typeof c.treeBuilder?c.treeBuilder:hE;let g;for await(let h of f(gO(e(g=Symbol.asyncIterator in a||Symbol.iterator in a?a:[a],b,d),d.fileImportConcurrency),b,d))yield{cid:h.cid,path:h.path,unixfs:h.unixfs,size:h.size}}c(91337),c(98509),aX.Z.bind({ignoreUndefined:!0});let hG=async function(a){return(await gS.encode(a)).slice(0,8).reverse()},hH=(a,b,c)=>Promise.all(a.map(a=>{if(null==a.Name)throw Error("Unexpected Link without a Name");if(2===a.Name.length){let d=parseInt(a.Name,16);return b._putObjectAt(d,new ht.Bucket({hash:c._options.hash,bits:c._options.bits},b,d))}return c.put(a.Name.substring(2),!0)})),hI=a=>a.toString(16).toUpperCase().padStart(2,"0").substring(0,2),hJ=a=>{let b=a.bucket,c=[];for(;b._parent;)c.push(b),b=b._parent;return c.push(b),c.reverse()},hK=async(a,b,c,d,e)=>{if(!d){let f=(0,ht.createHAMT)({hashFn:hG});d={rootBucket:f,hamtDepth:1,lastBucket:f}}await hH(a.Links,d.lastBucket,d.rootBucket);let g=await d.rootBucket._findNewBucketAndPos(b),h=hI(g.pos),i=hJ(g);i.length>d.hamtDepth&&(d.lastBucket=i[d.hamtDepth],h=hI(d.lastBucket._posAtParent));let j=a.Links.find(a=>{if(null==a.Name)return!1;let c=a.Name.substring(0,2),d=a.Name.substring(2);return c===h&&(!d||d===b)});if(!j)return null;if(null!=j.Name&&j.Name.substring(2)===b)return j.Hash;d.hamtDepth++;let k=await c.get(j.Hash,e);return a=(0,a_.decode)(k),hK(a,b,c,d,e)};var hL=hK,hM=function(a,b,c,d){let e=a.length,f=b+e;return c>=f||d<b?new Uint8Array(0):(d>=b&&d<f&&(a=a.slice(0,d-b)),c>=b&&c<f&&(a=a.slice(c-b)),a)};let hN=(a,b,c)=>{if(b||(b=0),b<0)throw aZ(Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(b>a)throw aZ(Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(c||0===c||(c=a-b),c<0)throw aZ(Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return b+c>a&&(c=a-b),{offset:b,length:c}};var hO=hN;async function*hP(a,b,c,d,e=0,f){if(b instanceof Uint8Array){let g=hM(b,e,c,d);return g.length&&(yield g),e+=g.length}if(null==b.Data)throw aZ(Error("no data in PBNode"),"ERR_NOT_UNIXFS");let h;try{h=a$.fL.unmarshal(b.Data)}catch(i){throw aZ(i,"ERR_NOT_UNIXFS")}if(h.data&&h.data.length){let j=hM(h.data,e,c,d);j.length&&(yield j),e+=h.data.length}let k=e;for(let l=0;l<b.Links.length;l++){let m=b.Links[l],n=e+h.blockSizes[l];if(c>=k&&c<n||d>k&&d<=n||c<k&&d>n){let o=await a.get(m.Hash,{signal:f.signal}),p;switch(m.Hash.code){case a_.code:p=await a_.decode(o);break;case g$.code:p=o;break;case a0.code:p=await a0.decode(o);break;default:throw Error(`Unsupported codec: ${m.Hash.code}`)}for await(let q of hP(a,p,c,d,e,f))e+=q.length,yield q}e=n,k=n+1}}let hQ=(a,b,c,d,e,f,g)=>function(a={}){let d=c.fileSize();if(void 0===d)throw Error("File was a directory");let{offset:e,length:f}=hO(d,a.offset,a.length);return hP(g,b,e,e+f,0,a)};var hR=hQ;let hS=(a,b,c,d,e,f,g)=>{async function*h(a={}){let c=a.offset||0,h=a.length||b.Links.length,i=b.Links.slice(c,h);for(let j of i){let k=await e(j.Hash,j.Name||"",`${d}/${j.Name||""}`,[],f+1,g,a);k.entry&&(yield k.entry)}}return h};var hT=hS;let hU=(a,b,c,d,e,f,g)=>function(a={}){return hV(b,d,e,f,g,a)};async function*hV(a,b,c,d,e,f){let g=a.Links;for(let h of g){let i=null!=h.Name?h.Name.substring(2):null;if(i){let j=await c(h.Hash,i,`${b}/${i}`,[],d+1,e,f);yield j.entry}else{let k=await e.get(h.Hash);for await(let l of hV(a=(0,a_.decode)(k),b,c,d,e,f))yield l}}}var hW=hU;let hX=(a,b)=>{let c=a.Links.find(a=>a.Name===b);return c&&c.Hash},hY={raw:hR,file:hR,directory:hT,"hamt-sharded-directory":hW,metadata:(a,b,c,d,e,f,g)=>()=>[],symlink:(a,b,c,d,e,f,g)=>()=>[]},hZ=async(a,b,c,d,e,f,g,h)=>{let i=await g.get(a,h),j=(0,a_.decode)(i),k,l;if(b||(b=a.toString()),null==j.Data)throw aZ(Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{k=a$.fL.unmarshal(j.Data)}catch(m){throw aZ(m,"ERR_NOT_UNIXFS")}if(c||(c=b),d.length){let n;if(!(n=k&&"hamt-sharded-directory"===k.type?await hL(j,d[0],g):hX(j,d[0])))throw aZ(Error("file does not exist"),"ERR_NOT_FOUND");let o=d.shift(),p=`${c}/${o}`;l={cid:n,toResolve:d,name:o||"",path:p}}return{entry:{type:k.isDirectory()?"directory":"file",name:b,path:c,cid:a,content:hY[k.type](a,j,k,c,e,f,g),unixfs:k,depth:f,node:j,size:k.fileSize()},next:l}};var h$=hZ;let h_=a=>{async function*b(b={}){let{offset:c,length:d}=hO(a.length,b.offset,b.length);yield hM(a,0,c,c+d)}return b},h0=async(a,b,c,d,e,f,g,h)=>{if(d.length)throw aZ(Error(`No link named ${c} found in raw node ${a}`),"ERR_NOT_FOUND");let i=await g.get(a,h);return{entry:{type:"raw",name:b,path:c,cid:a,content:h_(i),depth:f,size:i.length,node:i}}};var h1=h0;let h2=async(a,b,c,d,e,f,g,h)=>{let i=await g.get(a),j=a0.decode(i),k=j,l=c;for(;d.length;){let m=d[0];if(m in k){d.shift(),l=`${l}/${m}`;let n=a9.CID.asCID(k[m]);if(n)return{entry:{type:"object",name:b,path:c,cid:a,node:i,depth:f,size:i.length,content:async function*(){yield j}},next:{cid:n,name:m,path:l,toResolve:d}};k=k[m]}else throw aZ(Error(`No property named ${m} found in cbor node ${a}`),"ERR_NO_PROP")}return{entry:{type:"object",name:b,path:c,cid:a,node:i,depth:f,size:i.length,content:async function*(){yield j}}}};var h3=h2;let h4=a=>{async function*b(b={}){let{offset:c,length:d}=hO(a.length,b.offset,b.length);yield hM(a,0,c,c+d)}return b},h5=async(a,b,c,d,e,f,g,h)=>{if(d.length)throw aZ(Error(`No link named ${c} found in raw node ${a}`),"ERR_NOT_FOUND");let i=await fR.decode(a.multihash.bytes);return{entry:{type:"identity",name:b,path:c,cid:a,content:h4(i.digest),depth:f,size:i.digest.length,node:i.digest}}};var h6=h5;let h7={[a_.code]:h$,[g$.code]:h1,[a0.code]:h3,[a1.identity.code]:h6};function h8(a,b,c,d,e,f,g){let h=h7[a.code];if(!h)throw aZ(Error(`No resolver for code ${a.code}`),"ERR_NO_RESOLVER");return h(a,b,c,d,h8,e,f,g)}var h9=h8;let ia=(a="")=>(a.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean),ib=a=>{if(a instanceof Uint8Array)return{cid:a9.CID.decode(a),toResolve:[]};let b=a9.CID.asCID(a);if(b)return{cid:b,toResolve:[]};if("string"==typeof a){0===a.indexOf("/ipfs/")&&(a=a.substring(6));let c=ia(a);return{cid:a9.CID.parse(c[0]),toResolve:c.slice(1)}}throw aZ(Error(`Unknown path type ${a}`),"ERR_BAD_PATH")};async function*ic(a,b,c={}){let{cid:d,toResolve:e}=ib(a),f=d.toString(),g=f,h=e.length;for(;;){let i=await h9(d,f,g,e,h,b,c);if(!i.entry&&!i.next)throw aZ(Error(`Could not resolve ${a}`),"ERR_NOT_FOUND");if(i.entry&&(yield i.entry),!i.next)return;e=i.next.toResolve,d=i.next.cid,f=i.next.name,g=i.next.path}}async function id(a,b,c={}){let d=await bG(ic(a,b,c));if(!d)throw aZ(Error(`Could not resolve ${a}`),"ERR_NOT_FOUND");return d}async function*ie(a,b,c={}){let d=await id(a,b,c);if(d&&(yield d,"directory"===d.type))for await(let e of f(d,c))yield e;async function*f(a,b){for await(let c of a.content(b))yield c,!(c instanceof Uint8Array)&&"directory"===c.type&&(yield*f(c,b))}}(0,a8.fromString)("ustar\0","binary"),(0,a8.fromString)("ustar ","binary"),(0,a8.fromString)(" \0","binary");let ig=function(a,b,c){return"number"!=typeof a?c:(a=~~a)>=b?b:a>=0||(a+=b)>=0?a:0},ih=function(a,b,c,d){for(;c<d;c++)if(a.get(c)===b)return c;return d};var ii=c(71993);c(33053);let ij="0000000000000000000",ik="7777777777777777777",{S_IFMT:il,S_IFBLK:im,S_IFCHR:io,S_IFDIR:ip,S_IFIFO:iq,S_IFLNK:ir}=((0,a8.fromString)("ustar\0","binary"),(0,a8.fromString)("00","binary"),parseInt("7777",8),ii),is=(parseInt("755",8),parseInt("644",8),new Uint8Array(1024));function it(a){var b;let c=Headers.encodePax(a),d={name:"PaxHeader",mode:a.mode,uid:a.uid,gid:a.gid,size:c.length,mtime:a.mtime,type:"pax-header",linkname:a.linkname,uname:a.uname,gname:a.gname,devmajor:a.devmajor,devminor:a.devminor};return new Uint8ArrayList(Headers.encode(d)??new Uint8Array(0),c,(b=c.length,0!=(b&=511)?is.slice(0,512-b):new Uint8Array(0)),Headers.encode({...d,size:a.size,type:a.type})??new Uint8Array(0)).slice()}c(27885);let iu=(0,aY.kg)("ipfs:components:id");async function iv(a,b,c){if(null==b.dht)throw errCode(Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");for await(let d of b.dht.findPeer(a,c))if("FINAL_PEER"===d.name)break;let e=await b.peerStore.get(a);if(!e)throw errCode(Error("Could not find peer"),"ERR_NOT_FOUND");return e}function iw(a){if("__proto__"==a||"constructor"==a||"prototype"==a)throw Error("setting of prototype values not supported")}(0,aY.kg)("ipfs:core:config");let ix=({enumerable:a=!0,configurable:b=!1}={})=>({enumerable:a,configurable:b,writable:!1}),iy=function*(a,b){if(null!=a&&!(a instanceof Uint8Array))for(let[c,d]of Object.entries(a)){let e=[...b,c];if(null!=d&&"object"==typeof d){if(Array.isArray(d))for(let[f,g]of d.entries()){let h=[...e,f],i=CID.asCID(g);i?yield[h.join("/"),i]:"object"==typeof g&&(yield*iy(g,h))}else{let j=CID.asCID(d);j?yield[e.join("/"),j]:yield*iy(d,e)}}}},iz=function*(a,b){if(null!=a)for(let[c,d]of Object.entries(a)){let e=[...b,c];if(yield e.join("/"),null!=d&&!(d instanceof Uint8Array)&&"object"==typeof d&&!CID.asCID(d)){if(Array.isArray(d))for(let[f,g]of d.entries()){let h=[...e,f];yield h.join("/"),"object"!=typeof g||CID.asCID(g)||(yield*iz(g,h))}else yield*iz(d,e)}}},iA=(a,b)=>{let c=a;for(let[d,e]of b.entries()){if(null==(c=c[e]))throw Error(`Object has no property at ${b.slice(0,d+1).map(a=>`[${JSON.stringify(a)}]`).join("")}`);let f=CID.asCID(c);if(f)return{value:f,remaining:b.slice(d+1).join("/")}}return{value:c}};class iB{constructor({cid:a,bytes:b,value:c}){if(!a||!b|| void 0===c)throw Error("Missing required argument");this.cid=a,this.bytes=b,this.value=c,this.asBlock=this,Object.defineProperties(this,{cid:ix(),bytes:ix(),value:ix(),asBlock:ix()})}links(){return iy(this.value,[])}tree(){return iz(this.value,[])}get(a="/"){return iA(this.value,a.split("/").filter(Boolean))}}var iC=c(94676);let iD={Null:a=>null===a,Int:a=>Number.isInteger(a),Float:a=>"number"==typeof a&&Number.isFinite(a),String:a=>"string"==typeof a,Bool:a=>"boolean"==typeof a,Bytes:a=>a instanceof Uint8Array,Link:a=>!iD.Null(a)&&"object"==typeof a&&a.asCID===a,List:a=>Array.isArray(a),Map:a=>!iD.Null(a)&&"object"==typeof a&&a.asCID!==a&&!iD.List(a)&&!iD.Bytes(a)},iE={Int:iD.Int,"CarHeader > version":a=>iE.Int(a),"CarHeader > roots (anon) > valueType (anon)":iD.Link,"CarHeader > roots (anon)":a=>iD.List(a)&&Array.prototype.every.call(a,iE["CarHeader > roots (anon) > valueType (anon)"]),"CarHeader > roots":a=>iE["CarHeader > roots (anon)"](a),CarHeader:a=>{let b=a&&Object.keys(a);return iD.Map(a)&&["version"].every(a=>b.includes(a))&&Object.entries(a).every(([a,b])=>iE["CarHeader > "+a]&&iE["CarHeader > "+a](b))}};iE.CarHeader;let iF={SHA2_256:18,LENGTH:32,DAG_PB:112},iG=null;async function iH(a){let b=await a.upTo(8);if(!b.length)throw Error("Unexpected end of data");let c=varint.decode(b);return a.seek(varint.decode.bytes),c}async function iI(a){let b=await a.exactly(iG),c=new DataView(b.buffer,b.byteOffset,b.byteLength),d=0,e={version:2,characteristics:[c.getBigUint64(d,!0),c.getBigUint64(d+=8,!0)],dataOffset:Number(c.getBigUint64(d+=8,!0)),dataSize:Number(c.getBigUint64(d+=8,!0)),indexOffset:Number(c.getBigUint64(d+=8,!0))};return a.seek(iG),e}async function iJ(a,b){let c=await iH(a);if(0===c)throw Error("Invalid CAR header (zero length)");let d=await a.exactly(c);a.seek(c);let e=decodeDagCbor(d);if(!headerValidator(e))throw Error("Invalid CAR header format");if(1!==e.version&&2!==e.version|| void 0!==b&&e.version!==b)throw Error(`Invalid CAR version: ${e.version}${void 0!==b?` (expected ${b})`:""}`);let f=Array.isArray(e.roots);if(1===e.version&&!f||2===e.version&&f)throw Error("Invalid CAR header format");if(1===e.version)return e;let g=await iI(a);a.seek(g.dataOffset-a.pos);let h=await iJ(a,1);return Object.assign(h,g)}async function iK(a){let b=await a.upTo(8);varint.decode(b);let c=varint.decode.bytes,d=varint.decode(b.subarray(varint.decode.bytes)),e=varint.decode.bytes,f=c+e+d,g=await a.exactly(f);return a.seek(f),g}async function iL(a){let b=await a.exactly(2);if(b[0]===iF.SHA2_256&&b[1]===iF.LENGTH){let c=await a.exactly(34);a.seek(34);let d=Digest.decode(c);return CID.create(0,iF.DAG_PB,d)}let e=await iH(a);if(1!==e)throw Error(`Unexpected CID version (${e})`);let f=await iH(a),g=await iK(a),h=Digest.decode(g);return CID.create(e,f,h)}async function iM(a){let b=a.pos,c=await iH(a);if(0===c)throw Error("Invalid CAR section (zero length)");c+=a.pos-b;let d=await iL(a),e=c-Number(a.pos-b);return{cid:d,length:c,blockLength:e}}class iN{constructor(a,b){this._encoder=b,this._mutex=b.setRoots(a),this._ended=!1}async put(a){if(!(a.bytes instanceof Uint8Array)||!a.cid)throw TypeError("Can only write {cid, bytes} objects");if(this._ended)throw Error("Already closed");let b=CID.asCID(a.cid);if(!b)throw TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then(()=>this._encoder.writeBlock({cid:b,bytes:a.bytes})),this._mutex}async close(){if(this._ended)throw Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(a){a=iQ(a);let{encoder:b,iterator:c}=iP(),d=new iN(a,b),e=new iO(c);return{writer:d,out:e}}static createAppender(){let{encoder:a,iterator:b}=iP();a.setRoots=()=>Promise.resolve();let c=new iN([],a),d=new iO(b);return{writer:c,out:d}}static async updateRootsInBytes(a,b){let c=bytesReader(a);await readHeader(c);let d=createHeader(b);if(Number(c.pos)!==d.length)throw Error(`updateRoots() can only overwrite a header of the same length (old header is ${c.pos} bytes, new header is ${d.length} bytes)`);return a.set(d,0),a}}class iO{constructor(a){this._iterator=a}[Symbol.asyncIterator](){if(this._iterating)throw Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}}function iP(){let a=iteratorChannel(),{writer:b,iterator:c}=a,d=createEncoder(b);return{encoder:d,iterator:c}}function iQ(a){if(void 0===a)return[];if(!Array.isArray(a)){let b=CID.asCID(a);if(!b)throw TypeError("roots must be a single CID or an array of CIDs");return[b]}let c=[];for(let d of a){let e=CID.asCID(d);if(!e)throw TypeError("roots must be a single CID or an array of CIDs");c.push(e)}return c}var iR=c(40950);let iS=async({cid:a,load:b,seen:c})=>{c=c||new Set;let d=a.toString(base58btc);if(c.has(d))return;let e=await b(a);if(c.add(d),null!==e)for(let[,f]of e.links())await iS({cid:f,load:b,seen:c})},iT=(0,aY.kg)("ipfs:components:dag:import"),iU=[g$.code,iR.code];c(72262);class iV extends null{[Symbol.asyncIterator](){if(this._decoded)throw Error("Cannot decode more than once");if(!this._iterable)throw Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(a){let{version:b,roots:c,iterator:d}=await iX(a);return new iV(b,c,d)}static async fromIterable(a){let{version:b,roots:c,iterator:d}=await iY(a);return new iV(b,c,d)}}class iW extends null{[Symbol.asyncIterator](){if(this._decoded)throw Error("Cannot decode more than once");if(!this._iterable)throw Error("Block iterable not found");this._decoded=!0;let a=this._iterable[Symbol.asyncIterator]();return{async next(){let b=await a.next();return b.done?b:{done:!1,value:b.value.cid}}}}static async fromBytes(a){let{version:b,roots:c,iterator:d}=await iX(a);return new iW(b,c,d)}static async fromIterable(a){let{version:b,roots:c,iterator:d}=await iY(a);return new iW(b,c,d)}}async function iX(a){if(!(a instanceof Uint8Array))throw TypeError("fromBytes() requires a Uint8Array");return iZ(bytesReader(a))}async function iY(a){if(!a||"function"!=typeof a[Symbol.asyncIterator])throw TypeError("fromIterable() requires an async iterable");return iZ(asyncIterableReader(a))}async function iZ(a){let b=createDecoder(a),{version:c,roots:d}=await b.header();return{version:c,roots:d,iterator:b.blocks()}}c(28132);let i$=(0,aY.kg)("ipfs:components:dag:import");c(45182),(0,aY.kg)("ipfs:preload");let i_=bD.default?bD.default:bD;new i_({concurrency:4}),(0,aY.kg)("ipfs:preload"),(0,aY.kg)("ipfs:mfs-preload");class i0 extends Error{constructor(a){super(a),this.name="TimeoutError"}}class i1 extends Error{constructor(a){super(),this.name="AbortError",this.message=a}}let i2=a=>void 0===globalThis.DOMException?new i1(a):new DOMException(a),i3=a=>{let b=void 0===a.reason?i2("This operation was aborted."):a.reason;return b instanceof Error?b:i2(b)},i4=(a=21)=>crypto.getRandomValues(new Uint8Array(a)).reduce((a,b)=>((b&=63)<36?a+=b.toString(36):b<62?a+=(b-26).toString(36).toUpperCase():b>62?a+="-":a+="_",a),""),i5="lock:worker:request-read",i6="lock:worker:release-read",i7="lock:master:grant-read",i8="lock:worker:request-write",i9="lock:worker:release-write",ja="lock:master:grant-write",jb={},jc=a=>{a.addEventListener("message",b=>{jc.dispatchEvent("message",a,b)}),null!=a.port&&a.port.addEventListener("message",b=>{jc.dispatchEvent("message",a,b)})};jc.addEventListener=(a,b)=>{null==jb[a]&&(jb[a]=[]),jb[a].push(b)},jc.removeEventListener=(a,b)=>{null!=jb[a]&&(jb[a]=jb[a].filter(a=>a===b))},jc.dispatchEvent=function(a,b,c){null!=jb[a]&&jb[a].forEach(a=>a(b,c))};var jd=jc;let je=(a,b,c,d,e)=>(f,g)=>{if(g.data.type!==c)return;let h={type:g.data.type,name:g.data.name,identifier:g.data.identifier};a.dispatchEvent(new MessageEvent(b,{data:{name:h.name,handler:async()=>(f.postMessage({type:e,name:h.name,identifier:h.identifier}),await new Promise(a=>{let b=c=>{if(null==c||null==c.data)return;let e={type:c.data.type,name:c.data.name,identifier:c.data.identifier};e.type===d&&e.identifier===h.identifier&&(f.removeEventListener("message",b),a())};f.addEventListener("message",b)}))}}))},jf=(a,b,c,d)=>async()=>{let e=i4();return globalThis.postMessage({type:b,identifier:e,name:a}),await new Promise(b=>{let f=g=>{if(null==g||null==g.data)return;let h={type:g.data.type,identifier:g.data.identifier};h.type===c&&h.identifier===e&&(globalThis.removeEventListener("message",f),b(()=>{globalThis.postMessage({type:d,identifier:e,name:a})}))};globalThis.addEventListener("message",f)})},jg={singleProcess:!1};var jh=a=>{a=Object.assign({},jg,a);let b=Boolean(globalThis.document)||a.singleProcess;if(b){let c=new EventTarget;return jd.addEventListener("message",je(c,"requestReadLock",i5,i6,i7)),jd.addEventListener("message",je(c,"requestWriteLock",i8,i9,ja)),c}return{isWorker:!0,readLock:a=>jf(a,i5,i7,i6),writeLock:a=>jf(a,i8,ja,i9)}};let ji={},jj;async function jk(a,b){let c,d=new Promise(a=>{c=a});return a.add(async()=>await function(a,b){let{milliseconds:c,fallback:d,message:e,customTimers:f={setTimeout,clearTimeout}}=b,g,h=new Promise((h,i)=>{if("number"!=typeof c||1!==Math.sign(c))throw TypeError(`Expected \`milliseconds\` to be a positive number, got \`${c}\``);if(c===Number.POSITIVE_INFINITY){h(a);return}if(b.signal){let{signal:j}=b;j.aborted&&i(i3(j)),j.addEventListener("abort",()=>{i(i3(j))})}g=f.setTimeout.call(void 0,()=>{if(d){try{h(d())}catch(b){i(b)}return}let f="string"==typeof e?e:`Promise timed out after ${c} milliseconds`,g=e instanceof Error?e:new i0(f);"function"==typeof a.cancel&&a.cancel(),i(g)},c),(async()=>{try{h(await a)}catch(b){i(b)}finally{f.clearTimeout.call(void 0,g)}})()});return h.clear=()=>{f.clearTimeout.call(void 0,g),g=void 0},h}((async()=>await new Promise(a=>{c(()=>{a()})}))(),{milliseconds:b.timeout})),await d}let jl=(a,b)=>{if(!0===jj.isWorker)return{readLock:jj.readLock(a,b),writeLock:jj.writeLock(a,b)};let c=new bD({concurrency:1}),d;return{async readLock(){if(null!=d)return await jk(d,b);d=new bD({concurrency:b.concurrency,autoStart:!1});let a=d,e=jk(d,b);return c.add(async()=>(a.start(),await a.onIdle().then(()=>{d===a&&(d=null)}))),await e},async writeLock(){return d=null,await jk(c,b)}}},jm={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1},jn;function jo(a=!1){if(jn)return jn;let b=function(a){let b=Object.assign({},jm,a);return null==jj&& !0!==(jj=jh(b)).isWorker&&(jj.addEventListener("requestReadLock",a=>{null!=ji[a.data.name]&&ji[a.data.name].readLock().then(async b=>await a.data.handler().finally(()=>b()))}),jj.addEventListener("requestWriteLock",async a=>{null!=ji[a.data.name]&&ji[a.data.name].writeLock().then(async b=>await a.data.handler().finally(()=>b()))})),null==ji[b.name]&&(ji[b.name]=jl(b.name,b)),ji[b.name]}({singleProcess:a});return jn={readLock:a=>async(...c)=>{let d=await b.readLock();try{return await a.apply(null,c)}finally{d()}},writeLock:a=>async(...c)=>{let d=await b.writeLock();try{return await a.apply(null,c)}finally{d()}}}}let jp=(0,aY.kg)("ipfs:mfs:utils:with-mfs-root");async function jq(a,b){if(b&&b.signal&&b.signal.aborted)throw aZ(Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});await a.repo.datastore.open();let c;try{let d=await a.repo.datastore.get(bn);c=a9.CID.decode(d)}catch(e){if("ERR_NOT_FOUND"!==e.code)throw e;jp("Creating new MFS root");let f=a_.encode({Data:new a$.fL({type:"directory"}).marshal(),Links:[]}),g=await dc.sha256.digest(f);if(await a.repo.blocks.put(c=a9.CID.createV0(g),f),b&&b.signal&&b.signal.aborted)throw aZ(Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});await a.repo.datastore.put(bn,c.bytes)}return jp(`Loaded MFS root /ipfs/${c}`),c}function jr(a=""){return(a.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)}let js="ipfs",jt=async(a,b,c)=>{let d=await jq(a,c),e={entryType:"file"},f="";if((f=(f=(f=a9.CID.asCID(b)?`/ipfs/${b}`:b.toString()).trim()).replace(/(\/\/+)/g,"/")).endsWith("/")&&f.length>1&&(f=f.substring(0,f.length-1)),!f)throw aZ(Error("paths must not be empty"),"ERR_NO_PATH");if("/"!==f.substring(0,1))throw aZ(Error("paths must start with a leading slash"),"ERR_INVALID_PATH");"/"===f.substring(f.length-1)&&(f=f.substring(0,f.length-1));let g=jr(f);if(g[0]===js){let h;h=2===g.length?`/${g.join("/")}`:`/${g.slice(0,g.length-1).join("/")}`,e={type:"ipfs",depth:g.length-2,entryType:"file",mfsPath:`/${g.join("/")}`,mfsDirectory:h,parts:g,path:`/${g.join("/")}`,name:g[g.length-1]}}else{let i=`/${js}/${d}${g.length?"/"+g.join("/"):""}`,j=`/${js}/${d}/${g.slice(0,g.length-1).join("/")}`;e={type:"mfs",depth:g.length,entryType:"file",mfsDirectory:j,mfsPath:i,parts:g,path:`/${g.join("/")}`,name:g[g.length-1]}}let k="mfs"===e.type?e.mfsPath:e.path;try{let l=await id(k,a.repo.blocks,c);e.cid=l.cid,e.mfsPath=`/ipfs/${l.path}`,e.entryType=l.type,e.content=l.content,("file"===e.entryType||"directory"===e.entryType)&&("file"===l.type||"directory"===l.type)&&(e.unixfs=l.unixfs)}catch(m){if("ERR_NOT_FOUND"!==m.code)throw m}return e.exists=Boolean(e.cid),e},ju=aX.Z.bind({ignoreUndefined:!0}),jv=(0,aY.kg)("ipfs:mfs:stat"),jw={withLocal:!1};function jx(a){async function b(b,c={}){c=ju(jw,c),jv(`Fetching stats for ${b}`);let{type:d,cid:e,mfsPath:f}=await jt(a,b,c),g;try{g=await id("ipfs"===d&&e?e:f,a.repo.blocks)}catch(h){if("ERR_NOT_FOUND"===h.code)throw aZ(Error(`${b} does not exist`),"ERR_NOT_FOUND");throw h}if(!jy[g.type])throw Error(`Cannot stat codec ${g.cid.code}`);return jy[g.type](g)}return bm(b)}let jy={raw:a=>({cid:a.cid,size:a.node.length,cumulativeSize:a.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1}),file:a=>{let b={cid:a.cid,type:"file",size:a.unixfs.fileSize(),cumulativeSize:a_.encode(a.node).length+(a.node.Links||[]).reduce((a,b)=>a+(b.Tsize||0),0),blocks:a.unixfs.blockSizes.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:a.unixfs.mode};return a.unixfs.mtime&&(b.mtime=a.unixfs.mtime),b},directory:a=>{let b={cid:a.cid,type:"directory",size:0,cumulativeSize:a_.encode(a.node).length+(a.node.Links||[]).reduce((a,b)=>a+(b.Tsize||0),0),blocks:a.node.Links.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:a.unixfs.mode};return a.unixfs.mtime&&(b.mtime=a.unixfs.mtime),b},object:a=>({cid:a.cid,size:a.node.length,cumulativeSize:a.node.length,type:"file",blocks:0,local:void 0,sizeLocal:void 0,withLocality:!1}),identity:a=>({cid:a.cid,size:a.node.length,cumulativeSize:a.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1})},jz=(0,aY.kg)("ipfs:mfs:utils:to-trail");async function jA(a,b){jz(`Creating trail for path ${b}`);let c=[];for await(let d of ic(b,a.repo.blocks))c.push({name:d.name,cid:d.cid,size:d.size,type:d.type});return c}let jB=async(a,b,c)=>{c.codec||(c.codec=a_),c.hasher||(c.hasher=dc.sha256),void 0===c.cidVersion&&(c.cidVersion=1),c.codec===a_&&c.hasher!==dc.sha256&&(c.cidVersion=1);let d=await c.hasher.digest(a),e=a9.CID.create(c.cidVersion,c.codec.code,d);return c.onlyHash||await b.put(e,a,{signal:c.signal}),e},jC=gS.code,jD=8;async function jE(a){return(await gS.encode(a)).slice(0,8).reverse()}class jF{constructor(a,b){this.options=b||{},this.root=a.root,this.dir=a.dir,this.path=a.path,this.dirty=a.dirty,this.flat=a.flat,this.parent=a.parent,this.parentKey=a.parentKey,this.unixfs=a.unixfs,this.mode=a.mode,this.mtime=a.mtime,this.cid=void 0,this.size=void 0}async put(a,b){}get(a){return Promise.resolve(this)}async *eachChildSeries(){}async *flush(a){}}class jG extends jF{constructor(a,b){super(a,b),this._bucket=(0,ht.createHAMT)({hashFn:jE,bits:jD})}async put(a,b){await this._bucket.put(a,b)}get(a){return this._bucket.get(a)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async *eachChildSeries(){for await(let{key:a,value:b}of this._bucket.eachLeafSeries())yield{key:a,child:b}}async *flush(a){yield*jH(this._bucket,a,this,this.options)}}async function*jH(a,b,c,d){let e=a._children,f=[],g=0;for(let h=0;h<e.length;h++){let i=e.get(h);if(!i)continue;let j=h.toString(16).toUpperCase().padStart(2,"0");if(i instanceof ht.Bucket){let k;for await(let l of(await jH(i,b,null,d)))k=l;if(!k)throw Error("Could not flush sharded directory, no subshard found");f.push({Name:j,Tsize:k.size,Hash:k.cid}),g+=k.size}else if("function"==typeof i.value.flush){let m=i.value,n;for await(let o of m.flush(b))yield n=o;let p=j+i.key;f.push({Name:p,Tsize:n.size,Hash:n.cid}),g+=n.size}else{let q=i.value;if(!q.cid)continue;let r=j+i.key,s=q.size;f.push({Name:r,Tsize:s,Hash:q.cid}),g+=s}}let t=Uint8Array.from(e.bitField().reverse()),u=new a$.fL({type:"hamt-sharded-directory",data:t,fanout:a.tableSize(),hashType:jC,mtime:c&&c.mtime,mode:c&&c.mode}),v={Data:u.marshal(),Links:f},w=(0,a_.encode)((0,a_.prepare)(v)),x=await jB(w,b,d),y=w.length+g;yield{cid:x,node:v,size:y}}let jI=(0,aY.kg)("ipfs:mfs:core:utils:hamt-utils"),jJ=async(a,b,c,d)=>{if(!d.parent.Data)throw Error("Could not update HAMT directory because parent had no data");let e=Uint8Array.from(c._children.bitField().reverse()),f=a$.fL.unmarshal(d.parent.Data),g=new a$.fL({type:"hamt-sharded-directory",data:e,fanout:c.tableSize(),hashType:jC,mode:f.mode,mtime:f.mtime}),h=await a.hashers.getHasher(d.hashAlg),i={Data:g.marshal(),Links:b.sort((a,b)=>(a.Name||"").localeCompare(b.Name||""))},j=a_.encode(i),k=await h.digest(j),l=a9.CID.create(d.cidVersion,a_.code,k);return d.flush&&await a.repo.blocks.put(l,j),{node:i,cid:l,size:b.reduce((a,b)=>a+(b.Tsize||0),j.length)}},jK=async(a,b,c,d,e)=>{let f=new ht.Bucket({hash:c._options.hash,bits:c._options.bits},d,e);return d._putObjectAt(e,f),await jM(a,b,f,c),f},jL=async a=>{let b=(0,ht.createHAMT)({hashFn:jE,bits:jD});return await Promise.all(a.map(async a=>{let c=a.Name||"";if(2===c.length){let d=parseInt(c,16),e=new ht.Bucket({hash:b._options.hash,bits:b._options.bits},b,d);return b._putObjectAt(d,e),Promise.resolve()}return b.put(c.substring(2),{size:a.Tsize,cid:a.Hash})})),b},jM=async(a,b,c,d)=>{await Promise.all(b.map(async b=>{let e=b.Name||"";if(2===e.length){jI("Populating sub bucket",e);let f=parseInt(e,16),g=await a.repo.blocks.get(b.Hash),h=a_.decode(g),i=new ht.Bucket({hash:d._options.hash,bits:d._options.bits},c,f);return c._putObjectAt(f,i),await jM(a,h.Links,i,d),Promise.resolve()}return d.put(e.substring(2),{size:b.Tsize,cid:b.Hash})}))},jN=a=>a.toString(16).toUpperCase().padStart(2,"0").substring(0,2),jO=async(a,b,c)=>{let d=await jL(c.Links),e=await d._findNewBucketAndPos(b),f=[{bucket:e.bucket,prefix:jN(e.pos)}],g=e.bucket;for(;g!==d;)f.push({bucket:g,prefix:jN(g._posAtParent)}),g=g._parent;f.reverse(),f[0].node=c;for(let h=0;h<f.length;h++){let i=f[h];if(!i.node)throw Error("Could not generate HAMT path");let j=i.node.Links.filter(a=>(a.Name||"").substring(0,2)===i.prefix).pop();if(!j){jI(`Link ${i.prefix}${b} will be added`);continue}if(j.Name===`${i.prefix}${b}`){jI(`Link ${i.prefix}${b} will be replaced`);continue}jI(`Found subshard ${i.prefix}`);let k=await a.repo.blocks.get(j.Hash),l=a_.decode(k);if(!f[h+1]){jI(`Loaded new subshard ${i.prefix}`),await jK(a,l.Links,d,i.bucket,parseInt(i.prefix,16));let m=await d._findNewBucketAndPos(b);f.push({bucket:m.bucket,prefix:jN(m.pos),node:l});continue}let n=f[h+1];await jM(a,l.Links,n.bucket,d),n.node=l}return await d.put(b,!0),f.reverse(),{rootBucket:d,path:f}},jP=async(a,b,c={})=>{let d=new jG({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mtime:c.mtime,mode:c.mode},c);for(let e=0;e<b.length;e++)await d._bucket.put(b[e].name,{size:b[e].size,cid:b[e].cid});let f=await bG(d.flush(a.repo.blocks));if(!f)throw Error("Flushing shard yielded no result");return f},jQ=(0,aY.kg)("ipfs:mfs:core:utils:add-link");async function jR(a,b){let c=b.parent;if(b.parentCid){let d=a9.CID.asCID(b.parentCid);if(null===d)throw aZ(Error("Invalid CID passed to addLink"),"EINVALIDPARENTCID");if(d.code!==a_.code)throw aZ(Error("Unsupported codec. Only DAG-PB is supported"),"EINVALIDPARENTCID");jQ(`Loading parent node ${d}`);let e=await a.repo.blocks.get(d);c=a_.decode(e)}if(!c)throw aZ(Error("No parent node or CID passed to addLink"),"EINVALIDPARENT");if(!b.cid)throw aZ(Error("No child cid passed to addLink"),"EINVALIDCHILDCID");if(!b.name)throw aZ(Error("No child name passed to addLink"),"EINVALIDCHILDNAME");if(!b.size&&0!==b.size)throw aZ(Error("No child size passed to addLink"),"EINVALIDCHILDSIZE");if(!c.Data)throw aZ(Error("Parent node with no data passed to addLink"),"ERR_INVALID_PARENT");let f=a$.fL.unmarshal(c.Data);return"hamt-sharded-directory"===f.type?(jQ("Adding link to sharded directory"),jU(a,{...b,parent:c})):c.Links.length>=b.shardSplitThreshold?(jQ("Converting directory to sharded directory"),jS(a,{...b,parent:c,mtime:f.mtime,mode:f.mode})):(jQ(`Adding ${b.name} (${b.cid}) to regular directory`),jT(a,{...b,parent:c}))}let jS=async(a,b)=>{let c=await jP(a,b.parent.Links.map(a=>({name:a.Name||"",size:a.Tsize||0,cid:a.Hash})).concat({name:b.name,size:b.size,cid:b.cid}),b);return jQ(`Converted directory to sharded directory ${c.cid}`),c},jT=async(a,b)=>{let c=b.parent.Links.filter(a=>a.Name!==b.name);if(c.push({Name:b.name,Tsize:b.size,Hash:b.cid}),!b.parent.Data)throw aZ(Error("Parent node with no data passed to addToDirectory"),"ERR_INVALID_PARENT");let d=a$.fL.unmarshal(b.parent.Data),e;if(d.mtime){let f=Date.now(),g=Math.floor(f/1e3);d.mtime={secs:g,nsecs:(f-1e3*g)*1e3},e=d.marshal()}else e=b.parent.Data;b.parent=a_.prepare({Data:e,Links:c});let h=await a.hashers.getHasher(b.hashAlg),i=a_.encode(b.parent),j=await h.digest(i),k=a9.CID.create(b.cidVersion,a_.code,j);return b.flush&&await a.repo.blocks.put(k,i),{node:b.parent,cid:k,size:i.length}},jU=async(a,b)=>{let{shard:c,path:d}=await jV(a,b),e=await bG(c.flush(a.repo.blocks));if(!e)throw Error("No result from flushing shard");let f=await a.repo.blocks.get(e.cid),g=a_.decode(f),h=b.parent.Links.filter(a=>(a.Name||"").substring(0,2)!==d[0].prefix),i=g.Links.find(a=>(a.Name||"").substring(0,2)===d[0].prefix);if(!i)throw Error(`No link found with prefix ${d[0].prefix}`);return h.push(i),jJ(a,h,d[0].bucket,b)},jV=async(a,b)=>{let c={name:b.name,cid:b.cid,size:b.size};if(!b.parent.Data)throw aZ(Error("Parent node with no data passed to addFileToShardedDirectory"),"ERR_INVALID_PARENT");let d=await jL(b.parent.Links),e=a$.fL.unmarshal(b.parent.Data),f=new jG({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mode:e.mode},b);f._bucket=d,e.mtime&&(f.mtime={secs:Math.round(Date.now()/1e3)});let g=await d._findNewBucketAndPos(c.name),h=jW(g);h[0].node=b.parent;let i=0;for(;i<h.length;){let j=h[i];i++;let k=j.node;if(!k)throw Error("Segment had no node");let l=k.Links.find(a=>(a.Name||"").substring(0,2)===j.prefix);if(!l){jQ(`Link ${j.prefix}${c.name} will be added`),i=h.length;break}if(l.Name===`${j.prefix}${c.name}`){jQ(`Link ${j.prefix}${c.name} will be replaced`),i=h.length;break}if((l.Name||"").length>2){jQ(`Link ${l.Name} ${l.Hash} will be replaced with a subshard`),i=h.length;break}jQ(`Found subshard ${j.prefix}`);let m=await a.repo.blocks.get(l.Hash),n=a_.decode(m);if(!h[i]){jQ(`Loaded new subshard ${j.prefix}`),await jK(a,n.Links,d,j.bucket,parseInt(j.prefix,16));let o=await d._findNewBucketAndPos(c.name);h.push({bucket:o.bucket,prefix:jN(o.pos),node:n});break}let p=h[i];await jM(a,n.Links,p.bucket,d),p.node=n}return await f._bucket.put(c.name,{size:c.size,cid:c.cid}),{shard:f,path:h}},jW=a=>{let b=[{bucket:a.bucket,prefix:jN(a.pos)}],c=a.bucket._parent,d=a.bucket._posAtParent;for(;c;)b.push({bucket:c,prefix:jN(d)}),d=c._posAtParent,c=c._parent;return b.reverse(),b},jX=(0,aY.kg)("ipfs:mfs:utils:update-tree"),jY={shardSplitThreshold:1e3};async function jZ(a,b,c){c=Object.assign({},jY,c),jX("Trail",b),b=b.slice().reverse();let d=0,e;for await(let f of a.repo.blocks.getMany(b.map(a=>a.cid))){let g=(0,a_.decode)(f),h=b[d].cid,i=b[d].name;if(d++,!e){e={cid:h,name:i,size:f.length};continue}let j=await jR(a,{parent:g,name:e.name,cid:e.cid,size:e.size,flush:c.flush,shardSplitThreshold:c.shardSplitThreshold,hashAlg:c.hashAlg,cidVersion:c.cidVersion});e={cid:j.cid,name:i,size:j.size}}let{cid:k}=e;return jX(`Final CID ${k}`),k}let j$=(0,aY.kg)("ipfs:mfs:utils:update-mfs-root");async function j_(a,b,c){if(c&&c.signal&&c.signal.aborted)throw aZ(Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});return j$(`New MFS root will be ${b}`),await a.repo.datastore.put(bn,b.bytes),b}async function j0(a,b,c){let d=new a$.fL({type:b,mode:c.mode,mtime:c.mtime}),e=await a.hashers.getHasher(c.hashAlg),f={Data:d.marshal(),Links:[]},g=a_.encode(f),h=await e.digest(g),i=a9.CID.create(c.cidVersion,a_.code,h);return c.flush&&await a.repo.blocks.put(i,g),{cid:i,node:f}}let j1=aX.Z.bind({ignoreUndefined:!0}),j2=(0,aY.kg)("ipfs:mfs:mkdir"),j3={parents:!1,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3,flush:!0};function j4(a){async function b(b,c={}){let d=j1(j3,c);if(!b)throw Error("no path given to Mkdir");if("/"===(b=b.trim())){if(d.parents)return;throw aZ(Error("cannot create directory '/': Already exists"),"ERR_INVALID_PATH")}if("/"!==b.substring(0,1))throw aZ(Error("paths must start with a leading slash"),"ERR_INVALID_PATH");j2(`Creating ${b}`);let e=jr(b);if("ipfs"===e[0])throw aZ(Error("path cannot have the prefix 'ipfs'"),"ERR_INVALID_PATH");let f=await jq(a,d),g,h=[],i=await j0(a,"directory",d);for(let j=0;j<=e.length;j++){let k=e.slice(0,j),l=`/ipfs/${f}/${k.join("/")}`;try{if(g=await id(l,a.repo.blocks),"file"!==g.type&&"directory"!==g.type)throw aZ(Error(`${b} was not a UnixFS node`),"ERR_NOT_UNIXFS");if(j===e.length){if(d.parents)return;throw aZ(Error("file already exists"),"ERR_ALREADY_EXISTS")}h.push({name:g.name,cid:g.cid})}catch(m){if("ERR_NOT_FOUND"===m.code){if(j<e.length&&!d.parents)throw aZ(Error(`Intermediate directory path ${l} does not exist, use the -p flag to create it`),"ERR_NOT_FOUND");await j5(a,k[k.length-1],i,h[h.length-1],h,d)}else throw m}}let n=await jZ(a,h,d);await j_(a,n,d)}return bm(b)}let j5=async(a,b,c,d,e,f)=>{j2(`Adding empty dir called ${b} to ${d.cid}`);let g=await jR(a,{parent:d.node,parentCid:d.cid,size:0,cid:c.cid,name:b,hashAlg:f.hashAlg,cidVersion:f.cidVersion,flush:f.flush,shardSplitThreshold:f.shardSplitThreshold});e[e.length-1].cid=g.cid,e.push({name:b,cid:c.cid})},j6=aX.Z.bind({ignoreUndefined:!0}),j7=(0,aY.kg)("ipfs:mfs:cp"),j8={parents:!1,flush:!0,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3};function j9(a){async function b(b,c,d={}){let e=j6(j8,d);Array.isArray(b)||(b=[b]);let f=await Promise.all(b.map(b=>jt(a,b,e))),g=await jt(a,c,e);if(!f.length||!g)throw aZ(Error("Please supply at least one source"),"ERR_INVALID_PARAMS");let h=f.find(a=>!a.exists);if(h)throw aZ(Error(`${h.path} does not exist`),"ERR_INVALID_PARAMS");let i=ka(g);if(g.exists){if(j7("Destination exists"),1===f.length&&!i)throw aZ(Error("directory already has entry by that name"),"ERR_ALREADY_EXISTS")}else if(j7("Destination does not exist"),f.length>1){if(!e.parents)throw aZ(Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await j4(a)(g.path,e),g=await jt(a,g.path,e)}else if(g.parts.length>1){let j=`/${g.parts.slice(0,-1).join("/")}`;try{await jx(a)(j,e)}catch(k){if("ERR_NOT_FOUND"!==k.code)throw k;if(!e.parents)throw aZ(Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await j4(a)(j,e),g=await jt(a,g.path,e)}}let l=ka(g)?g.mfsPath:g.mfsDirectory,m=await jA(a,l);if(1===f.length){let n=f.pop();if(!n)throw aZ(Error("could not find source"),"ERR_INVALID_PARAMS");let o=i?n.name:g.name;return j7(`Only one source, copying to destination ${i?"directory":"file"} ${o}`),kb(a,n,o,m,e)}return j7("Multiple sources, wrapping in a directory"),kc(a,f,g,m,e)}return bm(b)}let ka=a=>a.unixfs&&a.unixfs.type&&a.unixfs.type.includes("directory"),kb=async(a,b,c,d,e)=>{let f=d.pop();if(!f)throw aZ(Error("destination had no parent"),"ERR_INVALID_PARAMS");f=await kd(a,b,c,f,e),d.push(f);let g=await jZ(a,d,e);await j_(a,g,e)},kc=async(a,b,c,d,e)=>{for(let f=0;f<b.length;f++){let g=b[f];c=await kd(a,g,g.name,c,e)}d[d.length-1]=c;let h=await jZ(a,d,e);await j_(a,h,e)},kd=async(a,b,c,d,e)=>{let f=await a.repo.blocks.get(b.cid),{node:g,cid:h,size:i}=await jR(a,{parentCid:d.cid,size:f.length,cid:b.cid,name:c,hashAlg:e.hashAlg,cidVersion:e.cidVersion,flush:e.flush,shardSplitThreshold:e.shardSplitThreshold});return d.node=g,d.cid=h,d.size=i,d},ke=(0,aY.kg)("ipfs:mfs:core:utils:remove-link");async function kf(a,b){let c=b.parent;if(b.parentCid){let d=a9.CID.asCID(b.parentCid);if(null===d)throw aZ(Error("Invalid CID passed to removeLink"),"EINVALIDPARENTCID");ke(`Loading parent node ${d}`);let e=await a.repo.blocks.get(d);c=a_.decode(e)}if(!c)throw aZ(Error("No parent node or CID passed to removeLink"),"EINVALIDPARENT");if(!b.name)throw aZ(Error("No child name passed to removeLink"),"EINVALIDCHILDNAME");if(!c.Data)throw aZ(Error("Parent node had no data"),"ERR_INVALID_NODE");let f=a$.fL.unmarshal(c.Data);return"hamt-sharded-directory"===f.type?(ke(`Removing ${b.name} from sharded directory`),kh(a,{...b,parent:c})):(ke(`Removing link ${b.name} regular directory`),kg(a,{...b,parent:c}))}let kg=async(a,b)=>{b.parent.Links=b.parent.Links.filter(a=>a.Name!==b.name);let c=await a_.encode(b.parent),d=await a.hashers.getHasher(b.hashAlg),e=await d.digest(c),f=a9.CID.create(b.cidVersion,a_.code,e);return await a.repo.blocks.put(f,c),ke(`Updated regular directory ${f}`),{node:b.parent,cid:f}},kh=async(a,b)=>{let{rootBucket:c,path:d}=await jO(a,b.name,b.parent);await c.del(b.name);let{node:e}=await ki(a,d,b.name,b);return jJ(a,e.Links,c,b)},ki=async(a,b,c,d)=>{let e=b.pop();if(!e)throw aZ(Error("Could not find parent"),"EINVALIDPARENT");let{bucket:f,prefix:g,node:h}=e;if(!h)throw aZ(Error("Could not find parent"),"EINVALIDPARENT");let i=h.Links.find(a=>(a.Name||"").substring(0,2)===g);if(!i)throw aZ(Error(`No link found with prefix ${g} for file ${c}`),"ERR_NOT_FOUND");if(i.Name===`${g}${c}`){ke(`Removing existing link ${i.Name}`);let j=h.Links.filter(a=>a.Name!==i.Name);return await f.del(c),jJ(a,j,f,d)}ke(`Descending into sub-shard ${i.Name} for ${g}${c}`);let k=await ki(a,b,c,d),l=k.cid,m=k.size,n=g;if(1===k.node.Links.length){ke(`Removing subshard for ${g}`);let o=k.node.Links[0];n=`${g}${(o.Name||"").substring(2)}`,l=o.Hash,m=o.Tsize||0}return ke(`Updating shard ${g} with name ${n}`),kj(a,f,h,g,n,m,l,d)},kj=(a,b,c,d,e,f,g,h)=>{let i=c.Links.filter(a=>a.Name!==d);return i.push({Name:e,Tsize:f,Hash:g}),jJ(a,i,b,h)},kk=aX.Z.bind({ignoreUndefined:!0}),kl={recursive:!1,cidVersion:0,hashAlg:"sha2-256",flush:!0,shardSplitThreshold:1e3};function km(a){async function b(b,c={}){let d=kk(kl,c);Array.isArray(b)||(b=[b]);let e=await Promise.all(b.map(b=>jt(a,b,d)));if(!e.length)throw aZ(Error("Please supply at least one path to remove"),"ERR_INVALID_PARAMS");for(let f of(e.forEach(a=>{if("/"===a.path)throw aZ(Error("Cannot delete root"),"ERR_INVALID_PARAMS")}),e))await kn(a,f.path,d)}return bm(b)}let kn=async(a,b,c)=>{let d=await jt(a,b,c),e=await jA(a,d.mfsPath),f=e[e.length-1];e.pop();let g=e[e.length-1];if(!g)throw aZ(Error(`${b} does not exist`),"ERR_NOT_FOUND");if("directory"===f.type&&!c.recursive)throw aZ(Error(`${b} is a directory, use -r to remove directories`),"ERR_WAS_DIR");let{cid:h}=await kf(a,{parentCid:g.cid,name:f.name,hashAlg:c.hashAlg,cidVersion:c.cidVersion,flush:c.flush,shardSplitThreshold:c.shardSplitThreshold});g.cid=h;let i=await jZ(a,e,c);await j_(a,i,c)},ko=aX.Z.bind({ignoreUndefined:!0}),kp=(0,aY.kg)("ipfs:mfs:touch"),kq={flush:!0,shardSplitThreshold:1e3,hashAlg:"sha2-256",cidVersion:0,recursive:!1};function kr(a,b){if(a instanceof String||"string"==typeof a){let c=`${a}`;a=c.match(/^\d+$/g)?parseInt(c,8):0+c.split(",").reduce((a,c)=>(function(a,b,c){var d,e,f,g,h,i,j,k;b||(b=0);let l=a.match(/^(u?g?o?a?)(-?\+?=?)?(r?w?x?X?s?t?)$/);if(!l)throw Error(`Invalid file mode: ${a}`);let[,m,n,o]=l;"a"!==m&&m||(m="ugo");let p,q=(d=o,e=b,f=c,p=0,(d.includes("x")||d.includes("X")&&(f||1&e||8&e||64&e))&&(p+=1),d.includes("w")&&(p+=2),d.includes("r")&&(p+=4),p),r;return(q=(g=m,h=q,r=0,g.includes("u")&&(r+=h<<6),g.includes("g")&&(r+=h<<3),g.includes("o")&&(r+=h),r),q=(i=m,j=o,k=q,j.includes("t")&&(k+=parseInt("1000",8)),j.includes("s")&&(i.includes("u")&&(k+=parseInt("4000",8)),i.includes("g")&&(k+=parseInt("2000",8))),k),"="===n)?(m.includes("u")&&(b&=parseInt("7077",8),b|=q),m.includes("g")&&(b&=parseInt("7707",8),b|=q),m.includes("o")&&(b&=parseInt("7770",8),b|=q),b):"+"===n?q|b:"-"===n?q^b:b})(c,a,b.isDirectory()),b.mode||0)}return a}let ks=aX.Z.bind({ignoreUndefined:!0}),kt={},ku=aX.Z.bind({ignoreUndefined:!0}),kv={parents:!1,flush:!0,cidVersion:0,hashAlg:"sha2-256",shardSplitThreshold:1e3},kw=aX.Z.bind({ignoreUndefined:!0}),kx=(0,aY.kg)("ipfs:mfs:touch"),ky={flush:!0,shardSplitThreshold:1e3,cidVersion:0,hashAlg:"sha2-256"},kz=aX.Z.bind({ignoreUndefined:!0}),kA={offset:0,length:1/0},kB=(0,aY.kg)("ipfs:mfs:utils:to-async-iterator"),kC=aX.Z.bind({ignoreUndefined:!0}),kD=(0,aY.kg)("ipfs:mfs:write"),kE={offset:0,length:1/0,create:!1,truncate:!1,rawLeaves:!1,reduceSingleLeafToSelf:!1,cidVersion:0,hashAlg:"sha2-256",parents:!1,progress:(a,b)=>{},strategy:"trickle",flush:!0,leafType:"raw",shardSplitThreshold:1e3},kF=async(a,b,c,d,e)=>{let f=await kG(a,c,d,e);await jo().writeLock(async()=>{let c=jr(b),d=c.pop();if(null==d)throw aZ(Error("source does not exist"),"ERR_NO_EXIST");let g=!1;try{await jx(a)(`/${c.join("/")}`,e),g=!0}catch(h){if("ERR_NOT_FOUND"!==h.code)throw h}g||await j4(a)(`/${c.join("/")}`,e);let i=await jt(a,b,e),j=await jA(a,i.mfsDirectory),k=j[j.length-1];if(!k)throw aZ(Error("directory does not exist"),"ERR_NO_EXIST");if(!k.type||!k.type.includes("directory"))throw aZ(Error(`cannot write to ${k.name}: Not a directory`),"ERR_NOT_A_DIRECTORY");let l=await a.repo.blocks.get(k.cid),m=(0,a_.decode)(l),n=await jR(a,{parent:m,name:d,cid:f.cid,size:f.size,flush:e.flush,shardSplitThreshold:e.shardSplitThreshold,hashAlg:e.hashAlg,cidVersion:e.cidVersion});k.cid=n.cid;let o=await jZ(a,j,e);await j_(a,o,e)})()},kG=async(a,b,c,d)=>{c.exists?kD(`Overwriting file ${c.cid} offset ${d.offset} length ${d.length}`):kD(`Writing file offset ${d.offset} length ${d.length}`);let e=[];if(d.offset>0){if(c.unixfs){if(kD(`Writing first ${d.offset} bytes of original file`),e.push(()=>c.content({offset:0,length:d.offset})),c.unixfs.fileSize()<d.offset){let f=d.offset-c.unixfs.fileSize();kD(`Writing zeros for extra ${f} bytes`),e.push(kI(f))}}else kD(`Writing zeros for first ${d.offset} bytes`),e.push(kI(d.offset))}e.push(kH(b,d.length));let g=kK(kJ(e),a=>{if(c.unixfs&&!d.truncate){let b=c.unixfs.fileSize();if(b>a)return kD(`Writing last ${b-a} of ${b} bytes from original file starting at offset ${a}`),c.content({offset:a});kD("Not writing last bytes from original file")}return{[Symbol.asyncIterator]:async function*(){}}}),h;void 0!==d.mode&&null!==d.mode?h=(0,a$.tK)(d.mode):c&&c.unixfs&&(h=c.unixfs.mode);let i;null!=d.mtime?i=(0,a$.Xu)(d.mtime):c&&c.unixfs&&(i=c.unixfs.mtime);let j=await a.hashers.getHasher(d.hashAlg),k=await bG(hF([{content:g,mode:h,mtime:i}],a.repo.blocks,{progress:d.progress,hasher:j,cidVersion:d.cidVersion,strategy:d.strategy,rawLeaves:d.rawLeaves,reduceSingleLeafToSelf:d.reduceSingleLeafToSelf,leafType:d.leafType}));if(!k)throw aZ(Error(`cannot write to ${parent.name}`),"ERR_COULD_NOT_WRITE");return kD(`Wrote ${k.cid}`),{cid:k.cid,size:k.size}},kH=(a,b)=>async function*(){let c=0;for await(let d of a){if((c+=d.length)>b){yield d.slice(0,b-c);return}yield d}},kI=(a,b=bo)=>{let c=new Uint8Array(b);async function*d(){for(;;)yield c.slice()}return kH(d(),a)},kJ=async function*(a){for(let b=0;b<a.length;b++)yield*a[b]()},kK=async function*(a,b){let c=0;for await(let d of a)c+=d.length,yield d;for await(let e of b(c))c+=e.length,yield e},kL=a=>{let b={cid:a.cid,name:a.name,type:"directory"===a.type?"directory":"file",size:a.size};return("file"===a.type||"directory"===a.type)&&(b.mode=a.unixfs.mode,b.mtime=a.unixfs.mtime),b};function kM(a,b=[]){for(let c in a){let d=a[c];if("/"===c&&1===Object.keys(a).length)try{b.push({Name:"",Tsize:0,Hash:CID.parse(d)});continue}catch(e){}let f=CID.asCID(d);if(f){b.push({Name:"",Tsize:0,Hash:f});continue}Array.isArray(d)&&kM(d,b),d&&"object"==typeof d&&kM(d,b)}return b}(0,aY.kg)("ipfs:repo:gc");c(44874);var kN=c(93975);let kO=f2("ipfs:repo:migrator:migration-8");function kP(a){return a.child?kP(a.child):a}function kQ(a){try{let b=fE.base32.decode(`b${a.toString().toLowerCase().slice(1)}`),c=a9.CID.decode(b).multihash.bytes,d=fE.base32.encode(c).slice(1).toUpperCase();return new be(`/${d}`,!1)}catch(e){return a}}function kR(a){try{let b=fE.base32.decode(`b${a.toString().toLowerCase().slice(1)}`),c=fR.decode(b),d=fE.base32.encode(a9.CID.createV1(g$.code,c).bytes).slice(1);return new be(`/${d.toUpperCase()}`,!1)}catch{return a}}async function kS(a,b,c){let d=a.blocks;await d.open();let e=kP(d),f=await kN(e.queryKeys({filters:[a=>{let b=c(a);return b.toString()!==a.toString()}]}));try{let g=0;for await(let h of e.query({})){let i=c(h.key);i.toString()!==h.key.toString()&&(g+=1,kO(`Migrating Block from ${h.key} to ${i}`,await e.has(h.key)),await e.delete(h.key),await e.put(i,h.value),b(g/f*100,`Migrated Block from ${h.key} to ${i}`))}}finally{await d.close()}}var kT=c(62100);let kU=kT.Reader,kV=kT.Writer;kT.util;let kW=kT.roots.default||(kT.roots.default={}),kX=kW.ipfs=(()=>{let a={};return a.pin=function(){let a={};return a.Set=function(){function a(a){if(a)for(var b=Object.keys(a),c=0;c<b.length;++c)null!=a[b[c]]&&(this[b[c]]=a[b[c]])}return a.prototype.version=0,a.prototype.fanout=0,a.prototype.seed=0,a.encode=function(a,b){return b||(b=kV.create()),null!=a.version&&Object.hasOwnProperty.call(a,"version")&&b.uint32(8).uint32(a.version),null!=a.fanout&&Object.hasOwnProperty.call(a,"fanout")&&b.uint32(16).uint32(a.fanout),null!=a.seed&&Object.hasOwnProperty.call(a,"seed")&&b.uint32(29).fixed32(a.seed),b},a.decode=function(a,b){a instanceof kU||(a=kU.create(a));for(var c=void 0===b?a.len:a.pos+b,d=new kW.ipfs.pin.Set;a.pos<c;){var e=a.uint32();switch(e>>>3){case 1:d.version=a.uint32();break;case 2:d.fanout=a.uint32();break;case 3:d.seed=a.fixed32();break;default:a.skipType(7&e)}}return d},a.fromObject=function(a){if(a instanceof kW.ipfs.pin.Set)return a;var b=new kW.ipfs.pin.Set;return null!=a.version&&(b.version=a.version>>>0),null!=a.fanout&&(b.fanout=a.fanout>>>0),null!=a.seed&&(b.seed=a.seed>>>0),b},a.toObject=function(a,b){b||(b={});var c={};return b.defaults&&(c.version=0,c.fanout=0,c.seed=0),null!=a.version&&a.hasOwnProperty("version")&&(c.version=a.version),null!=a.fanout&&a.hasOwnProperty("fanout")&&(c.fanout=a.fanout),null!=a.seed&&a.hasOwnProperty("seed")&&(c.seed=a.seed),c},a.prototype.toJSON=function(){return this.constructor.toObject(this,kT.util.toJSONOptions)},a}(),a}(),a})();var kY=c(96132);let kZ=new be("/local/pins"),k$=256,k_=8192,k0=a9.CID.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),k1={direct:"direct",recursive:"recursive"};function k2(a){return new be(`/${fE.base32.encode(a.multihash.bytes).toUpperCase().substring(1)}`)}let k3=kX.pin.Set;async function*k4(a,b){let c=function(a){let b=a.Data;if(!b)throw Error("No data present");let c=iC.decode(b),d=iC.decode.bytes;if(d<=0)throw Error("Invalid Set header length");if(d+c>b.length)throw Error("Impossibly large set header length");let e=b.slice(d,c+d),f=k3.toObject(k3.decode(e),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(1!==f.version)throw Error(`Unsupported Set version: ${f.version}`);if(f.fanout>a.Links.length)throw Error("Impossibly large fanout");return{header:f,data:b.slice(c+d)}}(b),d=0;for(let e of b.Links){if(d<c.header.fanout){let f=e.Hash;if(!k0.equals(f)){let g=await a.get(f),h=a_.decode(g);yield*k4(a,h)}}else yield e.Hash;d++}}async function*k5(a,b,c){let d=b.Links.find(a=>a.Name===c);if(!d)throw Error("No link found with name "+c);let e=await a.get(d.Hash),f=a_.decode(e);yield*k4(a,f)}async function k6(a,b,c){let d=await function(a,b){return c(b,0);async function c(b,d){let e=k3.encode({version:1,fanout:k$,seed:d}).finish(),f=iC.encode(e.length),g=(0,bM.concat)([f,e]),h=[];for(let i=0;i<k$;i++)h.push({Name:"",Tsize:1,Hash:k0});if(b.length<=k_){let j=b.map(a=>({link:{Name:"",Tsize:1,Hash:a.key},data:a.data||new Uint8Array})).sort((a,b)=>(function(a,b){for(let c=0;c<a.byteLength;c++){if(a[c]<b[c])return -1;if(a[c]>b[c])return 1}return a.byteLength>b.byteLength?1:a.byteLength<b.byteLength?-1:0})(a.link.Hash.bytes,b.link.Hash.bytes)),k=h.concat(j.map(a=>a.link)),l=(0,bM.concat)([g,...j.map(a=>a.data)]);return{Data:l,Links:k}}{let m=b.reduce((a,b)=>{let c=function(a,b){let c=new Uint8Array(4),d=new DataView(c.buffer);d.setUint32(0,a,!0);let e=(0,a8.fromString)(b.toString()),f=(0,bM.concat)([c,e],c.byteLength+e.byteLength);return kY((0,bb.toString)(f))}(d,b.key)%k$;return a[c]=c in a?a[c].concat([b]):[b],a},[]),n=0;for(let o of m){let p=await c(o,d+1);await q(p,n),n++}return{Data:g,Links:h}}async function q(b,c){let d=a_.encode(b),e=await dc.sha256.digest(d),f=a9.CID.createV0(e);await a.put(f,d);let g=b.Links.reduce((a,b)=>a+(b.Tsize||0),0)+d.length;h[c]={Name:"",Tsize:g,Hash:f}}}}(a,c.map(a=>({key:a}))),e=a_.encode(d),f=await dc.sha256.digest(e),g=a9.CID.createV0(f);await a.put(g,e);let h=d.Links.reduce((a,b)=>a+b.Tsize,0)+e.length;return{Name:b,Tsize:h,Hash:g}}async function k7(a,b,c,d){if(!await b.has(kZ))return;let e=await b.get(kZ),f=a9.CID.decode(e),g=await a.get(f),h=a_.decode(g),i=0,j=await kN(k5(a,h,k1.recursive))+await kN(k5(a,h,k1.direct));for await(let k of k5(a,h,k1.recursive)){i++;let l={depth:1/0};0!==k.version&&(l.version=k.version),k.code!==a_.code&&(l.codec=k.code),await c.put(k2(k),fJ.cv(l)),d(i/j*100,`Migrated recursive pin ${k}`)}for await(let m of k5(a,h,k1.direct)){i++;let n={depth:0};0!==m.version&&(n.version=m.version),m.code!==a_.code&&(n.codec=m.code),await c.put(k2(m),fJ.cv(n)),d(i/j*100,`Migrated direct pin ${m}`)}await a.delete(f),await b.delete(kZ)}async function k8(a,b,c,d){let e=[],f=[],g=0,h=await kN(c.queryKeys({}));for await(let{key:i,value:j}of c.query({})){g++;let k=fJ.Jx(j),l=a9.CID.create(k.version||0,k.codec||a_.code,fR.decode(fE.base32.decode("b"+i.toString().toLowerCase().split("/").pop())));0===k.depth?(d(g/h*100,`Reverted direct pin ${l}`),f.push(l)):(d(g/h*100,`Reverted recursive pin ${l}`),e.push(l))}d(100,"Updating pin root");let m={Links:[await k6(a,k1.direct,f),await k6(a,k1.recursive,e)]},n=a_.encode(m),o=await dc.sha256.digest(n),p=a9.CID.createV0(o);await a.put(p,n),await b.put(kZ,p.bytes)}async function k9(a,b,c){let d=a.blocks,e=a.datastore,f=a.pins;await d.open(),await e.open(),await f.open();try{await c(d,e,f,b)}finally{await f.close(),await e.close(),await d.close()}}let la=new be("/config"),lb=new be("/version");function lc(a){let b=a;for(;b.db||b.child;)if("level-js"===(b=b.db||b.child).type||"Level"===b.constructor.name)return b}async function ld(a,b,c){let d=await b(a);if(d)return d;let e=lc(c);return!!e&&new Promise((b,c)=>{let d=e.store("readonly").get(a.toString());d.transaction.onabort=()=>{c(d.transaction.error)},d.transaction.oncomplete=()=>{b(Boolean(d.result))}})}async function le(a,b,c,d){if(await c(a))return b(a);let e=lc(d);if(!e)throw notFoundError();return new Promise((b,c)=>{let d=e.store("readonly").get(a.toString());d.transaction.onabort=()=>{c(d.transaction.error)},d.transaction.oncomplete=()=>{if(d.result)return b(d.result);c(notFoundError())}})}async function lf(a,b,c=()=>{}){let d=lc(b);if(!d){c(`${a} did not need an upgrade`);return}c(`Upgrading ${a}`);let e=(a,b)=>[{type:"del",key:a},{type:"put",key:(0,a8.fromString)(a),value:b}];await lj(d,e)}async function lg(a,b,c=()=>{}){let d=lc(b);if(!d){c(`${a} did not need a downgrade`);return}c(`Downgrading ${a}`);let e=(a,b)=>[{type:"del",key:a},{type:"put",key:(0,bb.toString)(a),value:b}];await lj(d,e)}function lh(a){return a.child?lh(a.child):a}async function li(a,b,c){let d=Object.entries(a).map(([a,b])=>({key:a,backend:lh(b)})).filter(({key:a,backend:b})=>"LevelDatastore"===b.constructor.name).map(({key:a,backend:b})=>({name:a,store:b}));b(0,`Migrating ${d.length} dbs`);let e=0,f=a=>{b(Math.round(e/d.length*100),a)};for(let{name:g,store:h}of d){await h.open();try{await c(g,h,f)}finally{e++,await h.close()}}b(100,`Migrated ${d.length} dbs`)}function lj(a,b){return new Promise((c,d)=>{let e=a.iterator();function f(){let g=(g,h,i)=>{if(g|| void 0===h){let j=a=>{if(a){d(a);return}c()};e.end(j);return}!function(b,c){let d=a.store("readwrite"),e=d.transaction,f=0,g;function h(){let a=b[f++],c=a.key,i;try{i="del"===a.type?d.delete(c):d.put(a.value,c)}catch(j){g=j,e.abort();return}f<b.length&&(i.onsuccess=h)}e.onabort=()=>c(g||e.error||Error("aborted by user")),e.oncomplete=()=>c(),h()}(b(h,i),f)};e.next(g)}e._deserializeKey=e._deserializeValue=a=>a,f()})}let lk=new be("/local/filesroot");async function ll(a,b=()=>{}){if(b(100,"Migrating MFS root to repo datastore"),await a.root.open(),await a.datastore.open(),await a.root.has(lk)){let c=await a.root.get(lk);await a.datastore.put(lk,c),await a.root.delete(lk)}await a.datastore.close(),await a.root.close(),b(100,"Stored MFS root in repo datastore")}async function lm(a,b=()=>{}){if(b(100,"Migrating MFS root to repo root datastore"),await a.root.open(),await a.datastore.open(),await a.datastore.has(lk)){let c=await a.datastore.get(lk);await a.root.put(lk,c),await a.datastore.delete(lk)}await a.datastore.close(),await a.root.close(),b(100,"Stored MFS root in repo root datastore")}let ln=kT.Reader,lo=kT.Writer,lq=kT.util,lr=kT.roots.default||(kT.roots.default={}),ls=lr.Protocols=(()=>{function a(a){if(this.protocols=[],a)for(var b=Object.keys(a),c=0;c<b.length;++c)null!=a[b[c]]&&(this[b[c]]=a[b[c]])}return a.prototype.protocols=lq.emptyArray,a.encode=function(a,b){if(b||(b=lo.create()),null!=a.protocols&&a.protocols.length)for(var c=0;c<a.protocols.length;++c)b.uint32(10).string(a.protocols[c]);return b},a.decode=function(a,b){a instanceof ln||(a=ln.create(a));for(var c=void 0===b?a.len:a.pos+b,d=new lr.Protocols;a.pos<c;){var e=a.uint32();e>>>3==1?(d.protocols&&d.protocols.length||(d.protocols=[]),d.protocols.push(a.string())):a.skipType(7&e)}return d},a.fromObject=function(a){if(a instanceof lr.Protocols)return a;var b=new lr.Protocols;if(a.protocols){if(!Array.isArray(a.protocols))throw TypeError(".Protocols.protocols: array expected");b.protocols=[];for(var c=0;c<a.protocols.length;++c)b.protocols[c]=String(a.protocols[c])}return b},a.toObject=function(a,b){b||(b={});var c={};if((b.arrays||b.defaults)&&(c.protocols=[]),a.protocols&&a.protocols.length){c.protocols=[];for(var d=0;d<a.protocols.length;++d)c.protocols[d]=a.protocols[d]}return c},a.prototype.toJSON=function(){return this.constructor.toObject(this,kT.util.toJSONOptions)},a})(),lt=kT.Reader,lu=kT.Writer,lv=kT.util,lw=kT.roots.default||(kT.roots.default={}),lx=lw.Addresses=(()=>{function a(a){if(this.addrs=[],a)for(var b=Object.keys(a),c=0;c<b.length;++c)null!=a[b[c]]&&(this[b[c]]=a[b[c]])}return a.prototype.addrs=lv.emptyArray,a.prototype.certifiedRecord=null,a.encode=function(a,b){if(b||(b=lu.create()),null!=a.addrs&&a.addrs.length)for(var c=0;c<a.addrs.length;++c)lw.Addresses.Address.encode(a.addrs[c],b.uint32(10).fork()).ldelim();return null!=a.certifiedRecord&&Object.hasOwnProperty.call(a,"certifiedRecord")&&lw.Addresses.CertifiedRecord.encode(a.certifiedRecord,b.uint32(18).fork()).ldelim(),b},a.decode=function(a,b){a instanceof lt||(a=lt.create(a));for(var c=void 0===b?a.len:a.pos+b,d=new lw.Addresses;a.pos<c;){var e=a.uint32();switch(e>>>3){case 1:d.addrs&&d.addrs.length||(d.addrs=[]),d.addrs.push(lw.Addresses.Address.decode(a,a.uint32()));break;case 2:d.certifiedRecord=lw.Addresses.CertifiedRecord.decode(a,a.uint32());break;default:a.skipType(7&e)}}return d},a.fromObject=function(a){if(a instanceof lw.Addresses)return a;var b=new lw.Addresses;if(a.addrs){if(!Array.isArray(a.addrs))throw TypeError(".Addresses.addrs: array expected");b.addrs=[];for(var c=0;c<a.addrs.length;++c){if("object"!=typeof a.addrs[c])throw TypeError(".Addresses.addrs: object expected");b.addrs[c]=lw.Addresses.Address.fromObject(a.addrs[c])}}if(null!=a.certifiedRecord){if("object"!=typeof a.certifiedRecord)throw TypeError(".Addresses.certifiedRecord: object expected");b.certifiedRecord=lw.Addresses.CertifiedRecord.fromObject(a.certifiedRecord)}return b},a.toObject=function(a,b){b||(b={});var c={};if((b.arrays||b.defaults)&&(c.addrs=[]),b.defaults&&(c.certifiedRecord=null),a.addrs&&a.addrs.length){c.addrs=[];for(var d=0;d<a.addrs.length;++d)c.addrs[d]=lw.Addresses.Address.toObject(a.addrs[d],b)}return null!=a.certifiedRecord&&a.hasOwnProperty("certifiedRecord")&&(c.certifiedRecord=lw.Addresses.CertifiedRecord.toObject(a.certifiedRecord,b)),c},a.prototype.toJSON=function(){return this.constructor.toObject(this,kT.util.toJSONOptions)},a.Address=function(){function a(a){if(a)for(var b=Object.keys(a),c=0;c<b.length;++c)null!=a[b[c]]&&(this[b[c]]=a[b[c]])}a.prototype.multiaddr=lv.newBuffer([]),a.prototype.isCertified=null;let b;return Object.defineProperty(a.prototype,"_isCertified",{get:lv.oneOfGetter(b=["isCertified"]),set:lv.oneOfSetter(b)}),a.encode=function(a,b){return b||(b=lu.create()),null!=a.multiaddr&&Object.hasOwnProperty.call(a,"multiaddr")&&b.uint32(10).bytes(a.multiaddr),null!=a.isCertified&&Object.hasOwnProperty.call(a,"isCertified")&&b.uint32(16).bool(a.isCertified),b},a.decode=function(a,b){a instanceof lt||(a=lt.create(a));for(var c=void 0===b?a.len:a.pos+b,d=new lw.Addresses.Address;a.pos<c;){var e=a.uint32();switch(e>>>3){case 1:d.multiaddr=a.bytes();break;case 2:d.isCertified=a.bool();break;default:a.skipType(7&e)}}return d},a.fromObject=function(a){if(a instanceof lw.Addresses.Address)return a;var b=new lw.Addresses.Address;return null!=a.multiaddr&&("string"==typeof a.multiaddr?lv.base64.decode(a.multiaddr,b.multiaddr=lv.newBuffer(lv.base64.length(a.multiaddr)),0):a.multiaddr.length&&(b.multiaddr=a.multiaddr)),null!=a.isCertified&&(b.isCertified=Boolean(a.isCertified)),b},a.toObject=function(a,b){b||(b={});var c={};return b.defaults&&(b.bytes===String?c.multiaddr="":(c.multiaddr=[],b.bytes!==Array&&(c.multiaddr=lv.newBuffer(c.multiaddr)))),null!=a.multiaddr&&a.hasOwnProperty("multiaddr")&&(c.multiaddr=b.bytes===String?lv.base64.encode(a.multiaddr,0,a.multiaddr.length):b.bytes===Array?Array.prototype.slice.call(a.multiaddr):a.multiaddr),null!=a.isCertified&&a.hasOwnProperty("isCertified")&&(c.isCertified=a.isCertified,b.oneofs&&(c._isCertified="isCertified")),c},a.prototype.toJSON=function(){return this.constructor.toObject(this,kT.util.toJSONOptions)},a}(),a.CertifiedRecord=function(){function a(a){if(a)for(var b=Object.keys(a),c=0;c<b.length;++c)null!=a[b[c]]&&(this[b[c]]=a[b[c]])}return a.prototype.seq=lv.Long?lv.Long.fromBits(0,0,!0):0,a.prototype.raw=lv.newBuffer([]),a.encode=function(a,b){return b||(b=lu.create()),null!=a.seq&&Object.hasOwnProperty.call(a,"seq")&&b.uint32(8).uint64(a.seq),null!=a.raw&&Object.hasOwnProperty.call(a,"raw")&&b.uint32(18).bytes(a.raw),b},a.decode=function(a,b){a instanceof lt||(a=lt.create(a));for(var c=void 0===b?a.len:a.pos+b,d=new lw.Addresses.CertifiedRecord;a.pos<c;){var e=a.uint32();switch(e>>>3){case 1:d.seq=a.uint64();break;case 2:d.raw=a.bytes();break;default:a.skipType(7&e)}}return d},a.fromObject=function(a){if(a instanceof lw.Addresses.CertifiedRecord)return a;var b=new lw.Addresses.CertifiedRecord;return null!=a.seq&&(lv.Long?(b.seq=lv.Long.fromValue(a.seq)).unsigned=!0:"string"==typeof a.seq?b.seq=parseInt(a.seq,10):"number"==typeof a.seq?b.seq=a.seq:"object"==typeof a.seq&&(b.seq=new lv.LongBits(a.seq.low>>>0,a.seq.high>>>0).toNumber(!0))),null!=a.raw&&("string"==typeof a.raw?lv.base64.decode(a.raw,b.raw=lv.newBuffer(lv.base64.length(a.raw)),0):a.raw.length&&(b.raw=a.raw)),b},a.toObject=function(a,b){b||(b={});var c={};if(b.defaults){if(lv.Long){var d=new lv.Long(0,0,!0);c.seq=b.longs===String?d.toString():b.longs===Number?d.toNumber():d}else c.seq=b.longs===String?"0":0;b.bytes===String?c.raw="":(c.raw=[],b.bytes!==Array&&(c.raw=lv.newBuffer(c.raw)))}return null!=a.seq&&a.hasOwnProperty("seq")&&("number"==typeof a.seq?c.seq=b.longs===String?String(a.seq):a.seq:c.seq=b.longs===String?lv.Long.prototype.toString.call(a.seq):b.longs===Number?new lv.LongBits(a.seq.low>>>0,a.seq.high>>>0).toNumber(!0):a.seq),null!=a.raw&&a.hasOwnProperty("raw")&&(c.raw=b.bytes===String?lv.base64.encode(a.raw,0,a.raw.length):b.bytes===Array?Array.prototype.slice.call(a.raw):a.raw),c},a.prototype.toJSON=function(){return this.constructor.toObject(this,kT.util.toJSONOptions)},a}(),a})(),ly=kT.Reader,lz=kT.Writer,lA=kT.util,lB=kT.roots.default||(kT.roots.default={}),lC=lB.Peer=(()=>{function a(a){if(this.addresses=[],this.protocols=[],this.metadata=[],a)for(var b=Object.keys(a),c=0;c<b.length;++c)null!=a[b[c]]&&(this[b[c]]=a[b[c]])}a.prototype.addresses=lA.emptyArray,a.prototype.protocols=lA.emptyArray,a.prototype.metadata=lA.emptyArray,a.prototype.pubKey=null,a.prototype.peerRecordEnvelope=null;let b;return Object.defineProperty(a.prototype,"_pubKey",{get:lA.oneOfGetter(b=["pubKey"]),set:lA.oneOfSetter(b)}),Object.defineProperty(a.prototype,"_peerRecordEnvelope",{get:lA.oneOfGetter(b=["peerRecordEnvelope"]),set:lA.oneOfSetter(b)}),a.encode=function(a,b){if(b||(b=lz.create()),null!=a.addresses&&a.addresses.length)for(var c=0;c<a.addresses.length;++c)lB.Address.encode(a.addresses[c],b.uint32(10).fork()).ldelim();if(null!=a.protocols&&a.protocols.length)for(var c=0;c<a.protocols.length;++c)b.uint32(18).string(a.protocols[c]);if(null!=a.metadata&&a.metadata.length)for(var c=0;c<a.metadata.length;++c)lB.Metadata.encode(a.metadata[c],b.uint32(26).fork()).ldelim();return null!=a.pubKey&&Object.hasOwnProperty.call(a,"pubKey")&&b.uint32(34).bytes(a.pubKey),null!=a.peerRecordEnvelope&&Object.hasOwnProperty.call(a,"peerRecordEnvelope")&&b.uint32(42).bytes(a.peerRecordEnvelope),b},a.decode=function(a,b){a instanceof ly||(a=ly.create(a));for(var c=void 0===b?a.len:a.pos+b,d=new lB.Peer;a.pos<c;){var e=a.uint32();switch(e>>>3){case 1:d.addresses&&d.addresses.length||(d.addresses=[]),d.addresses.push(lB.Address.decode(a,a.uint32()));break;case 2:d.protocols&&d.protocols.length||(d.protocols=[]),d.protocols.push(a.string());break;case 3:d.metadata&&d.metadata.length||(d.metadata=[]),d.metadata.push(lB.Metadata.decode(a,a.uint32()));break;case 4:d.pubKey=a.bytes();break;case 5:d.peerRecordEnvelope=a.bytes();break;default:a.skipType(7&e)}}return d},a.fromObject=function(a){if(a instanceof lB.Peer)return a;var b=new lB.Peer;if(a.addresses){if(!Array.isArray(a.addresses))throw TypeError(".Peer.addresses: array expected");b.addresses=[];for(var c=0;c<a.addresses.length;++c){if("object"!=typeof a.addresses[c])throw TypeError(".Peer.addresses: object expected");b.addresses[c]=lB.Address.fromObject(a.addresses[c])}}if(a.protocols){if(!Array.isArray(a.protocols))throw TypeError(".Peer.protocols: array expected");b.protocols=[];for(var c=0;c<a.protocols.length;++c)b.protocols[c]=String(a.protocols[c])}if(a.metadata){if(!Array.isArray(a.metadata))throw TypeError(".Peer.metadata: array expected");b.metadata=[];for(var c=0;c<a.metadata.length;++c){if("object"!=typeof a.metadata[c])throw TypeError(".Peer.metadata: object expected");b.metadata[c]=lB.Metadata.fromObject(a.metadata[c])}}return null!=a.pubKey&&("string"==typeof a.pubKey?lA.base64.decode(a.pubKey,b.pubKey=lA.newBuffer(lA.base64.length(a.pubKey)),0):a.pubKey.length&&(b.pubKey=a.pubKey)),null!=a.peerRecordEnvelope&&("string"==typeof a.peerRecordEnvelope?lA.base64.decode(a.peerRecordEnvelope,b.peerRecordEnvelope=lA.newBuffer(lA.base64.length(a.peerRecordEnvelope)),0):a.peerRecordEnvelope.length&&(b.peerRecordEnvelope=a.peerRecordEnvelope)),b},a.toObject=function(a,b){b||(b={});var c={};if((b.arrays||b.defaults)&&(c.addresses=[],c.protocols=[],c.metadata=[]),a.addresses&&a.addresses.length){c.addresses=[];for(var d=0;d<a.addresses.length;++d)c.addresses[d]=lB.Address.toObject(a.addresses[d],b)}if(a.protocols&&a.protocols.length){c.protocols=[];for(var d=0;d<a.protocols.length;++d)c.protocols[d]=a.protocols[d]}if(a.metadata&&a.metadata.length){c.metadata=[];for(var d=0;d<a.metadata.length;++d)c.metadata[d]=lB.Metadata.toObject(a.metadata[d],b)}return null!=a.pubKey&&a.hasOwnProperty("pubKey")&&(c.pubKey=b.bytes===String?lA.base64.encode(a.pubKey,0,a.pubKey.length):b.bytes===Array?Array.prototype.slice.call(a.pubKey):a.pubKey,b.oneofs&&(c._pubKey="pubKey")),null!=a.peerRecordEnvelope&&a.hasOwnProperty("peerRecordEnvelope")&&(c.peerRecordEnvelope=b.bytes===String?lA.base64.encode(a.peerRecordEnvelope,0,a.peerRecordEnvelope.length):b.bytes===Array?Array.prototype.slice.call(a.peerRecordEnvelope):a.peerRecordEnvelope,b.oneofs&&(c._peerRecordEnvelope="peerRecordEnvelope")),c},a.prototype.toJSON=function(){return this.constructor.toObject(this,kT.util.toJSONOptions)},a})();lB.Address=(()=>{function a(a){if(a)for(var b=Object.keys(a),c=0;c<b.length;++c)null!=a[b[c]]&&(this[b[c]]=a[b[c]])}a.prototype.multiaddr=lA.newBuffer([]),a.prototype.isCertified=null;let b;return Object.defineProperty(a.prototype,"_isCertified",{get:lA.oneOfGetter(b=["isCertified"]),set:lA.oneOfSetter(b)}),a.encode=function(a,b){return b||(b=lz.create()),null!=a.multiaddr&&Object.hasOwnProperty.call(a,"multiaddr")&&b.uint32(10).bytes(a.multiaddr),null!=a.isCertified&&Object.hasOwnProperty.call(a,"isCertified")&&b.uint32(16).bool(a.isCertified),b},a.decode=function(a,b){a instanceof ly||(a=ly.create(a));for(var c=void 0===b?a.len:a.pos+b,d=new lB.Address;a.pos<c;){var e=a.uint32();switch(e>>>3){case 1:d.multiaddr=a.bytes();break;case 2:d.isCertified=a.bool();break;default:a.skipType(7&e)}}return d},a.fromObject=function(a){if(a instanceof lB.Address)return a;var b=new lB.Address;return null!=a.multiaddr&&("string"==typeof a.multiaddr?lA.base64.decode(a.multiaddr,b.multiaddr=lA.newBuffer(lA.base64.length(a.multiaddr)),0):a.multiaddr.length&&(b.multiaddr=a.multiaddr)),null!=a.isCertified&&(b.isCertified=Boolean(a.isCertified)),b},a.toObject=function(a,b){b||(b={});var c={};return b.defaults&&(b.bytes===String?c.multiaddr="":(c.multiaddr=[],b.bytes!==Array&&(c.multiaddr=lA.newBuffer(c.multiaddr)))),null!=a.multiaddr&&a.hasOwnProperty("multiaddr")&&(c.multiaddr=b.bytes===String?lA.base64.encode(a.multiaddr,0,a.multiaddr.length):b.bytes===Array?Array.prototype.slice.call(a.multiaddr):a.multiaddr),null!=a.isCertified&&a.hasOwnProperty("isCertified")&&(c.isCertified=a.isCertified,b.oneofs&&(c._isCertified="isCertified")),c},a.prototype.toJSON=function(){return this.constructor.toObject(this,kT.util.toJSONOptions)},a})(),lB.Metadata=(()=>{function a(a){if(a)for(var b=Object.keys(a),c=0;c<b.length;++c)null!=a[b[c]]&&(this[b[c]]=a[b[c]])}return a.prototype.key="",a.prototype.value=lA.newBuffer([]),a.encode=function(a,b){return b||(b=lz.create()),null!=a.key&&Object.hasOwnProperty.call(a,"key")&&b.uint32(10).string(a.key),null!=a.value&&Object.hasOwnProperty.call(a,"value")&&b.uint32(18).bytes(a.value),b},a.decode=function(a,b){a instanceof ly||(a=ly.create(a));for(var c=void 0===b?a.len:a.pos+b,d=new lB.Metadata;a.pos<c;){var e=a.uint32();switch(e>>>3){case 1:d.key=a.string();break;case 2:d.value=a.bytes();break;default:a.skipType(7&e)}}return d},a.fromObject=function(a){if(a instanceof lB.Metadata)return a;var b=new lB.Metadata;return null!=a.key&&(b.key=String(a.key)),null!=a.value&&("string"==typeof a.value?lA.base64.decode(a.value,b.value=lA.newBuffer(lA.base64.length(a.value)),0):a.value.length&&(b.value=a.value)),b},a.toObject=function(a,b){b||(b={});var c={};return b.defaults&&(c.key="",b.bytes===String?c.value="":(c.value=[],b.bytes!==Array&&(c.value=lA.newBuffer(c.value)))),null!=a.key&&a.hasOwnProperty("key")&&(c.key=a.key),null!=a.value&&a.hasOwnProperty("value")&&(c.value=b.bytes===String?lA.base64.encode(a.value,0,a.value.length):b.bytes===Array?Array.prototype.slice.call(a.value):a.value),c},a.prototype.toJSON=function(){return this.constructor.toObject(this,kT.util.toJSONOptions)},a})();let lD=kT.Reader,lE=kT.Writer,lF=kT.util,lG=kT.roots.default||(kT.roots.default={}),lH=lG.Envelope=(()=>{function a(a){if(a)for(var b=Object.keys(a),c=0;c<b.length;++c)null!=a[b[c]]&&(this[b[c]]=a[b[c]])}return a.prototype.publicKey=lF.newBuffer([]),a.prototype.payloadType=lF.newBuffer([]),a.prototype.payload=lF.newBuffer([]),a.prototype.signature=lF.newBuffer([]),a.encode=function(a,b){return b||(b=lE.create()),null!=a.publicKey&&Object.hasOwnProperty.call(a,"publicKey")&&b.uint32(10).bytes(a.publicKey),null!=a.payloadType&&Object.hasOwnProperty.call(a,"payloadType")&&b.uint32(18).bytes(a.payloadType),null!=a.payload&&Object.hasOwnProperty.call(a,"payload")&&b.uint32(26).bytes(a.payload),null!=a.signature&&Object.hasOwnProperty.call(a,"signature")&&b.uint32(42).bytes(a.signature),b},a.decode=function(a,b){a instanceof lD||(a=lD.create(a));for(var c=void 0===b?a.len:a.pos+b,d=new lG.Envelope;a.pos<c;){var e=a.uint32();switch(e>>>3){case 1:d.publicKey=a.bytes();break;case 2:d.payloadType=a.bytes();break;case 3:d.payload=a.bytes();break;case 5:d.signature=a.bytes();break;default:a.skipType(7&e)}}return d},a.fromObject=function(a){if(a instanceof lG.Envelope)return a;var b=new lG.Envelope;return null!=a.publicKey&&("string"==typeof a.publicKey?lF.base64.decode(a.publicKey,b.publicKey=lF.newBuffer(lF.base64.length(a.publicKey)),0):a.publicKey.length&&(b.publicKey=a.publicKey)),null!=a.payloadType&&("string"==typeof a.payloadType?lF.base64.decode(a.payloadType,b.payloadType=lF.newBuffer(lF.base64.length(a.payloadType)),0):a.payloadType.length&&(b.payloadType=a.payloadType)),null!=a.payload&&("string"==typeof a.payload?lF.base64.decode(a.payload,b.payload=lF.newBuffer(lF.base64.length(a.payload)),0):a.payload.length&&(b.payload=a.payload)),null!=a.signature&&("string"==typeof a.signature?lF.base64.decode(a.signature,b.signature=lF.newBuffer(lF.base64.length(a.signature)),0):a.signature.length&&(b.signature=a.signature)),b},a.toObject=function(a,b){b||(b={});var c={};return b.defaults&&(b.bytes===String?c.publicKey="":(c.publicKey=[],b.bytes!==Array&&(c.publicKey=lF.newBuffer(c.publicKey))),b.bytes===String?c.payloadType="":(c.payloadType=[],b.bytes!==Array&&(c.payloadType=lF.newBuffer(c.payloadType))),b.bytes===String?c.payload="":(c.payload=[],b.bytes!==Array&&(c.payload=lF.newBuffer(c.payload))),b.bytes===String?c.signature="":(c.signature=[],b.bytes!==Array&&(c.signature=lF.newBuffer(c.signature)))),null!=a.publicKey&&a.hasOwnProperty("publicKey")&&(c.publicKey=b.bytes===String?lF.base64.encode(a.publicKey,0,a.publicKey.length):b.bytes===Array?Array.prototype.slice.call(a.publicKey):a.publicKey),null!=a.payloadType&&a.hasOwnProperty("payloadType")&&(c.payloadType=b.bytes===String?lF.base64.encode(a.payloadType,0,a.payloadType.length):b.bytes===Array?Array.prototype.slice.call(a.payloadType):a.payloadType),null!=a.payload&&a.hasOwnProperty("payload")&&(c.payload=b.bytes===String?lF.base64.encode(a.payload,0,a.payload.length):b.bytes===Array?Array.prototype.slice.call(a.payload):a.payload),null!=a.signature&&a.hasOwnProperty("signature")&&(c.signature=b.bytes===String?lF.base64.encode(a.signature,0,a.signature.length):b.bytes===Array?Array.prototype.slice.call(a.signature):a.signature),c},a.prototype.toJSON=function(){return this.constructor.toObject(this,kT.util.toJSONOptions)},a})(),lI=kT.Reader,lJ=kT.Writer,lK=kT.util,lL=kT.roots.default||(kT.roots.default={}),lM=lL.PeerRecord=(()=>{function a(a){if(this.addresses=[],a)for(var b=Object.keys(a),c=0;c<b.length;++c)null!=a[b[c]]&&(this[b[c]]=a[b[c]])}return a.prototype.peerId=lK.newBuffer([]),a.prototype.seq=lK.Long?lK.Long.fromBits(0,0,!0):0,a.prototype.addresses=lK.emptyArray,a.encode=function(a,b){if(b||(b=lJ.create()),null!=a.peerId&&Object.hasOwnProperty.call(a,"peerId")&&b.uint32(10).bytes(a.peerId),null!=a.seq&&Object.hasOwnProperty.call(a,"seq")&&b.uint32(16).uint64(a.seq),null!=a.addresses&&a.addresses.length)for(var c=0;c<a.addresses.length;++c)lL.PeerRecord.AddressInfo.encode(a.addresses[c],b.uint32(26).fork()).ldelim();return b},a.decode=function(a,b){a instanceof lI||(a=lI.create(a));for(var c=void 0===b?a.len:a.pos+b,d=new lL.PeerRecord;a.pos<c;){var e=a.uint32();switch(e>>>3){case 1:d.peerId=a.bytes();break;case 2:d.seq=a.uint64();break;case 3:d.addresses&&d.addresses.length||(d.addresses=[]),d.addresses.push(lL.PeerRecord.AddressInfo.decode(a,a.uint32()));break;default:a.skipType(7&e)}}return d},a.fromObject=function(a){if(a instanceof lL.PeerRecord)return a;var b=new lL.PeerRecord;if(null!=a.peerId&&("string"==typeof a.peerId?lK.base64.decode(a.peerId,b.peerId=lK.newBuffer(lK.base64.length(a.peerId)),0):a.peerId.length&&(b.peerId=a.peerId)),null!=a.seq&&(lK.Long?(b.seq=lK.Long.fromValue(a.seq)).unsigned=!0:"string"==typeof a.seq?b.seq=parseInt(a.seq,10):"number"==typeof a.seq?b.seq=a.seq:"object"==typeof a.seq&&(b.seq=new lK.LongBits(a.seq.low>>>0,a.seq.high>>>0).toNumber(!0))),a.addresses){if(!Array.isArray(a.addresses))throw TypeError(".PeerRecord.addresses: array expected");b.addresses=[];for(var c=0;c<a.addresses.length;++c){if("object"!=typeof a.addresses[c])throw TypeError(".PeerRecord.addresses: object expected");b.addresses[c]=lL.PeerRecord.AddressInfo.fromObject(a.addresses[c])}}return b},a.toObject=function(a,b){b||(b={});var c={};if((b.arrays||b.defaults)&&(c.addresses=[]),b.defaults){if(b.bytes===String?c.peerId="":(c.peerId=[],b.bytes!==Array&&(c.peerId=lK.newBuffer(c.peerId))),lK.Long){var d=new lK.Long(0,0,!0);c.seq=b.longs===String?d.toString():b.longs===Number?d.toNumber():d}else c.seq=b.longs===String?"0":0}if(null!=a.peerId&&a.hasOwnProperty("peerId")&&(c.peerId=b.bytes===String?lK.base64.encode(a.peerId,0,a.peerId.length):b.bytes===Array?Array.prototype.slice.call(a.peerId):a.peerId),null!=a.seq&&a.hasOwnProperty("seq")&&("number"==typeof a.seq?c.seq=b.longs===String?String(a.seq):a.seq:c.seq=b.longs===String?lK.Long.prototype.toString.call(a.seq):b.longs===Number?new lK.LongBits(a.seq.low>>>0,a.seq.high>>>0).toNumber(!0):a.seq),a.addresses&&a.addresses.length){c.addresses=[];for(var e=0;e<a.addresses.length;++e)c.addresses[e]=lL.PeerRecord.AddressInfo.toObject(a.addresses[e],b)}return c},a.prototype.toJSON=function(){return this.constructor.toObject(this,kT.util.toJSONOptions)},a.AddressInfo=function(){function a(a){if(a)for(var b=Object.keys(a),c=0;c<b.length;++c)null!=a[b[c]]&&(this[b[c]]=a[b[c]])}return a.prototype.multiaddr=lK.newBuffer([]),a.encode=function(a,b){return b||(b=lJ.create()),null!=a.multiaddr&&Object.hasOwnProperty.call(a,"multiaddr")&&b.uint32(10).bytes(a.multiaddr),b},a.decode=function(a,b){a instanceof lI||(a=lI.create(a));for(var c=void 0===b?a.len:a.pos+b,d=new lL.PeerRecord.AddressInfo;a.pos<c;){var e=a.uint32();e>>>3==1?d.multiaddr=a.bytes():a.skipType(7&e)}return d},a.fromObject=function(a){if(a instanceof lL.PeerRecord.AddressInfo)return a;var b=new lL.PeerRecord.AddressInfo;return null!=a.multiaddr&&("string"==typeof a.multiaddr?lK.base64.decode(a.multiaddr,b.multiaddr=lK.newBuffer(lK.base64.length(a.multiaddr)),0):a.multiaddr.length&&(b.multiaddr=a.multiaddr)),b},a.toObject=function(a,b){b||(b={});var c={};return b.defaults&&(b.bytes===String?c.multiaddr="":(c.multiaddr=[],b.bytes!==Array&&(c.multiaddr=lK.newBuffer(c.multiaddr)))),null!=a.multiaddr&&a.hasOwnProperty("multiaddr")&&(c.multiaddr=b.bytes===String?lK.base64.encode(a.multiaddr,0,a.multiaddr.length):b.bytes===Array?Array.prototype.slice.call(a.multiaddr):a.multiaddr),c},a.prototype.toJSON=function(){return this.constructor.toObject(this,kT.util.toJSONOptions)},a}(),a})();var lN=c(46584);async function lO(a,b=()=>{}){b(0,"Storing each peerstore key under a single datastore key"),await a.datastore.open();let c={},d=[];for await(let{key:e,value:f}of a.datastore.query({prefix:"/peers"})){d.push(e);let g=e.toString(),[h,i,j,k,l]=g.split("/");if("peers"===i&&["protos","addrs","metadata","keys"].includes(j)&&k){if(c[k]=c[k]||{addresses:[],protocols:[],metadata:[]},"protos"===j){let m=ls.decode(f);c[k].protocols=m.protocols.sort()}else if("addrs"===j){let n=lx.decode(f);c[k].addresses=n.addrs.sort((a,b)=>new lN.Multiaddr(a.multiaddr).toString().localeCompare(new lN.Multiaddr(b.multiaddr).toString())),n.certifiedRecord&&n.certifiedRecord.raw&&(c[k].peerRecordEnvelope=n.certifiedRecord.raw)}else"metadata"===j?c[k].metadata.push({key:l,value:f}):"keys"===j&&(c[k].pubKey=f)}}for(let o of(b(33,"Read peer data from store"),d))await a.datastore.delete(o);for(let p of(b(66,"Removed existing peer data from store"),Object.keys(c))){let q=c[p];q.metadata=q.metadata.sort((a,b)=>a.key.localeCompare(b.key));let r=lC.encode(q).finish();await a.datastore.put(new be(`/peers/${p}`),r)}await a.datastore.close(),b(100,"Stored each peerstore key under a single datastore key")}async function lP(a,b=()=>{}){b(0,"Storing each peerstore key under a multiple datastore keys"),await a.datastore.open();let c={},d=[];for await(let{key:e,value:f}of a.datastore.query({prefix:"/peers"})){d.push(e);let g=e.toString(),[h,i,j]=g.split("/");c[j]=lC.decode(f)}for(let k of(b(33,"Read peer data from store"),d))await a.datastore.delete(k);for(let[l,m]of(b(66,"Removed existing peer data from store"),Object.entries(c))){if(m.protocols&&m.protocols.length>0&&await a.datastore.put(new be(`/peers/protos/${l}`),ls.encode({protocols:m.protocols}).finish()),m.addresses&&m.addresses.length>0){let n=m.peerRecordEnvelope,o;if(n){let p=lH.decode(n),q=lM.decode(p.payload);o={raw:n,seq:q.seq}}await a.datastore.put(new be(`/peers/addrs/${l}`),lx.encode({addrs:m.addresses,certifiedRecord:o}).finish())}if(m.metadata&&m.metadata.length>0)for(let{key:r,value:s}of m.metadata)await a.datastore.put(new be(`/peers/metadata/${l}/${r}`),s);m.pubKey&&await a.datastore.put(new be(`/peers/keys/${l}`),m.pubKey)}await a.datastore.close(),b(100,"Stored each peerstore key under multiple datastore keys")}kT.util.Long=void 0,kT.configure();let lQ={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0};Object.assign({version:1},lQ),Object.assign({version:2},lQ),Object.assign({version:3},lQ),Object.assign({version:4},lQ),Object.assign({version:5},lQ),Object.assign({version:6},lQ),Object.assign({version:7},lQ);class lR extends Error{constructor(a){super(a),this.name="NonReversibleMigrationError",this.code=lR.code,this.message=a}}lR.code="ERR_NON_REVERSIBLE_MIGRATION";class lS extends Error{constructor(a){super(a),this.name="NotInitializedRepoError",this.code=lS.code,this.message=a}}lS.code="ERR_NOT_INITIALIZED_REPO";class lT extends Error{constructor(a){super(a),this.name="RequiredParameterError",this.code=lT.code,this.message=a}}lT.code="ERR_REQUIRED_PARAMETER";class lU extends Error{constructor(a){super(a),this.name="InvalidValueError",this.code=lU.code,this.message=a}}lU.code="ERR_INVALID_VALUE";class lV extends Error{constructor(a){super(a),this.name="MissingRepoOptionsError",this.code=lV.code,this.message=a}}lV.code="ERR_MISSING_REPO_OPTIONS";let lW=f2("ipfs:repo:migrator:repo:init");async function lX(a){if(!a)throw new lV("Please pass repo options when trying to open a repo");let b=a.root;try{await b.open();let c=await b.has(lb),d=await b.has(la);if(!c||!d)return lW(`Version entry present: ${c}`),lW(`Config entry present: ${d}`),!1;return!0}catch(e){return lW("While checking if repo is initialized error was thrown: "+e.message),!1}finally{if(void 0!==b)try{await b.close()}catch{}}}f2("ipfs:repo:migrator");let lY=null;c(79830);class lZ extends Error{constructor(a){super(a),this.name="LockExistsError",this.code=lZ.code}}lZ.code="ERR_LOCK_EXISTS";class l$ extends Error{constructor(a){super(a),this.name="NotFoundError",this.code=l$.code}}l$.code="ERR_NOT_FOUND";class l_ extends Error{constructor(a){super(a),this.name="InvalidRepoVersionError",this.code=l_.code}}l_.code="ERR_INVALID_REPO_VERSION";f2("ipfs:repo:version"),new be("version");var l0=c(56827);c(57027),l0.default&&l0.default,new be("config"),c(33694),new be("datastore_spec"),new be("api"),c(40677);let l1=f2("ipfs:repo:lock:memory"),l2="repo.lock",l3={},l4=f2("ipfs:repo:utils:walk-dag");async function*l5(a,b,c,d){try{let e=await b.get(a,d),f=await c(a.code),g=createUnsafe({bytes:e,cid:a,codec:f});for(let[,h]of g.links())yield h,yield*l5(h,b,c,d)}catch(i){throw l4("Could not walk DAG for CID",a.toString(),i),i}}c(59526),c(25457);let l6=f2("ipfs:repo:gc"),l7=bJ().code,l8=new be("/local/filesroot"),l9=f2("ipfs:repo"),ma=Number.MAX_SAFE_INTEGER;async function mb(a){let b=BigInt(0);for await(let c of a.query({}))b+=BigInt(c.value.byteLength),b+=BigInt(c.key.uint8Array().byteLength);return b}function mc(a){return a.Datastore=Object.assign({},defaultDatastore,_get(a,"datastore")),a}function md(a){let b={...defaultDatastore.Spec,..._get(a,"Datastore.Spec")};return{type:b.type,mounts:b.mounts.map(a=>({mountpoint:a.mountpoint,type:a.child.type,path:a.child.path,shardFunc:a.child.shardFunc}))}}c(97515),c(63145);c(76701);let me={ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID"};(m4=ac||(ac={})).codec=()=>cG({1:{name:"publicKey",codec:ch},2:{name:"payloadType",codec:ch},3:{name:"payload",codec:ch},5:{name:"signature",codec:ch}}),m4.encode=a=>b8(a,m4.codec()),m4.decode=a=>b7(a,m4.codec());class mf{constructor(a){let{peerId:b,payloadType:c,payload:d,signature:e}=a;this.peerId=b,this.payloadType=c,this.payload=d,this.signature=e}marshal(){if(null==this.peerId.publicKey)throw Error("Missing public key");return null==this.marshaled&&(this.marshaled=ac.encode({publicKey:this.peerId.publicKey,payloadType:this.payloadType,payload:this.payload,signature:this.signature})),this.marshaled}equals(a){return(0,bK.equals)(this.marshal(),a.marshal())}async validate(a){let b=mg(a,this.payloadType,this.payload);if(null==this.peerId.publicKey)throw Error("Missing public key");let c=fC(this.peerId.publicKey);return await c.verify(b,this.signature)}}mf.createFromProtobuf=async a=>{let b=ac.decode(a),c=await (0,bF.y5)(b.publicKey);return new mf({peerId:c,payloadType:b.payloadType,payload:b.payload,signature:b.signature})},mf.seal=async(a,b)=>{let c=a.domain,d=a.codec,e=a.marshal(),f=mg(c,d,e);if(null==b.privateKey)throw Error("Missing private key");let g=await fD(b.privateKey),h=await g.sign(f);return new mf({peerId:b,payloadType:d,payload:e,signature:h})},mf.openAndCertify=async(a,b)=>{let c=await mf.createFromProtobuf(a),d=await c.validate(b);if(!d)throw aZ(Error("envelope signature is not valid for the given domain"),me.ERR_SIGNATURE_NOT_VALID);return c};let mg=(a,b,c)=>{let d=(0,a8.fromString)(a),e=iC.encode(d.byteLength),f=iC.encode(b.length),g=iC.encode(c.length);return(0,bM.concat)([new Uint8Array(e),d,new Uint8Array(f),b,new Uint8Array(g),c])};(m6=(m5=ad||(ad={})).AddressInfo||(m5.AddressInfo={})).codec=()=>cG({1:{name:"multiaddr",codec:ch}}),m6.encode=a=>b8(a,m6.codec()),m6.decode=a=>b7(a,m6.codec()),m5.codec=()=>cG({1:{name:"peerId",codec:ch},2:{name:"seq",codec:c1},3:{name:"addresses",codec:m5.AddressInfo.codec(),repeats:!0}}),m5.encode=a=>b8(a,m5.codec()),m5.decode=a=>b7(a,m5.codec());let mh=Uint8Array.from([3,1]);class mi{constructor(a){this.domain=mi.DOMAIN,this.codec=mi.CODEC;let{peerId:b,multiaddrs:c,seqNumber:d}=a;this.peerId=b,this.multiaddrs=c??[],this.seqNumber=d??BigInt(Date.now())}marshal(){return null==this.marshaled&&(this.marshaled=ad.encode({peerId:this.peerId.toBytes(),seq:BigInt(this.seqNumber),addresses:this.multiaddrs.map(a=>({multiaddr:a.bytes}))})),this.marshaled}equals(a){return!!(a instanceof mi&&this.peerId.equals(a.peerId)&&this.seqNumber===a.seqNumber&&function(a,b){let c=(a,b)=>a.toString().localeCompare(b.toString());return a.length===b.length&&b.sort(c)&&a.sort(c).every((a,c)=>b[c].equals(a))}(this.multiaddrs,a.multiaddrs))}}mi.createFromProtobuf=a=>{let b=ad.decode(a),c=(0,bF.cv)(b.peerId),d=(b.addresses??[]).map(a=>new gh.sc(a.multiaddr)),e=b.seq;return new mi({peerId:c,multiaddrs:d,seqNumber:e})},mi.DOMAIN="libp2p-peer-record",mi.CODEC=mh;let mj=Symbol.for("@libp2p/topology"),mk=()=>{};class ml{constructor(a){this.min=a.min??0,this.max=a.max??1/0,this.peers=new Set,this.onConnect=a.onConnect??mk,this.onDisconnect=a.onDisconnect??mk}get[Symbol.toStringTag](){return mj.toString()}get[mj](){return!0}async setRegistrar(a){this.registrar=a}disconnect(a){this.onDisconnect(a)}}var mm=function(a,b,c,d){if("a"===c&&!d)throw TypeError("Private accessor was defined without a getter");if("function"==typeof b?a!==b||!d:!b.has(a))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)};class mn extends EventTarget{constructor(){super(...arguments),ae.set(this,new Map)}listenerCount(a){let b=mm(this,ae,"f").get(a);return null==b?0:b.length}addEventListener(a,b,c){super.addEventListener(a,b,c);let d=mm(this,ae,"f").get(a);null==d&&(d=[],mm(this,ae,"f").set(a,d)),d.push({callback:b,once:(!0!==c&& !1!==c&&c?.once)?? !1})}removeEventListener(a,b,c){super.removeEventListener(a.toString(),b??null,c);let d=mm(this,ae,"f").get(a);null!=d&&(d=d.filter(({callback:a})=>a!==b),mm(this,ae,"f").set(a,d))}dispatchEvent(a){let b=super.dispatchEvent(a),c=mm(this,ae,"f").get(a.type);return null==c||(c=c.filter(({once:a})=>!a),mm(this,ae,"f").set(a.type,c)),b}}ae=new WeakMap;class mo extends Event{constructor(a,b){super(a,b),this.detail=b?.detail}}let mp=globalThis.CustomEvent??mo,mq=(a,b,c)=>{let d=iC.encode(a,b,c);return mq.bytes=iC.encode.bytes,b??Uint8Array.from(d)};function mr(a){a=a??{};let b=Math.max(a.poolSize??10240,a.minPoolSize??8),c=a.lengthEncoder??mq,d=async function*(a){let d=new Uint8Array(b),e=0;for await(let f of a){c(f.length,d,e);let g=d.slice(e,e+c.bytes);e+=c.bytes,d.length-e<8&&(d=new Uint8Array(b),e=0),yield(0,bM.concat)([g,f.slice()],g.length+f.length)}};return d}mq.bytes=0,mr.single=(a,b)=>{b=b??{};let c=b.lengthEncoder??mq;return new bQ(c(a.length),a.slice())};let ms=a=>{let b=iC.decode(a);return ms.bytes=iC.decode.bytes,b};ms.bytes=0;let mt=new bQ,mu={LENGTH:"readLength",DATA:"readData"},mv={[mu.LENGTH]:(a,b,c,d)=>{let e=d?.lengthDecoder??ms,f=d?.maxLengthLength??8,g=d?.maxDataLength??4194304;b.append(a);let h;try{h=e(b.slice())}catch(i){if(b.length>f)throw aZ(Error("message length too long"),"ERR_MSG_LENGTH_TOO_LONG");if(i instanceof RangeError)return{mode:mu.LENGTH,buffer:b,chunk:void 0,state:void 0,data:void 0};throw i}if(h>g)throw aZ(Error("message data too long"),"ERR_MSG_DATA_TOO_LONG");return(a=b.subarray(e.bytes),b=new bQ,d?.onLength!=null&&d.onLength(h),h<=0)?{mode:mu.LENGTH,chunk:a,buffer:b,data:mt}:{mode:mu.DATA,chunk:a,buffer:b,state:{dataLength:h},data:void 0}},[mu.DATA]:(a,b,c,d)=>{if(b.append(a),null==c)throw Error("state is required");if(b.length<c.dataLength)return{mode:mu.DATA,buffer:b,state:c,chunk:void 0,data:void 0};let{dataLength:e}=c,f=b.subarray(0,e),g=b.length>e?b.subarray(e):void 0;return b=new bQ,{mode:mu.LENGTH,chunk:g,buffer:b,state:void 0,data:f}}};function mw(a){let b=async function*(b){let c=new bQ,d=mu.LENGTH,e;for await(let f of b){let g=new bQ(f);for(;null!=g;){let h=mv[d](g,c,e,a);if(d=h.mode,g=h.chunk,c=h.buffer,e=h.state,null!=h.data){let i=h.data.slice();a?.onData!=null&&a.onData(i),yield i}}}if(c.length>0)throw aZ(Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")};return b}mw.fromReader=(a,b)=>{let c=1,d=async function*(){for(;;)try{let{done:b,value:d}=await a.next(c);if(!0===b)return;null!=d&&(yield d)}catch(e){if("ERR_UNDER_READ"===e.code)return{done:!0,value:null};throw e}finally{c=1}}(),e=a=>{c=a};return mw({...b??{},onLength:e})(d)};let mx=(a,b,c)=>{var d;b=b??(d=4,globalThis?.Buffer?.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(d):new Uint8Array(d));let e=new DataView(b.buffer,b.byteOffset,b.byteLength);return e.setInt32(c??0,a,!1),b};mx.bytes=4;let my=a=>{if(a.length<4)throw RangeError("Could not decode int32BE");let b=new DataView(a.buffer,a.byteOffset,a.byteLength);return b.getInt32(0,!1)};my.bytes=4;class mz{constructor(a){if(!(a>0)||(a-1&a)!=0)throw Error("Max size for a FixedFIFO should be a power of two");this.buffer=Array(a),this.mask=a-1,this.top=0,this.btm=0,this.next=null}push(a){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=a,this.top=this.top+1&this.mask,!0)}shift(){let a=this.buffer[this.btm];if(void 0!==a)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,a}isEmpty(){return void 0===this.buffer[this.btm]}}class mA{constructor(a){this.hwm=a??16,this.head=new mz(this.hwm),this.tail=this.head}push(a){if(!this.head.push(a)){let b=this.head;this.head=b.next=new mz(2*this.head.buffer.length),this.head.push(a)}}shift(){let a=this.tail.shift();if(void 0===a&&null!=this.tail.next){let b=this.tail.next;return this.tail.next=null,this.tail=b,this.tail.shift()}return a}isEmpty(){return this.head.isEmpty()}}function mB(a){let b=a=>{let b=a.shift();if(null==b)return{done:!0};if(null!=b.error)throw b.error;return{done:!0===b.done,value:b.value}};return mC(b,a)}function mC(a,b){let c=(b=b??{}).onEnd,d=new mA,e,f,g,h=async()=>d.isEmpty()?g?{done:!0}:await new Promise((b,c)=>{f=g=>{f=null,d.push(g);try{b(a(d))}catch(h){c(h)}return e}}):a(d),i=a=>null!=f?f(a):(d.push(a),e),j=a=>(d=new mA,null!=f)?f({error:a}):(d.push({error:a}),e),k=a=>g?e:i({done:!1,value:a}),l=a=>g?e:(g=!0,null!=a?j(a):i({done:!0})),m=()=>(d=new mA,l(),{done:!0}),n=a=>(l(a),{done:!0});if(e={[Symbol.asyncIterator](){return this},next:h,return:m,throw:n,push:k,end:l},null==c)return e;let o=e;return e={[Symbol.asyncIterator](){return this},next(){return o.next()},throw(a){return o.throw(a),null!=c&&(c(a),c=void 0),{done:!0}},return(){return o.return(),null!=c&&(c(),c=void 0),{done:!0}},push:k,end(a){return o.end(a),null!=c&&(c(a),c=void 0),e}}}class mD extends Error{constructor(a,b){super(a??"The operation was aborted"),this.type="aborted",this.code=b??"ABORT_ERR"}}let mE=(0,aY.kg)("libp2p-pubsub:peer-streams");class mF extends mn{constructor(a){super(),this.id=a.id,this.protocol=a.protocol,this._inboundAbortController=new AbortController,this.closed=!1}get isReadable(){return Boolean(this.inboundStream)}get isWritable(){return Boolean(this.outboundStream)}write(a){if(null==this.outboundStream){let b=this.id.toString();throw Error("No writable connection to "+b)}this.outboundStream.push(a)}attachInboundStream(a){return this._rawInboundStream=a,this.inboundStream=function a(b,c,d){let e=d??{},f=function(a){if(null!=a){if("function"==typeof a[Symbol.iterator])return a[Symbol.iterator]();if("function"==typeof a[Symbol.asyncIterator])return a[Symbol.asyncIterator]();if("function"==typeof a.next)return a}throw Error("argument is not an iterator or iterable")}(b);async function*g(){let a,d=()=>{null!=a&&a()};for(c.addEventListener("abort",d);;){let g;try{if(c.aborted){let{abortMessage:h,abortCode:i}=e;throw new mD(h,i)}let j=new Promise((b,c)=>{a=()=>{let{abortMessage:a,abortCode:b}=e;c(new mD(a,b))}});g=await Promise.race([j,f.next()]),a=null}catch(k){c.removeEventListener("abort",d);let l="aborted"===k.type&&c.aborted;if(l&&null!=e.onAbort&&await e.onAbort(b),"function"==typeof f.return)try{let m=f.return();m instanceof Promise&&m.catch(a=>{null!=e.onReturnError&&e.onReturnError(a)})}catch(n){null!=e.onReturnError&&e.onReturnError(n)}if(l&& !0===e.returnOnAbort)return;throw k}if(!0===g.done)break;yield g.value}c.removeEventListener("abort",d)}return g()}(gN(this._rawInboundStream,mw()),this._inboundAbortController.signal,{returnOnAbort:!0}),this.dispatchEvent(new mp("stream:inbound")),this.inboundStream}async attachOutboundStream(a){let b=this.outboundStream;return null!=this.outboundStream&&await this.outboundStream.end(),this._rawOutboundStream=a,this.outboundStream=mB({onEnd:a=>{null!=this._rawOutboundStream&&null!=this._rawOutboundStream.reset&&this._rawOutboundStream.reset(),this._rawOutboundStream=void 0,this.outboundStream=void 0,null!=a&&this.dispatchEvent(new mp("close"))}}),gN(this.outboundStream,mr(),this._rawOutboundStream).catch(a=>{mE.error(a)}),null==b&&this.dispatchEvent(new mp("stream:outbound")),this.outboundStream}close(){!this.closed&&(this.closed=!0,null!=this.outboundStream&&this.outboundStream.end(),null!=this.inboundStream&&this._inboundAbortController.abort(),this._rawOutboundStream=void 0,this.outboundStream=void 0,this._rawInboundStream=void 0,this.inboundStream=void 0,this.dispatchEvent(new mp("close")))}}(m8=(m7=af||(af={})).SubOpts||(m7.SubOpts={})).codec=()=>cG({1:{name:"subscribe",codec:cd,optional:!0},2:{name:"topic",codec:cW,optional:!0}}),m8.encode=a=>b8(a,m8.codec()),m8.decode=a=>b7(a,m8.codec()),(m9=m7.Message||(m7.Message={})).codec=()=>cG({1:{name:"from",codec:ch,optional:!0},2:{name:"data",codec:ch,optional:!0},3:{name:"seqno",codec:ch,optional:!0},4:{name:"topic",codec:cW},5:{name:"signature",codec:ch,optional:!0},6:{name:"key",codec:ch,optional:!0}}),m9.encode=a=>b8(a,m9.codec()),m9.decode=a=>b7(a,m9.codec()),(na=m7.ControlMessage||(m7.ControlMessage={})).codec=()=>cG({1:{name:"ihave",codec:m7.ControlIHave.codec(),repeats:!0},2:{name:"iwant",codec:m7.ControlIWant.codec(),repeats:!0},3:{name:"graft",codec:m7.ControlGraft.codec(),repeats:!0},4:{name:"prune",codec:m7.ControlPrune.codec(),repeats:!0}}),na.encode=a=>b8(a,na.codec()),na.decode=a=>b7(a,na.codec()),(nb=m7.ControlIHave||(m7.ControlIHave={})).codec=()=>cG({1:{name:"topicID",codec:cW,optional:!0},2:{name:"messageIDs",codec:ch,repeats:!0}}),nb.encode=a=>b8(a,nb.codec()),nb.decode=a=>b7(a,nb.codec()),(nc=m7.ControlIWant||(m7.ControlIWant={})).codec=()=>cG({1:{name:"messageIDs",codec:ch,repeats:!0}}),nc.encode=a=>b8(a,nc.codec()),nc.decode=a=>b7(a,nc.codec()),(nd=m7.ControlGraft||(m7.ControlGraft={})).codec=()=>cG({1:{name:"topicID",codec:cW,optional:!0}}),nd.encode=a=>b8(a,nd.codec()),nd.decode=a=>b7(a,nd.codec()),(ne=m7.ControlPrune||(m7.ControlPrune={})).codec=()=>cG({1:{name:"topicID",codec:cW,optional:!0},2:{name:"peers",codec:m7.PeerInfo.codec(),repeats:!0},3:{name:"backoff",codec:c1,optional:!0}}),ne.encode=a=>b8(a,ne.codec()),ne.decode=a=>b7(a,ne.codec()),(nf=m7.PeerInfo||(m7.PeerInfo={})).codec=()=>cG({1:{name:"peerID",codec:ch,optional:!0},2:{name:"signedPeerRecord",codec:ch,optional:!0}}),nf.encode=a=>b8(a,nf.codec()),nf.decode=a=>b7(a,nf.codec()),m7.codec=()=>cG({1:{name:"subscriptions",codec:m7.SubOpts.codec(),repeats:!0},2:{name:"messages",codec:m7.Message.codec(),repeats:!0},3:{name:"control",codec:m7.ControlMessage.codec(),optional:!0}}),m7.encode=a=>b8(a,m7.codec()),m7.decode=a=>b7(a,m7.codec());let mG="/floodsub/1.0.0",mH="/meshsub/1.0.0",mI="/meshsub/1.1.0";function mJ(a=[],b){return{subscriptions:[],messages:a,control:b?{graft:b.graft||[],prune:b.prune||[],ihave:b.ihave||[],iwant:b.iwant||[]}:void 0}}function mK(a){if(a.length<=1)return a;let b=()=>Math.floor(Math.random()*Math.floor(a.length));for(let c=0;c<a.length;c++){let d=b(),e=a[c];a[c]=a[d],a[d]=e}return a}function mL(a){return a===mH||a===mI}let mM="StrictSign",mN="StrictNoSign";function mO(a){switch(a){case ai.Ignore:return aj.Ignore;case ai.Reject:return aj.Reject}}async function mP(a,b){switch(a){case mM:{if(!b)throw Error("Must provide PeerId");if(null==b.privateKey)throw Error("Cannot sign message, no private key present");if(null==b.publicKey)throw Error("Cannot sign message, no public key present");let c=await fD(b.privateKey);return{type:ah.Signing,author:b,key:b.publicKey,privateKey:c}}case mN:return{type:ah.Anonymous};default:throw Error(`Unknown signature policy "${a}"`)}}(ng=ag||(ag={})).StrictSign="StrictSign",ng.StrictNoSign="StrictNoSign",(nh=ah||(ah={}))[nh.Signing=0]="Signing",nh[nh.Author=1]="Author",nh[nh.Anonymous=2]="Anonymous",(ni=ai||(ai={})).Accept="accept",ni.Ignore="ignore",ni.Reject="reject",(nj=aj||(aj={})).Error="error",nj.Ignore="ignore",nj.Reject="reject",nj.Blacklisted="blacklisted",(nk=ak||(ak={})).InvalidSignature="invalid_signature",nk.InvalidSeqno="invalid_seqno",nk.InvalidPeerId="invalid_peerid",nk.SignaturePresent="signature_present",nk.SeqnoPresent="seqno_present",nk.FromPresent="from_present",nk.TransformFailed="transform_failed",(nl=al||(al={})).duplicate="duplicate",nl.invalid="invalid",nl.valid="valid";let mQ="ERR_INVALID_PEER_SCORE_PARAMS",mR={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyThreshold:0,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:36e5},mS={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function mT(a){if(a.topicWeight<0)throw aZ(Error("invalid topic weight; must be >= 0"),mQ);if(0===a.timeInMeshQuantum)throw aZ(Error("invalid TimeInMeshQuantum; must be non zero"),mQ);if(a.timeInMeshWeight<0)throw aZ(Error("invalid TimeInMeshWeight; must be positive (or 0 to disable)"),mQ);if(0!==a.timeInMeshWeight&&a.timeInMeshQuantum<=0)throw aZ(Error("invalid TimeInMeshQuantum; must be positive"),mQ);if(0!==a.timeInMeshWeight&&a.timeInMeshCap<=0)throw aZ(Error("invalid TimeInMeshCap; must be positive"),mQ);if(a.firstMessageDeliveriesWeight<0)throw aZ(Error("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)"),mQ);if(0!==a.firstMessageDeliveriesWeight&&(a.firstMessageDeliveriesDecay<=0||a.firstMessageDeliveriesDecay>=1))throw aZ(Error("invalid FirstMessageDeliveriesDecay; must be between 0 and 1"),mQ);if(0!==a.firstMessageDeliveriesWeight&&a.firstMessageDeliveriesCap<=0)throw aZ(Error("invalid FirstMessageDeliveriesCap; must be positive"),mQ);if(a.meshMessageDeliveriesWeight>0)throw aZ(Error("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)"),mQ);if(0!==a.meshMessageDeliveriesWeight&&(a.meshMessageDeliveriesDecay<=0||a.meshMessageDeliveriesDecay>=1))throw aZ(Error("invalid MeshMessageDeliveriesDecay; must be between 0 and 1"),mQ);if(0!==a.meshMessageDeliveriesWeight&&a.meshMessageDeliveriesCap<=0)throw aZ(Error("invalid MeshMessageDeliveriesCap; must be positive"),mQ);if(0!==a.meshMessageDeliveriesWeight&&a.meshMessageDeliveriesThreshold<=0)throw aZ(Error("invalid MeshMessageDeliveriesThreshold; must be positive"),mQ);if(a.meshMessageDeliveriesWindow<0)throw aZ(Error("invalid MeshMessageDeliveriesWindow; must be non-negative"),mQ);if(0!==a.meshMessageDeliveriesWeight&&a.meshMessageDeliveriesActivation<1e3)throw aZ(Error("invalid MeshMessageDeliveriesActivation; must be at least 1s"),mQ);if(a.meshFailurePenaltyWeight>0)throw aZ(Error("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)"),mQ);if(0!==a.meshFailurePenaltyWeight&&(a.meshFailurePenaltyDecay<=0||a.meshFailurePenaltyDecay>=1))throw aZ(Error("invalid MeshFailurePenaltyDecay; must be between 0 and 1"),mQ);if(a.invalidMessageDeliveriesWeight>0)throw aZ(Error("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)"),mQ);if(a.invalidMessageDeliveriesDecay<=0||a.invalidMessageDeliveriesDecay>=1)throw aZ(Error("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1"),mQ)}let mU={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};var mV,mW,mX,mY,mZ,m$,m_,m0,m1,m2,m3,m4,m5,m6,m7,m8,m9,na,nb,nc,nd,ne,nf,ng,nh,ni,nj,nk,nl,nm,nn=c(45001);function no(a){return null!=a&&"function"==typeof a.start&&"function"==typeof a.stop}function np(a){return null!=a&&"function"==typeof a.init}(nm=am||(am={}))[nm.unknown=0]="unknown",nm[nm.valid=1]="valid",nm[nm.invalid=2]="invalid",nm[nm.ignored=3]="ignored";class nq{constructor(a={}){this.started=!1,null!=a.peerId&&this.setPeerId(a.peerId),null!=a.addressManager&&this.setAddressManager(a.addressManager),null!=a.peerStore&&this.setPeerStore(a.peerStore),null!=a.upgrader&&this.setUpgrader(a.upgrader),null!=a.metrics&&this.setMetrics(a.metrics),null!=a.registrar&&this.setRegistrar(a.registrar),null!=a.connectionManager&&this.setConnectionManager(a.connectionManager),null!=a.transportManager&&this.setTransportManager(a.transportManager),null!=a.connectionGater&&this.setConnectionGater(a.connectionGater),null!=a.contentRouting&&this.setContentRouting(a.contentRouting),null!=a.peerRouting&&this.setPeerRouting(a.peerRouting),null!=a.datastore&&this.setDatastore(a.datastore),null!=a.connectionProtector&&this.setConnectionProtector(a.connectionProtector),null!=a.dht&&this.setDHT(a.dht),null!=a.pubsub&&this.setPubSub(a.pubsub)}isStarted(){return this.started}async beforeStart(){await Promise.all(Object.values(this).filter(a=>no(a)).map(async a=>{null!=a.beforeStart&&await a.beforeStart()}))}async start(){await Promise.all(Object.values(this).filter(a=>no(a)).map(async a=>{await a.start()})),this.started=!0}async afterStart(){await Promise.all(Object.values(this).filter(a=>no(a)).map(async a=>{null!=a.afterStart&&await a.afterStart()}))}async beforeStop(){await Promise.all(Object.values(this).filter(a=>no(a)).map(async a=>{null!=a.beforeStop&&await a.beforeStop()}))}async stop(){await Promise.all(Object.values(this).filter(a=>no(a)).map(async a=>{await a.stop()})),this.started=!1}async afterStop(){await Promise.all(Object.values(this).filter(a=>no(a)).map(async a=>{null!=a.afterStop&&await a.afterStop()}))}setPeerId(a){return this.peerId=a,a}getPeerId(){if(null==this.peerId)throw aZ(Error("peerId not set"),"ERR_SERVICE_MISSING");return this.peerId}setMetrics(a){return this.metrics=a,np(a)&&a.init(this),a}getMetrics(){return this.metrics}setAddressManager(a){return this.addressManager=a,np(a)&&a.init(this),a}getAddressManager(){if(null==this.addressManager)throw aZ(Error("addressManager not set"),"ERR_SERVICE_MISSING");return this.addressManager}setPeerStore(a){return this.peerStore=a,np(a)&&a.init(this),a}getPeerStore(){if(null==this.peerStore)throw aZ(Error("peerStore not set"),"ERR_SERVICE_MISSING");return this.peerStore}setUpgrader(a){return this.upgrader=a,np(a)&&a.init(this),a}getUpgrader(){if(null==this.upgrader)throw aZ(Error("upgrader not set"),"ERR_SERVICE_MISSING");return this.upgrader}setRegistrar(a){return this.registrar=a,np(a)&&a.init(this),a}getRegistrar(){if(null==this.registrar)throw aZ(Error("registrar not set"),"ERR_SERVICE_MISSING");return this.registrar}setConnectionManager(a){return this.connectionManager=a,np(a)&&a.init(this),a}getConnectionManager(){if(null==this.connectionManager)throw aZ(Error("connectionManager not set"),"ERR_SERVICE_MISSING");return this.connectionManager}setTransportManager(a){return this.transportManager=a,np(a)&&a.init(this),a}getTransportManager(){if(null==this.transportManager)throw aZ(Error("transportManager not set"),"ERR_SERVICE_MISSING");return this.transportManager}setConnectionGater(a){return this.connectionGater=a,np(a)&&a.init(this),a}getConnectionGater(){if(null==this.connectionGater)throw aZ(Error("connectionGater not set"),"ERR_SERVICE_MISSING");return this.connectionGater}setContentRouting(a){return this.contentRouting=a,np(a)&&a.init(this),a}getContentRouting(){if(null==this.contentRouting)throw aZ(Error("contentRouting not set"),"ERR_SERVICE_MISSING");return this.contentRouting}setPeerRouting(a){return this.peerRouting=a,np(a)&&a.init(this),a}getPeerRouting(){if(null==this.peerRouting)throw aZ(Error("peerRouting not set"),"ERR_SERVICE_MISSING");return this.peerRouting}setDatastore(a){return this.datastore=a,np(a)&&a.init(this),a}getDatastore(){if(null==this.datastore)throw aZ(Error("datastore not set"),"ERR_SERVICE_MISSING");return this.datastore}setConnectionProtector(a){return this.connectionProtector=a,np(a)&&a.init(this),a}getConnectionProtector(){return this.connectionProtector}setDHT(a){return this.dht=a,np(a)&&a.init(this),a}getDHT(){if(null==this.dht)throw aZ(Error("dht not set"),"ERR_SERVICE_MISSING");return this.dht}setPubSub(a){return this.pubsub=a,np(a)&&a.init(this),a}getPubSub(){if(null==this.pubsub)throw aZ(Error("pubsub not set"),"ERR_SERVICE_MISSING");return this.pubsub}}let nr=(0,aY.kg)("libp2p:gossipsub:score");class ns{constructor(a){this.entries=new Map,this.validityMs=a.validityMs}get size(){return this.entries.size}put(a,b){this.entries.set(a,{value:b,validUntilMs:Date.now()+this.validityMs})}prune(){let a=Date.now();for(let[b,c]of this.entries.entries())if(c.validUntilMs<a)this.entries.delete(b);else break}has(a){return this.entries.has(a)}get(a){let b=this.entries.get(a);return b&&b.validUntilMs>=Date.now()?b.value:void 0}clear(){this.entries.clear()}}(pp=an||(an={})).forward="forward",pp.publish="publish",(pq=ao||(ao={})).Fanout="fanout",pq.Random="random",pq.Subscribed="subscribed",pq.Outbound="outbound",pq.NotEnough="not_enough",pq.Opportunistic="opportunistic",(pr=ap||(ap={})).Dc="disconnected",pr.BadScore="bad_score",pr.Prune="prune",pr.Unsub="unsubscribed",pr.Excess="excess",(ps=aq||(aq={})).GraftBackoff="graft_backoff",ps.BrokenPromise="broken_promise",ps.MessageDeficit="message_deficit",ps.IPColocation="IP_colocation",(pt=ar||(ar={})).LowScore="low_score",pt.MaxIhave="max_ihave",pt.MaxIasked="max_iasked",(pu=as||(as={})).graylist="graylist",pu.publish="publish",pu.gossip="gossip",pu.mesh="mesh";var nt=c(29309);let nu=(0,a8.fromString)("libp2p-pubsub:");async function nv(a,b,c){switch(a.type){case ah.Signing:{let d={from:a.author.toBytes(),data:c,seqno:(0,nt.randomBytes)(8),topic:b,signature:void 0,key:void 0},e=(0,bM.concat)([nu,af.Message.encode(d)]);return d.signature=await a.privateKey.sign(e),d.key=a.key,d}case ah.Author:return{from:a.author.toBytes(),data:c,seqno:(0,nt.randomBytes)(8),topic:b,signature:void 0,key:void 0};case ah.Anonymous:return{from:void 0,data:c,seqno:void 0,topic:b,signature:void 0,key:void 0}}}async function nw(a,b){switch(a){case mN:if(null!=b.signature)return{valid:!1,error:ak.SignaturePresent};if(null!=b.seqno)return{valid:!1,error:ak.SeqnoPresent};if(null!=b.key)return{valid:!1,error:ak.FromPresent};return{valid:!0,fromPeerId:null};case mM:{if(null==b.seqno||8!==b.seqno.length)return{valid:!1,error:ak.InvalidSeqno};if(null==b.signature)return{valid:!1,error:ak.InvalidSignature};if(null==b.from)return{valid:!1,error:ak.InvalidPeerId};let c;try{c=(0,bF.cv)(b.from)}catch(d){return{valid:!1,error:ak.InvalidPeerId}}let e;if(b.key){if(e=fC(b.key),void 0!==c.publicKey&&!(0,bK.equals)(e.bytes,c.publicKey))return{valid:!1,error:ak.InvalidPeerId}}else{if(null==c.publicKey)return{valid:!1,error:ak.InvalidPeerId};e=fC(c.publicKey)}let f={from:b.from,data:b.data,seqno:b.seqno,topic:b.topic,signature:void 0,key:void 0},g=(0,bM.concat)([nu,af.Message.encode(f)]);if(!await e.verify(g,b.signature))return{valid:!1,error:ak.InvalidSignature};return{valid:!0,fromPeerId:c}}}}let nx=(a,b)=>{let c=(0,a8.fromString)(b.toString(16).padStart(16,"0"),"base16"),d=new Uint8Array(a.length+c.length);return d.set(a,0),d.set(c,a.length),d};async function ny(a){return await dc.sha256.encode(a.data)}function nz(a,b,c,d,e){let f=0,g=new Map;if(Object.entries(b.topics).forEach(([a,b])=>{let d=e.get(a)??"unknown",h=c.topics[a];if(void 0===h)return;let i=g.get(d);i||(i={p1w:0,p2w:0,p3w:0,p3bw:0,p4w:0},g.set(d,i));let j=0,k=0,l=0,m=0,n=0;if(b.inMesh){let o=Math.max(b.meshTime/h.timeInMeshQuantum,h.timeInMeshCap);j+=o*h.timeInMeshWeight}let p=b.firstMessageDeliveries;if(p>h.firstMessageDeliveriesCap&&(p=h.firstMessageDeliveriesCap),k+=p*h.firstMessageDeliveriesWeight,b.meshMessageDeliveriesActive&&b.meshMessageDeliveries<h.meshMessageDeliveriesThreshold){let q=h.meshMessageDeliveriesThreshold-b.meshMessageDeliveries,r=q*q;l+=r*h.meshMessageDeliveriesWeight}let s=b.meshFailurePenalty;m+=s*h.meshFailurePenaltyWeight;let t=b.invalidMessageDeliveries*b.invalidMessageDeliveries;n+=t*h.invalidMessageDeliveriesWeight,f+=(j+k+l+m+n)*h.topicWeight,i.p1w+=j,i.p2w+=k,i.p3w+=l,i.p3bw+=m,i.p4w+=n}),c.topicScoreCap>0&&f>c.topicScoreCap){f=c.topicScoreCap;let h=c.topicScoreCap/f;for(let i of g.values())i.p1w*=h,i.p2w*=h,i.p3w*=h,i.p3bw*=h,i.p4w*=h}let j=0,k=0,l=0,m=c.appSpecificScore(a);j+=m*c.appSpecificWeight,b.ips.forEach(a=>{if(c.IPColocationFactorWhitelist.has(a))return;let b=d.get(a),e=b?b.size:0;if(e>c.IPColocationFactorThreshold){let f=e-c.IPColocationFactorThreshold,g=f*f;k+=g*c.IPColocationFactorWeight}});let n=b.behaviourPenalty*b.behaviourPenalty;return l+=n*c.behaviourPenaltyWeight,f+=j+k+l,{byTopic:g,p5w:j,p6w:k,p7w:l,score:f}}function nA(a,b,c=()=>!0){let d=new Set;if(b<=0)return d;for(let e of a){if(d.size>=b)break;c(e)&&(d.add(e),a.delete(e))}return d}(pv=at||(at={}))[pv.started=0]="started",pv[pv.stopped=1]="stopped",(class extends mn{constructor(a={}){super(),this.multicodecs=[mI,mH],this.peers=new Map,this.direct=new Set,this.floodsubPeers=new Set,this.acceptFromWhitelist=new Map,this.topics=new Map,this.subscriptions=new Set,this.mesh=new Map,this.fanout=new Map,this.fanoutLastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.topicValidators=new Map,this.heartbeatTicks=0,this.components=new nq,this.directPeerInitial=null,this.status={code:at.stopped},this.heartbeatTimer=null,this.runHeartbeat=()=>{let a=this.metrics?.heartbeatDuration.startTimer();this.heartbeat().catch(a=>{this.log("Error running heartbeat",a)}).finally(()=>{if(null!=a&&a(),this.status.code===at.started){clearTimeout(this.status.heartbeatTimeout);let b=(Date.now()-this.status.hearbeatStartMs)%this.opts.heartbeatInterval;b<.25*this.opts.heartbeatInterval&&(b+=this.opts.heartbeatInterval,this.metrics?.heartbeatSkipped.inc()),this.status.heartbeatTimeout=setTimeout(this.runHeartbeat,b)}})};let b={fallbackToFloodsub:!0,floodPublish:!0,doPX:!1,directPeers:[],D:6,Dlo:4,Dhi:12,Dscore:4,Dout:2,Dlazy:6,heartbeatInterval:1e3,fanoutTTL:6e4,mcacheLength:5,mcacheGossip:3,seenTTL:12e4,gossipsubIWantFollowupMs:3e3,prunePeers:16,pruneBackoff:6e4,graftFloodThreshold:1e4,opportunisticGraftPeers:2,opportunisticGraftTicks:60,directConnectTicks:300,...a,scoreParams:function(a={}){return{...mR,...a,topics:a.topics?Object.entries(a.topics).reduce((a,[b,c])=>(a[b]=function a(b={}){return{...mS,...b}}(c),a),{}):{}}}(a.scoreParams),scoreThresholds:function(a={}){return{...mU,...a}}(a.scoreThresholds)};if(this.globalSignaturePolicy=b.globalSignaturePolicy??mM,b.fallbackToFloodsub&&this.multicodecs.push(mG),this.log=(0,aY.kg)(b.debugName??"libp2p:gossipsub"),this.opts=b,this.direct=new Set(b.directPeers.map(a=>a.id.toString())),this.seenCache=new ns({validityMs:b.seenTTL}),this.publishedMessageIds=new ns({validityMs:b.seenTTL}),a.msgIdFn)this.msgIdFn=a.msgIdFn;else switch(this.globalSignaturePolicy){case mM:this.msgIdFn=function(a){if(null==a.sequenceNumber)throw Error("missing seqno field");return nx(a.from.toBytes(),a.sequenceNumber)};break;case mN:this.msgIdFn=ny}if(a.fastMsgIdFn&&(this.fastMsgIdFn=a.fastMsgIdFn,this.fastMsgIdCache=new ns({validityMs:b.seenTTL})),this.msgIdToStrFn=a.msgIdToStrFn??function(a){return(0,bb.toString)(a,"base64")},this.mcache=a.messageCache||new class{constructor(a,b,c){this.gossip=a,this.msgs=new Map,this.history=[],this.msgIdToStrFn=c;for(let d=0;d<b;d++)this.history[d]=[]}get size(){return this.msgs.size}put(a,b,c=!1){let{msgIdStr:d}=a;return!this.msgs.has(d)&&(this.msgs.set(d,{message:b,validated:c,originatingPeers:new Set,iwantCounts:new Map}),this.history[0].push({...a,topic:b.topic}),!0)}observeDuplicate(a,b){let c=this.msgs.get(a);c&&!c.validated&&c.originatingPeers.add(b)}get(a){return this.msgs.get(this.msgIdToStrFn(a))?.message}getWithIWantCount(a,b){let c=this.msgs.get(a);if(!c)return null;let d=(c.iwantCounts.get(b)??0)+1;return c.iwantCounts.set(b,d),{msg:c.message,count:d}}getGossipIDs(a){let b=new Map;for(let c=0;c<this.gossip;c++)this.history[c].forEach(c=>{let d=this.msgs.get(c.msgIdStr);if(d&&d.validated&&a.has(c.topic)){let e=b.get(c.topic);e||(e=[],b.set(c.topic,e)),e.push(c.msgId)}});return b}validate(a){let b=this.msgs.get(a);if(!b)return null;let{message:c,originatingPeers:d}=b;return b.validated=!0,b.originatingPeers=new Set,{message:c,originatingPeers:d}}shift(){let a=this.history[this.history.length-1];a.forEach(a=>{this.msgs.delete(a.msgIdStr)}),this.history.pop(),this.history.unshift([])}remove(a){let b=this.msgs.get(a);return b?(this.msgs.delete(a),b):null}}(b.mcacheGossip,b.mcacheLength,this.msgIdToStrFn),a.dataTransform&&(this.dataTransform=a.dataTransform),a.metricsRegister){var c,d,e;if(!a.metricsTopicStrToLabel)throw Error("Must set metricsTopicStrToLabel with metrics");let f=Math.max(...Object.values(b.scoreParams.topics).map(a=>a.meshMessageDeliveriesWindow),1e3),g=(c=a.metricsRegister,d=a.metricsTopicStrToLabel,e={gossipPromiseExpireSec:this.opts.gossipsubIWantFollowupMs/1e3,behaviourPenaltyThreshold:b.scoreParams.behaviourPenaltyThreshold,maxMeshMessageDeliveriesWindowSec:f/1e3},{protocolsEnabled:c.gauge({name:"gossipsub_protocol",help:"Status of enabled protocols",labelNames:["protocol"]}),topicSubscriptionStatus:c.gauge({name:"gossipsub_topic_subscription_status",help:"Status of our subscription to this topic",labelNames:["topicStr"]}),topicPeersCount:c.gauge({name:"gossipsub_topic_peer_count",help:"Number of peers subscribed to each topic",labelNames:["topicStr"]}),meshPeerCounts:c.gauge({name:"gossipsub_mesh_peer_count",help:"Number of peers in our mesh",labelNames:["topicStr"]}),meshPeerInclusionEvents:c.gauge({name:"gossipsub_mesh_peer_inclusion_events_total",help:"Number of times we include peers in a topic mesh for different reasons",labelNames:["topic","reason"]}),meshPeerChurnEvents:c.gauge({name:"gossipsub_peer_churn_events_total",help:"Number of times we remove peers in a topic mesh for different reasons",labelNames:["topic","reason"]}),peersPerProtocol:c.gauge({name:"gossipsub_peers_per_protocol_count",help:"Peers connected for each topic",labelNames:["protocol"]}),heartbeatDuration:c.histogram({name:"gossipsub_heartbeat_duration_seconds",help:"The time it takes to complete one iteration of the heartbeat",buckets:[.01,.1,1]}),heartbeatSkipped:c.gauge({name:"gossipsub_heartbeat_skipped",help:"Heartbeat run took longer than heartbeat interval so next is skipped"}),asyncValidationResult:c.gauge({name:"gossipsub_async_validation_result_total",help:"Message validation result for each topic",labelNames:["topic","acceptance"]}),asyncValidationMcacheHit:c.gauge({name:"gossipsub_async_validation_mcache_hit_total",help:"Async validation result reported by the user layer",labelNames:["hit"]}),rpcRecvBytes:c.gauge({name:"gossipsub_rpc_recv_bytes_total",help:"RPC recv"}),rpcRecvCount:c.gauge({name:"gossipsub_rpc_recv_count_total",help:"RPC recv"}),rpcRecvSubscription:c.gauge({name:"gossipsub_rpc_recv_subscription_total",help:"RPC recv"}),rpcRecvMessage:c.gauge({name:"gossipsub_rpc_recv_message_total",help:"RPC recv"}),rpcRecvControl:c.gauge({name:"gossipsub_rpc_recv_control_total",help:"RPC recv"}),rpcRecvIHave:c.gauge({name:"gossipsub_rpc_recv_ihave_total",help:"RPC recv"}),rpcRecvIWant:c.gauge({name:"gossipsub_rpc_recv_iwant_total",help:"RPC recv"}),rpcRecvGraft:c.gauge({name:"gossipsub_rpc_recv_graft_total",help:"RPC recv"}),rpcRecvPrune:c.gauge({name:"gossipsub_rpc_recv_prune_total",help:"RPC recv"}),rpcRecvNotAccepted:c.gauge({name:"gossipsub_rpc_rcv_not_accepted_total",help:"Total count of RPC dropped because acceptFrom() == false"}),rpcSentBytes:c.gauge({name:"gossipsub_rpc_sent_bytes_total",help:"RPC sent"}),rpcSentCount:c.gauge({name:"gossipsub_rpc_sent_count_total",help:"RPC sent"}),rpcSentSubscription:c.gauge({name:"gossipsub_rpc_sent_subscription_total",help:"RPC sent"}),rpcSentMessage:c.gauge({name:"gossipsub_rpc_sent_message_total",help:"RPC sent"}),rpcSentControl:c.gauge({name:"gossipsub_rpc_sent_control_total",help:"RPC sent"}),rpcSentIHave:c.gauge({name:"gossipsub_rpc_sent_ihave_total",help:"RPC sent"}),rpcSentIWant:c.gauge({name:"gossipsub_rpc_sent_iwant_total",help:"RPC sent"}),rpcSentGraft:c.gauge({name:"gossipsub_rpc_sent_graft_total",help:"RPC sent"}),rpcSentPrune:c.gauge({name:"gossipsub_rpc_sent_prune_total",help:"RPC sent"}),msgPublishCount:c.gauge({name:"gossipsub_msg_publish_count_total",help:"Total count of msg published by topic",labelNames:["topic"]}),msgPublishPeers:c.gauge({name:"gossipsub_msg_publish_peers_total",help:"Total count of peers that we publish a msg to",labelNames:["topic"]}),msgPublishPeersByGroup:c.gauge({name:"gossipsub_msg_publish_peers_by_group",help:"Total count of peers (by group) that we publish a msg to",labelNames:["topic","peerGroup"]}),msgPublishBytes:c.gauge({name:"gossipsub_msg_publish_bytes_total",help:"Total count of msg publish data.length bytes",labelNames:["topic"]}),msgForwardCount:c.gauge({name:"gossipsub_msg_forward_count_total",help:"Total count of msg forwarded by topic",labelNames:["topic"]}),msgForwardPeers:c.gauge({name:"gossipsub_msg_forward_peers_total",help:"Total count of peers that we forward a msg to",labelNames:["topic"]}),msgReceivedPreValidation:c.gauge({name:"gossipsub_msg_received_prevalidation_total",help:"Total count of recv msgs before any validation",labelNames:["topic"]}),msgReceivedStatus:c.gauge({name:"gossipsub_msg_received_status_total",help:"Tracks distribution of recv msgs by duplicate, invalid, valid",labelNames:["topic","status"]}),msgReceivedInvalid:c.gauge({name:"gossipsub_msg_received_invalid_total",help:"Tracks specific reason of invalid",labelNames:["topic","error"]}),duplicateMsgDeliveryDelay:c.histogram({name:"gossisub_duplicate_msg_delivery_delay_seconds",help:"Time since the 1st duplicated message validated",labelNames:["topic"],buckets:[.25*e.maxMeshMessageDeliveriesWindowSec,.5*e.maxMeshMessageDeliveriesWindowSec,1*e.maxMeshMessageDeliveriesWindowSec,2*e.maxMeshMessageDeliveriesWindowSec,4*e.maxMeshMessageDeliveriesWindowSec]}),duplicateMsgLateDelivery:c.gauge({name:"gossisub_duplicate_msg_late_delivery_total",help:"Total count of late duplicate message delivery by topic, which triggers P3 penalty",labelNames:["topic"]}),scoreFnCalls:c.gauge({name:"gossipsub_score_fn_calls_total",help:"Total times score() is called"}),scoreFnRuns:c.gauge({name:"gossipsub_score_fn_runs_total",help:"Total times score() call actually computed computeScore(), no cache"}),scoreCachedDelta:c.histogram({name:"gossipsub_score_cache_delta",help:"Delta of score between cached values that expired",buckets:[10,100,1e3]}),peersByScoreThreshold:c.gauge({name:"gossipsub_peers_by_score_threshold_count",help:"Current count of peers by score threshold",labelNames:["threshold"]}),score:c.avgMinMax({name:"gossipsub_score",help:"Avg min max of gossip scores",labelNames:["topic","p"]}),scoreWeights:c.avgMinMax({name:"gossipsub_score_weights",help:"Separate score weights",labelNames:["topic","p"]}),scorePerMesh:c.avgMinMax({name:"gossipsub_score_per_mesh",help:"Histogram of the scores for each mesh topic",labelNames:["topic"]}),scoringPenalties:c.gauge({name:"gossipsub_scoring_penalties_total",help:"A counter of the kind of penalties being applied to peers",labelNames:["penalty"]}),behaviourPenalty:c.histogram({name:"gossipsub_peer_stat_behaviour_penalty",help:"Current peer stat behaviour_penalty at each scrape",buckets:[.25*e.behaviourPenaltyThreshold,.5*e.behaviourPenaltyThreshold,1*e.behaviourPenaltyThreshold,2*e.behaviourPenaltyThreshold,4*e.behaviourPenaltyThreshold]}),ihaveRcvIgnored:c.gauge({name:"gossipsub_ihave_rcv_ignored_total",help:"Total received IHAVE messages that we ignore for some reason",labelNames:["reason"]}),ihaveRcvMsgids:c.gauge({name:"gossipsub_ihave_rcv_msgids_total",help:"Total received IHAVE messages by topic",labelNames:["topic"]}),ihaveRcvNotSeenMsgids:c.gauge({name:"gossipsub_ihave_rcv_not_seen_msgids_total",help:"Total messages per topic we do not have, not actual requests",labelNames:["topic"]}),iwantRcvMsgids:c.gauge({name:"gossipsub_iwant_rcv_msgids_total",help:"Total received IWANT messages by topic",labelNames:["topic"]}),iwantRcvDonthaveMsgids:c.gauge({name:"gossipsub_iwant_rcv_dont_have_msgids_total",help:"Total requested messageIDs that we do not have"}),iwantPromiseStarted:c.gauge({name:"gossipsub_iwant_promise_sent_total",help:"Total count of started IWANT promises"}),iwantPromiseResolved:c.gauge({name:"gossipsub_iwant_promise_resolved_total",help:"Total count of resolved IWANT promises"}),iwantPromiseResolvedPeers:c.gauge({name:"gossipsub_iwant_promise_resolved_peers",help:"Total count of peers we have asked IWANT promises that are resolved"}),iwantPromiseBroken:c.gauge({name:"gossipsub_iwant_promise_broken",help:"Total count of broken IWANT promises"}),iwantPromiseDeliveryTime:c.histogram({name:"gossipsub_iwant_promise_delivery_seconds",help:"Histogram of delivery time of resolved IWANT promises",buckets:[.5*e.gossipPromiseExpireSec,1*e.gossipPromiseExpireSec,2*e.gossipPromiseExpireSec,4*e.gossipPromiseExpireSec]}),cacheSize:c.gauge({name:"gossipsub_cache_size",help:"Unbounded cache sizes",labelNames:["cache"]}),mcacheSize:c.gauge({name:"gossipsub_mcache_size",help:"Current mcache msg count"}),topicStrToLabel:d,toTopic(a){return this.topicStrToLabel.get(a)??a},onJoin(a){this.topicSubscriptionStatus.set({topicStr:a},1),this.meshPeerCounts.set({topicStr:a},0)},onLeave(a){this.topicSubscriptionStatus.set({topicStr:a},0),this.meshPeerCounts.set({topicStr:a},0)},onAddToMesh(a,b,c){let d=this.toTopic(a);this.meshPeerInclusionEvents.inc({topic:d,reason:b},c)},onRemoveFromMesh(a,b,c){let d=this.toTopic(a);this.meshPeerChurnEvents.inc({topic:d,reason:b},c)},onReportValidationMcacheHit(a){this.asyncValidationMcacheHit.inc({hit:a?"hit":"miss"})},onReportValidation(a,b){let c=this.toTopic(a);this.asyncValidationResult.inc({topic:c,acceptance:b})},onScorePenalty(a){this.scoringPenalties.inc({penalty:a},1)},onIhaveRcv(a,b,c){let d=this.toTopic(a);this.ihaveRcvMsgids.inc({topic:d},b),this.ihaveRcvNotSeenMsgids.inc({topic:d},c)},onIwantRcv(a,b){for(let[c,d]of a){let e=this.toTopic(c);this.iwantRcvMsgids.inc({topic:e},d)}this.iwantRcvDonthaveMsgids.inc(b)},onForwardMsg(a,b){let c=this.toTopic(a);this.msgForwardCount.inc({topic:c},1),this.msgForwardPeers.inc({topic:c},b)},onPublishMsg(a,b,c,d){let e=this.toTopic(a);this.msgPublishCount.inc({topic:e},1),this.msgPublishBytes.inc({topic:e},c*d),this.msgPublishPeers.inc({topic:e},c),this.msgPublishPeersByGroup.inc({topic:e,peerGroup:"direct"},b.direct),this.msgPublishPeersByGroup.inc({topic:e,peerGroup:"floodsub"},b.floodsub),this.msgPublishPeersByGroup.inc({topic:e,peerGroup:"mesh"},b.mesh),this.msgPublishPeersByGroup.inc({topic:e,peerGroup:"fanout"},b.fanout)},onMsgRecvPreValidation(a){let b=this.toTopic(a);this.msgReceivedPreValidation.inc({topic:b},1)},onMsgRecvResult(a,b){let c=this.toTopic(a);this.msgReceivedStatus.inc({topic:c,status:b})},onMsgRecvInvalid(a,b){let c=this.toTopic(a),d=b.reason===aj.Error?b.error:b.reason;this.msgReceivedInvalid.inc({topic:c,error:d},1)},onDuplicateMsgDelivery(a,b,c){if(this.duplicateMsgDeliveryDelay.observe(b/1e3),c){let d=this.toTopic(a);this.duplicateMsgLateDelivery.inc({topic:d},1)}},onRpcRecv(a,b){this.rpcRecvBytes.inc(b),this.rpcRecvCount.inc(1),this.rpcRecvSubscription.inc(a.subscriptions.length),this.rpcRecvMessage.inc(a.messages.length),a.control&&(this.rpcRecvControl.inc(1),this.rpcRecvIHave.inc(a.control.ihave.length),this.rpcRecvIWant.inc(a.control.iwant.length),this.rpcRecvGraft.inc(a.control.graft.length),this.rpcRecvPrune.inc(a.control.prune.length))},onRpcSent(a,b){if(this.rpcSentBytes.inc(b),this.rpcSentCount.inc(1),this.rpcSentSubscription.inc(a.subscriptions.length),this.rpcSentMessage.inc(a.messages.length),a.control){let c=a.control.ihave.length,d=a.control.iwant.length,e=a.control.graft.length,f=a.control.prune.length;c>0&&this.rpcSentIHave.inc(c),d>0&&this.rpcSentIWant.inc(d),e>0&&this.rpcSentGraft.inc(e),f>0&&this.rpcSentPrune.inc(f),(c>0||d>0||e>0||f>0)&&this.rpcSentControl.inc(1)}},registerScores(a,b){let c=0,d=0,e=0,f=0;for(let g of a)g>=b.graylistThreshold&&c++,g>=b.publishThreshold&&d++,g>=b.gossipThreshold&&e++,g>=0&&f++;this.peersByScoreThreshold.set({threshold:as.graylist},c),this.peersByScoreThreshold.set({threshold:as.publish},d),this.peersByScoreThreshold.set({threshold:as.gossip},e),this.peersByScoreThreshold.set({threshold:as.mesh},f),this.score.set(a)},registerScoreWeights(a){for(let[b,c]of a.byTopic)this.scoreWeights.set({topic:b,p:"p1"},c.p1w),this.scoreWeights.set({topic:b,p:"p2"},c.p2w),this.scoreWeights.set({topic:b,p:"p3"},c.p3w),this.scoreWeights.set({topic:b,p:"p3b"},c.p3bw),this.scoreWeights.set({topic:b,p:"p4"},c.p4w);this.scoreWeights.set({p:"p5"},a.p5w),this.scoreWeights.set({p:"p6"},a.p6w),this.scoreWeights.set({p:"p7"},a.p7w)},registerScorePerMesh(a,b){let c=new Map;for(let[d,e]of(a.forEach((a,b)=>{let d=this.topicStrToLabel.get(b)??"unknown",e=c.get(d);e||(e=new Set,c.set(d,e)),a.forEach(a=>e?.add(a))}),c)){let f=[];e.forEach(a=>{f.push(b.get(a)??0)}),this.scorePerMesh.set({topic:d},f)}}});for(let h of(g.mcacheSize.addCollect(()=>this.onScrapeMetrics(g)),this.multicodecs))g.protocolsEnabled.set({protocol:h},1);this.metrics=g}else this.metrics=null;this.gossipTracer=new class{constructor(a,b,c){this.gossipsubIWantFollowupMs=a,this.msgIdToStrFn=b,this.metrics=c,this.promises=new Map,this.requestMsByMsg=new Map,this.requestMsByMsgExpire=10*a}get size(){return this.promises.size}get requestMsByMsgSize(){return this.requestMsByMsg.size}addPromise(a,b){let c=Math.floor(Math.random()*b.length),d=b[c],e=this.msgIdToStrFn(d),f=this.promises.get(e);f||(f=new Map,this.promises.set(e,f));let g=Date.now();f.has(a)||(f.set(a,g+this.gossipsubIWantFollowupMs),this.metrics&&(this.metrics.iwantPromiseStarted.inc(1),this.requestMsByMsg.has(e)||this.requestMsByMsg.set(e,g)))}getBrokenPromises(){let a=Date.now(),b=new Map,c=0;return this.promises.forEach((d,e)=>{d.forEach((e,f)=>{e<a&&(b.set(f,(b.get(f)??0)+1),d.delete(f),c++)}),d.size||this.promises.delete(e)}),this.metrics?.iwantPromiseBroken.inc(c),b}deliverMessage(a){this.trackMessage(a);let b=this.promises.get(a);b&&(this.promises.delete(a),this.metrics&&(this.metrics.iwantPromiseResolved.inc(1),this.metrics.iwantPromiseResolvedPeers.inc(b.size)))}rejectMessage(a,b){this.trackMessage(a),b!==aj.Error&&this.promises.delete(a)}clear(){this.promises.clear()}prune(){let a=Date.now()-this.requestMsByMsgExpire;for(let[b,c]of this.requestMsByMsg.entries())if(c<a)this.requestMsByMsg.delete(b);else break}trackMessage(a){if(this.metrics){let b=this.requestMsByMsg.get(a);void 0!==b&&(this.metrics.iwantPromiseDeliveryTime.observe((Date.now()-b)/1e3),this.requestMsByMsg.delete(a))}}}(this.opts.gossipsubIWantFollowupMs,this.msgIdToStrFn,this.metrics),this.score=new class{constructor(a,b,c){this.params=a,this.metrics=b,this.peerStats=new Map,this.peerIPs=new Map,this.scoreCache=new Map,this.deliveryRecords=new class{constructor(){this.records=new Map,this.queue=new nn}ensureRecord(a){let b=this.records.get(a);if(b)return b;b={status:am.unknown,firstSeen:Date.now(),validated:0,peers:new Set},this.records.set(a,b);let c={msgId:a,expire:Date.now()+12e4};return this.queue.push(c),b}gc(){let a=Date.now(),b=this.queue.peekFront();for(;b&&b.expire<a;)this.records.delete(b.msgId),this.queue.shift(),b=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}},this.components=new nq,function(a){for(let[b,c]of Object.entries(a.topics))try{mT(c)}catch(d){throw aZ(Error(`invalid score parameters for topic ${b}: ${d.message}`),mQ)}if(a.topicScoreCap<0)throw aZ(Error("invalid topic score cap; must be positive (or 0 for no cap)"),mQ);if(null===a.appSpecificScore|| void 0===a.appSpecificScore)throw aZ(Error("missing application specific score function"),mQ);if(a.IPColocationFactorWeight>0)throw aZ(Error("invalid IPColocationFactorWeight; must be negative (or 0 to disable)"),mQ);if(0!==a.IPColocationFactorWeight&&a.IPColocationFactorThreshold<1)throw aZ(Error("invalid IPColocationFactorThreshold; must be at least 1"),mQ);if(a.behaviourPenaltyWeight>0)throw aZ(Error("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)"),mQ);if(0!==a.behaviourPenaltyWeight&&(a.behaviourPenaltyDecay<=0||a.behaviourPenaltyDecay>=1))throw aZ(Error("invalid BehaviourPenaltyDecay; must be between 0 and 1"),mQ);if(a.decayInterval<1e3)throw aZ(Error("invalid DecayInterval; must be at least 1s"),mQ);if(a.decayToZero<=0||a.decayToZero>=1)throw aZ(Error("invalid DecayToZero; must be between 0 and 1"),mQ)}(a),this.scoreCacheValidityMs=c.scoreCacheValidityMs,this.computeScore=c.computeScore??function(a,b,c,d){let e=0;Object.entries(b.topics).forEach(([a,b])=>{let d=c.topics[a];if(void 0===d)return;let f=0;if(b.inMesh){let g=b.meshTime/d.timeInMeshQuantum;g>d.timeInMeshCap&&(g=d.timeInMeshCap),f+=g*d.timeInMeshWeight}let h=b.firstMessageDeliveries;if(h>d.firstMessageDeliveriesCap&&(h=d.firstMessageDeliveriesCap),f+=h*d.firstMessageDeliveriesWeight,b.meshMessageDeliveriesActive&&b.meshMessageDeliveries<d.meshMessageDeliveriesThreshold){let i=d.meshMessageDeliveriesThreshold-b.meshMessageDeliveries,j=i*i;f+=j*d.meshMessageDeliveriesWeight}let k=b.meshFailurePenalty;f+=k*d.meshFailurePenaltyWeight;let l=b.invalidMessageDeliveries*b.invalidMessageDeliveries;f+=l*d.invalidMessageDeliveriesWeight,e+=f*d.topicWeight}),c.topicScoreCap>0&&e>c.topicScoreCap&&(e=c.topicScoreCap);let f=c.appSpecificScore(a);if(e+=f*c.appSpecificWeight,b.ips.forEach(a=>{if(c.IPColocationFactorWhitelist.has(a))return;let b=d.get(a),f=b?b.size:0;if(f>c.IPColocationFactorThreshold){let g=f-c.IPColocationFactorThreshold,h=g*g;e+=h*c.IPColocationFactorWeight}}),b.behaviourPenalty>c.behaviourPenaltyThreshold){let g=b.behaviourPenalty-c.behaviourPenaltyThreshold,h=g*g;e+=h*c.behaviourPenaltyWeight}return e}}init(a){this.components=a}get size(){return this.peerStats.size}start(){if(this._backgroundInterval){nr("Peer score already running");return}this._backgroundInterval=setInterval(()=>this.background(),this.params.decayInterval),nr("started")}stop(){if(!this._backgroundInterval){nr("Peer score already stopped");return}clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),nr("stopped")}background(){this.refreshScores(),this.updateIPs(),this.deliveryRecords.gc()}dumpPeerScoreStats(){return Object.fromEntries(Array.from(this.peerStats.entries()).map(([a,b])=>[a,b]))}refreshScores(){let a=Date.now(),b=this.params.decayToZero;this.peerStats.forEach((c,d)=>{if(!c.connected){a>c.expire&&(this.removeIPs(d,c.ips),this.peerStats.delete(d),this.scoreCache.delete(d));return}Object.entries(c.topics).forEach(([c,d])=>{let e=this.params.topics[c];void 0!==e&&(d.firstMessageDeliveries*=e.firstMessageDeliveriesDecay,d.firstMessageDeliveries<b&&(d.firstMessageDeliveries=0),d.meshMessageDeliveries*=e.meshMessageDeliveriesDecay,d.meshMessageDeliveries<b&&(d.meshMessageDeliveries=0),d.meshFailurePenalty*=e.meshFailurePenaltyDecay,d.meshFailurePenalty<b&&(d.meshFailurePenalty=0),d.invalidMessageDeliveries*=e.invalidMessageDeliveriesDecay,d.invalidMessageDeliveries<b&&(d.invalidMessageDeliveries=0),d.inMesh&&(d.meshTime=a-d.graftTime,d.meshTime>e.meshMessageDeliveriesActivation&&(d.meshMessageDeliveriesActive=!0)))}),c.behaviourPenalty*=this.params.behaviourPenaltyDecay,c.behaviourPenalty<b&&(c.behaviourPenalty=0)})}score(a){this.metrics?.scoreFnCalls.inc();let b=this.peerStats.get(a);if(!b)return 0;let c=Date.now(),d=this.scoreCache.get(a);if(d&&d.cacheUntil>c)return d.score;this.metrics?.scoreFnRuns.inc();let e=this.computeScore(a,b,this.params,this.peerIPs),f=c+this.scoreCacheValidityMs;return d?(this.metrics?.scoreCachedDelta.observe(Math.abs(e-d.score)),d.score=e,d.cacheUntil=f):this.scoreCache.set(a,{score:e,cacheUntil:f}),e}addPenalty(a,b,c){let d=this.peerStats.get(a);d&&(d.behaviourPenalty+=b,this.metrics?.onScorePenalty(c))}addPeer(a){let b={connected:!0,expire:0,topics:{},ips:[],behaviourPenalty:0};this.peerStats.set(a,b);let c=this.getIPs(a);this.setIPs(a,c,b.ips),b.ips=c}removePeer(a){let b=this.peerStats.get(a);if(b){if(this.score(a)>0){this.removeIPs(a,b.ips),this.peerStats.delete(a);return}Object.entries(b.topics).forEach(([a,b])=>{b.firstMessageDeliveries=0;let c=this.params.topics[a].meshMessageDeliveriesThreshold;if(b.inMesh&&b.meshMessageDeliveriesActive&&b.meshMessageDeliveries<c){let d=c-b.meshMessageDeliveries;b.meshFailurePenalty+=d*d}b.inMesh=!1,b.meshMessageDeliveriesActive=!1}),b.connected=!1,b.expire=Date.now()+this.params.retainScore}}graft(a,b){let c=this.peerStats.get(a);if(c){let d=this.getPtopicStats(c,b);d&&(d.inMesh=!0,d.graftTime=Date.now(),d.meshTime=0,d.meshMessageDeliveriesActive=!1)}}prune(a,b){let c=this.peerStats.get(a);if(c){let d=this.getPtopicStats(c,b);if(d){let e=this.params.topics[b].meshMessageDeliveriesThreshold;if(d.meshMessageDeliveriesActive&&d.meshMessageDeliveries<e){let f=e-d.meshMessageDeliveries;d.meshFailurePenalty+=f*f}d.meshMessageDeliveriesActive=!1,d.inMesh=!1}}}validateMessage(a){this.deliveryRecords.ensureRecord(a)}deliverMessage(a,b,c){this.markFirstMessageDelivery(a,c);let d=this.deliveryRecords.ensureRecord(b),e=Date.now();if(d.status!==am.unknown){nr("unexpected delivery: message from %s was first seen %s ago and has delivery status %d",a,e-d.firstSeen,am[d.status]);return}d.status=am.valid,d.validated=e,d.peers.forEach(b=>{b!==a.toString()&&this.markDuplicateMessageDelivery(b,c)})}rejectInvalidMessage(a,b){this.markInvalidMessageDelivery(a,b)}rejectMessage(a,b,c,d){switch(d){case aj.Error:this.markInvalidMessageDelivery(a,c);return;case aj.Blacklisted:return}let e=this.deliveryRecords.ensureRecord(b);if(e.status!==am.unknown){nr("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",a,Date.now()-e.firstSeen,am[e.status]);return}if(d===aj.Ignore){e.status=am.ignored,e.peers.clear();return}e.status=am.invalid,this.markInvalidMessageDelivery(a,c),e.peers.forEach(a=>{this.markInvalidMessageDelivery(a,c)}),e.peers.clear()}duplicateMessage(a,b,c){let d=this.deliveryRecords.ensureRecord(b);if(!d.peers.has(a))switch(d.status){case am.unknown:d.peers.add(a);break;case am.valid:d.peers.add(a),this.markDuplicateMessageDelivery(a,c,d.validated);break;case am.invalid:this.markInvalidMessageDelivery(a,c);case am.ignored:}}markInvalidMessageDelivery(a,b){let c=this.peerStats.get(a);if(c){let d=this.getPtopicStats(c,b);d&&(d.invalidMessageDeliveries+=1)}}markFirstMessageDelivery(a,b){let c=this.peerStats.get(a);if(c){let d=this.getPtopicStats(c,b);if(d){let e=this.params.topics[b].firstMessageDeliveriesCap;d.firstMessageDeliveries=Math.min(e,d.firstMessageDeliveries+1),d.inMesh&&(e=this.params.topics[b].meshMessageDeliveriesCap,d.meshMessageDeliveries=Math.min(e,d.meshMessageDeliveries+1))}}}markDuplicateMessageDelivery(a,b,c){let d=this.peerStats.get(a);if(d){let e=void 0!==c?Date.now():0,f=this.getPtopicStats(d,b);if(f&&f.inMesh){let g=this.params.topics[b];if(void 0!==c){let h=e-c,i=h>g.meshMessageDeliveriesWindow;if(this.metrics?.onDuplicateMsgDelivery(b,h,i),i)return}let j=g.meshMessageDeliveriesCap;f.meshMessageDeliveries=Math.min(j,f.meshMessageDeliveries+1)}}}getIPs(a){return this.components.getConnectionManager().getConnections((0,bF.jE)(a)).map(a=>a.remoteAddr.toOptions().host)}setIPs(a,b,c){addNewIPs:for(let d of b){for(let e of c)if(d===e)continue addNewIPs;let f=this.peerIPs.get(d);f||(f=new Set,this.peerIPs.set(d,f)),f.add(a)}removeOldIPs:for(let g of c){for(let h of b)if(g===h)continue removeOldIPs;let i=this.peerIPs.get(g);i&&(i.delete(a),i.size||this.peerIPs.delete(g))}}removeIPs(a,b){b.forEach(b=>{let c=this.peerIPs.get(b);c&&(c.delete(a),c.size||this.peerIPs.delete(b))})}updateIPs(){this.peerStats.forEach((a,b)=>{let c=this.getIPs(b);this.setIPs(b,c,a.ips),a.ips=c})}getPtopicStats(a,b){let c=a.topics[b];return void 0!==c?c:void 0!==this.params.topics[b]?(c={inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},a.topics[b]=c,c):null}}(this.opts.scoreParams,this.metrics,{scoreCacheValidityMs:b.heartbeatInterval})}getPeers(){return[...this.peers.keys()].map(a=>(0,bF.jE)(a))}isStarted(){return this.status.code===at.started}async init(a){this.components=a,this.score.init(a)}async start(){var a;if(this.isStarted())return;this.log("starting"),this.publishConfig=await mP(this.globalSignaturePolicy,this.components.getPeerId()),await Promise.all(this.opts.directPeers.map(async a=>{await this.components.getPeerStore().addressBook.add(a.id,a.addrs)})),await this.components.getRegistrar().handle(this.multicodecs,this.onIncomingStream.bind(this));let b=(a={onConnect:this.onPeerConnected.bind(this),onDisconnect:this.onPeerDisconnected.bind(this)},new ml(a)),c=await this.components.getRegistrar().register(this.multicodecs,b),d=setTimeout(this.runHeartbeat,100);this.status={code:at.started,registrarTopologyId:c,heartbeatTimeout:d,hearbeatStartMs:Date.now()+100},this.log("started"),this.score.start(),this.directPeerInitial=setTimeout(()=>{Promise.resolve().then(async()=>{await Promise.all(Array.from(this.direct).map(async a=>await this.connect(a)))}).catch(a=>{this.log(a)})},1e3)}async stop(){if(this.log("stopping"),this.status.code!==at.started)return;let{registrarTopologyId:a}=this.status;for(let b of(this.status={code:at.stopped},this.components.getRegistrar().unregister(a),this.peers.values()))b.close();this.peers.clear(),this.subscriptions.clear(),this.heartbeatTimer&&(this.heartbeatTimer.cancel(),this.heartbeatTimer=null),this.score.stop(),this.mesh.clear(),this.fanout.clear(),this.fanoutLastpub.clear(),this.gossip.clear(),this.control.clear(),this.peerhave.clear(),this.iasked.clear(),this.backoff.clear(),this.outbound.clear(),this.gossipTracer.clear(),this.seenCache.clear(),this.fastMsgIdCache&&this.fastMsgIdCache.clear(),this.directPeerInitial&&clearTimeout(this.directPeerInitial),this.log("stopped")}dumpPeerScoreStats(){return this.score.dumpPeerScoreStats()}onIncomingStream({protocol:a,stream:b,connection:c}){if(!this.isStarted())return;let d=c.remotePeer,e=this.addPeer(d,a,c.stat.direction),f=e.attachInboundStream(b);this.pipePeerReadStream(d,f).catch(a=>this.log(a))}onPeerConnected(a,b){this.isStarted()&&(this.log("topology peer connected %p %s",a,b.stat.direction),Promise.resolve().then(async()=>{try{let{stream:c,protocol:d}=await b.newStream(this.multicodecs),e=this.addPeer(a,d,b.stat.direction);await e.attachOutboundStream(c)}catch(f){this.log(f)}this.subscriptions.size>0&&this.sendSubscriptions(a.toString(),Array.from(this.subscriptions),!0)}))}onPeerDisconnected(a){this.log("connection ended %p",a),this.removePeer(a)}addPeer(a,b,c){let d=a.toString(),e=this.peers.get(d);return void 0===e&&(this.log("new peer %p",a),e=new mF({id:a,protocol:b}),this.peers.set(d,e),e.addEventListener("close",()=>this.removePeer(a))),this.score.addPeer(d),b===mG&&this.floodsubPeers.add(d),this.metrics?.peersPerProtocol.inc({protocol:b},1),this.outbound.get(d)||this.outbound.set(d,"outbound"===c),e}removePeer(a){let b=a.toString(),c=this.peers.get(b);if(null!=c)for(let d of(this.metrics?.peersPerProtocol.inc({protocol:c.protocol},-1),this.log("delete peer %p",a),this.peers.delete(b),c.close(),this.topics.values()))d.delete(b);for(let[e,f]of this.mesh)!0===f.delete(b)&&this.metrics?.onRemoveFromMesh(e,ap.Dc,1);for(let g of this.fanout.values())g.delete(b);return this.floodsubPeers.delete(b),this.gossip.delete(b),this.control.delete(b),this.outbound.delete(b),this.score.removePeer(b),this.acceptFromWhitelist.delete(b),c}get started(){return this.status.code===at.started}getMeshPeers(a){let b=this.mesh.get(a);return b?Array.from(b):[]}getSubscribers(a){let b=this.topics.get(a);return(b?Array.from(b):[]).map(a=>(0,bF.jE)(a))}getTopics(){return Array.from(this.subscriptions)}async pipePeerReadStream(a,b){try{await gN(b,async b=>{for await(let c of b)try{let d=c instanceof Uint8Array?c:c.slice(),e=af.decode(d);this.metrics?.onRpcRecv(e,d.length),this.opts.awaitRpcHandler?await this.handleReceivedRpc(a,e):this.handleReceivedRpc(a,e).catch(a=>this.log(a))}catch(f){this.log(f)}})}catch(c){this.log.error(c),this.onPeerDisconnected(a)}}async handleReceivedRpc(a,b){if(!this.acceptFrom(a.toString())){this.log("received message from unacceptable peer %p",a),this.metrics?.rpcRecvNotAccepted.inc();return}for(let c of(this.log("rpc from %p",a),b.subscriptions.length>0&&(b.subscriptions.forEach(b=>{this.handleReceivedSubscription(a,b)}),this.dispatchEvent(new mp("subscription-change",{detail:{peerId:a,subscriptions:b.subscriptions.filter(a=>null!==a.topic).map(a=>({topic:a.topic??"",subscribe:Boolean(a.subscribe)}))}}))),b.messages)){let d=this.handleReceivedMessage(a,c).catch(a=>this.log(a));this.opts.awaitRpcMessageHandler&&await d}b.control&&await this.handleControlMessage(a.toString(),b.control)}handleReceivedSubscription(a,b){if(null==b.topic)return;this.log("subscription update from %p topic %s",a,b.topic);let c=this.topics.get(b.topic);null==c&&(c=new Set,this.topics.set(b.topic,c)),b.subscribe?c.add(a.toString()):c.delete(a.toString())}async handleReceivedMessage(a,b){this.metrics?.onMsgRecvPreValidation(b.topic);let c=await this.validateReceivedMessage(a,b);switch(this.metrics?.onMsgRecvResult(b.topic,c.code),c.code){case al.duplicate:this.score.duplicateMessage(a.toString(),c.msgIdStr,b.topic),this.mcache.observeDuplicate(c.msgIdStr,a.toString());return;case al.invalid:if(c.msgIdStr){let d=c.msgIdStr;this.score.rejectMessage(a.toString(),d,b.topic,c.reason),this.gossipTracer.rejectMessage(d,c.reason)}else this.score.rejectInvalidMessage(a.toString(),b.topic);this.metrics?.onMsgRecvInvalid(b.topic,c);return;case al.valid:if(this.score.validateMessage(c.messageId.msgIdStr),this.gossipTracer.deliverMessage(c.messageId.msgIdStr),this.mcache.put(c.messageId,b,!this.opts.asyncValidation),this.subscriptions.has(b.topic)){let e=this.components.getPeerId().equals(a);(!e||this.opts.emitSelf)&&(super.dispatchEvent(new mp("gossipsub:message",{detail:{propagationSource:a,msgId:c.messageId.msgIdStr,msg:c.msg}})),super.dispatchEvent(new mp("message",{detail:c.msg})))}this.opts.asyncValidation||this.forwardMessage(c.messageId.msgIdStr,b,a.toString())}}async validateReceivedMessage(a,b){let c=this.fastMsgIdFn?.(b),d=c?this.fastMsgIdCache?.get(c):void 0;if(d)return{code:al.duplicate,msgIdStr:d};let e=await nw(this.globalSignaturePolicy,b);if(!e.valid)return{code:al.invalid,reason:aj.Error,error:e.error};let f;try{let g=b.data??new Uint8Array(0);f=this.dataTransform?this.dataTransform.inboundTransform(b.topic,g):g}catch(h){return this.log("Invalid message, transform failed",h),{code:al.invalid,reason:aj.Error,error:ak.TransformFailed}}if(null==b.from)return this.log("Invalid message, transform failed"),{code:al.invalid,reason:aj.Error,error:ak.TransformFailed};let i={from:(0,bF.cv)(b.from),data:f,sequenceNumber:null==b.seqno?void 0:BigInt(`0x${(0,bb.toString)(b.seqno,"base16")}`),topic:b.topic},j=await this.msgIdFn(i),k=this.msgIdToStrFn(j);if(c&&this.fastMsgIdCache?.put(c,k),this.seenCache.has(k))return{code:al.duplicate,msgIdStr:k};this.seenCache.put(k);let l=this.topicValidators.get(b.topic);if(null!=l){let m;try{m=await l(i.topic,i,a)}catch(n){let o=n.code;"ERR_TOPIC_VALIDATOR_IGNORE"===o&&(m=ai.Ignore),m="ERR_TOPIC_VALIDATOR_REJECT"===o?ai.Reject:ai.Ignore}if(m!==ai.Accept)return{code:al.invalid,reason:mO(m),msgIdStr:k}}return{code:al.valid,messageId:{msgId:j,msgIdStr:k},msg:i}}getScore(a){return this.score.score(a)}sendSubscriptions(a,b,c){this.sendRpc(a,{subscriptions:b.map(a=>({topic:a,subscribe:c})),messages:[]})}async handleControlMessage(a,b){if(void 0===b)return;let c=this.handleIHave(a,b.ihave),d=this.handleIWant(a,b.iwant),e=await this.handleGraft(a,b.graft);await this.handlePrune(a,b.prune),(c.length||d.length||e.length)&&this.sendRpc(a,mJ(d,{iwant:c,prune:e}))}acceptFrom(a){if(this.direct.has(a))return!0;let b=Date.now(),c=this.acceptFromWhitelist.get(a);if(c&&c.messagesAccepted<128&&c.acceptUntil>=b)return c.messagesAccepted+=1,!0;let d=this.score.score(a);return d>=0?this.acceptFromWhitelist.set(a,{messagesAccepted:0,acceptUntil:b+1e3}):this.acceptFromWhitelist.delete(a),d>=this.opts.scoreThresholds.graylistThreshold}handleIHave(a,b){if(!b.length)return[];let c=this.score.score(a);if(c<this.opts.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",a,c),this.metrics?.ihaveRcvIgnored.inc({reason:ar.LowScore}),[];let d=(this.peerhave.get(a)??0)+1;if(this.peerhave.set(a,d),d>10)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",a,d),this.metrics?.ihaveRcvIgnored.inc({reason:ar.MaxIhave}),[];let e=this.iasked.get(a)??0;if(e>=5e3)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",a,e),this.metrics?.ihaveRcvIgnored.inc({reason:ar.MaxIasked}),[];let f=new Map;if(b.forEach(({topicID:a,messageIDs:b})=>{if(!a||!this.mesh.has(a))return;let c=0;b.forEach(a=>{let b=this.msgIdToStrFn(a);!this.seenCache.has(b)&&(f.set(b,a),c++)}),this.metrics?.onIhaveRcv(a,b.length,c)}),!f.size)return[];let g=f.size;g+e>5e3&&(g=5e3-e),this.log("IHAVE: Asking for %d out of %d messages from %s",g,f.size,a);let h=Array.from(f.values());return mK(h),h=h.slice(0,g),this.iasked.set(a,e+g),this.gossipTracer.addPromise(a,h),[{messageIDs:h}]}handleIWant(a,b){if(!b.length)return[];let c=this.score.score(a);if(c<this.opts.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",a,c),[];let d=new Map,e=new Map,f=0;return(b.forEach(({messageIDs:b})=>{b.forEach(b=>{let c=this.msgIdToStrFn(b),g=this.mcache.getWithIWantCount(c,a);if(null==g){f++;return}if(e.set(g.msg.topic,1+(e.get(g.msg.topic)??0)),g.count>3){this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",a,b);return}d.set(c,g.msg)})}),this.metrics?.onIwantRcv(e,f),d.size)?(this.log("IWANT: Sending %d messages to %s",d.size,a),Array.from(d.values())):(this.log("IWANT: Could not provide any wanted messages to %s",a),[])}async handleGraft(a,b){let c=[],d=this.score.score(a),e=Date.now(),f=this.opts.doPX;return(b.forEach(({topicID:b})=>{if(!b)return;let g=this.mesh.get(b);if(!g){f=!1;return}if(g.has(a))return;if(this.direct.has(a)){this.log("GRAFT: ignoring request from direct peer %s",a),c.push(b),f=!1;return}let h=this.backoff.get(b)?.get(a);if("number"==typeof h&&e<h){this.log("GRAFT: ignoring backed off peer %s",a),this.score.addPenalty(a,1,aq.GraftBackoff),f=!1;let i=h+this.opts.graftFloodThreshold-this.opts.pruneBackoff;e<i&&this.score.addPenalty(a,1,aq.GraftBackoff),this.addBackoff(a,b),c.push(b);return}if(d<0){this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",a,d,b),c.push(b),f=!1,this.addBackoff(a,b);return}if(g.size>=this.opts.Dhi&&!this.outbound.get(a)){c.push(b),this.addBackoff(a,b);return}this.log("GRAFT: Add mesh link from %s in %s",a,b),this.score.graft(a,b),g.add(a),this.metrics?.onAddToMesh(b,ao.Subscribed,1)}),c.length)?await Promise.all(c.map(b=>this.makePrune(a,b,f))):[]}async handlePrune(a,b){let c=this.score.score(a);for(let{topicID:d,backoff:e,peers:f}of b){if(null==d)continue;let g=this.mesh.get(d);if(!g)return;if(this.log("PRUNE: Remove mesh link to %s in %s",a,d),this.score.prune(a,d),g.has(a)&&(g.delete(a),this.metrics?.onRemoveFromMesh(d,ap.Unsub,1)),"number"==typeof e&&e>0?this.doAddBackoff(a,d,1e3*e):this.addBackoff(a,d),f.length){if(c<this.opts.scoreThresholds.acceptPXThreshold){this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",a,c,d);continue}await this.pxConnect(f)}}}addBackoff(a,b){this.doAddBackoff(a,b,this.opts.pruneBackoff)}doAddBackoff(a,b,c){let d=this.backoff.get(b);d||(d=new Map,this.backoff.set(b,d));let e=Date.now()+c,f=d.get(a)??0;f<e&&d.set(a,e)}applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach((a,b)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",b,a),this.score.addPenalty(b,a,aq.BrokenPromise)})}clearBackoff(){if(this.heartbeatTicks%15!=0)return;let a=Date.now();this.backoff.forEach((b,c)=>{b.forEach((c,d)=>{c<a&&b.delete(d)}),0===b.size&&this.backoff.delete(c)})}async directConnect(){let a=[];this.direct.forEach(b=>{let c=this.peers.get(b);c&&c.isWritable||a.push(b)}),await Promise.all(a.map(async a=>await this.connect(a)))}async pxConnect(a){a.length>this.opts.prunePeers&&(mK(a),a=a.slice(0,this.opts.prunePeers));let b=[];await Promise.all(a.map(async a=>{if(!a.peerID)return;let c=(0,bF.cv)(a.peerID).toString();if(!this.peers.has(c)){if(!a.signedPeerRecord){b.push(c);return}try{let d=await mf.openAndCertify(a.signedPeerRecord,"libp2p-peer-record"),e=d.peerId;if(!d.peerId.equals(c)){this.log("bogus peer record obtained through px: peer ID %p doesn't match expected peer %p",e,c);return}if(!await this.components.getPeerStore().addressBook.consumePeerRecord(d)){this.log("bogus peer record obtained through px: could not add peer record to address book");return}b.push(c)}catch(f){this.log("bogus peer record obtained through px: invalid signature or not a peer record")}}})),b.length&&await Promise.all(b.map(async a=>await this.connect(a)))}async connect(a){this.log("Initiating connection with %s",a);let b=await this.components.getConnectionManager().openConnection((0,bF.jE)(a));await b.newStream(this.multicodecs)}subscribe(a){if(this.status.code!==at.started)throw Error("Pubsub has not started");if(!this.subscriptions.has(a))for(let b of(this.subscriptions.add(a),this.peers.keys()))this.sendSubscriptions(b,[a],!0);this.join(a)}unsubscribe(a){if(this.status.code!==at.started)throw Error("Pubsub is not started");let b=this.subscriptions.delete(a);if(this.log("unsubscribe from %s - am subscribed %s",a,b),b)for(let c of this.peers.keys())this.sendSubscriptions(c,[a],!1);this.leave(a).catch(a=>{this.log(a)})}join(a){if(this.status.code!==at.started)throw Error("Gossipsub has not started");if(this.mesh.has(a))return;this.log("JOIN %s",a),this.metrics?.onJoin(a);let b=new Set,c=this.fanout.get(a);if(c&&(this.fanout.delete(a),this.fanoutLastpub.delete(a),c.forEach(a=>{!this.direct.has(a)&&this.score.score(a)>=0&&b.add(a)}),this.metrics?.onAddToMesh(a,ao.Fanout,b.size)),b.size<this.opts.D){let d=b.size,e=this.getRandomGossipPeers(a,this.opts.D,a=>!b.has(a)&&!this.direct.has(a)&&this.score.score(a)>=0);e.forEach(a=>{b.add(a)}),this.metrics?.onAddToMesh(a,ao.Random,b.size-d)}this.mesh.set(a,b),b.forEach(b=>{this.log("JOIN: Add mesh link to %s in %s",b,a),this.sendGraft(b,a)})}async leave(a){if(this.status.code!==at.started)throw Error("Gossipsub has not started");this.log("LEAVE %s",a),this.metrics?.onLeave(a);let b=this.mesh.get(a);b&&(await Promise.all(Array.from(b).map(async b=>(this.log("LEAVE: Remove mesh link to %s in %s",b,a),await this.sendPrune(b,a)))),this.mesh.delete(a))}selectPeersToForward(a,b,c){let d=new Set,e=this.topics.get(a);e&&(this.direct.forEach(a=>{e.has(a)&&b!==a&&!c?.has(a)&&d.add(a)}),this.floodsubPeers.forEach(a=>{e.has(a)&&b!==a&&!c?.has(a)&&this.score.score(a)>=this.opts.scoreThresholds.publishThreshold&&d.add(a)}));let f=this.mesh.get(a);return f&&f.size>0&&f.forEach(a=>{b===a||c?.has(a)||d.add(a)}),d}selectPeersToPublish(a){let b=new Set,c={direct:0,floodsub:0,mesh:0,fanout:0},d=this.topics.get(a);if(d){if(this.opts.floodPublish)d.forEach(a=>{this.direct.has(a)?(b.add(a),c.direct++):this.score.score(a)>=this.opts.scoreThresholds.publishThreshold&&(b.add(a),c.floodsub++)});else{this.direct.forEach(a=>{d.has(a)&&(b.add(a),c.direct++)}),this.floodsubPeers.forEach(a=>{d.has(a)&&this.score.score(a)>=this.opts.scoreThresholds.publishThreshold&&(b.add(a),c.floodsub++)});let e=this.mesh.get(a);if(e&&e.size>0)e.forEach(a=>{b.add(a),c.mesh++});else{let f=this.fanout.get(a);if(f&&f.size>0)f.forEach(a=>{b.add(a),c.fanout++});else{let g=this.getRandomGossipPeers(a,this.opts.D,a=>this.score.score(a)>=this.opts.scoreThresholds.publishThreshold);g.size>0&&(this.fanout.set(a,g),g.forEach(a=>{b.add(a),c.fanout++}))}this.fanoutLastpub.set(a,Date.now())}}}return{tosend:b,tosendCount:c}}forwardMessage(a,b,c,d){c&&this.score.deliverMessage(c,a,b.topic);let e=this.selectPeersToForward(b.topic,c,d),f=mJ([b]);e.forEach(a=>{this.sendRpc(a,f)}),this.metrics?.onForwardMsg(b.topic,e.size)}async publish(a,b){let c=this.dataTransform?this.dataTransform.outboundTransform(a,b):b;if(null==this.publishConfig)throw Error("PublishError.Uninitialized");let d=await nv(this.publishConfig,a,c);if(null==d.from)throw Error("PublishError.InvalidMessage");let e={from:(0,bF.cv)(d.from),data:b,sequenceNumber:null==d.seqno?void 0:BigInt(`0x${(0,bb.toString)(d.seqno,"base16")}`),topic:a,signature:d.signature,key:d.key},f=await this.msgIdFn(e),g=this.msgIdToStrFn(f);if(this.seenCache.has(g))throw Error("PublishError.Duplicate");let{tosend:h,tosendCount:i}=this.selectPeersToPublish(d.topic),j=!0===this.opts.emitSelf&&this.subscriptions.has(a);if(0===h.size&&!this.opts.allowPublishToZeroPeers&&!j)throw Error("PublishError.InsufficientPeers");this.seenCache.put(g),this.mcache.put({msgId:f,msgIdStr:g},d,!0),this.publishedMessageIds.put(g);let k=mJ([d]);for(let l of h){let m=this.sendRpc(l,k);m||h.delete(l)}return this.metrics?.onPublishMsg(a,i,h.size,null!=d.data?d.data.length:0),j&&(h.add(this.components.getPeerId().toString()),super.dispatchEvent(new mp("gossipsub:message",{detail:{propagationSource:this.components.getPeerId(),msgId:g,msg:e}})),super.dispatchEvent(new mp("message",{detail:e}))),{recipients:Array.from(h.values()).map(a=>(0,bF.jE)(a))}}reportMessageValidationResult(a,b,c){if(c===ai.Accept){let d=this.mcache.validate(a);if(this.metrics?.onReportValidationMcacheHit(null!==d),null!=d){let{message:e,originatingPeers:f}=d;this.score.deliverMessage(b.toString(),a,e.topic),this.forwardMessage(a,d.message,b.toString(),f),this.metrics?.onReportValidation(e.topic,c)}}else{let g=this.mcache.remove(a);if(this.metrics?.onReportValidationMcacheHit(null!==g),g){let h=mO(c),{message:i,originatingPeers:j}=g;for(let k of(this.score.rejectMessage(b.toString(),a,i.topic,h),j))this.score.rejectMessage(k,a,i.topic,h);this.metrics?.onReportValidation(i.topic,c)}}}sendGraft(a,b){let c=mJ([],{graft:[{topicID:b}]});this.sendRpc(a,c)}async sendPrune(a,b){let c=[await this.makePrune(a,b,this.opts.doPX)],d=mJ([],{prune:c});this.sendRpc(a,d)}sendRpc(a,b){let c=this.peers.get(a);if(!c||!c.isWritable)return this.log(`Cannot send RPC to ${a} as there is no open stream to it available`),!1;let d=this.control.get(a);d&&(this.piggybackControl(a,b,d),this.control.delete(a));let e=this.gossip.get(a);e&&(this.piggybackGossip(a,b,e),this.gossip.delete(a));let f=af.encode(b);return c.write(f),this.metrics?.onRpcSent(b,f.length),!0}piggybackControl(a,b,c){let d=c.graft.filter(({topicID:b})=>(b&&this.mesh.get(b)||new Set).has(a)),e=c.prune.filter(({topicID:b})=>!(b&&this.mesh.get(b)||new Set).has(a));(d.length||e.length)&&(b.control?(b.control.graft=b.control.graft.concat(d),b.control.prune=b.control.prune.concat(e)):b.control={graft:d,prune:e,ihave:[],iwant:[]})}piggybackGossip(a,b,c){b.control||(b.control={ihave:[],iwant:[],graft:[],prune:[]}),b.control.ihave=c}async sendGraftPrune(a,b,c){let d=this.opts.doPX;for(let[e,f]of a){let g=f.map(a=>({topicID:a})),h=[],i=b.get(e);i&&(h=await Promise.all(i.map(async a=>await this.makePrune(e,a,d&&!c.get(e)))),b.delete(e));let j=mJ([],{graft:g,prune:h});this.sendRpc(e,j)}for(let[k,l]of b){let m=await Promise.all(l.map(async a=>await this.makePrune(k,a,d&&!c.get(k)))),n=mJ([],{prune:m});this.sendRpc(k,n)}}emitGossip(a){let b=this.mcache.getGossipIDs(new Set(a.keys()));for(let[c,d]of a)this.doEmitGossip(c,d,b.get(c)??[])}doEmitGossip(a,b,c){if(!c.length||(mK(c),c.length>5e3&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",c.length),!b.size))return;let d=this.opts.Dlazy,e=.25*b.size,f=b;e>d&&(d=e),d>f.size?d=f.size:f=mK(Array.from(f)).slice(0,d),f.forEach(b=>{let d=c;c.length>5e3&&(d=mK(d.slice()).slice(0,5e3)),this.pushGossip(b,{topicID:a,messageIDs:d})})}flush(){for(let[a,b]of this.gossip.entries())this.gossip.delete(a),this.sendRpc(a,mJ([],{ihave:b}));for(let[c,d]of this.control.entries())this.control.delete(c),this.sendRpc(c,mJ([],{graft:d.graft,prune:d.prune}))}pushGossip(a,b){this.log("Add gossip to %s",a);let c=this.gossip.get(a)||[];this.gossip.set(a,c.concat(b))}async makePrune(a,b,c){if(this.score.prune(a,b),this.peers.get(a).protocol===mH)return{topicID:b,peers:[]};let d=BigInt(this.opts.pruneBackoff/1e3);if(!c)return{topicID:b,peers:[],backoff:d};let e=this.getRandomGossipPeers(b,this.opts.prunePeers,b=>b!==a&&this.score.score(b)>=0),f=await Promise.all(Array.from(e).map(async a=>{let b=(0,bF.jE)(a);return{peerID:b.toBytes(),signedPeerRecord:await this.components.getPeerStore().addressBook.getRawEnvelope(b)}}));return{topicID:b,peers:f,backoff:d}}async heartbeat(){let{D:a,Dlo:b,Dhi:c,Dscore:d,Dout:e,fanoutTTL:f}=this.opts;this.heartbeatTicks++;let g=new Map,h=a=>{let b=g.get(a);return void 0===b&&(b=this.score.score(a),g.set(a,b)),b},i=new Map,j=new Map,k=new Map;this.clearBackoff(),this.peerhave.clear(),this.metrics?.cacheSize.set({cache:"iasked"},this.iasked.size),this.iasked.clear(),this.applyIwantPenalties(),this.heartbeatTicks%this.opts.directConnectTicks==0&&await this.directConnect(),this.fastMsgIdCache?.prune(),this.seenCache.prune(),this.gossipTracer.prune(),this.publishedMessageIds.prune();let l=new Map;this.mesh.forEach((f,g)=>{let m=this.topics.get(g),n=new Set,o=new Set;if(l.set(g,o),m){let p=mK(Array.from(m)),q=this.backoff.get(g);for(let r of p){let s=this.peers.get(r);if(s&&mL(s.protocol)&&!f.has(r)&&!this.direct.has(r)){let t=h(r);q&&q.has(r)||!(t>=0)||n.add(r),t>=this.opts.scoreThresholds.gossipThreshold&&o.add(r)}}}let u=(a,b)=>{this.log("HEARTBEAT: Remove mesh link to %s in %s",a,g),this.addBackoff(a,g),f.delete(a),h(a)>=this.opts.scoreThresholds.gossipThreshold&&o.add(a),this.metrics?.onRemoveFromMesh(g,b,1);let c=j.get(a);c?c.push(g):j.set(a,[g])},v=(a,b)=>{this.log("HEARTBEAT: Add mesh link to %s in %s",a,g),this.score.graft(a,g),f.add(a),o.delete(a),this.metrics?.onAddToMesh(g,b,1);let c=i.get(a);c?c.push(g):i.set(a,[g])};if(f.forEach(a=>{let b=h(a);b<0&&(this.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",a,b,g),u(a,ap.BadScore),k.set(a,!0))}),f.size<b){var w,x;let y=a-f.size,z=(w=n,nA(w,x=y,()=>!0));z.forEach(a=>{v(a,ao.NotEnough)})}if(f.size>c){let A=Array.from(f);A.sort((a,b)=>h(b)-h(a));let B=0;if((A=A.slice(0,d).concat(mK(A.slice(d)))).slice(0,a).forEach(a=>{this.outbound.get(a)&&B++}),B<e){let C=a=>{let b=A[a];for(let c=a;c>0;c--)A[c]=A[c-1];A[0]=b};if(B>0){let D=B;for(let E=1;E<a&&D>0;E++)this.outbound.get(A[E])&&(C(E),D--)}let F=a-B;for(let G=a;G<A.length&&F>0;G++)this.outbound.get(A[G])&&(C(G),F--)}A.slice(a).forEach(a=>{u(a,ap.Excess)})}if(f.size>=b){let H=0;if(f.forEach(a=>{this.outbound.get(a)&&H++}),H<e){let I=e-H,J=nA(n,I,a=>!0===this.outbound.get(a));J.forEach(a=>{v(a,ao.Outbound)})}}if(this.heartbeatTicks%this.opts.opportunisticGraftTicks==0&&f.size>1){let K=Array.from(f).sort((a,b)=>h(a)-h(b)),L=Math.floor(f.size/2),M=h(K[L]);if(M<this.opts.scoreThresholds.opportunisticGraftThreshold){let N=this.opts.opportunisticGraftPeers,O=nA(n,N,a=>h(a)>M);for(let P of O)this.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",P,g),v(P,ao.Opportunistic)}}});let m=Date.now();this.fanoutLastpub.forEach((a,b)=>{a+f<m&&(this.fanout.delete(b),this.fanoutLastpub.delete(b))}),this.fanout.forEach((b,c)=>{let d=this.topics.get(c);b.forEach(a=>{(!d.has(a)||h(a)<this.opts.scoreThresholds.publishThreshold)&&b.delete(a)});let e=this.topics.get(c),f=[],g=new Set;if(l.set(c,g),e){let i=mK(Array.from(e));for(let j of i){let k=this.peers.get(j);if(k&&mL(k.protocol)&&!b.has(j)&&!this.direct.has(j)){let m=h(j);m>=this.opts.scoreThresholds.publishThreshold&&f.push(j),m>=this.opts.scoreThresholds.gossipThreshold&&g.add(j)}}}if(b.size<a){let n=a-b.size;f.slice(0,n).forEach(a=>{b.add(a),g?.delete(a)})}}),this.emitGossip(l),await this.sendGraftPrune(i,j,k),this.flush(),this.mcache.shift(),this.dispatchEvent(new mp("gossipsub:heartbeat"))}getRandomGossipPeers(a,b,c=()=>!0){let d=this.topics.get(a);if(!d)return new Set;let e=[];return d.forEach(a=>{let b=this.peers.get(a);b&&mL(b.protocol)&&c(a)&&e.push(a)}),e=mK(e),b>0&&e.length>b&&(e=e.slice(0,b)),new Set(e)}onScrapeMetrics(a){a.mcacheSize.set(this.mcache.size),a.cacheSize.set({cache:"direct"},this.direct.size),a.cacheSize.set({cache:"seenCache"},this.seenCache.size),a.cacheSize.set({cache:"fastMsgIdCache"},this.fastMsgIdCache?.size??0),a.cacheSize.set({cache:"publishedMessageIds"},this.publishedMessageIds.size),a.cacheSize.set({cache:"mcache"},this.mcache.size),a.cacheSize.set({cache:"score"},this.score.size),a.cacheSize.set({cache:"gossipTracer.promises"},this.gossipTracer.size),a.cacheSize.set({cache:"gossipTracer.requests"},this.gossipTracer.requestMsByMsgSize),a.cacheSize.set({cache:"topics"},this.topics.size),a.cacheSize.set({cache:"subscriptions"},this.subscriptions.size),a.cacheSize.set({cache:"mesh"},this.mesh.size),a.cacheSize.set({cache:"fanout"},this.fanout.size),a.cacheSize.set({cache:"peers"},this.peers.size),a.cacheSize.set({cache:"acceptFromWhitelist"},this.acceptFromWhitelist.size),a.cacheSize.set({cache:"gossip"},this.gossip.size),a.cacheSize.set({cache:"control"},this.control.size),a.cacheSize.set({cache:"peerhave"},this.peerhave.size),a.cacheSize.set({cache:"outbound"},this.outbound.size);let b=0;for(let c of this.backoff.values())b+=c.size;for(let[d,e]of(a.cacheSize.set({cache:"backoff"},b),this.topics))a.topicPeersCount.set({topicStr:d},e.size);for(let[f,g]of this.mesh)a.meshPeerCounts.set({topicStr:f},g.size);let h=[],i=new Map;for(let j of(a.behaviourPenalty.reset(),this.peers.keys())){let k=this.score.score(j);h.push(k),i.set(j,k),a.behaviourPenalty.observe(this.score.peerStats.get(j)?.behaviourPenalty??0)}a.registerScores(h,this.opts.scoreThresholds),a.registerScorePerMesh(this.mesh,i);let l=function(a,b,c,d,e){let f={byTopic:new Map,p5w:[],p6w:[],p7w:[],score:[]};for(let g of a){let h=b.get(g);if(h){let i=nz(g,h,c,d,e);for(let[j,k]of i.byTopic){let l=f.byTopic.get(j);l||(l={p1w:[],p2w:[],p3w:[],p3bw:[],p4w:[]},f.byTopic.set(j,l)),l.p1w.push(k.p1w),l.p2w.push(k.p2w),l.p3w.push(k.p3w),l.p3bw.push(k.p3bw),l.p4w.push(k.p4w)}f.p5w.push(i.p5w),f.p6w.push(i.p6w),f.p7w.push(i.p7w),f.score.push(i.score)}else f.p5w.push(0),f.p6w.push(0),f.p7w.push(0),f.score.push(0)}return f}(this.peers.keys(),this.score.peerStats,this.score.params,this.score.peerIPs,a.topicStrToLabel);a.registerScoreWeights(l)}}).multicodec=mI,(0,aY.kg)("libp2p-delegated-peer-routing"),(0,aY.kg)("libp2p:delegated-content-routing"),c(10750);let nB=Object.create(null);nB.open="0",nB.close="1",nB.ping="2",nB.pong="3",nB.message="4",nB.upgrade="5",nB.noop="6";let nC=Object.create(null);Object.keys(nB).forEach(a=>{nC[nB[a]]=a});let nD={type:"error",data:"parser error"},nE="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),nF="function"==typeof ArrayBuffer,nG=a=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(a):a&&a.buffer instanceof ArrayBuffer,nH=({type:a,data:b},c,d)=>nE&&b instanceof Blob?c?d(b):nI(b,d):nF&&(b instanceof ArrayBuffer||nG(b))?c?d(b):nI(new Blob([b]),d):d(nB[a]+(b||"")),nI=(a,b)=>{let c=new FileReader;return c.onload=function(){let a=c.result.split(",")[1];b("b"+a)},c.readAsDataURL(a)};var nJ=nH;let nK="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",nL="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let nM=0;nM<nK.length;nM++)nL[nK.charCodeAt(nM)]=nM;let nN=a=>{let b=.75*a.length,c=a.length,d,e=0,f,g,h,i;"="===a[a.length-1]&&(b--,"="===a[a.length-2]&&b--);let j=new ArrayBuffer(b),k=new Uint8Array(j);for(d=0;d<c;d+=4)f=nL[a.charCodeAt(d)],g=nL[a.charCodeAt(d+1)],h=nL[a.charCodeAt(d+2)],i=nL[a.charCodeAt(d+3)],k[e++]=f<<2|g>>4,k[e++]=(15&g)<<4|h>>2,k[e++]=(3&h)<<6|63&i;return j},nO="function"==typeof ArrayBuffer,nP=(a,b)=>{if("string"!=typeof a)return{type:"message",data:nR(a,b)};let c=a.charAt(0);if("b"===c)return{type:"message",data:nQ(a.substring(1),b)};let d=nC[c];return d?a.length>1?{type:nC[c],data:a.substring(1)}:{type:nC[c]}:nD},nQ=(a,b)=>{if(!nO)return{base64:!0,data:a};{let c=nN(a);return nR(c,b)}},nR=(a,b)=>"blob"===b?a instanceof ArrayBuffer?new Blob([a]):a:a;var nS=nP;let nT=(a,b)=>{let c=a.length,d=Array(c),e=0;a.forEach((a,f)=>{nJ(a,!1,a=>{d[f]=a,++e===c&&b(d.join("\x1e"))})})},nU=(a,b)=>{let c=a.split("\x1e"),d=[];for(let e=0;e<c.length;e++){let f=nS(c[e],b);if(d.push(f),"error"===f.type)break}return d};function nV(a){if(a)return nW(a)}function nW(a){for(var b in nV.prototype)a[b]=nV.prototype[b];return a}nV.prototype.on=nV.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(b),this},nV.prototype.once=function(a,b){function c(){this.off(a,c),b.apply(this,arguments)}return c.fn=b,this.on(a,c),this},nV.prototype.off=nV.prototype.removeListener=nV.prototype.removeAllListeners=nV.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c,d=this._callbacks["$"+a];if(!d)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var e=0;e<d.length;e++)if((c=d[e])===b||c.fn===b){d.splice(e,1);break}return 0===d.length&&delete this._callbacks["$"+a],this},nV.prototype.emit=function(a){this._callbacks=this._callbacks||{};for(var b=Array(arguments.length-1),c=this._callbacks["$"+a],d=1;d<arguments.length;d++)b[d-1]=arguments[d];if(c){c=c.slice(0);for(var d=0,e=c.length;d<e;++d)c[d].apply(this,b)}return this},nV.prototype.emitReserved=nV.prototype.emit,nV.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]},nV.prototype.hasListeners=function(a){return!!this.listeners(a).length};let nX="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function nY(a,...b){return b.reduce((b,c)=>(a.hasOwnProperty(c)&&(b[c]=a[c]),b),{})}let nZ=setTimeout,n$=clearTimeout;function n_(a,b){b.useNativeTimers?(a.setTimeoutFn=nZ.bind(nX),a.clearTimeoutFn=n$.bind(nX)):(a.setTimeoutFn=setTimeout.bind(nX),a.clearTimeoutFn=clearTimeout.bind(nX))}function n0(a){return"string"==typeof a?n1(a):Math.ceil(1.33*(a.byteLength||a.size))}function n1(a){let b=0,c=0;for(let d=0,e=a.length;d<e;d++)(b=a.charCodeAt(d))<128?c+=1:b<2048?c+=2:b<55296||b>=57344?c+=3:(d++,c+=4);return c}class n2 extends Error{constructor(a,b,c){super(a),this.description=b,this.context=c,this.type="TransportError"}}class n3 extends nV{constructor(a){super(),this.writable=!1,n_(this,a),this.opts=a,this.query=a.query,this.readyState="",this.socket=a.socket}onError(a,b,c){return super.emitReserved("error",new n2(a,b,c)),this}open(){return("closed"===this.readyState||""===this.readyState)&&(this.readyState="opening",this.doOpen()),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(a){"open"===this.readyState&&this.write(a)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(a){let b=nS(a,this.socket.binaryType);this.onPacket(b)}onPacket(a){super.emitReserved("packet",a)}onClose(a){this.readyState="closed",super.emitReserved("close",a)}}let n4="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),n5={},n6=0,n7=0,n8;function n9(a){let b="";do b=n4[a%64]+b,a=Math.floor(a/64);while(a>0);return b}function oa(){let a=n9(+new Date);return a!==n8?(n6=0,n8=a):a+"."+n9(n6++)}for(;n7<64;n7++)n5[n4[n7]]=n7;function ob(a){let b="";for(let c in a)a.hasOwnProperty(c)&&(b.length&&(b+="&"),b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b}let oc=!1;try{oc="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(od){}let oe=oc;function of(a){let b=a.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!b||oe))return new XMLHttpRequest}catch(c){}if(!b)try{return new nX[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(d){}}function og(){}let oh=function(){let a=new of({xdomain:!1});return null!=a.responseType}();class oi extends nV{constructor(a,b){super(),n_(this,b),this.opts=b,this.method=b.method||"GET",this.uri=a,this.async=!1!==b.async,this.data=void 0!==b.data?b.data:null,this.create()}create(){let a=nY(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");a.xdomain=!!this.opts.xd,a.xscheme=!!this.opts.xs;let b=this.xhr=new of(a);try{b.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(let c in b.setDisableHeaderCheck&&b.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(c)&&b.setRequestHeader(c,this.opts.extraHeaders[c])}catch(d){}if("POST"===this.method)try{b.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{b.setRequestHeader("Accept","*/*")}catch(f){}"withCredentials"in b&&(b.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(b.timeout=this.opts.requestTimeout),b.onreadystatechange=()=>{4===b.readyState&&(200===b.status||1223===b.status?this.onLoad():this.setTimeoutFn(()=>{this.onError("number"==typeof b.status?b.status:0)},0))},b.send(this.data)}catch(g){this.setTimeoutFn(()=>{this.onError(g)},0);return}"undefined"!=typeof document&&(this.index=oi.requestsCount++,oi.requests[this.index]=this)}onError(a){this.emitReserved("error",a,this.xhr),this.cleanup(!0)}cleanup(a){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=og,a)try{this.xhr.abort()}catch(b){}"undefined"!=typeof document&&delete oi.requests[this.index],this.xhr=null}}onLoad(){let a=this.xhr.responseText;null!==a&&(this.emitReserved("data",a),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(oi.requestsCount=0,oi.requests={},"undefined"!=typeof document){if("function"==typeof attachEvent)attachEvent("onunload",ok);else if("function"==typeof addEventListener){let oj="onpagehide"in nX?"pagehide":"unload";addEventListener(oj,ok,!1)}}function ok(){for(let a in oi.requests)oi.requests.hasOwnProperty(a)&&oi.requests[a].abort()}let ol=(()=>{let a="function"==typeof Promise&&"function"==typeof Promise.resolve;return a?a=>Promise.resolve().then(a):(a,b)=>b(a,0)})(),om=nX.WebSocket||nX.MozWebSocket;c(48764).Buffer;let on="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),oo={websocket:class extends n3{constructor(a){super(a),this.supportsBinary=!a.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;let a=this.uri(),b=this.opts.protocols,c=on?{}:nY(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(c.headers=this.opts.extraHeaders);try{this.ws=on?new om(a,b,c):b?new om(a,b):new om(a)}catch(d){return this.emitReserved("error",d)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=a=>this.onClose({description:"websocket connection closed",context:a}),this.ws.onmessage=a=>this.onData(a.data),this.ws.onerror=a=>this.onError("websocket error",a)}write(a){this.writable=!1;for(let b=0;b<a.length;b++){let c=a[b],d=b===a.length-1;nJ(c,this.supportsBinary,a=>{try{this.ws.send(a)}catch(b){}d&&ol(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let a=this.query||{},b=this.opts.secure?"wss":"ws",c="";this.opts.port&&("wss"===b&&443!==Number(this.opts.port)||"ws"===b&&80!==Number(this.opts.port))&&(c=":"+this.opts.port),this.opts.timestampRequests&&(a[this.opts.timestampParam]=oa()),this.supportsBinary||(a.b64=1);let d=ob(a),e=-1!==this.opts.hostname.indexOf(":");return b+"://"+(e?"["+this.opts.hostname+"]":this.opts.hostname)+c+this.opts.path+(d.length?"?"+d:"")}check(){return!!om}},polling:class extends n3{constructor(a){if(super(a),this.polling=!1,"undefined"!=typeof location){let b="https:"===location.protocol,c=location.port;c||(c=b?"443":"80"),this.xd="undefined"!=typeof location&&a.hostname!==location.hostname||c!==a.port,this.xs=a.secure!==b}let d=a&&a.forceBase64;this.supportsBinary=oh&&!d}get name(){return"polling"}doOpen(){this.poll()}pause(a){this.readyState="pausing";let b=()=>{this.readyState="paused",a()};if(this.polling||!this.writable){let c=0;this.polling&&(c++,this.once("pollComplete",function(){--c||b()})),this.writable||(c++,this.once("drain",function(){--c||b()}))}else b()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(a){let b=a=>{if("opening"===this.readyState&&"open"===a.type&&this.onOpen(),"close"===a.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};nU(a,this.socket.binaryType).forEach(b),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){let a=()=>{this.write([{type:"close"}])};"open"===this.readyState?a():this.once("open",a)}write(a){this.writable=!1,nT(a,a=>{this.doWrite(a,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let a=this.query||{},b=this.opts.secure?"https":"http",c="";!1!==this.opts.timestampRequests&&(a[this.opts.timestampParam]=oa()),this.supportsBinary||a.sid||(a.b64=1),this.opts.port&&("https"===b&&443!==Number(this.opts.port)||"http"===b&&80!==Number(this.opts.port))&&(c=":"+this.opts.port);let d=ob(a),e=-1!==this.opts.hostname.indexOf(":");return b+"://"+(e?"["+this.opts.hostname+"]":this.opts.hostname)+c+this.opts.path+(d.length?"?"+d:"")}request(a={}){return Object.assign(a,{xd:this.xd,xs:this.xs},this.opts),new oi(this.uri(),a)}doWrite(a,b){let c=this.request({method:"POST",data:a});c.on("success",b),c.on("error",(a,b)=>{this.onError("xhr post error",a,b)})}doPoll(){let a=this.request();a.on("data",this.onData.bind(this)),a.on("error",(a,b)=>{this.onError("xhr poll error",a,b)}),this.pollXhr=a}}},op=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,oq=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function or(a){let b=a,c=a.indexOf("["),d=a.indexOf("]");-1!=c&& -1!=d&&(a=a.substring(0,c)+a.substring(c,d).replace(/:/g,";")+a.substring(d,a.length));let e=op.exec(a||""),f={},g=14;for(;g--;)f[oq[g]]=e[g]||"";return -1!=c&& -1!=d&&(f.source=b,f.host=f.host.substring(1,f.host.length-1).replace(/;/g,":"),f.authority=f.authority.replace("[","").replace("]","").replace(/;/g,":"),f.ipv6uri=!0),f.pathNames=os(f,f.path),f.queryKey=ot(f,f.query),f}function os(a,b){let c=b.replace(/\/{2,9}/g,"/").split("/");return("/"==b.substr(0,1)||0===b.length)&&c.splice(0,1),"/"==b.substr(b.length-1,1)&&c.splice(c.length-1,1),c}function ot(a,b){let c={};return b.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,b,d){b&&(c[b]=d)}),c}class ou extends nV{constructor(a,b={}){super(),a&&"object"==typeof a&&(b=a,a=null),a?(a=or(a),b.hostname=a.host,b.secure="https"===a.protocol||"wss"===a.protocol,b.port=a.port,a.query&&(b.query=a.query)):b.host&&(b.hostname=or(b.host).host),n_(this,b),this.secure=null!=b.secure?b.secure:"undefined"!=typeof location&&"https:"===location.protocol,b.hostname&&!b.port&&(b.port=this.secure?"443":"80"),this.hostname=b.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=b.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=b.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},b),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=function(a){let b={},c=a.split("&");for(let d=0,e=c.length;d<e;d++){let f=c[d].split("=");b[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}return b}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(a){let b=Object.assign({},this.opts.query);b.EIO=4,b.transport=a,this.id&&(b.sid=this.id);let c=Object.assign({},this.opts.transportOptions[a],this.opts,{query:b,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new oo[a](c)}open(){let a;if(this.opts.rememberUpgrade&&ou.priorWebsocketSuccess&& -1!==this.transports.indexOf("websocket"))a="websocket";else if(0===this.transports.length){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else a=this.transports[0];this.readyState="opening";try{a=this.createTransport(a)}catch(b){this.transports.shift(),this.open();return}a.open(),this.setTransport(a)}setTransport(a){this.transport&&this.transport.removeAllListeners(),this.transport=a,a.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",a=>this.onClose("transport close",a))}probe(a){let b=this.createTransport(a),c=!1;ou.priorWebsocketSuccess=!1;let d=()=>{c||(b.send([{type:"ping",data:"probe"}]),b.once("packet",a=>{if(!c){if("pong"===a.type&&"probe"===a.data)this.upgrading=!0,this.emitReserved("upgrading",b),b&&(ou.priorWebsocketSuccess="websocket"===b.name,this.transport.pause(()=>{!c&&"closed"!==this.readyState&&(j(),this.setTransport(b),b.send([{type:"upgrade"}]),this.emitReserved("upgrade",b),b=null,this.upgrading=!1,this.flush())}));else{let d=Error("probe error");d.transport=b.name,this.emitReserved("upgradeError",d)}}}))};function e(){c||(c=!0,j(),b.close(),b=null)}let f=a=>{let c=Error("probe error: "+a);c.transport=b.name,e(),this.emitReserved("upgradeError",c)};function g(){f("transport closed")}function h(){f("socket closed")}function i(a){b&&a.name!==b.name&&e()}let j=()=>{b.removeListener("open",d),b.removeListener("error",f),b.removeListener("close",g),this.off("close",h),this.off("upgrading",i)};b.once("open",d),b.once("error",f),b.once("close",g),this.once("close",h),this.once("upgrading",i),b.open()}onOpen(){if(this.readyState="open",ou.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let a=0,b=this.upgrades.length;for(;a<b;a++)this.probe(this.upgrades[a])}}onPacket(a){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",a),this.emitReserved("heartbeat"),a.type){case"open":this.onHandshake(JSON.parse(a.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":let b=Error("server error");b.code=a.data,this.onError(b);break;case"message":this.emitReserved("data",a.data),this.emitReserved("message",a.data)}}onHandshake(a){this.emitReserved("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this.upgrades=this.filterUpgrades(a.upgrades),this.pingInterval=a.pingInterval,this.pingTimeout=a.pingTimeout,this.maxPayload=a.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let a=this.getWritablePackets();this.transport.send(a),this.prevBufferLen=a.length,this.emitReserved("flush")}}getWritablePackets(){let a=this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1;if(!a)return this.writeBuffer;let b=1;for(let c=0;c<this.writeBuffer.length;c++){let d=this.writeBuffer[c].data;if(d&&(b+=n0(d)),c>0&&b>this.maxPayload)return this.writeBuffer.slice(0,c);b+=2}return this.writeBuffer}write(a,b,c){return this.sendPacket("message",a,b,c),this}send(a,b,c){return this.sendPacket("message",a,b,c),this}sendPacket(a,b,c,d){if("function"==typeof b&&(d=b,b=void 0),"function"==typeof c&&(d=c,c=null),"closing"===this.readyState||"closed"===this.readyState)return;(c=c||{}).compress=!1!==c.compress;let e={type:a,data:b,options:c};this.emitReserved("packetCreate",e),this.writeBuffer.push(e),d&&this.once("flush",d),this.flush()}close(){let a=()=>{this.onClose("forced close"),this.transport.close()},b=()=>{this.off("upgrade",b),this.off("upgradeError",b),a()},c=()=>{this.once("upgrade",b),this.once("upgradeError",b)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?c():a()}):this.upgrading?c():a()),this}onError(a){ou.priorWebsocketSuccess=!1,this.emitReserved("error",a),this.onClose("transport error",a)}onClose(a,b){("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",a,b),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(a){let b=[],c=0,d=a.length;for(;c<d;c++)~this.transports.indexOf(a[c])&&b.push(a[c]);return b}}ou.protocol=4,ou.protocol;let ov="function"==typeof ArrayBuffer,ow=a=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(a):a.buffer instanceof ArrayBuffer,ox=Object.prototype.toString,oy="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===ox.call(Blob),oz="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===ox.call(File);function oA(a){return ov&&(a instanceof ArrayBuffer||ow(a))||oy&&a instanceof Blob||oz&&a instanceof File}function oB(a,b){if(!a||"object"!=typeof a)return!1;if(Array.isArray(a)){for(let c=0,d=a.length;c<d;c++)if(oB(a[c]))return!0;return!1}if(oA(a))return!0;if(a.toJSON&&"function"==typeof a.toJSON&&1===arguments.length)return oB(a.toJSON(),!0);for(let e in a)if(Object.prototype.hasOwnProperty.call(a,e)&&oB(a[e]))return!0;return!1}function oC(a,b){if(!a)return a;if(oA(a)){let c={_placeholder:!0,num:b.length};return b.push(a),c}if(Array.isArray(a)){let d=Array(a.length);for(let e=0;e<a.length;e++)d[e]=oC(a[e],b);return d}if("object"==typeof a&&!(a instanceof Date)){let f={};for(let g in a)Object.prototype.hasOwnProperty.call(a,g)&&(f[g]=oC(a[g],b));return f}return a}function oD(a,b){if(!a)return a;if(a&& !0===a._placeholder){let c="number"==typeof a.num&&a.num>=0&&a.num<b.length;if(c)return b[a.num];throw Error("illegal attachments")}if(Array.isArray(a))for(let d=0;d<a.length;d++)a[d]=oD(a[d],b);else if("object"==typeof a)for(let e in a)Object.prototype.hasOwnProperty.call(a,e)&&(a[e]=oD(a[e],b));return a}let oE=5;(pw=au||(au={}))[pw.CONNECT=0]="CONNECT",pw[pw.DISCONNECT=1]="DISCONNECT",pw[pw.EVENT=2]="EVENT",pw[pw.ACK=3]="ACK",pw[pw.CONNECT_ERROR=4]="CONNECT_ERROR",pw[pw.BINARY_EVENT=5]="BINARY_EVENT",pw[pw.BINARY_ACK=6]="BINARY_ACK";class oF{constructor(a){this.replacer=a}encode(a){return(a.type===au.EVENT||a.type===au.ACK)&&oB(a)?(a.type=a.type===au.EVENT?au.BINARY_EVENT:au.BINARY_ACK,this.encodeAsBinary(a)):[this.encodeAsString(a)]}encodeAsString(a){let b=""+a.type;return(a.type===au.BINARY_EVENT||a.type===au.BINARY_ACK)&&(b+=a.attachments+"-"),a.nsp&&"/"!==a.nsp&&(b+=a.nsp+","),null!=a.id&&(b+=a.id),null!=a.data&&(b+=JSON.stringify(a.data,this.replacer)),b}encodeAsBinary(a){let b=function(a){let b=[],c=a.data,d=a;return d.data=oC(c,b),d.attachments=b.length,{packet:d,buffers:b}}(a),c=this.encodeAsString(b.packet),d=b.buffers;return d.unshift(c),d}}class oG extends nV{constructor(a){super(),this.reviver=a}add(a){let b;if("string"==typeof a){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");(b=this.decodeString(a)).type===au.BINARY_EVENT||b.type===au.BINARY_ACK?(this.reconstructor=new oH(b),0===b.attachments&&super.emitReserved("decoded",b)):super.emitReserved("decoded",b)}else if(oA(a)||a.base64){if(this.reconstructor)(b=this.reconstructor.takeBinaryData(a))&&(this.reconstructor=null,super.emitReserved("decoded",b));else throw Error("got binary data when not reconstructing a packet")}else throw Error("Unknown type: "+a)}decodeString(a){let b=0,c={type:Number(a.charAt(0))};if(void 0===au[c.type])throw Error("unknown packet type "+c.type);if(c.type===au.BINARY_EVENT||c.type===au.BINARY_ACK){let d=b+1;for(;"-"!==a.charAt(++b)&&b!=a.length;);let e=a.substring(d,b);if(e!=Number(e)||"-"!==a.charAt(b))throw Error("Illegal attachments");c.attachments=Number(e)}if("/"===a.charAt(b+1)){let f=b+1;for(;++b;){let g=a.charAt(b);if(","===g||b===a.length)break}c.nsp=a.substring(f,b)}else c.nsp="/";let h=a.charAt(b+1);if(""!==h&&Number(h)==h){let i=b+1;for(;++b;){let j=a.charAt(b);if(null==j||Number(j)!=j){--b;break}if(b===a.length)break}c.id=Number(a.substring(i,b+1))}if(a.charAt(++b)){let k=this.tryParse(a.substr(b));if(oG.isPayloadValid(c.type,k))c.data=k;else throw Error("invalid payload")}return c}tryParse(a){try{return JSON.parse(a,this.reviver)}catch(b){return!1}}static isPayloadValid(a,b){switch(a){case au.CONNECT:return"object"==typeof b;case au.DISCONNECT:return void 0===b;case au.CONNECT_ERROR:return"string"==typeof b||"object"==typeof b;case au.EVENT:case au.BINARY_EVENT:return Array.isArray(b)&&b.length>0;case au.ACK:case au.BINARY_ACK:return Array.isArray(b)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class oH{constructor(a){this.packet=a,this.buffers=[],this.reconPack=a}takeBinaryData(a){if(this.buffers.push(a),this.buffers.length===this.reconPack.attachments){var b,c;let d=(b=this.reconPack,c=this.buffers,b.data=oD(b.data,c),b.attachments=void 0,b);return this.finishedReconstruction(),d}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function oI(a,b,c){return a.on(b,c),function(){a.off(b,c)}}let oJ=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class oK extends nV{constructor(a,b,c){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=a,this.nsp=b,c&&c.auth&&(this.auth=c.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let a=this.io;this.subs=[oI(a,"open",this.onopen.bind(this)),oI(a,"packet",this.onpacket.bind(this)),oI(a,"error",this.onerror.bind(this)),oI(a,"close",this.onclose.bind(this)),]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io["_reconnecting"]||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...a){return a.unshift("message"),this.emit.apply(this,a),this}emit(a,...b){if(oJ.hasOwnProperty(a))throw Error('"'+a+'" is a reserved event name');b.unshift(a);let c={type:au.EVENT,data:b};if(c.options={},c.options.compress=!1!==this.flags.compress,"function"==typeof b[b.length-1]){let d=this.ids++,e=b.pop();this._registerAckCallback(d,e),c.id=d}let f=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,g=this.flags.volatile&&(!f||!this.connected);return g||(this.connected?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(a,b){let c=this.flags.timeout;if(void 0===c){this.acks[a]=b;return}let d=this.io.setTimeoutFn(()=>{delete this.acks[a];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===a&&this.sendBuffer.splice(c,1);b.call(this,Error("operation has timed out"))},c);this.acks[a]=(...a)=>{this.io.clearTimeoutFn(d),b.apply(this,[null,...a])}}packet(a){a.nsp=this.nsp,this.io._packet(a)}onopen(){"function"==typeof this.auth?this.auth(a=>{this.packet({type:au.CONNECT,data:a})}):this.packet({type:au.CONNECT,data:this.auth})}onerror(a){this.connected||this.emitReserved("connect_error",a)}onclose(a,b){this.connected=!1,delete this.id,this.emitReserved("disconnect",a,b)}onpacket(a){let b=a.nsp===this.nsp;if(b)switch(a.type){case au.CONNECT:if(a.data&&a.data.sid){let c=a.data.sid;this.onconnect(c)}else this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case au.EVENT:case au.BINARY_EVENT:this.onevent(a);break;case au.ACK:case au.BINARY_ACK:this.onack(a);break;case au.DISCONNECT:this.ondisconnect();break;case au.CONNECT_ERROR:this.destroy();let d=Error(a.data.message);d.data=a.data.data,this.emitReserved("connect_error",d)}}onevent(a){let b=a.data||[];null!=a.id&&b.push(this.ack(a.id)),this.connected?this.emitEvent(b):this.receiveBuffer.push(Object.freeze(b))}emitEvent(a){if(this._anyListeners&&this._anyListeners.length){let b=this._anyListeners.slice();for(let c of b)c.apply(this,a)}super.emit.apply(this,a)}ack(a){let b=this,c=!1;return function(...d){c||(c=!0,b.packet({type:au.ACK,id:a,data:d}))}}onack(a){let b=this.acks[a.id];"function"==typeof b&&(b.apply(this,a.data),delete this.acks[a.id])}onconnect(a){this.id=a,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(a=>this.emitEvent(a)),this.receiveBuffer=[],this.sendBuffer.forEach(a=>{this.notifyOutgoingListeners(a),this.packet(a)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(a=>a()),this.subs=void 0),this.io["_destroy"](this)}disconnect(){return this.connected&&this.packet({type:au.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(a){return this.flags.compress=a,this}get volatile(){return this.flags.volatile=!0,this}timeout(a){return this.flags.timeout=a,this}onAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(a),this}prependAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(a),this}offAny(a){if(!this._anyListeners)return this;if(a){let b=this._anyListeners;for(let c=0;c<b.length;c++)if(a===b[c]){b.splice(c,1);break}}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(a){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(a),this}prependAnyOutgoing(a){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(a),this}offAnyOutgoing(a){if(!this._anyOutgoingListeners)return this;if(a){let b=this._anyOutgoingListeners;for(let c=0;c<b.length;c++)if(a===b[c]){b.splice(c,1);break}}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(a){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let b=this._anyOutgoingListeners.slice();for(let c of b)c.apply(this,a.data)}}}function oL(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}oL.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var b=Math.random(),c=Math.floor(b*this.jitter*a);a=(1&Math.floor(10*b))==0?a-c:a+c}return 0|Math.min(a,this.max)},oL.prototype.reset=function(){this.attempts=0},oL.prototype.setMin=function(a){this.ms=a},oL.prototype.setMax=function(a){this.max=a},oL.prototype.setJitter=function(a){this.jitter=a};class oM extends nV{constructor(a,b){var c;super(),this.nsps={},this.subs=[],a&&"object"==typeof a&&(b=a,a=void 0),(b=b||{}).path=b.path||"/socket.io",this.opts=b,n_(this,b),this.reconnection(!1!==b.reconnection),this.reconnectionAttempts(b.reconnectionAttempts||1/0),this.reconnectionDelay(b.reconnectionDelay||1e3),this.reconnectionDelayMax(b.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(c=b.randomizationFactor)&& void 0!==c?c:.5),this.backoff=new oL({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==b.timeout?2e4:b.timeout),this._readyState="closed",this.uri=a;let d=b.parser||aS;this.encoder=new d.Encoder,this.decoder=new d.Decoder,this._autoConnect=!1!==b.autoConnect,this._autoConnect&&this.open()}reconnection(a){return arguments.length?(this._reconnection=!!a,this):this._reconnection}reconnectionAttempts(a){return void 0===a?this._reconnectionAttempts:(this._reconnectionAttempts=a,this)}reconnectionDelay(a){var b;return void 0===a?this._reconnectionDelay:(this._reconnectionDelay=a,null===(b=this.backoff)|| void 0===b||b.setMin(a),this)}randomizationFactor(a){var b;return void 0===a?this._randomizationFactor:(this._randomizationFactor=a,null===(b=this.backoff)|| void 0===b||b.setJitter(a),this)}reconnectionDelayMax(a){var b;return void 0===a?this._reconnectionDelayMax:(this._reconnectionDelayMax=a,null===(b=this.backoff)|| void 0===b||b.setMax(a),this)}timeout(a){return arguments.length?(this._timeout=a,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(a){if(~this._readyState.indexOf("open"))return this;this.engine=new ou(this.uri,this.opts);let b=this.engine,c=this;this._readyState="opening",this.skipReconnect=!1;let d=oI(b,"open",function(){c.onopen(),a&&a()}),e=oI(b,"error",b=>{c.cleanup(),c._readyState="closed",this.emitReserved("error",b),a?a(b):c.maybeReconnectOnOpen()});if(!1!==this._timeout){let f=this._timeout;0===f&&d();let g=this.setTimeoutFn(()=>{d(),b.close(),b.emit("error",Error("timeout"))},f);this.opts.autoUnref&&g.unref(),this.subs.push(function(){clearTimeout(g)})}return this.subs.push(d),this.subs.push(e),this}connect(a){return this.open(a)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let a=this.engine;this.subs.push(oI(a,"ping",this.onping.bind(this)),oI(a,"data",this.ondata.bind(this)),oI(a,"error",this.onerror.bind(this)),oI(a,"close",this.onclose.bind(this)),oI(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(a){this.decoder.add(a)}ondecoded(a){this.emitReserved("packet",a)}onerror(a){this.emitReserved("error",a)}socket(a,b){let c=this.nsps[a];return c||(c=new oK(this,a,b),this.nsps[a]=c),c}_destroy(a){let b=Object.keys(this.nsps);for(let c of b){let d=this.nsps[c];if(d.active)return}this._close()}_packet(a){let b=this.encoder.encode(a);for(let c=0;c<b.length;c++)this.engine.write(b[c],a.options)}cleanup(){this.subs.forEach(a=>a()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(a,b){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",a,b),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let a=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let b=this.backoff.duration();this._reconnecting=!0;let c=this.setTimeoutFn(()=>{!a.skipReconnect&&(this.emitReserved("reconnect_attempt",a.backoff.attempts),a.skipReconnect||a.open(b=>{b?(a._reconnecting=!1,a.reconnect(),this.emitReserved("reconnect_error",b)):a.onreconnect()}))},b);this.opts.autoUnref&&c.unref(),this.subs.push(function(){clearTimeout(c)})}}onreconnect(){let a=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",a)}}let oN={};function oO(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};let c=function(a,b="",c){let d=a;c=c||"undefined"!=typeof location&&location,null==a&&(a=c.protocol+"//"+c.host),"string"==typeof a&&("/"===a.charAt(0)&&(a="/"===a.charAt(1)?c.protocol+a:c.host+a),/^(https?|wss?):\/\//.test(a)||(a=void 0!==c?c.protocol+"//"+a:"https://"+a),d=or(a)),!d.port&&(/^(http|ws)$/.test(d.protocol)?d.port="80":/^(http|ws)s$/.test(d.protocol)&&(d.port="443")),d.path=d.path||"/";let e=-1!==d.host.indexOf(":"),f=e?"["+d.host+"]":d.host;return d.id=d.protocol+"://"+f+":"+d.port+b,d.href=d.protocol+"://"+f+(c&&c.port===d.port?"":":"+d.port),d}(a,b.path||"/socket.io"),d=c.source,e=c.id,f=c.path,g=oN[e]&&f in oN[e].nsps,h=b.forceNew||b["force new connection"]|| !1===b.multiplex||g,i;return h?i=new oM(d,b):(oN[e]||(oN[e]=new oM(d,b)),i=oN[e]),c.query&&!b.query&&(b.query=c.queryKey),i.socket(c.path,b)}Object.assign(oO,{Manager:oM,Socket:oK,io:oO,connect:oO}),c(65780);let oP=(0,aY.kg)("libp2p:webrtc-peer:receiver"),oQ=(0,aY.kg)("libp2p:webrtc-peer:initator");(0,aY.kg)("libp2p:webrtc-star:socket");let oR=(0,aY.kg)("libp2p:webrtc-star:listener");class oS extends null{constructor(a,b,c,d,e){super(),this.signallingAddr=b,this.socket=connect(a,{transports:["websocket"],"force new connection":!0,path:"/socket.io-next/"}),this.connections=[],this.channels=new Map,this.pendingSignals=new Map,this.upgrader=c,this.handler=d,this.channelOptions=e,this.handleWsHandshake=this.handleWsHandshake.bind(this),this.socket.once("connect_error",a=>{this.dispatchEvent(new CustomEvent("error",{detail:a}))}),this.socket.once("error",a=>{this.dispatchEvent(new CustomEvent("error",{detail:a}))}),this.socket.on("ws-handshake",this.handleWsHandshake),this.socket.on("ws-peer",a=>{this.dispatchEvent(new CustomEvent("peer",{detail:a}))}),this.socket.on("connect",()=>this.socket.emit("ss-join",b.toString())),this.socket.once("connect",()=>{this.dispatchEvent(new CustomEvent("listening"))})}_createChannel(a,b,c){let d={...this.channelOptions},e=new WebRTCReceiver(d),f=a=>{let b=a.detail;oR.error("incoming connection errored",b)};return e.addEventListener("error",f),e.addEventListener("close",()=>{e.removeEventListener("error",f)},{once:!0}),e.addEventListener("signal",d=>{let e=d.detail;this.socket.emit("ss-handshake",{intentId:a,srcMultiaddr:b,dstMultiaddr:c,answer:!0,signal:e})}),e.addEventListener("ready",()=>{let b=toMultiaddrConnection(e,{remoteAddr:this.signallingAddr});oR("new inbound connection %s",b.remoteAddr);try{this.upgrader.upgradeInbound(b).then(c=>{oR("inbound connection %s upgraded",b.remoteAddr),this.connections.push(b);let d=()=>{this.connections=this.connections.filter(a=>a!==b),this.channels.delete(a),this.pendingSignals.delete(a)};e.addEventListener("close",d,{once:!0}),this.dispatchEvent(new CustomEvent("connection",{detail:c})),this.handler(c)}).catch(a=>{oR.error("inbound connection failed to upgrade",a),b.close().catch(a=>{oR.error("inbound connection failed to close after failing to upgrade",a)})})}catch(c){oR.error("inbound connection failed to upgrade",c),b.close().catch(a=>{oR.error("inbound connection failed to close after failing to upgrade",a)})}},{once:!0}),e}handleWsHandshake(a){if(oR('incoming handshake. signal type "%s" is answer %s',a.signal.type,a.answer),!0===a.answer||null!=a.err||null==a.intentId)return;let b=a.intentId,c=this.pendingSignals.get(b);null==c&&(c=[],this.pendingSignals.set(b,c)),c.push(a);let d=this.channels.get(b);if(null==d){if("offer"!==a.signal.type){oR("handshake is not an offer and channel does not exist, buffering until we receive an offer");return}oR("creating new channel to handle offer handshake"),d=this._createChannel(a.intentId,a.srcMultiaddr,a.dstMultiaddr),this.channels.set(b,d)}else oR("channel already exists, using it to handle handshake");for(;c.length>0;){let e=c.shift();e?.signal!=null&&d.handleSignal(e.signal)}}async close(){this.socket.emit("ss-leave",this.signallingAddr.toString()),this.socket.removeAllListeners(),this.socket.close(),await Promise.all([...this.connections.map(async a=>await a.close()),...Array.from(this.channels.values()).map(async a=>await a.close())]),this.dispatchEvent(new CustomEvent("close"))}}let oT=Symbol.for("@libp2p/transport"),oU=Symbol.for("@libp2p/peer-discovery"),oV="RTCPeerConnection"in globalThis,oW=(0,aY.kg)("libp2p:webrtc-star"),oX=()=>{};class oY extends null{constructor(){super(...arguments),this.started=!1}get[oU](){return!0}get[Symbol.toStringTag](){return"@libp2p/webrtc-star-discovery"}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1}dispatchEvent(a){return!!this.isStarted()&&super.dispatchEvent(a)}}class oZ{constructor(a){this.components=new Components,a?.wrtc!=null&&(this.wrtc=a.wrtc),this.sigServers=new Map,this.discovery=new oY,this.peerDiscovered=this.peerDiscovered.bind(this)}get[oT](){return!0}get[Symbol.toStringTag](){return"@libp2p/webrtc-star"}init(a){this.components=a}async dial(a,b){let c=await this._connect(a,b),d=toMultiaddrConnection(c,{remoteAddr:a,signal:b.signal});oW("new outbound connection %s",d.remoteAddr);let e=await b.upgrader.upgradeOutbound(d);return oW("outbound connection %s upgraded",d.remoteAddr),e}async _connect(a,b){if(b.signal?.aborted=== !0)throw new AbortError;let c={...b.channelOptions??{}};null!=this.wrtc&&(c.wrtc=this.wrtc);let d=a.toOptions(),e=uint8ArrayToString(randomBytes(36),"hex");return await new Promise((f,g)=>{let h=this.sigServers.get(cleanUrlSIO(a));if(h?.socket==null)return g(errcode(Error("unknown signal server to use"),"ERR_UNKNOWN_SIGNAL_SERVER"));let i=!1;oW("dialing %s:%s",d.host,d.port);let j=new WebRTCInitiator(c),k=a=>{let b=a.detail;if(!i){let c=`connection error ${d.host}:${d.port}: ${b.message}`;oW.error(c),n(b)}},l=()=>{i=!0,oW("connection opened %s:%s",d.host,d.port),n()},m=()=>{oW.error("connection aborted %s:%s",d.host,d.port),j.close().finally(()=>{n(new AbortError)})},n=a=>{j.removeEventListener("ready",l),b.signal?.removeEventListener("abort",m),null==a?f(j):g(a)};j.addEventListener("ready",l,{once:!0}),j.addEventListener("close",()=>{j.removeEventListener("error",k)}),b.signal?.addEventListener("abort",m),j.addEventListener("signal",b=>{let c=b.detail;h.socket.emit("ss-handshake",{intentId:e,srcMultiaddr:h.signallingAddr.toString(),dstMultiaddr:a.toString(),signal:c})}),h.socket.on("ws-handshake",a=>{a.intentId===e&&null!=a.err&&j.close().finally(()=>{g(errcode(Error(a.err),"ERR_SIGNALLING_FAILED"))}),a.intentId===e&&null!=a.answer&&!j.closed&&j.handleSignal(a.signal)})})}createListener(a){if(!oV&&null==this.wrtc)throw errcode(Error("no WebRTC support"),"ERR_NO_WEBRTC_SUPPORT");return a.channelOptions=a.channelOptions??{},null!=this.wrtc&&(a.channelOptions.wrtc=this.wrtc),createListener(a.upgrader,a.handler??oX,this.components.getPeerId(),this,a)}filter(a){return(a=Array.isArray(a)?a:[a]).filter(a=>!a.protoCodes().includes(CODE_CIRCUIT)&&mafmt.WebRTCStar.matches(a))}peerDiscovered(a){oW("peer discovered: %s",a),a=cleanMultiaddr(a);let b=new Multiaddr(a),c=b.getPeerId();if(null==c)return;let d=peerIdFromString(c);this.discovery.dispatchEvent(new CustomEvent("peer",{detail:{id:d,multiaddrs:[b],protocols:[]}}))}}(px=av||(av={})).NOT_STARTED_YET="The libp2p node is not started yet",px.DHT_DISABLED="DHT is not available",px.PUBSUB_DISABLED="PubSub is not available",px.CONN_ENCRYPTION_REQUIRED="At least one connection encryption module is required",px.ERR_TRANSPORTS_REQUIRED="At least one transport module is required",px.ERR_PROTECTOR_REQUIRED="Private network is enforced, but no protector was provided",px.NOT_FOUND="Not found",(py=aw||(aw={})).DHT_DISABLED="ERR_DHT_DISABLED",py.ERR_PUBSUB_DISABLED="ERR_PUBSUB_DISABLED",py.PUBSUB_NOT_STARTED="ERR_PUBSUB_NOT_STARTED",py.DHT_NOT_STARTED="ERR_DHT_NOT_STARTED",py.CONN_ENCRYPTION_REQUIRED="ERR_CONN_ENCRYPTION_REQUIRED",py.ERR_TRANSPORTS_REQUIRED="ERR_TRANSPORTS_REQUIRED",py.ERR_PROTECTOR_REQUIRED="ERR_PROTECTOR_REQUIRED",py.ERR_PEER_DIAL_INTERCEPTED="ERR_PEER_DIAL_INTERCEPTED",py.ERR_CONNECTION_INTERCEPTED="ERR_CONNECTION_INTERCEPTED",py.ERR_INVALID_PROTOCOLS_FOR_STREAM="ERR_INVALID_PROTOCOLS_FOR_STREAM",py.ERR_CONNECTION_ENDED="ERR_CONNECTION_ENDED",py.ERR_CONNECTION_FAILED="ERR_CONNECTION_FAILED",py.ERR_NODE_NOT_STARTED="ERR_NODE_NOT_STARTED",py.ERR_ALREADY_ABORTED="ERR_ALREADY_ABORTED",py.ERR_TOO_MANY_ADDRESSES="ERR_TOO_MANY_ADDRESSES",py.ERR_NO_VALID_ADDRESSES="ERR_NO_VALID_ADDRESSES",py.ERR_RELAYED_DIAL="ERR_RELAYED_DIAL",py.ERR_DIALED_SELF="ERR_DIALED_SELF",py.ERR_DISCOVERED_SELF="ERR_DISCOVERED_SELF",py.ERR_DUPLICATE_TRANSPORT="ERR_DUPLICATE_TRANSPORT",py.ERR_ENCRYPTION_FAILED="ERR_ENCRYPTION_FAILED",py.ERR_HOP_REQUEST_FAILED="ERR_HOP_REQUEST_FAILED",py.ERR_INVALID_KEY="ERR_INVALID_KEY",py.ERR_INVALID_MESSAGE="ERR_INVALID_MESSAGE",py.ERR_INVALID_PARAMETERS="ERR_INVALID_PARAMETERS",py.ERR_INVALID_PEER="ERR_INVALID_PEER",py.ERR_MUXER_UNAVAILABLE="ERR_MUXER_UNAVAILABLE",py.ERR_NOT_FOUND="ERR_NOT_FOUND",py.ERR_TIMEOUT="ERR_TIMEOUT",py.ERR_TRANSPORT_UNAVAILABLE="ERR_TRANSPORT_UNAVAILABLE",py.ERR_TRANSPORT_DIAL_FAILED="ERR_TRANSPORT_DIAL_FAILED",py.ERR_UNSUPPORTED_PROTOCOL="ERR_UNSUPPORTED_PROTOCOL",py.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED="ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED",py.ERR_INVALID_MULTIADDR="ERR_INVALID_MULTIADDR",py.ERR_SIGNATURE_NOT_VALID="ERR_SIGNATURE_NOT_VALID",py.ERR_FIND_SELF="ERR_FIND_SELF",py.ERR_NO_ROUTERS_AVAILABLE="ERR_NO_ROUTERS_AVAILABLE",py.ERR_CONNECTION_NOT_MULTIPLEXED="ERR_CONNECTION_NOT_MULTIPLEXED",py.ERR_NO_DIAL_TOKENS="ERR_NO_DIAL_TOKENS",py.ERR_KEYCHAIN_REQUIRED="ERR_KEYCHAIN_REQUIRED",py.ERR_INVALID_CMS="ERR_INVALID_CMS",py.ERR_MISSING_KEYS="ERR_MISSING_KEYS",py.ERR_NO_KEY="ERR_NO_KEY",py.ERR_INVALID_KEY_NAME="ERR_INVALID_KEY_NAME",py.ERR_INVALID_KEY_TYPE="ERR_INVALID_KEY_TYPE",py.ERR_KEY_ALREADY_EXISTS="ERR_KEY_ALREADY_EXISTS",py.ERR_INVALID_KEY_SIZE="ERR_INVALID_KEY_SIZE",py.ERR_KEY_NOT_FOUND="ERR_KEY_NOT_FOUND",py.ERR_OLD_KEY_NAME_INVALID="ERR_OLD_KEY_NAME_INVALID",py.ERR_NEW_KEY_NAME_INVALID="ERR_NEW_KEY_NAME_INVALID",py.ERR_PASSWORD_REQUIRED="ERR_PASSWORD_REQUIRED",py.ERR_PEM_REQUIRED="ERR_PEM_REQUIRED",py.ERR_CANNOT_READ_KEY="ERR_CANNOT_READ_KEY",py.ERR_MISSING_PRIVATE_KEY="ERR_MISSING_PRIVATE_KEY",py.ERR_MISSING_PUBLIC_KEY="ERR_MISSING_PUBLIC_KEY",py.ERR_INVALID_OLD_PASS_TYPE="ERR_INVALID_OLD_PASS_TYPE",py.ERR_INVALID_NEW_PASS_TYPE="ERR_INVALID_NEW_PASS_TYPE",py.ERR_INVALID_PASS_LENGTH="ERR_INVALID_PASS_LENGTH",py.ERR_NOT_IMPLEMENTED="ERR_NOT_IMPLEMENTED",py.ERR_WRONG_PING_ACK="ERR_WRONG_PING_ACK",py.ERR_INVALID_RECORD="ERR_INVALID_RECORD",py.ERR_ALREADY_SUCCEEDED="ERR_ALREADY_SUCCEEDED",c(27695),c(17187),(0,aY.kg)("libp2p:peer-routing"),(0,aY.kg)("libp2p:connection-manager:latency-monitor:visibility-change-emitter"),(0,aY.kg)("libp2p:connection-manager:latency-monitor");c(82916);class o$ extends Map{constructor(a){super();let{system:b,component:c,metric:d,metrics:e}=a;this.system=b??"libp2p",this.component=c,this.metric=d,this.metrics=e,this.updateComponentMetric()}set(a,b){return super.set(a,b),this.updateComponentMetric(),this}delete(a){let b=super.delete(a);return this.updateComponentMetric(),b}clear(){super.clear(),this.updateComponentMetric()}updateComponentMetric(){this.metrics.updateComponentMetric({system:this.system,component:this.component,metric:this.metric,value:this.size})}}class o_ extends Error{constructor(a="The operation was aborted"){super(a),this.code=o_.code,this.type=o_.type}static get code(){return"ABORT_ERR"}static get type(){return"aborted"}}c(35103),(0,aY.kg)("libp2p:dialer:dial-request");var o0=c(290);function o1(a){let{address:b}=a.nodeAddress();return Boolean(o0(b))}(0,aY.kg)("libp2p:dialer"),(0,aY.kg)("libp2p:connection-manager"),(0,aY.kg)("libp2p:connection-manager:auto-dialler");let o2,o3;(pA=(pz=ax||(ax={})).Status||(pz.Status={})).SUCCESS="SUCCESS",pA.HOP_SRC_ADDR_TOO_LONG="HOP_SRC_ADDR_TOO_LONG",pA.HOP_DST_ADDR_TOO_LONG="HOP_DST_ADDR_TOO_LONG",pA.HOP_SRC_MULTIADDR_INVALID="HOP_SRC_MULTIADDR_INVALID",pA.HOP_DST_MULTIADDR_INVALID="HOP_DST_MULTIADDR_INVALID",pA.HOP_NO_CONN_TO_DST="HOP_NO_CONN_TO_DST",pA.HOP_CANT_DIAL_DST="HOP_CANT_DIAL_DST",pA.HOP_CANT_OPEN_DST_STREAM="HOP_CANT_OPEN_DST_STREAM",pA.HOP_CANT_SPEAK_RELAY="HOP_CANT_SPEAK_RELAY",pA.HOP_CANT_RELAY_TO_SELF="HOP_CANT_RELAY_TO_SELF",pA.STOP_SRC_ADDR_TOO_LONG="STOP_SRC_ADDR_TOO_LONG",pA.STOP_DST_ADDR_TOO_LONG="STOP_DST_ADDR_TOO_LONG",pA.STOP_SRC_MULTIADDR_INVALID="STOP_SRC_MULTIADDR_INVALID",pA.STOP_DST_MULTIADDR_INVALID="STOP_DST_MULTIADDR_INVALID",pA.STOP_RELAY_REFUSED="STOP_RELAY_REFUSED",pA.MALFORMED_MESSAGE="MALFORMED_MESSAGE",(pB=o2||(o2={}))[pB.SUCCESS=100]="SUCCESS",pB[pB.HOP_SRC_ADDR_TOO_LONG=220]="HOP_SRC_ADDR_TOO_LONG",pB[pB.HOP_DST_ADDR_TOO_LONG=221]="HOP_DST_ADDR_TOO_LONG",pB[pB.HOP_SRC_MULTIADDR_INVALID=250]="HOP_SRC_MULTIADDR_INVALID",pB[pB.HOP_DST_MULTIADDR_INVALID=251]="HOP_DST_MULTIADDR_INVALID",pB[pB.HOP_NO_CONN_TO_DST=260]="HOP_NO_CONN_TO_DST",pB[pB.HOP_CANT_DIAL_DST=261]="HOP_CANT_DIAL_DST",pB[pB.HOP_CANT_OPEN_DST_STREAM=262]="HOP_CANT_OPEN_DST_STREAM",pB[pB.HOP_CANT_SPEAK_RELAY=270]="HOP_CANT_SPEAK_RELAY",pB[pB.HOP_CANT_RELAY_TO_SELF=280]="HOP_CANT_RELAY_TO_SELF",pB[pB.STOP_SRC_ADDR_TOO_LONG=320]="STOP_SRC_ADDR_TOO_LONG",pB[pB.STOP_DST_ADDR_TOO_LONG=321]="STOP_DST_ADDR_TOO_LONG",pB[pB.STOP_SRC_MULTIADDR_INVALID=350]="STOP_SRC_MULTIADDR_INVALID",pB[pB.STOP_DST_MULTIADDR_INVALID=351]="STOP_DST_MULTIADDR_INVALID",pB[pB.STOP_RELAY_REFUSED=390]="STOP_RELAY_REFUSED",pB[pB.MALFORMED_MESSAGE=400]="MALFORMED_MESSAGE",(pC=pz.Status||(pz.Status={})).codec=()=>cl(o2),(pD=pz.Type||(pz.Type={})).HOP="HOP",pD.STOP="STOP",pD.STATUS="STATUS",pD.CAN_HOP="CAN_HOP",(pE=o3||(o3={}))[pE.HOP=1]="HOP",pE[pE.STOP=2]="STOP",pE[pE.STATUS=3]="STATUS",pE[pE.CAN_HOP=4]="CAN_HOP",(pF=pz.Type||(pz.Type={})).codec=()=>cl(o3),(pG=pz.Peer||(pz.Peer={})).codec=()=>cG({1:{name:"id",codec:ch},2:{name:"addrs",codec:ch,repeats:!0}}),pG.encode=a=>b8(a,pG.codec()),pG.decode=a=>b7(a,pG.codec()),pz.codec=()=>cG({1:{name:"type",codec:pz.Type.codec(),optional:!0},2:{name:"srcPeer",codec:pz.Peer.codec(),optional:!0},3:{name:"dstPeer",codec:pz.Peer.codec(),optional:!0},4:{name:"code",codec:pz.Status.codec(),optional:!0}}),pz.encode=a=>b8(a,pz.codec()),pz.decode=a=>b7(a,pz.codec()),(0,aY.kg)("libp2p:stream:converter");function o4(){let a={};return a.promise=new Promise((b,c)=>{a.resolve=b,a.reject=c}),a}(0,aY.kg)("libp2p:circuit:stream-handler"),(0,aY.kg)("libp2p:circuit:stop"),(0,aY.kg)("libp2p:circuit:hop");let o5=(0,aY.kg)("libp2p:circuit");class o6{constructor(){this.components=new Components}init(a){this.components=a,this.components.getRegistrar().handle(RELAY_CODEC,a=>{this._onProtocol(a).catch(a=>{o5.error(a)})}).catch(a=>{o5.error(a)})}hopEnabled(){return!0}hopActive(){return!0}get[oT](){return!0}get[Symbol.toStringTag](){return"libp2p/circuit-relay-v1"}async _onProtocol(a){let{connection:b,stream:c}=a,d=new StreamHandler({stream:c}),e=await d.read();if(null==e){o5("request was invalid, could not read from stream"),d.write({type:CircuitPB.Type.STATUS,code:CircuitPB.Status.MALFORMED_MESSAGE}),d.close();return}let f;switch(e.type){case CircuitPB.Type.CAN_HOP:o5("received CAN_HOP request from %p",b.remotePeer),await handleCanHop({circuit:this,connection:b,streamHandler:d});break;case CircuitPB.Type.HOP:o5("received HOP request from %p",b.remotePeer),f=await handleHop({connection:b,request:e,streamHandler:d,circuit:this,connectionManager:this.components.getConnectionManager()});break;case CircuitPB.Type.STOP:o5("received STOP request from %p",b.remotePeer),f=await handleStop({connection:b,request:e,streamHandler:d});break;default:o5("Request of type %s not supported",e.type),d.write({type:CircuitPB.Type.STATUS,code:CircuitPB.Status.MALFORMED_MESSAGE}),d.close();return}if(null!=f){let g=new Multiaddr(e.dstPeer.addrs[0]),h=new Multiaddr(e.srcPeer.addrs[0]),i=streamToMaConnection({stream:f,remoteAddr:g,localAddr:h}),j=e.type===CircuitPB.Type.HOP?"relay":"inbound";o5("new %s connection %s",j,i.remoteAddr);let k=await this.components.getUpgrader().upgradeInbound(i);o5("%s connection %s upgraded",j,i.remoteAddr),null!=this.handler&&this.handler(k)}}async dial(a,b={}){let c=a.toString().split("/p2p-circuit"),d=new Multiaddr(c[0]),e=new Multiaddr(c[c.length-1]),f=d.getPeerId(),g=e.getPeerId();if(null==f||null==g){let h="Circuit relay dial failed as addresses did not have peer id";throw o5.error(h),errCode(Error(h),codes.ERR_RELAYED_DIAL)}let i=peerIdFromString(f),j=peerIdFromString(g),k=!1,l=this.components.getConnectionManager().getConnections(i),m=l[0];null==m&&(await this.components.getPeerStore().addressBook.add(i,[d]),m=await this.components.getConnectionManager().openConnection(i,b),k=!0);try{let n=await hop({connection:m,request:{type:CircuitPB.Type.HOP,srcPeer:{id:this.components.getPeerId().toBytes(),addrs:this.components.getAddressManager().getAddresses().map(a=>a.bytes)},dstPeer:{id:j.toBytes(),addrs:[new Multiaddr(e).bytes]}}}),o=d.encapsulate(`/p2p-circuit/p2p/${this.components.getPeerId().toString()}`),p=streamToMaConnection({stream:n,remoteAddr:a,localAddr:o});return o5("new outbound connection %s",p.remoteAddr),await this.components.getUpgrader().upgradeOutbound(p)}catch(q){throw o5.error("Circuit relay dial failed",q),k&&await m.close(),q}}createListener(a){return this.handler=a.handler,createListener({connectionManager:this.components.getConnectionManager(),peerStore:this.components.getPeerStore()})}filter(a){return(a=Array.isArray(a)?a:[a]).filter(a=>mafmt.Circuit.matches(a))}}(0,aY.kg)("libp2p:auto-relay"),(0,aY.kg)("libp2p:relay"),c(50202),c(79437),c(25414),c2.pki,(0,aY.kg)("libp2p:keychain:cms"),new WeakMap,c(8925);c(98960),(0,aY.kg)("libp2p:keychain"),new WeakMap;c(4321);class o7{value;next;constructor(a){this.value=a}}class o8{#a;#b;#c;constructor(){this.clear()}enqueue(a){let b=new o7(a);this.#a?(this.#b.next=b,this.#b=b):(this.#a=b,this.#b=b),this.#c++}dequeue(){let a=this.#a;if(a)return this.#a=this.#a.next,this.#c--,a.value}clear(){this.#a=void 0,this.#b=void 0,this.#c=0}get size(){return this.#c}*[Symbol.iterator](){let a=this.#a;for(;a;)yield a.value,a=a.next}}(0,aY.kg)("libp2p:transports"),(pH=ay||(ay={}))[pH.FATAL_ALL=0]="FATAL_ALL",pH[pH.NO_FATAL=1]="NO_FATAL";let o9=(0,a8.fromString)("\n");(0,aY.kg)("libp2p:mss:select"),(0,aY.kg)("libp2p:mss:handle"),(0,aY.kg)("libp2p:mss:ls"),c(99633);let pa=Symbol.for("@libp2p/connection"),pb=(0,aY.kg)("libp2p:connection");class pc{constructor(a){let{remoteAddr:b,remotePeer:c,newStream:d,close:e,getStreams:f,stat:g}=a;this.id=`${parseInt(String(1e9*Math.random())).toString(36)}${Date.now()}`,this.remoteAddr=b,this.remotePeer=c,this.stat={...g,status:OPEN},this._newStream=d,this._close=e,this._getStreams=f,this.registry=new Map,this.tags=[],this._closing=!1}get[Symbol.toStringTag](){return"Connection"}get[pa](){return!0}get streams(){return this._getStreams()}async newStream(a,b){if(this.stat.status===CLOSING)throw errCode(Error("the connection is being closed"),"ERR_CONNECTION_BEING_CLOSED");if(this.stat.status===CLOSED)throw errCode(Error("the connection is closed"),"ERR_CONNECTION_CLOSED");Array.isArray(a)||(a=[a]);let{stream:c,protocol:d}=await this._newStream(a,b);return this.addStream(c,{protocol:d,metadata:{}}),{stream:c,protocol:d}}addStream(a,b={}){this.registry.set(a.id,{protocol:b.protocol??"",metadata:b.metadata??{}})}removeStream(a){this.registry.delete(a)}async close(){if(this.stat.status!==CLOSED&&!this._closing){this.stat.status=CLOSING;try{this.streams.forEach(a=>a.close())}catch(a){pb.error(a)}this._closing=!0,await this._close(),this._closing=!1,this.stat.timeline.close=Date.now(),this.stat.status=CLOSED}}}(0,aY.kg)("libp2p:upgrader"),(0,aY.kg)("libp2p:registrar");(pI=az||(az={})).codec=()=>cG({5:{name:"protocolVersion",codec:cW,optional:!0},6:{name:"agentVersion",codec:cW,optional:!0},1:{name:"publicKey",codec:ch,optional:!0},2:{name:"listenAddrs",codec:ch,repeats:!0},4:{name:"observedAddr",codec:ch,optional:!0},3:{name:"protocols",codec:cW,repeats:!0},8:{name:"signedPeerRecord",codec:ch,optional:!0}}),pI.encode=a=>b8(a,pI.codec()),pI.decode=a=>b7(a,pI.codec());let pd=(0,aY.kg)("libp2p:identify");class pe{constructor(a,b){this.components=a,this.started=!1,this.init=b,this.handleMessage=this.handleMessage.bind(this),this.identifyProtocolStr=`/${b.protocolPrefix}/${MULTICODEC_IDENTIFY_PROTOCOL_NAME}/${MULTICODEC_IDENTIFY_PROTOCOL_VERSION}`,this.identifyPushProtocolStr=`/${b.protocolPrefix}/${MULTICODEC_IDENTIFY_PUSH_PROTOCOL_NAME}/${MULTICODEC_IDENTIFY_PUSH_PROTOCOL_VERSION}`,this.host={protocolVersion:`${b.protocolPrefix}/${IDENTIFY_PROTOCOL_VERSION}`,...b.host},this.components.getConnectionManager().addEventListener("peer:connect",a=>{let b=a.detail;this.identify(b).catch(pd.error)}),this.components.getPeerStore().addEventListener("change:multiaddrs",a=>{let{peerId:b}=a.detail;this.components.getPeerId().equals(b)&&this.pushToPeerStore().catch(a=>pd.error(a))}),this.components.getPeerStore().addEventListener("change:protocols",a=>{let{peerId:b}=a.detail;this.components.getPeerId().equals(b)&&this.pushToPeerStore().catch(a=>pd.error(a))})}isStarted(){return this.started}async start(){!this.started&&(await this.components.getPeerStore().metadataBook.setValue(this.components.getPeerId(),"AgentVersion",uint8ArrayFromString(this.host.agentVersion)),await this.components.getPeerStore().metadataBook.setValue(this.components.getPeerId(),"ProtocolVersion",uint8ArrayFromString(this.host.protocolVersion)),await this.components.getRegistrar().handle([this.identifyProtocolStr,this.identifyPushProtocolStr],a=>{this.handleMessage(a)?.catch(a=>{pd.error(a)})}),this.started=!0)}async stop(){await this.components.getRegistrar().unhandle(this.identifyProtocolStr),await this.components.getRegistrar().unhandle(this.identifyPushProtocolStr),this.started=!1}async push(a){let b=await this.components.getPeerStore().addressBook.getRawEnvelope(this.components.getPeerId()),c=this.components.getAddressManager().getAddresses().map(a=>a.bytes),d=await this.components.getPeerStore().protoBook.get(this.components.getPeerId()),e=a.map(async a=>{let e=new TimeoutController(this.init.timeout??6e4),f;try{let g=await a.newStream([this.identifyPushProtocolStr],{signal:e.signal});f=g.stream;let h=abortableDuplex(f,e.signal);await pipe([Identify.encode({listenAddrs:c,signedPeerRecord:b,protocols:d})],lp.encode(),h,drain)}catch(i){pd.error("could not push identify update to peer",i)}finally{null!=f&&f.close(),e.clear()}});await Promise.all(e)}async pushToPeerStore(){if(!this.isStarted())return;let a=[];for(let b of this.components.getConnectionManager().getConnections()){let c=b.remotePeer,d=await this.components.getPeerStore().get(c);d.protocols.includes(this.identifyPushProtocolStr)&&a.push(b)}await this.push(a)}async _identify(a,b={}){let{stream:c}=await a.newStream([this.identifyProtocolStr],b),d=c,e,f=b.signal;null==f&&(f=(e=new TimeoutController(this.init.timeout??6e4)).signal),d=abortableDuplex(c,f);try{let g=await pipe([],d,lp.decode({maxDataLength:this.init.maxIdentifyMessageSize??null}),async a=>await first(a));if(null==g)throw errCode(Error("No data could be retrieved"),codes.ERR_CONNECTION_ENDED);try{return Identify.decode(g)}catch(h){throw errCode(h,codes.ERR_INVALID_MESSAGE)}}finally{null!=e&&e.clear(),c.close()}}async identify(a,b={}){let c=await this._identify(a,b),{publicKey:d,listenAddrs:e,protocols:f,observedAddr:g,signedPeerRecord:h,agentVersion:i,protocolVersion:j}=c;if(null==d)throw errCode(Error("public key was missing from identify message"),codes.ERR_MISSING_PUBLIC_KEY);let k=await peerIdFromKeys(d);if(!a.remotePeer.equals(k))throw errCode(Error("identified peer does not match the expected peer"),codes.ERR_INVALID_PEER);if(this.components.getPeerId().equals(k))throw errCode(Error("identified peer is our own peer id?"),codes.ERR_INVALID_PEER);let l=pe.getCleanMultiaddr(g);if(null!=h){pd("received signed peer record from %p",k);try{let m=await RecordEnvelope.openAndCertify(h,PeerRecord.DOMAIN);if(!m.peerId.equals(k))throw errCode(Error("identified peer does not match the expected peer"),codes.ERR_INVALID_PEER);if(await this.components.getPeerStore().addressBook.consumePeerRecord(m)){await this.components.getPeerStore().protoBook.set(k,f),null!=i&&await this.components.getPeerStore().metadataBook.setValue(k,"AgentVersion",uint8ArrayFromString(i)),null!=j&&await this.components.getPeerStore().metadataBook.setValue(k,"ProtocolVersion",uint8ArrayFromString(j)),pd("identify completed for peer %p and protocols %o",k,f);return}}catch(n){pd("received invalid envelope, discard it and fallback to listenAddrs is available",n)}}else pd("no signed peer record received from %p",k);pd("falling back to legacy addresses from %p",k);try{await this.components.getPeerStore().addressBook.set(k,e.map(a=>new Multiaddr(a)))}catch(o){pd.error("received invalid addrs",o)}await this.components.getPeerStore().protoBook.set(k,f),null!=i&&await this.components.getPeerStore().metadataBook.setValue(k,"AgentVersion",uint8ArrayFromString(i)),null!=j&&await this.components.getPeerStore().metadataBook.setValue(k,"ProtocolVersion",uint8ArrayFromString(j)),pd("identify completed for peer %p and protocols %o",k,f),pd("received observed address of %s",l?.toString())}handleMessage(a){let{protocol:b}=a;switch(b){case this.identifyProtocolStr:return this._handleIdentify(a);case this.identifyPushProtocolStr:return this._handlePush(a);default:pd.error("cannot handle unknown protocol %s",b)}}async _handleIdentify(a){let{connection:b,stream:c}=a,d=new TimeoutController(this.init.timeout??6e4);try{let e=this.components.getPeerId().publicKey??new Uint8Array(0),f=await this.components.getPeerStore().get(this.components.getPeerId()),g=this.components.getAddressManager().getAddresses().map(a=>a.decapsulateCode(protocols("p2p").code)),h=f.peerRecordEnvelope;if(g.length>0&&null==h){let i=new PeerRecord({peerId:this.components.getPeerId(),multiaddrs:g}),j=await RecordEnvelope.seal(i,this.components.getPeerId());await this.components.getPeerStore().addressBook.consumePeerRecord(j),h=j.marshal()}let k=Identify.encode({protocolVersion:this.host.protocolVersion,agentVersion:this.host.agentVersion,publicKey:e,listenAddrs:g.map(a=>a.bytes),signedPeerRecord:h,observedAddr:b.remoteAddr.bytes,protocols:f.protocols}),l=abortableDuplex(c,d.signal);await pipe([k],lp.encode(),l,drain)}catch(m){pd.error("could not respond to identify request",m)}finally{c.close(),d.clear()}}async _handlePush(a){let{connection:b,stream:c}=a,d=new TimeoutController(this.init.timeout??6e4),e;try{let f=abortableDuplex(c,d.signal),g=await pipe([],f,lp.decode({maxDataLength:this.init.maxIdentifyMessageSize??null}),async a=>await first(a));null!=g&&(e=Identify.decode(g))}catch(h){return pd.error("received invalid message",h)}finally{c.close(),d.clear()}if(null==e)return pd.error("received invalid message");let i=b.remotePeer;if(this.components.getPeerId().equals(i)){pd("received push from ourselves?");return}if(pd("received push from %p",i),null!=e.signedPeerRecord){pd("received signedPeerRecord in push");try{let j=await RecordEnvelope.openAndCertify(e.signedPeerRecord,PeerRecord.DOMAIN);if(await this.components.getPeerStore().addressBook.consumePeerRecord(j)){pd("consumed signedPeerRecord sent in push"),await this.components.getPeerStore().protoBook.set(i,e.protocols);return}pd("failed to consume signedPeerRecord sent in push")}catch(k){pd("received invalid envelope, discard it and fallback to listenAddrs is available",k)}}else pd("did not receive signedPeerRecord in push");try{await this.components.getPeerStore().addressBook.set(i,e.listenAddrs.map(a=>new Multiaddr(a)))}catch(l){pd.error("received invalid addrs",l)}try{await this.components.getPeerStore().protoBook.set(i,e.protocols)}catch(m){pd.error("received invalid protocols",m)}pd("handled push from %p",i)}static getCleanMultiaddr(a){if(null!=a&&a.length>0)try{return new Multiaddr(a)}catch{}}}(pJ=aA||(aA={})).codec=()=>cG({1:{name:"identifier",codec:cW}}),pJ.encode=a=>b8(a,pJ.codec()),pJ.decode=a=>b7(a,pJ.codec());let pf;(pL=(pK=aB||(aB={})).StatusCode||(pK.StatusCode={})).OK="OK",pL.NOT_FOUND="NOT_FOUND",pL.ERROR="ERROR",(pM=pf||(pf={}))[pM.OK=0]="OK",pM[pM.NOT_FOUND=1]="NOT_FOUND",pM[pM.ERROR=2]="ERROR",(pN=pK.StatusCode||(pK.StatusCode={})).codec=()=>cl(pf),pK.codec=()=>cG({1:{name:"status",codec:pK.StatusCode.codec()},2:{name:"data",codec:ch}}),pK.encode=a=>b8(a,pK.codec()),pK.decode=a=>b7(a,pK.codec()),(0,aY.kg)("libp2p:fetch"),(0,aY.kg)("libp2p:ping"),c(97916),(0,aY.kg)("libp2p:nat");(0,aY.kg)("libp2p:peer-record-updater");let pg=(0,aY.kg)("libp2p:peer-store:address-book");(0,aY.kg)("libp2p:peer-store:key-book"),(0,aY.kg)("libp2p:peer-store:metadata-book"),(0,aY.kg)("libp2p:peer-store:proto-book"),(pO=aC||(aC={})).codec=()=>cG({1:{name:"addresses",codec:aD.codec(),repeats:!0},2:{name:"protocols",codec:cW,repeats:!0},3:{name:"metadata",codec:aE.codec(),repeats:!0},4:{name:"pubKey",codec:ch,optional:!0},5:{name:"peerRecordEnvelope",codec:ch,optional:!0}}),pO.encode=a=>b8(a,pO.codec()),pO.decode=a=>b7(a,pO.codec()),(pP=aD||(aD={})).codec=()=>cG({1:{name:"multiaddr",codec:ch},2:{name:"isCertified",codec:cd,optional:!0}}),pP.encode=a=>b8(a,pP.codec()),pP.decode=a=>b7(a,pP.codec()),(pQ=aE||(aE={})).codec=()=>cG({1:{name:"key",codec:cW},2:{name:"value",codec:ch}}),pQ.encode=a=>b8(a,pQ.codec()),pQ.decode=a=>b7(a,pQ.codec()),(0,aY.kg)("libp2p:peer-store:store"),(0,aY.kg)("libp2p:peer-store"),(0,aY.kg)("libp2p:dialer:auto-dialer");var ph=c(20030),pi=c(73692);let pj=globalThis.fetch,pk=globalThis.Headers;function pl(a,b,c){return`${a}?name=${b}&type=${c}`}async function pm(a,b){let c=await pj(a,{headers:new pk({accept:"application/dns-json"}),signal:b}),d=await c.json();return d}function pn(a,b){return`${b}_${a}`}let po=Object.assign(f2("dns-over-http-resolver"),{error:f2("dns-over-http-resolver:error")});var pp,pq,pr,ps,pt,pu,pv,pw,px,py,pz,pA,pB,pC,pD,pE,pF,pG,pH,pI,pJ,pK,pL,pM,pN,pO,pP,pQ,pR=class{constructor(a={}){this._cache=new pi({max:a?.maxCache??100}),this._TXTcache=new pi({max:a?.maxCache??100}),this._servers=["https://cloudflare-dns.com/dns-query","https://dns.google/resolve"],this._request=a.request??pm,this._abortControllers=[]}cancel(){this._abortControllers.forEach(a=>a.abort())}getServers(){return this._servers}_getShuffledServers(){let a=[...this._servers];for(let b=a.length-1;b>0;b--){let c=Math.floor(Math.random()*b),d=a[b];a[b]=a[c],a[c]=d}return a}setServers(a){this._servers=a}async resolve(a,b="A"){switch(b){case"A":return await this.resolve4(a);case"AAAA":return await this.resolve6(a);case"TXT":return await this.resolveTxt(a);default:throw Error(`${b} is not supported`)}}async resolve4(a){let b=this._cache.get(pn(a,"A"));if(null!=b)return b;let c=!1;for(let d of this._getShuffledServers()){let e=new AbortController;this._abortControllers.push(e);try{let f=await this._request(pl(d,a,"A"),e.signal),g=f.Answer.map(a=>a.data),h=Math.min(...f.Answer.map(a=>a.TTL));return this._cache.set(pn(a,"A"),g,{ttl:h}),g}catch(i){e.signal.aborted&&(c=!0),po.error(`${d} could not resolve ${a} record A`)}finally{this._abortControllers=this._abortControllers.filter(a=>a!==e)}}if(c)throw Object.assign(Error("queryA ECANCELLED"),{code:"ECANCELLED"});throw Error(`Could not resolve ${a} record A`)}async resolve6(a){let b="AAAA",c=this._cache.get(pn(a,b));if(null!=c)return c;let d=!1;for(let e of this._getShuffledServers()){let f=new AbortController;this._abortControllers.push(f);try{let g=await this._request(pl(e,a,b),f.signal),h=g.Answer.map(a=>a.data),i=Math.min(...g.Answer.map(a=>a.TTL));return this._cache.set(pn(a,b),h,{ttl:i}),h}catch(j){f.signal.aborted&&(d=!0),po.error(`${e} could not resolve ${a} record ${b}`)}finally{this._abortControllers=this._abortControllers.filter(a=>a!==f)}}if(d)throw Object.assign(Error("queryAaaa ECANCELLED"),{code:"ECANCELLED"});throw Error(`Could not resolve ${a} record ${b}`)}async resolveTxt(a){let b=this._TXTcache.get(pn(a,"TXT"));if(null!=b)return b;let c=!1;for(let d of this._getShuffledServers()){let e=new AbortController;this._abortControllers.push(e);try{let f=await this._request(pl(d,a,"TXT"),e.signal),g=f.Answer.map(a=>[a.data.replace(/['"]+/g,"")]),h=Math.min(...f.Answer.map(a=>a.TTL));return this._TXTcache.set(pn(a,"TXT"),g,{ttl:h}),g}catch(i){e.signal.aborted&&(c=!0),po.error(`${d} could not resolve ${a} record TXT`)}finally{this._abortControllers=this._abortControllers.filter(a=>a!==e)}}if(c)throw Object.assign(Error("queryTxt ECANCELLED"),{code:"ECANCELLED"});throw Error(`Could not resolve ${a} record TXT`)}clearCache(){this._cache.clear(),this._TXTcache.clear()}};let{code:pS}=(0,ph.Ev)("dnsaddr");async function pT(a,b={}){let c=new pR;null!=b.signal&&b.signal.addEventListener("abort",()=>{c.cancel()});let d=a.getPeerId(),[,e]=a.stringTuples().find(([a])=>a===pS)??[];if(null==e)throw Error("No hostname found in multiaddr");let f=await c.resolveTxt(`_dnsaddr.${e}`),g=f.flat().map(a=>a.split("=")[1]);return null!=d&&(g=g.filter(a=>a.includes(d))),g}a=>a,ay.FATAL_ALL;var pU=c(37124);let pV=pU.Reader;function pW(a,b){let c=pV.create(a instanceof Uint8Array?a:a.subarray());return b.decode(c)}["uint64","int64","sint64","fixed64","sfixed64"].forEach(a=>{let b=pV.prototype[a];pV.prototype[a]=function(){return BigInt(b.call(this).toString())}});let pX=pU.Writer;function pY(a,b){let c=pX.create();return b.encode(a,c,{lengthDelimited:!1}),c.finish()}function pZ(a,b,c,d){return{name:a,type:b,encode:c,decode:d}}function p$(a,b){return pZ("message",aF.LENGTH_DELIMITED,a,b)}["uint64","int64","sint64","fixed64","sfixed64"].forEach(a=>{let b=pX.prototype[a];pX.prototype[a]=function(a){return b.call(this,a.toString())}}),(d=aF||(aF={}))[d.VARINT=0]="VARINT",d[d.BIT64=1]="BIT64",d[d.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",d[d.START_GROUP=3]="START_GROUP",d[d.END_GROUP=4]="END_GROUP",d[d.BIT32=5]="BIT32",(e=aG||(aG={})).RSA="RSA",e.Ed25519="Ed25519",e.Secp256k1="Secp256k1",(f=aH||(aH={}))[f.RSA=0]="RSA",f[f.Ed25519=1]="Ed25519",f[f.Secp256k1=2]="Secp256k1",(g=aG||(aG={})).codec=()=>(function(a){function b(b){if(null==a[b.toString()])throw Error("Invalid enum value");return a[b]}let c=function(a,c){let d=b(a);c.int32(d)},d=function(a){let c=a.uint32();return b(c)};return pZ("enum",aF.VARINT,c,d)})(aH);let p_;(h=aI||(aI={})).codec=()=>(null==p_&&(p_=p$((a,b,c={})=>{if(!1!==c.lengthDelimited&&b.fork(),null!=a.Type)b.uint32(8),aG.codec().encode(a.Type,b);else throw Error('Protocol error: required field "Type" was not found in object');if(null!=a.Data)b.uint32(18),b.bytes(a.Data);else throw Error('Protocol error: required field "Data" was not found in object');!1!==c.lengthDelimited&&b.ldelim()},(a,b)=>{let c={Type:aG.RSA,Data:new Uint8Array(0)},d=null==b?a.len:a.pos+b;for(;a.pos<d;){let e=a.uint32();switch(e>>>3){case 1:c.Type=aG.codec().decode(a);break;case 2:c.Data=a.bytes();break;default:a.skipType(7&e)}}if(null==c.Type)throw Error('Protocol error: value for required field "Type" was not found in protobuf');if(null==c.Data)throw Error('Protocol error: value for required field "Data" was not found in protobuf');return c})),p_),h.encode=a=>pY(a,h.codec()),h.decode=a=>pW(a,h.codec());let p0;(i=aJ||(aJ={})).codec=()=>(null==p0&&(p0=p$((a,b,c={})=>{if(!1!==c.lengthDelimited&&b.fork(),null!=a.Type)b.uint32(8),aG.codec().encode(a.Type,b);else throw Error('Protocol error: required field "Type" was not found in object');if(null!=a.Data)b.uint32(18),b.bytes(a.Data);else throw Error('Protocol error: required field "Data" was not found in object');!1!==c.lengthDelimited&&b.ldelim()},(a,b)=>{let c={Type:aG.RSA,Data:new Uint8Array(0)},d=null==b?a.len:a.pos+b;for(;a.pos<d;){let e=a.uint32();switch(e>>>3){case 1:c.Type=aG.codec().decode(a);break;case 2:c.Data=a.bytes();break;default:a.skipType(7&e)}}if(null==c.Type)throw Error('Protocol error: value for required field "Type" was not found in protobuf');if(null==c.Data)throw Error('Protocol error: value for required field "Data" was not found in protobuf');return c})),p0),i.encode=a=>pY(a,i.codec()),i.decode=a=>pW(a,i.codec());var p1={get(a=globalThis){let b=a.crypto;if(null==b||null==b.subtle)throw Object.assign(Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return b}};function p2(a,b){let c=Uint8Array.from(a.abs().toByteArray());if(c=0===c[0]?c.slice(1):c,null!=b){if(c.length>b)throw Error("byte array longer than desired length");c=(0,bM.concat)([new Uint8Array(b-c.length),c])}return(0,bb.toString)(c,"base64url")}function p3(a){let b=p4(a);return new c2.jsbn.BigInteger((0,bb.toString)(b,"base16"),16)}function p4(a,b){let c=(0,a8.fromString)(a,"base64urlpad");if(null!=b){if(c.length>b)throw Error("byte array longer than desired length");c=(0,bM.concat)([new Uint8Array(b-c.length),c])}return c}let p5="P-256 / P-384 / P-521",p6={"P-256":32,"P-384":48,"P-521":66};function p7(a,b){return b.map(b=>p3(a[b]))}async function p8(a){let b=await p1.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:a,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),c=await qc(b);return{privateKey:c[0],publicKey:c[1]}}async function p9(a){let b=await p1.get().subtle.importKey("jwk",a,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),c=[b,await qd(a)],d=await qc({privateKey:c[0],publicKey:c[1]});return{privateKey:d[0],publicKey:d[1]}}async function qa(a,b){let c=await p1.get().subtle.importKey("jwk",a,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),d=await p1.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},c,Uint8Array.from(b));return new Uint8Array(d,0,d.byteLength)}async function qb(a,b,c){let d=await p1.get().subtle.importKey("jwk",a,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return await p1.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},d,b,c)}async function qc(a){if(null==a.privateKey||null==a.publicKey)throw aZ(Error("Private and public key are required"),"ERR_INVALID_PARAMETERS");return await Promise.all([p1.get().subtle.exportKey("jwk",a.privateKey),p1.get().subtle.exportKey("jwk",a.publicKey)])}async function qd(a){return await p1.get().subtle.importKey("jwk",{kty:a.kty,n:a.n,e:a.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function qe(a,b,c,d){var e,f;let g=b?(e=a,c2.pki.setRsaPublicKey(...p7(e,["n","e"]))):(f=a,c2.pki.setRsaPrivateKey(...p7(f,["n","e","d","p","q","dp","dq","qi"]))),h=(0,bb.toString)(Uint8Array.from(c),"ascii"),i=d(h,g);return(0,a8.fromString)(i,"ascii")}async function qf(a,b){let c=function(a){let b=a?.algorithm??"AES-GCM",c=a?.keyLength??16,d=a?.nonceLength??12,e=a?.digest??"SHA-256",f=a?.saltLength??16,g=a?.iterations??32767,h=p1.get();async function i(a,i){let j=h.getRandomValues(new Uint8Array(f)),k=h.getRandomValues(new Uint8Array(d)),l={name:b,iv:k};"string"==typeof i&&(i=(0,a8.fromString)(i));let m=await h.subtle.importKey("raw",i,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),n=await h.subtle.deriveKey({name:"PBKDF2",salt:j,iterations:g,hash:{name:e}},m,{name:b,length:c},!0,["encrypt"]),o=await h.subtle.encrypt(l,n,a);return(0,bM.concat)([j,l.iv,new Uint8Array(o)])}async function j(a,i){let j=a.slice(0,f),k=a.slice(f,f+d),l=a.slice(f+d);"string"==typeof i&&(i=(0,a8.fromString)(i));let m=await h.subtle.importKey("raw",i,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),n=await h.subtle.deriveKey({name:"PBKDF2",salt:j,iterations:g,hash:{name:e}},m,{name:b,length:c},!0,["decrypt"]),o=await h.subtle.decrypt({name:b,iv:k},n,l);return new Uint8Array(o)}return c*=8,{encrypt:i,decrypt:j}}(),d=await c.encrypt(a,b);return db.base64.encode(d)}class qg{constructor(a){this._key=a}async verify(a,b){return await qb(this._key,b,a)}marshal(){return function(a){if(null==a.n||null==a.e)throw aZ(Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");let b=c2.pki.publicKeyToAsn1({n:p3(a.n),e:p3(a.e)});return(0,a8.fromString)(c2.asn1.toDer(b).getBytes(),"ascii")}(this._key)}get bytes(){return aI.encode({Type:aG.RSA,Data:this.marshal()}).subarray()}encrypt(a){var b,c;return b=this._key,qe(b,!0,c=a,(a,b)=>b.encrypt(a))}equals(a){return(0,bK.equals)(this.bytes,a.bytes)}async hash(){let{bytes:a}=await dc.sha256.digest(this.bytes);return a}}class qh{constructor(a,b){this._key=a,this._publicKey=b}genSecret(){return function(a){if(isNaN(a)||a<=0)throw aZ(Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return fr.randomBytes(a)}(16)}async sign(a){return await qa(this._key,a)}get public(){if(null==this._publicKey)throw aZ(Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new qg(this._publicKey)}decrypt(a){var b,c;return b=this._key,qe(b,!1,c=a,(a,b)=>b.decrypt(a))}marshal(){return function(a){if(null==a.n||null==a.e||null==a.d||null==a.p||null==a.q||null==a.dp||null==a.dq||null==a.qi)throw aZ(Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");let b=c2.pki.privateKeyToAsn1({n:p3(a.n),e:p3(a.e),d:p3(a.d),p:p3(a.p),q:p3(a.q),dP:p3(a.dp),dQ:p3(a.dq),qInv:p3(a.qi)});return(0,a8.fromString)(c2.asn1.toDer(b).getBytes(),"ascii")}(this._key)}get bytes(){return aJ.encode({Type:aG.RSA,Data:this.marshal()}).subarray()}equals(a){return(0,bK.equals)(this.bytes,a.bytes)}async hash(){let{bytes:a}=await dc.sha256.digest(this.bytes);return a}async id(){let a=await this.public.hash();return(0,bb.toString)(a,"base58btc")}async export(a,b="pkcs-8"){if("pkcs-8"===b){let c=new c2.util.ByteBuffer(this.marshal()),d=c2.asn1.fromDer(c),e=c2.pki.privateKeyFromAsn1(d),f={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"};return c2.pki.encryptRsaPrivateKey(e,a,f)}if("libp2p-key"===b)return await qf(this.bytes,a);throw aZ(Error(`export format '${b}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}async function qi(a){let b=function(a){let b=c2.asn1.fromDer((0,bb.toString)(a,"ascii")),c=c2.pki.privateKeyFromAsn1(b);return{kty:"RSA",n:p2(c.n),e:p2(c.e),d:p2(c.d),p:p2(c.p),q:p2(c.q),dp:p2(c.dP),dq:p2(c.dQ),qi:p2(c.qInv),alg:"RS256"}}(a),c=await p9(b);return new qh(c.privateKey,c.publicKey)}function qj(a){let b=function(a){let b=c2.asn1.fromDer((0,bb.toString)(a,"ascii")),c=c2.pki.publicKeyFromAsn1(b);return{kty:"RSA",n:p2(c.n),e:p2(c.e)}}(a);return new qg(b)}async function qk(a){let b=await p9(a);return new qh(b.privateKey,b.publicKey)}async function ql(a){let b=await p8(a);return new qh(b.privateKey,b.publicKey)}let qm=64;async function qn(){let a=ef.randomPrivateKey(),b=await d9(a),c=qr(a,b);return{privateKey:c,publicKey:b}}async function qo(a){if(32!==a.length)throw TypeError('"seed" must be 32 bytes in length.');if(!(a instanceof Uint8Array))throw TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let b=a,c=await d9(b),d=qr(b,c);return{privateKey:d,publicKey:c}}async function qp(a,b){let c=a.slice(0,32);return await ea(b,c)}async function qq(a,b,c){return await eb(b,c,a)}function qr(a,b){let c=new Uint8Array(qm);for(let d=0;d<32;d++)c[d]=a[d],c[32+d]=b[d];return c}class qs{constructor(a){this._key=qy(a,32)}async verify(a,b){return await qq(this._key,b,a)}marshal(){return this._key}get bytes(){return aI.encode({Type:aG.Ed25519,Data:this.marshal()}).subarray()}equals(a){return(0,bK.equals)(this.bytes,a.bytes)}async hash(){let{bytes:a}=await dc.sha256.digest(this.bytes);return a}}class qt{constructor(a,b){this._key=qy(a,qm),this._publicKey=qy(b,32)}async sign(a){return await qp(this._key,a)}get public(){return new qs(this._publicKey)}marshal(){return this._key}get bytes(){return aJ.encode({Type:aG.Ed25519,Data:this.marshal()}).subarray()}equals(a){return(0,bK.equals)(this.bytes,a.bytes)}async hash(){let{bytes:a}=await dc.sha256.digest(this.bytes);return a}async id(){let a=await a1.identity.digest(this.public.bytes);return du.base58btc.encode(a.bytes).substring(1)}async export(a,b="libp2p-key"){if("libp2p-key"===b)return await qf(this.bytes,a);throw aZ(Error(`export format '${b}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function qu(a){if(a.length>qm){a=qy(a,qm+32);let b=a.slice(0,qm),c=a.slice(qm,a.length);return new qt(b,c)}a=qy(a,qm);let d=a.slice(0,qm),e=a.slice(32);return new qt(d,e)}function qv(a){return a=qy(a,32),new qs(a)}async function qw(){let{privateKey:a,publicKey:b}=await qn();return new qt(a,b)}async function qx(a){let{privateKey:b,publicKey:c}=await qo(a);return new qt(b,c)}function qy(a,b){if((a=Uint8Array.from(a??[])).length!==b)throw aZ(Error(`Key must be a Uint8Array of length ${b}, got ${a.length}`),"ERR_INVALID_KEY_TYPE");return a}async function qz(a,b){let{digest:c}=await dc.sha256.digest(b);try{return await ff(c,a)}catch(d){throw aZ(d,"ERR_INVALID_INPUT")}}async function qA(a,b,c){try{let{digest:d}=await dc.sha256.digest(c);return fh(b,d,a)}catch(e){throw aZ(e,"ERR_INVALID_INPUT")}}function qB(a){try{eI.fromHex(a)}catch(b){throw aZ(b,"ERR_INVALID_PUBLIC_KEY")}}class qC{constructor(a){qB(a),this._key=a}async verify(a,b){return await qA(this._key,b,a)}marshal(){return function(a){let b=eI.fromHex(a).toRawBytes(!0);return b}(this._key)}get bytes(){return aI.encode({Type:aG.Secp256k1,Data:this.marshal()}).subarray()}equals(a){return(0,bK.equals)(this.bytes,a.bytes)}async hash(){let{bytes:a}=await dc.sha256.digest(this.bytes);return a}}class qD{constructor(a,b){this._key=a,this._publicKey=b??function(a){try{return fc(a,!0)}catch(b){throw aZ(b,"ERR_INVALID_PRIVATE_KEY")}}(a),function(a){try{fc(a,!0)}catch(b){throw aZ(b,"ERR_INVALID_PRIVATE_KEY")}}(this._key),qB(this._publicKey)}async sign(a){return await qz(this._key,a)}get public(){return new qC(this._publicKey)}marshal(){return this._key}get bytes(){return aJ.encode({Type:aG.Secp256k1,Data:this.marshal()}).subarray()}equals(a){return(0,bK.equals)(this.bytes,a.bytes)}async hash(){let{bytes:a}=await dc.sha256.digest(this.bytes);return a}async id(){let a=await this.public.hash();return(0,bb.toString)(a,"base58btc")}async export(a,b="libp2p-key"){if("libp2p-key"===b)return await qf(this.bytes,a);throw aZ(Error(`export format '${b}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function qE(a){return new qD(a)}function qF(a){return new qC(a)}async function qG(){let a=await fr.randomPrivateKey();return new qD(a)}let qH={rsa:aT,ed25519:aU,secp256k1:aV};function qI(a){let b=Object.keys(qH).join(" / ");return errcode(Error(`invalid or unsupported key type ${a}. Must be ${b}`),"ERR_UNSUPPORTED_KEY_TYPE")}let qJ;async function qK(a){return await peerIdFromKeys(marshalPublicKey(a))}async function qL(a){return await peerIdFromKeys(marshalPublicKey(a.public),marshalPrivateKey(a))}(j=aK||(aK={})).codec=()=>(null==qJ&&(qJ=p$((a,b,c={})=>{if(!1!==c.lengthDelimited&&b.fork(),null!=a.id)b.uint32(10),b.bytes(a.id);else throw Error('Protocol error: required field "id" was not found in object');null!=a.pubKey&&(b.uint32(18),b.bytes(a.pubKey)),null!=a.privKey&&(b.uint32(26),b.bytes(a.privKey)),!1!==c.lengthDelimited&&b.ldelim()},(a,b)=>{let c={id:new Uint8Array(0)},d=null==b?a.len:a.pos+b;for(;a.pos<d;){let e=a.uint32();switch(e>>>3){case 1:c.id=a.bytes();break;case 2:c.pubKey=a.bytes();break;case 3:c.privKey=a.bytes();break;default:a.skipType(7&e)}}if(null==c.id)throw Error('Protocol error: value for required field "id" was not found in protobuf');return c})),qJ),j.encode=a=>pY(a,j.codec()),j.decode=a=>pW(a,j.codec());class qM extends null{get[oU](){return!0}get[Symbol.toStringTag](){return"@libp2p/dummy-dht"}get wan(){throw errCode(Error(messages.DHT_DISABLED),codes.DHT_DISABLED)}get lan(){throw errCode(Error(messages.DHT_DISABLED),codes.DHT_DISABLED)}get(){throw errCode(Error(messages.DHT_DISABLED),codes.DHT_DISABLED)}findProviders(){throw errCode(Error(messages.DHT_DISABLED),codes.DHT_DISABLED)}findPeer(){throw errCode(Error(messages.DHT_DISABLED),codes.DHT_DISABLED)}getClosestPeers(){throw errCode(Error(messages.DHT_DISABLED),codes.DHT_DISABLED)}provide(){throw errCode(Error(messages.DHT_DISABLED),codes.DHT_DISABLED)}put(){throw errCode(Error(messages.DHT_DISABLED),codes.DHT_DISABLED)}async getMode(){throw errCode(Error(messages.DHT_DISABLED),codes.DHT_DISABLED)}async setMode(){throw errCode(Error(messages.DHT_DISABLED),codes.DHT_DISABLED)}async refreshRoutingTable(){throw errCode(Error(messages.DHT_DISABLED),codes.DHT_DISABLED)}}function qN(a,b){let c={[Symbol.iterator]:()=>c,next:()=>{let c=a.next(),d=c.value;if(!0===c.done||null==d){let e={done:!0,value:void 0};return e}return{done:!1,value:b(d)}}};return c}class qO{constructor(a){if(this.map=new Map,null!=a)for(let[b,c]of a.entries())this.map.set(b.toString(),c)}[Symbol.iterator](){return this.entries()}clear(){this.map.clear()}delete(a){this.map.delete(a.toString())}entries(){return qN(this.map.entries(),a=>[(0,bF.jE)(a[0]),a[1]])}forEach(a){this.map.forEach((b,c)=>{a(b,(0,bF.jE)(c),this)})}get(a){return this.map.get(a.toString())}has(a){return this.map.has(a.toString())}set(a,b){this.map.set(a.toString(),b)}keys(){return qN(this.map.keys(),a=>(0,bF.jE)(a))}values(){return this.map.values()}get size(){return this.map.size}}class qP{constructor(a){if(this.set=new Set,null!=a)for(let b of a)this.set.add(b.toString())}get size(){return this.set.size}[Symbol.iterator](){return this.values()}add(a){this.set.add(a.toString())}clear(){this.set.clear()}delete(a){this.set.delete(a.toString())}entries(){return mapIterable(this.set.entries(),a=>{let b=peerIdFromString(a[0]);return[b,b]})}forEach(a){this.set.forEach(b=>{let c=peerIdFromString(b);a(c,c,this)})}has(a){return this.set.has(a.toString())}values(){return mapIterable(this.set.values(),a=>peerIdFromString(a))}}class qQ{constructor(a){if(this.list=[],null!=a)for(let b of a)this.list.push(b.toString())}[Symbol.iterator](){return mapIterable(this.list.entries(),a=>peerIdFromString(a[1]))}concat(a){let b=new qQ(this);for(let c of a)b.push(c);return b}entries(){return mapIterable(this.list.entries(),a=>[a[0],peerIdFromString(a[1])])}every(a){return this.list.every((b,c)=>a(peerIdFromString(b),c,this))}filter(a){let b=new qQ;return this.list.forEach((c,d)=>{let e=peerIdFromString(c);a(e,d,this)&&b.push(e)}),b}find(a){let b=this.list.find((b,c)=>a(peerIdFromString(b),c,this));if(null!=b)return peerIdFromString(b)}findIndex(a){return this.list.findIndex((b,c)=>a(peerIdFromString(b),c,this))}forEach(a){this.list.forEach((b,c)=>{a(peerIdFromString(b),c,this)})}includes(a){return this.list.includes(a.toString())}indexOf(a){return this.list.indexOf(a.toString())}pop(){let a=this.list.pop();if(null!=a)return peerIdFromString(a)}push(...a){for(let b of a)this.list.push(b.toString())}shift(){let a=this.list.shift();if(null!=a)return peerIdFromString(a)}unshift(...a){let b=this.list.length;for(let c=a.length-1;c> -1;c--)b=this.list.unshift(a[c].toString());return b}get length(){return this.list.length}}let qR=(0,aY.kg)("libp2p");c(99507);(0,a8.fromString)("/pk/");(k=aL||(aL={})).codec=()=>cG({1:{name:"key",codec:ch,optional:!0},2:{name:"value",codec:ch,optional:!0},3:{name:"author",codec:ch,optional:!0},4:{name:"signature",codec:ch,optional:!0},5:{name:"timeReceived",codec:cW,optional:!0}}),k.encode=a=>b8(a,k.codec()),k.decode=a=>b7(a,k.codec());let qS,qT;(m=(l=aM||(aM={})).MessageType||(l.MessageType={})).PUT_VALUE="PUT_VALUE",m.GET_VALUE="GET_VALUE",m.ADD_PROVIDER="ADD_PROVIDER",m.GET_PROVIDERS="GET_PROVIDERS",m.FIND_NODE="FIND_NODE",m.PING="PING",(n=qS||(qS={}))[n.PUT_VALUE=0]="PUT_VALUE",n[n.GET_VALUE=1]="GET_VALUE",n[n.ADD_PROVIDER=2]="ADD_PROVIDER",n[n.GET_PROVIDERS=3]="GET_PROVIDERS",n[n.FIND_NODE=4]="FIND_NODE",n[n.PING=5]="PING",(o=l.MessageType||(l.MessageType={})).codec=()=>cl(qS),(p=l.ConnectionType||(l.ConnectionType={})).NOT_CONNECTED="NOT_CONNECTED",p.CONNECTED="CONNECTED",p.CAN_CONNECT="CAN_CONNECT",p.CANNOT_CONNECT="CANNOT_CONNECT",(q=qT||(qT={}))[q.NOT_CONNECTED=0]="NOT_CONNECTED",q[q.CONNECTED=1]="CONNECTED",q[q.CAN_CONNECT=2]="CAN_CONNECT",q[q.CANNOT_CONNECT=3]="CANNOT_CONNECT",(r=l.ConnectionType||(l.ConnectionType={})).codec=()=>cl(qT),(s=l.Peer||(l.Peer={})).codec=()=>cG({1:{name:"id",codec:ch,optional:!0},2:{name:"addrs",codec:ch,repeats:!0},3:{name:"connection",codec:l.ConnectionType.codec(),optional:!0}}),s.encode=a=>b8(a,s.codec()),s.decode=a=>b7(a,s.codec()),l.codec=()=>cG({1:{name:"type",codec:l.MessageType.codec(),optional:!0},10:{name:"clusterLevelRaw",codec:cy,optional:!0},2:{name:"key",codec:ch,optional:!0},3:{name:"record",codec:ch,optional:!0},8:{name:"closerPeers",codec:l.Peer.codec(),repeats:!0},9:{name:"providerPeers",codec:l.Peer.codec(),repeats:!0}}),l.encode=a=>b8(a,l.codec()),l.decode=a=>b7(a,l.codec());let qU=aM.MessageType,qV=aM.ConnectionType;Object.keys(qU);class qW{constructor(a,b,c){if(!(b instanceof Uint8Array))throw Error("Key must be a Uint8Array");this.type=a,this.key=b,this.clusterLevelRaw=c,this.closerPeers=[],this.providerPeers=[],this.record=void 0}get clusterLevel(){let a=this.clusterLevelRaw-1;return a<0?0:a}set clusterLevel(a){this.clusterLevelRaw=a}serialize(){return PBMessage.encode({key:this.key,type:this.type,clusterLevelRaw:this.clusterLevelRaw,closerPeers:this.closerPeers.map(qX),providerPeers:this.providerPeers.map(qX),record:null==this.record?void 0:this.record.serialize()})}static deserialize(a){let b=PBMessage.decode(a),c=new qW(b.type??PBMessage.MessageType.PUT_VALUE,b.key??Uint8Array.from([]),b.clusterLevelRaw??0);return c.closerPeers=b.closerPeers.map(qY),c.providerPeers=b.providerPeers.map(qY),b.record?.length!=null&&(c.record=Libp2pRecord.deserialize(b.record)),c}}function qX(a){let b={id:a.id.toBytes(),addrs:(a.multiaddrs??[]).map(a=>a.bytes),connection:qV.CONNECTED};return b}function qY(a){if(null==a.id)throw Error("Invalid peer in message");return{id:peerIdFromBytes(a.id),multiaddrs:(a.addrs??[]).map(a=>new Multiaddr(a)),protocols:[]}}function qZ(a){let b="string"==typeof a?a:uint8ArrayToString(a.multihash.bytes,"base32");return`${PROVIDER_KEY_PREFIX}/${b}`}(0,aY.kg)("libp2p:kad-dht:providers");function q$(a){let b=a.toString().split("/");if(5!==b.length)throw Error(`incorrectly formatted provider entry key in datastore: ${a.toString()}`);return{cid:b[3],peerId:b[4]}}function q_(a){return new Date(varint.decode(a))}BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");(0,aY.kg)("libp2p:kad-dht:rpc:handlers:add-provider"),(0,aY.kg)("libp2p:kad-dht:rpc:handlers:find-node"),(0,aY.kg)("libp2p:kad-dht:rpc:handlers:get-providers"),(0,aY.kg)("libp2p:kad-dht:rpc:handlers:get-value"),(0,aY.kg)("libp2p:kad-dht:rpc:handlers:ping");class q0 extends null{constructor(a){super(),this.components=new Components;let{kBucketSize:b,clientMode:c,validators:d,selectors:e,querySelfInterval:f,lan:g,protocolPrefix:h,pingTimeout:i,pingConcurrency:j}=a;this.running=!1,this.lan=Boolean(g),this.log=logger(`libp2p:kad-dht:${!0===g?"lan":"wan"}`),this.protocol=`${h??PROTOCOL_PREFIX}${!0===g?LAN_PREFIX:""}${PROTOCOL_DHT}`,this.kBucketSize=b??20,this.clientMode=c?? !0,this.routingTable=new RoutingTable({kBucketSize:b,lan:this.lan,pingTimeout:i,pingConcurrency:j,protocol:this.protocol}),this.providers=new Providers,this.validators={...recordValidators,...d},this.selectors={...recordSelectors,...e},this.network=new Network({protocol:this.protocol,lan:this.lan}),this.queryManager=new QueryManager({disjointPaths:Math.ceil(this.kBucketSize/2),lan:g}),this.peerRouting=new PeerRouting({routingTable:this.routingTable,network:this.network,validators:this.validators,queryManager:this.queryManager,lan:this.lan}),this.contentFetching=new ContentFetching({validators:this.validators,selectors:this.selectors,peerRouting:this.peerRouting,queryManager:this.queryManager,routingTable:this.routingTable,network:this.network,lan:this.lan}),this.contentRouting=new ContentRouting({network:this.network,peerRouting:this.peerRouting,queryManager:this.queryManager,routingTable:this.routingTable,providers:this.providers,lan:this.lan}),this.routingTableRefresh=new RoutingTableRefresh({peerRouting:this.peerRouting,routingTable:this.routingTable,lan:this.lan}),this.rpc=new RPC({routingTable:this.routingTable,providers:this.providers,peerRouting:this.peerRouting,validators:this.validators,lan:this.lan}),this.topologyListener=new TopologyListener({protocol:this.protocol,lan:this.lan}),this.querySelf=new QuerySelf({peerRouting:this.peerRouting,interval:f,lan:this.lan}),this.network.addEventListener("peer",a=>{let b=a.detail;this.onPeerConnect(b).catch(a=>{this.log.error("could not add %p to routing table",b.id,a)}),this.dispatchEvent(new CustomEvent("peer",{detail:b}))}),this.topologyListener.addEventListener("peer",a=>{let b=a.detail;Promise.resolve().then(async()=>{let a=await this.components.getPeerStore().addressBook.get(b),c={id:b,multiaddrs:a.map(a=>a.multiaddr),protocols:[]};await this.onPeerConnect(c)}).catch(a=>{this.log.error("could not add %p to routing table",b,a)})})}get[oU](){return!0}get[Symbol.toStringTag](){return"@libp2p/kad-dht"}init(a){this.components=a,this.routingTable.init(a),this.providers.init(a),this.network.init(a),this.queryManager.init(a),this.peerRouting.init(a),this.contentFetching.init(a),this.contentRouting.init(a),this.routingTableRefresh.init(a),this.rpc.init(a),this.topologyListener.init(a),this.querySelf.init(a)}async onPeerConnect(a){if(this.log("peer %p connected with protocols %s",a.id,a.protocols),0===(a=this.lan?removePublicAddresses(a):removePrivateAddresses(a)).multiaddrs.length){this.log("ignoring %p as they do not have any %s addresses in %s",a.id,this.lan?"private":"public",a.multiaddrs.map(a=>a.toString()));return}try{await this.routingTable.add(a.id)}catch(b){this.log.error("could not add %p to routing table",a.id,b)}}isStarted(){return this.running}async getMode(){return this.clientMode?"client":"server"}async setMode(a){await this.components.getRegistrar().unhandle(this.protocol),"client"===a?(this.log("enabling client mode"),this.clientMode=!0):(this.log("enabling server mode"),this.clientMode=!1,await this.components.getRegistrar().handle(this.protocol,this.rpc.onIncomingStream.bind(this.rpc)))}async start(){this.running=!0,await this.setMode(this.clientMode?"client":"server"),await Promise.all([this.providers.start(),this.queryManager.start(),this.network.start(),this.routingTable.start(),this.topologyListener.start(),this.querySelf.start()]),await this.routingTableRefresh.start()}async stop(){this.running=!1,await Promise.all([this.providers.stop(),this.queryManager.stop(),this.network.stop(),this.routingTable.stop(),this.routingTableRefresh.stop(),this.topologyListener.stop(),this.querySelf.stop()])}async *put(a,b,c={}){yield*this.contentFetching.put(a,b,c)}async *get(a,b={}){yield*this.contentFetching.get(a,b)}async *provide(a,b={}){yield*this.contentRouting.provide(a,this.components.getAddressManager().getAddresses(),b)}async *findProviders(a,b={}){yield*this.contentRouting.findProviders(a,b)}async *findPeer(a,b={}){yield*this.peerRouting.findPeer(a,b)}async *getClosestPeers(a,b={}){yield*this.peerRouting.getClosestPeers(a,b)}async refreshRoutingTable(){await this.routingTableRefresh.refreshTable(!0)}}let q1=(0,aY.kg)("libp2p:kad-dht");class q2 extends null{constructor(a,b){super(),this.components=new Components,this.wan=a,this.lan=b,this.wan.addEventListener("peer",a=>{this.dispatchEvent(new CustomEvent("peer",{detail:a.detail}))}),this.lan.addEventListener("peer",a=>{this.dispatchEvent(new CustomEvent("peer",{detail:a.detail}))})}get[oU](){return!0}get[Symbol.toStringTag](){return"@libp2p/dual-kad-dht"}init(a){this.components=a,this.wan.init(a),this.lan.init(a)}isStarted(){return this.wan.isStarted()&&this.lan.isStarted()}async getMode(){return await this.wan.getMode()}async setMode(a){await this.wan.setMode(a)}async start(){await Promise.all([this.lan.start(),this.wan.start()])}async stop(){await Promise.all([this.lan.stop(),this.wan.stop()])}async *put(a,b,c={}){for await(let d of merge(this.lan.put(a,b,c),this.wan.put(a,b,c)))yield d}async *get(a,b={}){let c=!1,d=!1;for await(let e of merge(this.lan.get(a,b),this.wan.get(a,b)))yield e,"DIALING_PEER"===e.name&&(c=!0),"VALUE"===e.name&&(c=!0,null!=e.value&&(d=!0)),"SENDING_QUERY"===e.name&&(c=!0);if(!c)throw errCode(Error("No peers found in routing table!"),"ERR_NO_PEERS_IN_ROUTING_TABLE");d||(yield queryErrorEvent({from:this.components.getPeerId(),error:errCode(Error("Not found"),"ERR_NOT_FOUND")}))}async *provide(a,b={}){let c=0,d=0,e=[],f=[this.lan];for await(let g of(await this.wan.getMode()==="server"&&f.push(this.wan),merge(...f.map(c=>c.provide(a,b)))))yield g,"SENDING_QUERY"===g.name&&c++,"QUERY_ERROR"===g.name&&e.push(g.error),"PEER_RESPONSE"===g.name&&"ADD_PROVIDER"===g.messageName&&(q1("sent provider record for %s to %p",a,g.from),d++);if(0===d){if(e.length>0)throw errCode(Error(`Failed to provide to ${e.length} of ${c} peers`),"ERR_PROVIDES_FAILED",{errors:e});throw errCode(Error("Failed to provide - no peers found"),"ERR_PROVIDES_FAILED")}}async *findProviders(a,b={}){yield*merge(this.lan.findProviders(a,b),this.wan.findProviders(a,b))}async *findPeer(a,b={}){let c=!1;for await(let d of merge(this.lan.findPeer(a,b),this.wan.findPeer(a,b)))yield d,("SENDING_QUERY"===d.name||"FINAL_PEER"===d.name)&&(c=!0);if(!c)throw errCode(Error("Peer lookup failed"),"ERR_LOOKUP_FAILED")}async *getClosestPeers(a,b={}){yield*merge(this.lan.getClosestPeers(a,b),this.wan.getClosestPeers(a,b))}async refreshRoutingTable(){await Promise.all([this.lan.refreshRoutingTable(),this.wan.refreshRoutingTable()])}}let q3=(0,aY.kg)("libp2p:bootstrap");class q4 extends mn{constructor(a={list:[]}){if(null==a.list||0===a.list.length)throw Error("Bootstrap requires a list of peer addresses");for(let b of(super(),this.interval=a.interval??1e4,this.list=[],a.list)){if(!gC.matches(b)){q3.error("Invalid multiaddr");continue}let c=new gh.sc(b),d=c.getPeerId();if(null==d){q3.error("Invalid bootstrap multiaddr without peer id");continue}let e={id:(0,bF.jE)(d),multiaddrs:[c],protocols:[]};this.list.push(e)}}get[oU](){return!0}get[Symbol.toStringTag](){return"@libp2p/bootstrap"}isStarted(){return Boolean(this.timer)}start(){null==this.timer&&(this.timer=setInterval(()=>this._discoverBootstrapPeers(),this.interval),q3("Starting bootstrap node discovery"),this._discoverBootstrapPeers())}_discoverBootstrapPeers(){null!=this.timer&&this.list.forEach(a=>{this.dispatchEvent(new mp("peer",{detail:a}))})}stop(){null!=this.timer&&clearInterval(this.timer),this.timer=void 0}}q4.tag="bootstrap",WebSocket,c(90507),c(17745),(0,aY.kg)("libp2p:websockets:socket");let q5=(0,aY.kg)("libp2p:websockets");class q6{constructor(a){this.init=a}get[Symbol.toStringTag](){return"@libp2p/websockets"}get[oT](){return!0}async dial(a,b){q5("dialing %s",a),b=b??{};let c=await this._connect(a,b),d=socketToMaConn(c,a);q5("new outbound connection %s",d.remoteAddr);let e=await b.upgrader.upgradeOutbound(d);return q5("outbound connection %s upgraded",d.remoteAddr),e}async _connect(a,b){if(b?.signal?.aborted=== !0)throw new AbortError;let c=a.toOptions();q5("dialing %s:%s",c.host,c.port);let d=pDefer(),e=a=>{q5.error("connection error:",a),d.reject(a)},f=connect(toUri(a),this.init);if(null!=f.socket.on?f.socket.on("error",e):f.socket.onerror=e,null==b.signal)return await Promise.race([f.connected(),d.promise]),q5("connected %s",a),f;let g,h=new Promise((a,c)=>{if(g=()=>{c(new AbortError),setTimeout(()=>{f.close().catch(a=>{q5.error("error closing raw socket",a)})})},b?.signal?.aborted=== !0)return g();b?.signal?.addEventListener("abort",g)});try{await Promise.race([h,d.promise,f.connected()])}finally{null!=g&&b?.signal?.removeEventListener("abort",g)}return q5("connected %s",a),f}createListener(a){return createListener({...this.init,...a})}filter(a){return(a=Array.isArray(a)?a:[a],this.init?.filter!=null)?this.init?.filter(a):env.isBrowser||env.isWebWorker?filters.dnsWss(a):filters.all(a)}}(t=aN||(aN={}))[t.NEW_STREAM=0]="NEW_STREAM",t[t.MESSAGE_RECEIVER=1]="MESSAGE_RECEIVER",t[t.MESSAGE_INITIATOR=2]="MESSAGE_INITIATOR",t[t.CLOSE_RECEIVER=3]="CLOSE_RECEIVER",t[t.CLOSE_INITIATOR=4]="CLOSE_INITIATOR",t[t.RESET_RECEIVER=5]="RESET_RECEIVER",t[t.RESET_INITIATOR=6]="RESET_INITIATOR",Object.freeze({0:"NEW_STREAM",1:"MESSAGE_RECEIVER",2:"MESSAGE_INITIATOR",3:"CLOSE_RECEIVER",4:"CLOSE_INITIATOR",5:"RESET_RECEIVER",6:"RESET_INITIATOR"}),Object.freeze({NEW_STREAM:aN.NEW_STREAM,MESSAGE:aN.MESSAGE_INITIATOR,CLOSE:aN.CLOSE_INITIATOR,RESET:aN.RESET_INITIATOR}),Object.freeze({MESSAGE:aN.MESSAGE_RECEIVER,CLOSE:aN.CLOSE_RECEIVER,RESET:aN.RESET_RECEIVER});var q7=c(48764).Buffer;function q8(a){return null!=globalThis.Buffer?q7.allocUnsafe(a):new Uint8Array(a)}new class{constructor(){this._pool=q8(10240),this._poolOffset=0}write(a){let b=this._pool,c=this._poolOffset;iC.encode(a.id<<3|a.type,b,c),c+=iC.encode.bytes,(a.type===aN.NEW_STREAM||a.type===aN.MESSAGE_INITIATOR||a.type===aN.MESSAGE_RECEIVER)&&null!=a.data?iC.encode(a.data.length,b,c):iC.encode(0,b,c),c+=iC.encode.bytes;let d=b.slice(this._poolOffset,c);return(10240-c<100?(this._pool=q8(10240),this._poolOffset=0):this._poolOffset=c,(a.type===aN.NEW_STREAM||a.type===aN.MESSAGE_INITIATOR||a.type===aN.MESSAGE_RECEIVER)&&null!=a.data)?[d,a.data instanceof Uint8Array?a.data:a.data.slice()]:[d]}};function q9(a,b=0){let c=0,d=0,e=b,f,g=a.length;do{if(e>=g||d>49)throw b=0,RangeError("Could not decode varint");f=a.get(e++),c+=d<28?(127&f)<<d:(127&f)*Math.pow(2,d),d+=7}while(f>=128);return b=e-b,{value:c,offset:b}}(0,aY.kg)("libp2p:mplex:stream"),(0,aY.kg)("libp2p:mplex");function ra(a,b={}){let c=function(a){let b=mB(),c=function(a){let b=async function*(){let b=yield,c=new bQ;for await(let d of a){if(null==b){c.append(d),b=yield c,c=new bQ;continue}for(c.append(d);c.length>=b;){let e=c.subarray(0,b);if(c.consume(b),null==(b=yield e)){c.length>0&&(b=yield c,c=new bQ);break}}}if(null!=b)throw Object.assign(Error(`stream ended before ${b} bytes became available`),{code:"ERR_UNDER_READ",buffer:c})}();return b.next(),b}(a.source),d=o4(),e,f=a.sink(async function*(){yield*b;let a=await d.promise;yield*a}());f.catch(a=>{e=a});let g={sink:async a=>null!=e?await Promise.reject(e):(d.resolve(a),await f),source:f5(c,a=>a.slice())};return{reader:c,writer:b,stream:g,rest:()=>b.end(),write:b.push,read:async()=>{let a=await c.next();if(null!=a.value)return a.value.slice()}}}(a),d=mw.fromReader(c.reader,b),e={read:async a=>{let{value:b}=await c.reader.next(a);if(null==b)throw Error("Value is null");return b},readLP:async()=>{let{value:a}=await d.next();if(null==a)throw Error("Value is null");return a},readPB:async a=>{let b=await e.readLP();if(null==b)throw Error("Value is null");let c=b instanceof Uint8Array?b:b.slice();return a.decode(c)},write:a=>{a instanceof Uint8Array?c.writer.push(a):c.writer.push(a.slice())},writeLP:a=>{e.write(mr.single(a,b))},writePB:(a,b)=>{e.writeLP(b.encode(a))},pb:a=>({read:async()=>await e.readPB(a),write:b=>e.writePB(b,a)}),unwrap:()=>(c.rest(),c.stream)};return e}function rb(){let a=o4(),b=!1;return{sink:async c=>{if(b)throw Error("already piped");b=!0,a.resolve(c)},source:async function*(){let b=await a.promise;yield*b}()}}let rc=65519,rd=Boolean(globalThis.process?.env?.DUMP_SESSION_KEYS);var re=c(512),rf=c(57664),rg=c(73294),rh=c(15501);let ri={hashSHA256(a){return(0,rg.vp)(a)},getHKDF(a,b){let c=new re.t(rg.mE,b,a),d=c.expand(96),e=d,f=e.slice(0,32),g=e.slice(32,64),h=e.slice(64,96);return[f,g,h]},generateX25519KeyPair(){let a=rf.Au();return{publicKey:a.publicKey,privateKey:a.secretKey}},generateX25519KeyPairFromSeed(a){let b=rf._w(a);return{publicKey:b.publicKey,privateKey:b.secretKey}},generateX25519SharedKey(a,b){return rf.gi(a,b)},chaCha20Poly1305Encrypt(a,b,c,d){let e=new rh.OK(d);return e.seal(b,a,c)},chaCha20Poly1305Decrypt(a,b,c,d){let e=new rh.OK(d);return e.open(b,a,c)}},rj=a=>globalThis.Buffer?globalThis.Buffer.allocUnsafe(a):new Uint8Array(a),rk=(a,b,c)=>(b=b??rj(2),new DataView(b.buffer,b.byteOffset,b.byteLength).setUint16(c??0,a,!1),b);rk.bytes=2;let rl=a=>{if(a.length<2)throw RangeError("Could not decode int16BE");return a instanceof Uint8Array?new DataView(a.buffer,a.byteOffset,a.byteLength).getUint16(0,!1):a.getUint16(0)};function rm(a){return(0,bM.concat)([a.ne,a.ciphertext],a.ne.length+a.ciphertext.length)}function rn(a){return(0,bM.concat)([a.ne,a.ns,a.ciphertext],a.ne.length+a.ns.length+a.ciphertext.length)}function ro(a){if(a.length<32)throw Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:a.slice(0,32),ciphertext:a.slice(32,a.length),ns:new Uint8Array(0)}}function rp(a){if(a.length<80)throw Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:a.slice(0,32),ns:a.slice(32,80),ciphertext:a.slice(80,a.length)}}rl.bytes=2;(v=(u=aO||(aO={})).NoiseHandshakePayload||(u.NoiseHandshakePayload={})).codec=()=>cG({1:{name:"identityKey",codec:ch},2:{name:"identitySig",codec:ch},3:{name:"data",codec:ch}}),v.encode=a=>b8(a,v.codec()),v.decode=a=>b7(a,v.codec());let rq=aO.NoiseHandshakePayload;async function rr(a,b,c){let d=await rt(a,rw(b)),e=c??new Uint8Array(0);if(null==a.publicKey)throw Error("PublicKey was missing from local PeerId");return rs(a.publicKey,d,e)}function rs(a,b,c){return rq.encode({identityKey:a,identitySig:b,data:c??new Uint8Array(0)})}async function rt(a,b){if(null==a.privateKey)throw Error("PrivateKey was missing from PeerId");let c=await fD(a.privateKey);return await c.sign(b)}async function ru(a){return await (0,bF.y5)(a.identityKey)}function rv(a){return rq.decode(a)}function rw(a){let b=(0,a8.fromString)("noise-libp2p-static-key:");return(0,bM.concat)([b,a],b.length+a.length)}async function rx(a,b){let c=await (0,bF.y5)(b);return c.equals(a)}async function ry(a,b,c){let d=b.identityKey;if(!await rx(c,d))throw Error("Peer ID doesn't match libp2p public key.");let e=rw(a),f=await (0,bF.y5)(d);if(null==f.publicKey)throw Error("PublicKey was missing from PeerId");if(null==b.identitySig)throw Error("Signature was missing from message");let g=fC(f.publicKey),h=await g.verify(e,b.identitySig);if(!h)throw Error("Static key doesn't match to peer that signed payload!");return f}function rz(a){return a instanceof Uint8Array&&32===a.length}let rA=(0,aY.kg)("libp2p:noise"),rB;function rC(a){rB(`LOCAL_STATIC_PUBLIC_KEY ${(0,bb.toString)(a.publicKey,"hex")}`),rB(`LOCAL_STATIC_PRIVATE_KEY ${(0,bb.toString)(a.privateKey,"hex")}`)}function rD(a){a?(rB(`LOCAL_PUBLIC_EPHEMERAL_KEY ${(0,bb.toString)(a.publicKey,"hex")}`),rB(`LOCAL_PRIVATE_EPHEMERAL_KEY ${(0,bb.toString)(a.privateKey,"hex")}`)):rB("Missing local ephemeral keys.")}function rE(a){rB(`REMOTE_STATIC_PUBLIC_KEY ${(0,bb.toString)(a,"hex")}`)}function rF(a){rB(`REMOTE_EPHEMERAL_PUBLIC_KEY ${(0,bb.toString)(a,"hex")}`)}function rG(a){a.cs1&&a.cs2?(rB(`CIPHER_STATE_1 ${a.cs1.n} ${(0,bb.toString)(a.cs1.k,"hex")}`),rB(`CIPHER_STATE_2 ${a.cs2.n} ${(0,bb.toString)(a.cs2.k,"hex")}`)):rB("Missing cipher state.")}rB=rd?rA:Object.assign(()=>{},{enabled:!1,trace:()=>{},error:()=>{}});let rH=Number.MAX_SAFE_INTEGER,rI="Cipherstate has reached maximum n, a new handshake must be performed";class rJ{constructor(a){this.crypto=a}encryptWithAd(a,b,c){let d=this.encrypt(a.k,a.n,b,c);return this.setNonce(a,this.incrementNonce(a.n)),d}decryptWithAd(a,b,c){let{plaintext:d,valid:e}=this.decrypt(a.k,a.n,b,c);return this.setNonce(a,this.incrementNonce(a.n)),{plaintext:d,valid:e}}hasKey(a){return!this.isEmptyKey(a.k)}setNonce(a,b){a.n=b}createEmptyKey(){return new Uint8Array(32)}isEmptyKey(a){let b=this.createEmptyKey();return(0,bK.equals)(b,a)}incrementNonce(a){return a+1}nonceToBytes(a){let b=new Uint8Array(12);return new DataView(b.buffer,b.byteOffset,b.byteLength).setUint32(4,a,!0),b}encrypt(a,b,c,d){if(b>rH)throw Error(rI);let e=this.nonceToBytes(b);return this.crypto.chaCha20Poly1305Encrypt(d,e,c,a)}encryptAndHash(a,b){let c;return c=this.hasKey(a.cs)?this.encryptWithAd(a.cs,a.h,b):b,this.mixHash(a,c),c}decrypt(a,b,c,d){if(b>rH)throw Error(rI);let e=this.nonceToBytes(b),f=this.crypto.chaCha20Poly1305Decrypt(d,e,c,a);return f?{plaintext:f,valid:!0}:{plaintext:new Uint8Array(0),valid:!1}}decryptAndHash(a,b){let c,d=!0;return this.hasKey(a.cs)?{plaintext:c,valid:d}=this.decryptWithAd(a.cs,a.h,b):c=b,this.mixHash(a,b),{plaintext:c,valid:d}}dh(a,b){try{let c=this.crypto.generateX25519SharedKey(a,b);if(32===c.length)return c;return c.slice(0,32)}catch(d){let e=d;return rA(e.message),new Uint8Array(32)}}mixHash(a,b){a.h=this.getHash(a.h,b)}getHash(a,b){let c=this.crypto.hashSHA256((0,bM.concat)([a,b],a.length+b.length));return c}mixKey(a,b){let[c,d]=this.crypto.getHKDF(a.ck,b);a.cs=this.initializeKey(d),a.ck=c}initializeKey(a){return{k:a,n:0}}initializeSymmetric(a){let b=(0,a8.fromString)(a,"utf-8"),c=this.hashProtocolName(b),d=this.createEmptyKey(),e=this.initializeKey(d);return{cs:e,ck:c,h:c}}hashProtocolName(a){if(!(a.length<=32))return this.getHash(a,new Uint8Array(0));{let b=new Uint8Array(32);return b.set(a),b}}split(a){let[b,c]=this.crypto.getHKDF(a.ck,new Uint8Array(0)),d=this.initializeKey(b),e=this.initializeKey(c);return{cs1:d,cs2:e}}writeMessageRegular(a,b){let c=this.encryptWithAd(a,new Uint8Array(0),b),d=this.createEmptyKey(),e=new Uint8Array(0);return{ne:d,ns:e,ciphertext:c}}readMessageRegular(a,b){return this.decryptWithAd(a,new Uint8Array(0),b.ciphertext)}}class rK extends Error{constructor(a,b){super(b),this.initialMsg=a,this.name="FailedIKhandshake"}}class rL{constructor(a,b,c,d,e,f,g,h,i){this.isInitiator=a,this.payload=b,this.prologue=c,this.staticKeypair=e,this.connection=f,h&&(this.remotePeer=h),this.ik=i??new class extends rJ{initSession(a,b,c,d){let e=this.createEmptyKey(),f;return f=a?this.initializeInitiator(b,c,d,e):this.initializeResponder(b,c,d,e),{hs:f,i:a,mc:0}}sendMessage(a,b){let c;if(0===a.mc)c=this.writeMessageA(a.hs,b);else if(1===a.mc){let{messageBuffer:d,h:e,cs1:f,cs2:g}=this.writeMessageB(a.hs,b);c=d,a.h=e,a.cs1=f,a.cs2=g}else if(a.mc>1){if(a.i){if(!a.cs1)throw Error("CS1 (cipher state) is not defined");c=this.writeMessageRegular(a.cs1,b)}else{if(!a.cs2)throw Error("CS2 (cipher state) is not defined");c=this.writeMessageRegular(a.cs2,b)}}else throw Error("Session invalid.");return a.mc++,c}recvMessage(a,b){let c=new Uint8Array(0),d=!1;if(0===a.mc&&({plaintext:c,valid:d}=this.readMessageA(a.hs,b)),1===a.mc){let{plaintext:e,valid:f,h:g,cs1:h,cs2:i}=this.readMessageB(a.hs,b);c=e,d=f,a.h=g,a.cs1=h,a.cs2=i}return a.mc++,{plaintext:c,valid:d}}writeMessageA(a,b){a.e=this.crypto.generateX25519KeyPair();let c=a.e.publicKey;this.mixHash(a.ss,c),this.mixKey(a.ss,this.dh(a.e.privateKey,a.rs));let d=a.s.publicKey,e=this.encryptAndHash(a.ss,d);this.mixKey(a.ss,this.dh(a.s.privateKey,a.rs));let f=this.encryptAndHash(a.ss,b);return{ne:c,ns:e,ciphertext:f}}writeMessageB(a,b){a.e=this.crypto.generateX25519KeyPair();let c=a.e.publicKey;this.mixHash(a.ss,c),this.mixKey(a.ss,this.dh(a.e.privateKey,a.re)),this.mixKey(a.ss,this.dh(a.e.privateKey,a.rs));let d=this.encryptAndHash(a.ss,b),e=this.createEmptyKey(),{cs1:f,cs2:g}=this.split(a.ss);return{messageBuffer:{ne:c,ns:e,ciphertext:d},cs1:f,cs2:g,h:a.ss.h}}readMessageA(a,b){rz(b.ne)&&(a.re=b.ne),this.mixHash(a.ss,a.re),this.mixKey(a.ss,this.dh(a.s.privateKey,a.re));let{plaintext:c,valid:d}=this.decryptAndHash(a.ss,b.ns);d&&32===c.length&&rz(c)&&(a.rs=c),this.mixKey(a.ss,this.dh(a.s.privateKey,a.rs));let{plaintext:e,valid:f}=this.decryptAndHash(a.ss,b.ciphertext);return{plaintext:e,valid:d&&f}}readMessageB(a,b){if(rz(b.ne)&&(a.re=b.ne),this.mixHash(a.ss,a.re),!a.e)throw Error("Handshake state should contain ephemeral key by now.");this.mixKey(a.ss,this.dh(a.e.privateKey,a.re)),this.mixKey(a.ss,this.dh(a.s.privateKey,a.re));let{plaintext:c,valid:d}=this.decryptAndHash(a.ss,b.ciphertext),{cs1:e,cs2:f}=this.split(a.ss);return{h:a.ss.h,valid:d,plaintext:c,cs1:e,cs2:f}}initializeInitiator(a,b,c,d){let e=this.initializeSymmetric("Noise_IK_25519_ChaChaPoly_SHA256");this.mixHash(e,a),this.mixHash(e,c);let f=new Uint8Array(32);return{ss:e,s:b,rs:c,re:f,psk:d}}initializeResponder(a,b,c,d){let e=this.initializeSymmetric("Noise_IK_25519_ChaChaPoly_SHA256");this.mixHash(e,a),this.mixHash(e,b.publicKey);let f=new Uint8Array(32);return{ss:e,s:b,rs:c,re:f,psk:d}}}(d),this.session=this.ik.initSession(this.isInitiator,this.prologue,this.staticKeypair,g),this.remoteEarlyData=new Uint8Array}async stage0(){if(rC(this.session.hs.s),rE(this.session.hs.rs),this.isInitiator){rA("IK Stage 0 - Initiator sending message...");let a=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP(rn(a)),rA("IK Stage 0 - Initiator sent message."),rD(this.session.hs.e)}else{rA("IK Stage 0 - Responder receiving message...");let b=await this.connection.readLP();try{let c=rp(b.slice()),{plaintext:d,valid:e}=this.ik.recvMessage(this.session,c);if(!e)throw Error("ik handshake stage 0 decryption validation fail");rA("IK Stage 0 - Responder got message, going to verify payload.");let f=await rv(d);this.remotePeer=this.remotePeer||await ru(f),await ry(this.session.hs.rs,f,this.remotePeer),this.setRemoteEarlyData(f.data),rA("IK Stage 0 - Responder successfully verified payload!"),rF(this.session.hs.re)}catch(g){let h=g;throw rA("Responder breaking up with IK handshake in stage 0."),new rK(b,`Error occurred while verifying initiator's signed payload: ${h.message}`)}}}async stage1(){if(this.isInitiator){rA("IK Stage 1 - Initiator receiving message...");let a=(await this.connection.readLP()).slice(),b=ro(a),{plaintext:c,valid:d}=this.ik.recvMessage(this.session,b);rA("IK Stage 1 - Initiator got message, going to verify payload.");try{if(!d)throw Error("ik stage 1 decryption validation fail");let e=await rv(c);this.remotePeer=this.remotePeer||await ru(e),await ry(b.ns.slice(0,32),e,this.remotePeer),this.setRemoteEarlyData(e.data),rA("IK Stage 1 - Initiator successfully verified payload!"),rF(this.session.hs.re)}catch(f){let g=f;throw rA("Initiator breaking up with IK handshake in stage 1."),new rK(a,`Error occurred while verifying responder's signed payload: ${g.message}`)}}else{rA("IK Stage 1 - Responder sending message...");let h=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP(rm(h)),rA("IK Stage 1 - Responder sent message..."),rD(this.session.hs.e)}rG(this.session)}decrypt(a,b){let c=this.getCS(b,!1);return this.ik.decryptWithAd(c,new Uint8Array(0),a)}encrypt(a,b){let c=this.getCS(b);return this.ik.encryptWithAd(c,new Uint8Array(0),a)}getLocalEphemeralKeys(){if(!this.session.hs.e)throw Error("Ephemeral keys do not exist.");return this.session.hs.e}getCS(a,b=!0){if(!a.cs1||!a.cs2)throw Error("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?b?a.cs1:a.cs2:b?a.cs2:a.cs1}setRemoteEarlyData(a){a&&(this.remoteEarlyData=a)}}class rM extends Error{constructor(a="Unexpected Peer"){super(a),this.code=rM.code}static get code(){return"ERR_UNEXPECTED_PEER"}}class rN extends Error{constructor(a="Invalid crypto exchange"){super(a),this.code=rN.code}static get code(){return"ERR_INVALID_CRYPTO_EXCHANGE"}}class rO{constructor(a,b,c,d,e,f,g,h){this.isInitiator=a,this.payload=b,this.prologue=c,this.staticKeypair=e,this.connection=f,g&&(this.remotePeer=g),this.xx=h??new class extends rJ{initializeInitiator(a,b,c,d){let e=this.initializeSymmetric("Noise_XX_25519_ChaChaPoly_SHA256");this.mixHash(e,a);let f=new Uint8Array(32);return{ss:e,s:b,rs:c,psk:d,re:f}}initializeResponder(a,b,c,d){let e=this.initializeSymmetric("Noise_XX_25519_ChaChaPoly_SHA256");this.mixHash(e,a);let f=new Uint8Array(32);return{ss:e,s:b,rs:c,psk:d,re:f}}writeMessageA(a,b,c){let d=new Uint8Array(0);void 0!==c?a.e=c:a.e=this.crypto.generateX25519KeyPair();let e=a.e.publicKey;this.mixHash(a.ss,e);let f=this.encryptAndHash(a.ss,b);return{ne:e,ns:d,ciphertext:f}}writeMessageB(a,b){a.e=this.crypto.generateX25519KeyPair();let c=a.e.publicKey;this.mixHash(a.ss,c),this.mixKey(a.ss,this.dh(a.e.privateKey,a.re));let d=a.s.publicKey,e=this.encryptAndHash(a.ss,d);this.mixKey(a.ss,this.dh(a.s.privateKey,a.re));let f=this.encryptAndHash(a.ss,b);return{ne:c,ns:e,ciphertext:f}}writeMessageC(a,b){let c=a.s.publicKey,d=this.encryptAndHash(a.ss,c);this.mixKey(a.ss,this.dh(a.s.privateKey,a.re));let e=this.encryptAndHash(a.ss,b),f=this.createEmptyKey(),{cs1:g,cs2:h}=this.split(a.ss);return{h:a.ss.h,messageBuffer:{ne:f,ns:d,ciphertext:e},cs1:g,cs2:h}}readMessageA(a,b){return rz(b.ne)&&(a.re=b.ne),this.mixHash(a.ss,a.re),this.decryptAndHash(a.ss,b.ciphertext)}readMessageB(a,b){if(rz(b.ne)&&(a.re=b.ne),this.mixHash(a.ss,a.re),!a.e)throw Error("Handshake state `e` param is missing.");this.mixKey(a.ss,this.dh(a.e.privateKey,a.re));let{plaintext:c,valid:d}=this.decryptAndHash(a.ss,b.ns);d&&32===c.length&&rz(c)&&(a.rs=c),this.mixKey(a.ss,this.dh(a.e.privateKey,a.rs));let{plaintext:e,valid:f}=this.decryptAndHash(a.ss,b.ciphertext);return{plaintext:e,valid:d&&f}}readMessageC(a,b){let{plaintext:c,valid:d}=this.decryptAndHash(a.ss,b.ns);if(d&&32===c.length&&rz(c)&&(a.rs=c),!a.e)throw Error("Handshake state `e` param is missing.");this.mixKey(a.ss,this.dh(a.e.privateKey,a.rs));let{plaintext:e,valid:f}=this.decryptAndHash(a.ss,b.ciphertext),{cs1:g,cs2:h}=this.split(a.ss);return{h:a.ss.h,plaintext:e,valid:d&&f,cs1:g,cs2:h}}initSession(a,b,c){let d=this.createEmptyKey(),e=new Uint8Array(32),f;return f=a?this.initializeInitiator(b,c,e,d):this.initializeResponder(b,c,e,d),{hs:f,i:a,mc:0}}sendMessage(a,b,c){let d;if(0===a.mc)d=this.writeMessageA(a.hs,b,c);else if(1===a.mc)d=this.writeMessageB(a.hs,b);else if(2===a.mc){let{h:e,messageBuffer:f,cs1:g,cs2:h}=this.writeMessageC(a.hs,b);d=f,a.h=e,a.cs1=g,a.cs2=h}else if(a.mc>2){if(a.i){if(!a.cs1)throw Error("CS1 (cipher state) is not defined");d=this.writeMessageRegular(a.cs1,b)}else{if(!a.cs2)throw Error("CS2 (cipher state) is not defined");d=this.writeMessageRegular(a.cs2,b)}}else throw Error("Session invalid.");return a.mc++,d}recvMessage(a,b){let c=new Uint8Array(0),d=!1;if(0===a.mc)({plaintext:c,valid:d}=this.readMessageA(a.hs,b));else if(1===a.mc)({plaintext:c,valid:d}=this.readMessageB(a.hs,b));else if(2===a.mc){let{h:e,plaintext:f,valid:g,cs1:h,cs2:i}=this.readMessageC(a.hs,b);c=f,d=g,a.h=e,a.cs1=h,a.cs2=i}return a.mc++,{plaintext:c,valid:d}}}(d),this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair),this.remoteEarlyData=new Uint8Array(0)}async propose(){if(rC(this.session.hs.s),this.isInitiator){rA("Stage 0 - Initiator starting to send first message.");let a=this.xx.sendMessage(this.session,new Uint8Array(0));this.connection.writeLP(rm(a)),rA("Stage 0 - Initiator finished sending first message."),rD(this.session.hs.e)}else{rA("Stage 0 - Responder waiting to receive first message...");let b=ro((await this.connection.readLP()).slice()),{valid:c}=this.xx.recvMessage(this.session,b);if(!c)throw new rN("xx handshake stage 0 validation fail");rA("Stage 0 - Responder received first message."),rF(this.session.hs.re)}}async exchange(){if(this.isInitiator){rA("Stage 1 - Initiator waiting to receive first message from responder...");let a=rp((await this.connection.readLP()).slice()),{plaintext:b,valid:c}=this.xx.recvMessage(this.session,a);if(!c)throw new rN("xx handshake stage 1 validation fail");rA("Stage 1 - Initiator received the message."),rF(this.session.hs.re),rE(this.session.hs.rs),rA("Initiator going to check remote's signature...");try{let d=await rv(b);this.remotePeer=this.remotePeer||await ru(d),this.remotePeer=await ry(this.session.hs.rs,d,this.remotePeer),this.setRemoteEarlyData(d.data)}catch(e){let f=e;throw new rM(`Error occurred while verifying signed payload: ${f.message}`)}rA("All good with the signature!")}else{rA("Stage 1 - Responder sending out first message with signed payload and static key.");let g=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(rn(g)),rA("Stage 1 - Responder sent the second handshake message with signed payload."),rD(this.session.hs.e)}}async finish(){if(this.isInitiator){var a;rA("Stage 2 - Initiator sending third handshake message.");let b=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP((a=b,(0,bM.concat)([a.ns,a.ciphertext],a.ns.length+a.ciphertext.length))),rA("Stage 2 - Initiator sent message with signed payload.")}else{rA("Stage 2 - Responder waiting for third handshake message...");let c=function(a){if(a.length<48)throw Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:new Uint8Array(0),ns:a.slice(0,48),ciphertext:a.slice(48,a.length)}}((await this.connection.readLP()).slice()),{plaintext:d,valid:e}=this.xx.recvMessage(this.session,c);if(!e)throw new rN("xx handshake stage 2 validation fail");rA("Stage 2 - Responder received the message, finished handshake.");try{let f=await rv(d);this.remotePeer=this.remotePeer||await ru(f),await ry(this.session.hs.rs,f,this.remotePeer),this.setRemoteEarlyData(f.data)}catch(g){let h=g;throw new rM(`Error occurred while verifying signed payload: ${h.message}`)}}rG(this.session)}encrypt(a,b){let c=this.getCS(b);return this.xx.encryptWithAd(c,new Uint8Array(0),a)}decrypt(a,b){let c=this.getCS(b,!1);return this.xx.decryptWithAd(c,new Uint8Array(0),a)}getRemoteStaticKey(){return this.session.hs.rs}getCS(a,b=!0){if(!a.cs1||!a.cs2)throw new rN("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?b?a.cs1:a.cs2:b?a.cs2:a.cs1}setRemoteEarlyData(a){a&&(this.remoteEarlyData=a)}}class rP extends rO{constructor(a,b,c,d,e,f,g,h,i,j){super(a,b,c,d,e,f,h,j),i&&(this.ephemeralKeys=i),this.initialMsg=g}async propose(){if(this.isInitiator)this.xx.sendMessage(this.session,new Uint8Array(0),this.ephemeralKeys),rA("XX Fallback Stage 0 - Initialized state as the first message was sent by initiator."),rD(this.session.hs.e);else{rA("XX Fallback Stage 0 - Responder decoding initial msg from IK.");let a=ro(this.initialMsg),{valid:b}=this.xx.recvMessage(this.session,{ne:a.ne,ns:new Uint8Array(0),ciphertext:new Uint8Array(0)});if(!b)throw Error("xx fallback stage 0 decryption validation fail");rA("XX Fallback Stage 0 - Responder used received message from IK."),rF(this.session.hs.re)}}async exchange(){if(this.isInitiator){let a=rp(this.initialMsg),{plaintext:b,valid:c}=this.xx.recvMessage(this.session,a);if(!c)throw Error("xx fallback stage 1 decryption validation fail");rA("XX Fallback Stage 1 - Initiator used received message from IK."),rF(this.session.hs.re),rE(this.session.hs.rs),rA("Initiator going to check remote's signature...");try{let d=await rv(b);this.remotePeer=this.remotePeer||await ru(d),await ry(this.session.hs.rs,d,this.remotePeer),this.setRemoteEarlyData(d.data)}catch(e){let f=e;throw Error(`Error occurred while verifying signed payload from responder: ${f.message}`)}rA("All good with the signature!")}else rA("XX Fallback Stage 1 - Responder start"),await super.exchange(),rA("XX Fallback Stage 1 - Responder end")}}let rQ=new class{constructor(){this.storage=new qO}store(a,b){this.storage.set(a,b)}load(a){return a?this.storage.get(a)??null:null}resetStorage(){this.storage.clear()}};new class{constructor(a,b,c=ri){this.protocol="/noise",this.prologue=new Uint8Array(0),this.earlyData=b??new Uint8Array(0),this.useNoisePipes=!1,this.crypto=c,a?this.staticKeys=this.crypto.generateX25519KeyPairFromSeed(a):this.staticKeys=this.crypto.generateX25519KeyPair()}async secureOutbound(a,b,c){let d=ra(b,{lengthEncoder:rk,lengthDecoder:rl,maxDataLength:65535}),e=await this.performHandshake({connection:d,isInitiator:!0,localPeer:a,remotePeer:c}),f=await this.createSecureConnection(d,e);return{conn:f,remoteEarlyData:e.remoteEarlyData,remotePeer:e.remotePeer}}async secureInbound(a,b,c){let d=ra(b,{lengthEncoder:rk,lengthDecoder:rl,maxDataLength:65535}),e=await this.performHandshake({connection:d,isInitiator:!1,localPeer:a,remotePeer:c}),f=await this.createSecureConnection(d,e);return{conn:f,remoteEarlyData:e.remoteEarlyData,remotePeer:e.remotePeer}}async performHandshake(a){let b=await rr(a.localPeer,this.staticKeys.publicKey,this.earlyData),c=this.useNoisePipes;if(a.isInitiator&&null===rQ.load(a.remotePeer)&&(c=!1),!c)return await this.performXXHandshake(a,b);{let{remotePeer:d,connection:e,isInitiator:f}=a,g=new rL(f,b,this.prologue,this.crypto,this.staticKeys,e,rQ.load(a.remotePeer)??new Uint8Array(32),d);try{return await this.performIKHandshake(g)}catch(h){let i=h,j;return a.isInitiator&&(j=g.getLocalEphemeralKeys()),await this.performXXFallbackHandshake(a,b,i.initialMsg,j)}}}async performXXFallbackHandshake(a,b,c,d){let{isInitiator:e,remotePeer:f,connection:g}=a,h=new rP(e,b,this.prologue,this.crypto,this.staticKeys,g,c,f,d);try{await h.propose(),await h.exchange(),await h.finish()}catch(i){let j=i;throw j.message=`Error occurred during XX Fallback handshake: ${j.message}`,rA(j),j}return h}async performXXHandshake(a,b){let{isInitiator:c,remotePeer:d,connection:e}=a,f=new rO(c,b,this.prologue,this.crypto,this.staticKeys,e,d);try{await f.propose(),await f.exchange(),await f.finish(),this.useNoisePipes&&f.remotePeer&&rQ.store(f.remotePeer,f.getRemoteStaticKey())}catch(g){if(g instanceof Error)throw g.message=`Error occurred during XX handshake: ${g.message}`,g}return f}async performIKHandshake(a){return await a.stage0(),await a.stage1(),a}async createSecureConnection(a,b){var c,d;let[e,f]=function(){let a=rb(),b=rb();return[{source:a.source,sink:b.sink},{source:b.source,sink:a.sink}]}(),g=a.unwrap();return await gN(e,(c=b,async function*(a){for await(let b of a)for(let d=0;d<b.length;d+=rc){let e=d+rc;e>b.length&&(e=b.length);let f=c.encrypt(b.slice(d,e),c.session);yield f}}),mr({lengthEncoder:rk}),g,mw({lengthDecoder:rl}),(d=b,async function*(a){for await(let b of a)for(let c=0;c<b.length;c+=65535){let e=c+65535;e>b.length&&(e=b.length);let{plaintext:f,valid:g}=await d.decrypt(b.slice(c,e),d.session);if(!g)throw Error("Failed to validate decrypted chunk");yield f}}),e),f}};let rR=aX.Z.bind({ignoreUndefined:!0,concatArrays:!0}),rS=aX.Z.bind({ignoreUndefined:!0}),rT=(0,aY.kg)("ipfs:components:peer:storage");class rU{constructor(a,b,c,d,e){this.print=d,this.peerId=a,this.keychain=b,this.repo=c,this.print=d,this.isNew=e}static async start(a,b,c){let{repoAutoMigrate:d,repo:e,onMigrationProgress:f}=c,g="string"==typeof e||null==e?createRepo(a,b,{path:e,autoMigrate:d,onMigrationProgress:f}):e,{peerId:h,keychain:i,isNew:j}=await rV(a,g,c);return new rU(h,i,g,a,j)}}let rV=async(a,b,c)=>{if(!b.closed)return{...await r$(b,c),isNew:!1};try{return await b.open(),{...await r$(b,c),isNew:!1}}catch(d){if(d.code!==ERR_REPO_NOT_INITIALIZED)throw d;if(c.init&& !1===c.init.allowNew)throw new NotEnabledError("Initialization of new repos disabled by config, pass `config.init.isNew: true` to enable it");return{...await rW(a,b,c),isNew:!0}}},rW=async(a,b,c)=>{let d=c.init||{},e=await b.exists();if(rT("repo exists?",e),!0===e)throw Error("repo already exists");let f=d.privateKey?await rX(d.privateKey):await rY(a,d),g=rZ(f);rT("peer identity: %s",g.PeerID);let h={...rS(r0(getDefaultConfig(),d.profiles),c.config),Identity:g};await b.init(h),await b.open(),rT("repo opened");let i={pass:c.pass};try{i.dek=await b.config.get("Keychain.DEK")}catch(j){if("ERR_NOT_FOUND"!==j.code)throw j}let k=await createLibp2p({options:void 0,multiaddrs:void 0,peerId:f,repo:b,config:h,keychainConfig:i});return k.keychain&&(await k.loadKeychain(),await b.config.set("Keychain",{DEK:k.keychain.init.dek})),{peerId:f,keychain:k.keychain}},rX=async a=>{if(rT("using user-supplied private-key"),isPeerId(a))return a;let b=uint8ArrayFromString(a,"base64pad"),c=await unmarshalPrivateKey(b);return await peerIdFromKeys(c.public.bytes,c.bytes)},rY=(a,{algorithm:b="Ed25519",bits:c=2048})=>{if(a("generating %s keypair...",b),"Ed25519"===b)return createEd25519PeerId();if("RSA"===b)return createRSAPeerId({bits:c});throw errCode(Error("Unknown PeerId algorithm"),"ERR_UNKNOWN_PEER_ID_ALGORITHM")},rZ=a=>{if(null==a.privateKey)throw errCode(Error("Private key missing"),"ERR_MISSING_PRIVATE_KEY");return{PeerID:a.toString(),PrivKey:uint8ArrayToString(a.privateKey,"base64pad")}},r$=async(a,b)=>{let c=b.config,d=b.init&&b.init.profiles||[],e=b.pass,f=await a.config.getAll(),g=r_(r0(f,d),c);if(f!==g&&await a.config.replace(g),!g.Identity||!g.Identity.PrivKey)throw new NotInitializedError("No private key was found in the config, please intialize the repo");let h=uint8ArrayFromString(g.Identity.PrivKey,"base64pad"),i=await unmarshalPrivateKey(h),j=await peerIdFromKeys(i.public.bytes,i.bytes),k=await createLibp2p({options:void 0,multiaddrs:void 0,peerId:j,repo:a,config:g,keychainConfig:{pass:e,...g.Keychain}});return k.keychain&&await k.loadKeychain(),{peerId:j,keychain:k.keychain}},r_=(a,b)=>b?rS(a,b):a,r0=(a,b)=>(b||[]).reduce((a,b)=>{let c=configProfiles[b];if(!c)throw Error(`Could not find profile with name '${b}'`);return rT("applying profile %s",b),c.transform(a)},a);var r1=c(82838),r2=function(a){let b=new Uint8Array(a.reduce((a,b)=>a+iC.encodingLength(b),0)),c=0;for(let d of a)b=iC.encode(d,b,c),c+=iC.encodingLength(d);return b};class r3{constructor(a,b,c){this._refCounter=1,this.cid=a,this.priority=b||1,this.wantType=c}inc(){this._refCounter+=1}dec(){this._refCounter=Math.max(0,this._refCounter-1)}hasRefs(){return this._refCounter>0}get[Symbol.toStringTag](){let a=this.cid.toString(du.base58btc);return`WantlistEntry <key: ${a}, priority: ${this.priority}, refs: ${this._refCounter}>`}equals(a){return this._refCounter===a._refCounter&&this.cid.equals(a.cid)&&this.priority===a.priority&&this.wantType===a.wantType}}let r4=kT.Reader,r5=kT.Writer,r6=kT.util,r7=kT.roots["ipfs-bitswap"]||(kT.roots["ipfs-bitswap"]={}),r8=r7.Message=(()=>{function a(a){if(this.blocks=[],this.payload=[],this.blockPresences=[],a)for(var b=Object.keys(a),c=0;c<b.length;++c)null!=a[b[c]]&&(this[b[c]]=a[b[c]])}return a.prototype.wantlist=null,a.prototype.blocks=r6.emptyArray,a.prototype.payload=r6.emptyArray,a.prototype.blockPresences=r6.emptyArray,a.prototype.pendingBytes=0,a.encode=function(a,b){if(b||(b=r5.create()),null!=a.wantlist&&Object.hasOwnProperty.call(a,"wantlist")&&r7.Message.Wantlist.encode(a.wantlist,b.uint32(10).fork()).ldelim(),null!=a.blocks&&a.blocks.length)for(var c=0;c<a.blocks.length;++c)b.uint32(18).bytes(a.blocks[c]);if(null!=a.payload&&a.payload.length)for(var c=0;c<a.payload.length;++c)r7.Message.Block.encode(a.payload[c],b.uint32(26).fork()).ldelim();if(null!=a.blockPresences&&a.blockPresences.length)for(var c=0;c<a.blockPresences.length;++c)r7.Message.BlockPresence.encode(a.blockPresences[c],b.uint32(34).fork()).ldelim();return null!=a.pendingBytes&&Object.hasOwnProperty.call(a,"pendingBytes")&&b.uint32(40).int32(a.pendingBytes),b},a.decode=function(a,b){a instanceof r4||(a=r4.create(a));for(var c=void 0===b?a.len:a.pos+b,d=new r7.Message;a.pos<c;){var e=a.uint32();switch(e>>>3){case 1:d.wantlist=r7.Message.Wantlist.decode(a,a.uint32());break;case 2:d.blocks&&d.blocks.length||(d.blocks=[]),d.blocks.push(a.bytes());break;case 3:d.payload&&d.payload.length||(d.payload=[]),d.payload.push(r7.Message.Block.decode(a,a.uint32()));break;case 4:d.blockPresences&&d.blockPresences.length||(d.blockPresences=[]),d.blockPresences.push(r7.Message.BlockPresence.decode(a,a.uint32()));break;case 5:d.pendingBytes=a.int32();break;default:a.skipType(7&e)}}return d},a.fromObject=function(a){if(a instanceof r7.Message)return a;var b=new r7.Message;if(null!=a.wantlist){if("object"!=typeof a.wantlist)throw TypeError(".Message.wantlist: object expected");b.wantlist=r7.Message.Wantlist.fromObject(a.wantlist)}if(a.blocks){if(!Array.isArray(a.blocks))throw TypeError(".Message.blocks: array expected");b.blocks=[];for(var c=0;c<a.blocks.length;++c)"string"==typeof a.blocks[c]?r6.base64.decode(a.blocks[c],b.blocks[c]=r6.newBuffer(r6.base64.length(a.blocks[c])),0):a.blocks[c].length&&(b.blocks[c]=a.blocks[c])}if(a.payload){if(!Array.isArray(a.payload))throw TypeError(".Message.payload: array expected");b.payload=[];for(var c=0;c<a.payload.length;++c){if("object"!=typeof a.payload[c])throw TypeError(".Message.payload: object expected");b.payload[c]=r7.Message.Block.fromObject(a.payload[c])}}if(a.blockPresences){if(!Array.isArray(a.blockPresences))throw TypeError(".Message.blockPresences: array expected");b.blockPresences=[];for(var c=0;c<a.blockPresences.length;++c){if("object"!=typeof a.blockPresences[c])throw TypeError(".Message.blockPresences: object expected");b.blockPresences[c]=r7.Message.BlockPresence.fromObject(a.blockPresences[c])}}return null!=a.pendingBytes&&(b.pendingBytes=0|a.pendingBytes),b},a.toObject=function(a,b){b||(b={});var c={};if((b.arrays||b.defaults)&&(c.blocks=[],c.payload=[],c.blockPresences=[]),b.defaults&&(c.wantlist=null,c.pendingBytes=0),null!=a.wantlist&&a.hasOwnProperty("wantlist")&&(c.wantlist=r7.Message.Wantlist.toObject(a.wantlist,b)),a.blocks&&a.blocks.length){c.blocks=[];for(var d=0;d<a.blocks.length;++d)c.blocks[d]=b.bytes===String?r6.base64.encode(a.blocks[d],0,a.blocks[d].length):b.bytes===Array?Array.prototype.slice.call(a.blocks[d]):a.blocks[d]}if(a.payload&&a.payload.length){c.payload=[];for(var d=0;d<a.payload.length;++d)c.payload[d]=r7.Message.Block.toObject(a.payload[d],b)}if(a.blockPresences&&a.blockPresences.length){c.blockPresences=[];for(var d=0;d<a.blockPresences.length;++d)c.blockPresences[d]=r7.Message.BlockPresence.toObject(a.blockPresences[d],b)}return null!=a.pendingBytes&&a.hasOwnProperty("pendingBytes")&&(c.pendingBytes=a.pendingBytes),c},a.prototype.toJSON=function(){return this.constructor.toObject(this,kT.util.toJSONOptions)},a.Wantlist=function(){function a(a){if(this.entries=[],a)for(var b=Object.keys(a),c=0;c<b.length;++c)null!=a[b[c]]&&(this[b[c]]=a[b[c]])}return a.prototype.entries=r6.emptyArray,a.prototype.full=!1,a.encode=function(a,b){if(b||(b=r5.create()),null!=a.entries&&a.entries.length)for(var c=0;c<a.entries.length;++c)r7.Message.Wantlist.Entry.encode(a.entries[c],b.uint32(10).fork()).ldelim();return null!=a.full&&Object.hasOwnProperty.call(a,"full")&&b.uint32(16).bool(a.full),b},a.decode=function(a,b){a instanceof r4||(a=r4.create(a));for(var c=void 0===b?a.len:a.pos+b,d=new r7.Message.Wantlist;a.pos<c;){var e=a.uint32();switch(e>>>3){case 1:d.entries&&d.entries.length||(d.entries=[]),d.entries.push(r7.Message.Wantlist.Entry.decode(a,a.uint32()));break;case 2:d.full=a.bool();break;default:a.skipType(7&e)}}return d},a.fromObject=function(a){if(a instanceof r7.Message.Wantlist)return a;var b=new r7.Message.Wantlist;if(a.entries){if(!Array.isArray(a.entries))throw TypeError(".Message.Wantlist.entries: array expected");b.entries=[];for(var c=0;c<a.entries.length;++c){if("object"!=typeof a.entries[c])throw TypeError(".Message.Wantlist.entries: object expected");b.entries[c]=r7.Message.Wantlist.Entry.fromObject(a.entries[c])}}return null!=a.full&&(b.full=Boolean(a.full)),b},a.toObject=function(a,b){b||(b={});var c={};if((b.arrays||b.defaults)&&(c.entries=[]),b.defaults&&(c.full=!1),a.entries&&a.entries.length){c.entries=[];for(var d=0;d<a.entries.length;++d)c.entries[d]=r7.Message.Wantlist.Entry.toObject(a.entries[d],b)}return null!=a.full&&a.hasOwnProperty("full")&&(c.full=a.full),c},a.prototype.toJSON=function(){return this.constructor.toObject(this,kT.util.toJSONOptions)},a.WantType=function(){let a={},b=Object.create(a);return b[a[0]="Block"]=0,b[a[1]="Have"]=1,b}(),a.Entry=function(){function a(a){if(a)for(var b=Object.keys(a),c=0;c<b.length;++c)null!=a[b[c]]&&(this[b[c]]=a[b[c]])}return a.prototype.block=r6.newBuffer([]),a.prototype.priority=0,a.prototype.cancel=!1,a.prototype.wantType=0,a.prototype.sendDontHave=!1,a.encode=function(a,b){return b||(b=r5.create()),null!=a.block&&Object.hasOwnProperty.call(a,"block")&&b.uint32(10).bytes(a.block),null!=a.priority&&Object.hasOwnProperty.call(a,"priority")&&b.uint32(16).int32(a.priority),null!=a.cancel&&Object.hasOwnProperty.call(a,"cancel")&&b.uint32(24).bool(a.cancel),null!=a.wantType&&Object.hasOwnProperty.call(a,"wantType")&&b.uint32(32).int32(a.wantType),null!=a.sendDontHave&&Object.hasOwnProperty.call(a,"sendDontHave")&&b.uint32(40).bool(a.sendDontHave),b},a.decode=function(a,b){a instanceof r4||(a=r4.create(a));for(var c=void 0===b?a.len:a.pos+b,d=new r7.Message.Wantlist.Entry;a.pos<c;){var e=a.uint32();switch(e>>>3){case 1:d.block=a.bytes();break;case 2:d.priority=a.int32();break;case 3:d.cancel=a.bool();break;case 4:d.wantType=a.int32();break;case 5:d.sendDontHave=a.bool();break;default:a.skipType(7&e)}}return d},a.fromObject=function(a){if(a instanceof r7.Message.Wantlist.Entry)return a;var b=new r7.Message.Wantlist.Entry;switch(null!=a.block&&("string"==typeof a.block?r6.base64.decode(a.block,b.block=r6.newBuffer(r6.base64.length(a.block)),0):a.block.length&&(b.block=a.block)),null!=a.priority&&(b.priority=0|a.priority),null!=a.cancel&&(b.cancel=Boolean(a.cancel)),a.wantType){case"Block":case 0:b.wantType=0;break;case"Have":case 1:b.wantType=1}return null!=a.sendDontHave&&(b.sendDontHave=Boolean(a.sendDontHave)),b},a.toObject=function(a,b){b||(b={});var c={};return b.defaults&&(b.bytes===String?c.block="":(c.block=[],b.bytes!==Array&&(c.block=r6.newBuffer(c.block))),c.priority=0,c.cancel=!1,c.wantType=b.enums===String?"Block":0,c.sendDontHave=!1),null!=a.block&&a.hasOwnProperty("block")&&(c.block=b.bytes===String?r6.base64.encode(a.block,0,a.block.length):b.bytes===Array?Array.prototype.slice.call(a.block):a.block),null!=a.priority&&a.hasOwnProperty("priority")&&(c.priority=a.priority),null!=a.cancel&&a.hasOwnProperty("cancel")&&(c.cancel=a.cancel),null!=a.wantType&&a.hasOwnProperty("wantType")&&(c.wantType=b.enums===String?r7.Message.Wantlist.WantType[a.wantType]:a.wantType),null!=a.sendDontHave&&a.hasOwnProperty("sendDontHave")&&(c.sendDontHave=a.sendDontHave),c},a.prototype.toJSON=function(){return this.constructor.toObject(this,kT.util.toJSONOptions)},a}(),a}(),a.Block=function(){function a(a){if(a)for(var b=Object.keys(a),c=0;c<b.length;++c)null!=a[b[c]]&&(this[b[c]]=a[b[c]])}return a.prototype.prefix=r6.newBuffer([]),a.prototype.data=r6.newBuffer([]),a.encode=function(a,b){return b||(b=r5.create()),null!=a.prefix&&Object.hasOwnProperty.call(a,"prefix")&&b.uint32(10).bytes(a.prefix),null!=a.data&&Object.hasOwnProperty.call(a,"data")&&b.uint32(18).bytes(a.data),b},a.decode=function(a,b){a instanceof r4||(a=r4.create(a));for(var c=void 0===b?a.len:a.pos+b,d=new r7.Message.Block;a.pos<c;){var e=a.uint32();switch(e>>>3){case 1:d.prefix=a.bytes();break;case 2:d.data=a.bytes();break;default:a.skipType(7&e)}}return d},a.fromObject=function(a){if(a instanceof r7.Message.Block)return a;var b=new r7.Message.Block;return null!=a.prefix&&("string"==typeof a.prefix?r6.base64.decode(a.prefix,b.prefix=r6.newBuffer(r6.base64.length(a.prefix)),0):a.prefix.length&&(b.prefix=a.prefix)),null!=a.data&&("string"==typeof a.data?r6.base64.decode(a.data,b.data=r6.newBuffer(r6.base64.length(a.data)),0):a.data.length&&(b.data=a.data)),b},a.toObject=function(a,b){b||(b={});var c={};return b.defaults&&(b.bytes===String?c.prefix="":(c.prefix=[],b.bytes!==Array&&(c.prefix=r6.newBuffer(c.prefix))),b.bytes===String?c.data="":(c.data=[],b.bytes!==Array&&(c.data=r6.newBuffer(c.data)))),null!=a.prefix&&a.hasOwnProperty("prefix")&&(c.prefix=b.bytes===String?r6.base64.encode(a.prefix,0,a.prefix.length):b.bytes===Array?Array.prototype.slice.call(a.prefix):a.prefix),null!=a.data&&a.hasOwnProperty("data")&&(c.data=b.bytes===String?r6.base64.encode(a.data,0,a.data.length):b.bytes===Array?Array.prototype.slice.call(a.data):a.data),c},a.prototype.toJSON=function(){return this.constructor.toObject(this,kT.util.toJSONOptions)},a}(),a.BlockPresenceType=function(){let a={},b=Object.create(a);return b[a[0]="Have"]=0,b[a[1]="DontHave"]=1,b}(),a.BlockPresence=function(){function a(a){if(a)for(var b=Object.keys(a),c=0;c<b.length;++c)null!=a[b[c]]&&(this[b[c]]=a[b[c]])}return a.prototype.cid=r6.newBuffer([]),a.prototype.type=0,a.encode=function(a,b){return b||(b=r5.create()),null!=a.cid&&Object.hasOwnProperty.call(a,"cid")&&b.uint32(10).bytes(a.cid),null!=a.type&&Object.hasOwnProperty.call(a,"type")&&b.uint32(16).int32(a.type),b},a.decode=function(a,b){a instanceof r4||(a=r4.create(a));for(var c=void 0===b?a.len:a.pos+b,d=new r7.Message.BlockPresence;a.pos<c;){var e=a.uint32();switch(e>>>3){case 1:d.cid=a.bytes();break;case 2:d.type=a.int32();break;default:a.skipType(7&e)}}return d},a.fromObject=function(a){if(a instanceof r7.Message.BlockPresence)return a;var b=new r7.Message.BlockPresence;switch(null!=a.cid&&("string"==typeof a.cid?r6.base64.decode(a.cid,b.cid=r6.newBuffer(r6.base64.length(a.cid)),0):a.cid.length&&(b.cid=a.cid)),a.type){case"Have":case 0:b.type=0;break;case"DontHave":case 1:b.type=1}return b},a.toObject=function(a,b){b||(b={});var c={};return b.defaults&&(b.bytes===String?c.cid="":(c.cid=[],b.bytes!==Array&&(c.cid=r6.newBuffer(c.cid))),c.type=b.enums===String?"Have":0),null!=a.cid&&a.hasOwnProperty("cid")&&(c.cid=b.bytes===String?r6.base64.encode(a.cid,0,a.cid.length):b.bytes===Array?Array.prototype.slice.call(a.cid):a.cid),null!=a.type&&a.hasOwnProperty("type")&&(c.type=b.enums===String?r7.Message.BlockPresenceType[a.type]:a.type),c},a.prototype.toJSON=function(){return this.constructor.toObject(this,kT.util.toJSONOptions)},a}(),a})(),r9={Block:r8.Wantlist.WantType.Block,Have:r8.Wantlist.WantType.Have},sa=(a,b)=>Array.prototype.slice.call(b,0).sort((b,c)=>{let d=a(b),e=a(c);return d<e?-1:d>e?1:0});class sb{constructor(a,b){this.set=b?function(a){let{system:b,component:c,metric:d,metrics:e}=a,f;return null!=e?new o$({system:b,component:c,metric:d,metrics:e}):new Map}({system:"ipfs",component:"bitswap",metric:"wantlist",metrics:b.metrics}):new Map,this._stats=a}get length(){return this.set.size}add(a,b,c){let d=a.toString(du.base58btc),e=this.set.get(d);e?(e.inc(),e.priority=b,e.wantType===r9.Have&&c===r9.Block&&(e.wantType=c)):(this.set.set(d,new r3(a,b,c)),this._stats&&this._stats.push(null,"wantListSize",1))}remove(a){let b=a.toString(du.base58btc),c=this.set.get(b);if(c)c.dec(),!c.hasRefs()&&(this.set.delete(b),this._stats&&this._stats.push(null,"wantListSize",-1))}removeForce(a){this.set.has(a)&&this.set.delete(a)}forEach(a){return this.set.forEach(a)}entries(){return this.set.entries()}sortedEntries(){return new Map(sa(a=>a[1].key,Array.from(this.set.entries())))}contains(a){let b=a.toString(du.base58btc);return this.set.has(b)}get(a){let b=a.toString(du.base58btc);return this.set.get(b)}}sb.Entry=r3;let sc=sb.Entry;class sd{constructor(a,b,c,d,e){this.entry=new sc(a,b,c),this.cancel=Boolean(d),this.sendDontHave=Boolean(e)}get cid(){return this.entry.cid}set cid(a){this.entry.cid=a}get priority(){return this.entry.priority}set priority(a){this.entry.priority=a}get wantType(){return this.entry.wantType}set wantType(a){this.entry.wantType=a}get[Symbol.toStringTag](){let a=this.cid.toString(du.base58btc);return`BitswapMessageEntry ${a} <cancel: ${this.cancel}, priority: ${this.priority}>`}equals(a){return this.cancel===a.cancel&&this.sendDontHave===a.sendDontHave&&this.wantType===a.wantType&&this.entry.equals(a.entry)}}let se=(a,b)=>{if(a.size!==b.size)return!1;for(let[c,d]of a){let e=b.get(c);if(void 0===e||d instanceof Uint8Array&&e instanceof Uint8Array&&!(0,bK.equals)(d,e)||d instanceof sd&&e instanceof sd&&!d.equals(e))return!1}return!0};class sf{constructor(a){this.full=a,this.wantlist=new Map,this.blocks=new Map,this.blockPresences=new Map,this.pendingBytes=0}get empty(){return 0===this.blocks.size&&0===this.wantlist.size&&0===this.blockPresences.size}addEntry(a,b,c,d,e){null==c&&(c=sf.WantType.Block);let f=a.toString(du.base58btc),g=this.wantlist.get(f);g?(g.wantType===c&&(g.priority=b),d&&(g.cancel=Boolean(d)),e&&(g.sendDontHave=Boolean(e)),c===sf.WantType.Block&&g.wantType===sf.WantType.Have&&(g.wantType=c)):this.wantlist.set(f,new sd(a,b,c,d,e))}addBlock(a,b){let c=a.toString(du.base58btc);this.blocks.set(c,b)}addHave(a){let b=a.toString(du.base58btc);this.blockPresences.has(b)||this.blockPresences.set(b,sf.BlockPresenceType.Have)}addDontHave(a){let b=a.toString(du.base58btc);this.blockPresences.has(b)||this.blockPresences.set(b,sf.BlockPresenceType.DontHave)}cancel(a){let b=a.toString(du.base58btc);this.wantlist.delete(b),this.addEntry(a,0,sf.WantType.Block,!0,!1)}setPendingBytes(a){this.pendingBytes=a}serializeToBitswap100(){let a={wantlist:{entries:Array.from(this.wantlist.values()).map(a=>({block:a.cid.bytes,priority:Number(a.priority),cancel:Boolean(a.cancel)})),full:!!this.full||void 0},blocks:Array.from(this.blocks.values())};return r8.encode(a).finish()}serializeToBitswap110(){let a={wantlist:{entries:Array.from(this.wantlist.values()).map(a=>({block:a.cid.bytes,priority:Number(a.priority),wantType:a.wantType,cancel:Boolean(a.cancel),sendDontHave:Boolean(a.sendDontHave)})),full:!!this.full||void 0},blockPresences:[],payload:[],pendingBytes:this.pendingBytes};for(let[b,c]of this.blocks.entries()){let d=a9.CID.parse(b),e=d.version,f=d.code,g=d.multihash.code,h=d.multihash.digest.length,i=r2([e,f,g,h]);a.payload.push(new r8.Block({prefix:i,data:c}))}for(let[j,k]of this.blockPresences)a.blockPresences.push(new r8.BlockPresence({cid:a9.CID.parse(j).bytes,type:k}));return this.pendingBytes>0&&(a.pendingBytes=this.pendingBytes),r8.encode(a).finish()}equals(a){return!!(this.full===a.full&&this.pendingBytes===a.pendingBytes&&se(this.wantlist,a.wantlist)&&se(this.blocks,a.blocks)&&se(this.blockPresences,a.blockPresences))}get[Symbol.toStringTag](){let a=Array.from(this.wantlist.keys()),b=Array.from(this.blocks.keys());return`BitswapMessage <full: ${this.full}, list: ${a}, blocks: ${b}>`}}sf.deserialize=async(a,b)=>{let c=r8.decode(a),d=c.wantlist&&c.wantlist.full||!1,e=new sf(d);return(c.wantlist&&c.wantlist.entries&&c.wantlist.entries.forEach(a=>{if(!a.block)return;let b=a9.CID.decode(a.block);e.addEntry(b,a.priority||0,a.wantType,Boolean(a.cancel),Boolean(a.sendDontHave))}),c.blockPresences&&c.blockPresences.forEach(a=>{if(!a.cid)return;let b=a9.CID.decode(a.cid);a.type===sf.BlockPresenceType.Have?e.addHave(b):e.addDontHave(b)}),c.blocks.length>0)?(await Promise.all(c.blocks.map(async a=>{let b=await dc.sha256.digest(a),c=a9.CID.createV0(b);e.addBlock(c,a)})),e):(c.payload.length>0&&(await Promise.all(c.payload.map(async a=>{if(!a.prefix||!a.data)return;let c=r1(a.prefix),d=c[0],f=c[1],g=c[2],h=g===dc.sha256.code?dc.sha256:b&&await b.getHasher(g);if(!h)throw aZ(Error("Unknown hash algorithm"),"ERR_UNKNOWN_HASH_ALG");let i=await h.digest(a.data),j=a9.CID.create(d,f,i);e.addBlock(j,a.data)})),e.setPendingBytes(c.pendingBytes)),e)},sf.blockPresenceSize=a=>a.bytes.length+1,sf.Entry=sd,sf.WantType={Block:r8.Wantlist.WantType.Block,Have:r8.Wantlist.WantType.Have},sf.BlockPresenceType={Have:r8.BlockPresenceType.Have,DontHave:r8.BlockPresenceType.DontHave};class sg extends Map{constructor(a,b){for(let[c,d]of(super(),this._cmp=b||this._defaultSort,this._keys=[],a||[]))this.set(c,d)}update(a){if(a<0||a>=this._keys.length)return;let b=this._keys[a];this._keys.splice(a,1);let c=this._find(b);this._keys.splice(c,0,b)}set(a,b){if(this.has(a)){let c=this.indexOf(a);this._keys.splice(c,1)}super.set(a,b);let d=this._find(a);return this._keys.splice(d,0,a),this}clear(){super.clear(),this._keys=[]}delete(a){if(!this.has(a))return!1;let b=this.indexOf(a);return this._keys.splice(b,1),super.delete(a)}indexOf(a){if(!this.has(a))return -1;let b=this._find(a);if(this._keys[b]===a)return b;for(let c=1;c<this._keys.length;c++){if(this._keys[b+c]===a)return b+c;if(this._keys[b-c]===a)return b-c}return -1}_find(a){let b=0,c=this._keys.length;for(;b<c;){let d=b+c>>>1,e=this._kCmp(this._keys[d],a);if(e<0)b=d+1;else{if(!(e>0))return d;c=d}}return b}*keys(){for(let a of this._keys)yield a}*values(){for(let a of this._keys)yield this.get(a)}*entries(){for(let a of this._keys)yield[a,this.get(a)]}*[Symbol.iterator](){yield*this.entries()}forEach(a,b){if(a)for(let c of this._keys)a.apply(b,[[c,this.get(c)]])}_defaultSort(a,b){return a[0]<b[0]?-1:b[0]<a[0]?1:0}_kCmp(a,b){return this._cmp([a,this.get(a)],[b,this.get(b)])}}class sh{constructor(){this._tasks=new SortedMap([],this._compare)}get length(){return this._tasks.size}get totalSize(){return[...this._tasks.values()].reduce((a,b)=>a+b.task.size,0)}get(a){return(this._tasks.get(a)||{}).task}add(a){this._tasks.set(a.topic,{created:Date.now(),task:a})}delete(a){this._tasks.delete(a)}tasks(){return[...this._tasks.values()].map(a=>a.task)}updatePriority(a,b){let c=this._tasks.get(a);if(!c)return;let d=this._tasks.indexOf(a);c.task.priority=b,this._tasks.update(d)}_compare(a,b){return a[1].task.priority===b[1].task.priority?a[1].created-b[1].created:b[1].task.priority-a[1].task.priority}}sf.WantType,c(63573);function si(a){return aZ(a=a||Error("Not Found"),"ERR_NOT_FOUND")}function sj(a){return aZ(a=a||Error("Aborted"),"ERR_ABORTED")}class sk{constructor(a,b,c,d,e){this.peerId=a,this.libp2p=b,this.bitswap=c,this.repo=d,this.blockstore=e}static async start({peerId:a,repo:b,print:c,hashers:d,options:e}){b.closed&&await b.open();let f=await b.config.getAll(),g=await createLibp2p({options:e,repo:b,peerId:a,multiaddrs:sl(a,f),config:f,keychainConfig:void 0});for(let h of(g.keychain&&await g.loadKeychain(),await g.start(),g.getMultiaddrs()))c(`Swarm listening on ${h.toString()}`);let i=createBitswap(g,b.blocks,{statsEnabled:!0,hashLoader:d});await i.start();let j=new BlockStorage(b.blocks,i);return b.blocks=j,b.pins.blockstore=j,new sk(a,g,i,b,j)}static async stop(a){a.repo.blocks=a.blockstore.unwrap(),a.repo.pins.blockstore=a.blockstore.unwrap(),await a.bitswap.stop(),await a.libp2p.stop()}}let sl=(a,b)=>{let c=a.toString(),d=[],e=b.Addresses&&b.Addresses.Swarm||[];for(let f of e){let g=new Multiaddr(f);if(g.protoCodes().includes(sm))throw errCode(Error("websocket-star swarm addresses are not supported. See https://github.com/ipfs/js-ipfs/issues/2779"),"ERR_WEBSOCKET_STAR_SWARM_ADDR_NOT_SUPPORTED");let h=g.getPeerId();h&&h!==c&&(g=g.encapsulate(`/p2p/${c}`)),d.push(g)}return d},sm=479,sn="/ipns/";aX.Z.bind({ignoreUndefined:!0}),(0,aY.kg)("ipfs");c(52596),c(46953)},78647:function(a,b,c){"use strict";c.r(b),c.d(b,{customAlphabet:function(){return g},customRandom:function(){return f},nanoid:function(){return h},random:function(){return e},urlAlphabet:function(){return d}});let d="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",e=a=>crypto.getRandomValues(new Uint8Array(a)),f=(a,b,c)=>{let d=(2<<Math.log(a.length-1)/Math.LN2)-1,e=-~(1.6*d*b/a.length);return (f=b)=>{let g="";for(;;){let h=c(e),i=e;for(;i--;)if((g+=a[h[i]&d]||"").length===f)return g}}},g=(a,b=21)=>f(a,b,e),h=(a=21)=>crypto.getRandomValues(new Uint8Array(a)).reduce((a,b)=>((b&=63)<36?a+=b.toString(36):b<62?a+=(b-26).toString(36).toUpperCase():b>62?a+="-":a+="_",a),"")}}])