(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[615],{24201:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/booking/new",function(){return c(4510)}])},4510:function(a,b,c){"use strict";c.r(b);var d=c(2236),e=c(47568),f=c(26042),g=c(69396),h=c(828),i=c(29815),j=c(34051),k=c.n(j),l=c(85893),m=c(67294),n=c(27137),o=c(63750),p=c(41664),q=c.n(p),r=c(91990),s=c(23290),t=c(9198),u=c.n(t),v=c(30381),w=c.n(v),x=c(57114),y=c(35553),z=c(77294),A=c(10750),B=c(11163),C=c(42484),D=c.n(C),E=c(31838),F=c(4150);c(39828),c(99903);var G=c(48764).Buffer;b.default=function(){var a=(0,m.useState)(),b=a[0],c=a[1],j=(0,m.useState)(!1),p=(j[0],j[1]),t=(0,m.useState)(null),v=t[0],C=t[1],H=(0,B.useRouter)(),I=0,J="Basic "+G.from("2DVzNQ8xp6M2rGi4zNQyjcx2R5Z:5593327fe5e787463b314b16d7ce21aa").toString("base64"),K={},L=(0,A.Ue)({host:"ipfs.infura.io",port:5001,protocol:"https",headers:{authorization:J}}),M=(0,m.useState)({name:"",hrs:"",mins:"",organizer:"",description:"",eventType:"",price:""}),N=M[0],O=M[1],P=(0,h.Z)(m.useState(!1),2),Q=P[0];P[1];var R=(0,h.Z)(m.useState(0),2),S=R[0],T=R[1],U=(0,h.Z)(m.useState("/booking"),2),V=U[0];U[1];var W=(0,m.useState)(new Date),X=W[0],Y=W[1],Z=(0,m.useState)(new Date),$=Z[0],_=Z[1],aa=(0,h.Z)(m.useState(["12:00 PM","1:00 PM","2:00 PM",]),2),ab=aa[0],ac=aa[1],ad=(0,h.Z)(m.useState(!1),2),ae=ad[0],af=ad[1],ag=(0,h.Z)(m.useState(["Theatre 1","PVR ECX"]),2),ah=ag[0],ai=ag[1],aj=(0,h.Z)(m.useState(!1),2),ak=aj[0],al=aj[1],am=function(a){if(ae){var b=(0,i.Z)(ab).concat([ae]);ac(b),af(!1)}},an=function(a){if(ak){var b=(0,i.Z)(ah).concat([ak]);ai(b),al(!1)}};function ao(){return(ao=(0,e.Z)(k().mark(function a(b){var d,e,f;return k().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c(b.target.files[0]),p(!0),d=b.target.files[0],a.prev=3,a.next=6,L.add(d,{progress:function(a){return console.log("received: ".concat(a))}});case 6:e=a.sent,C(f="https://snapfuel.infura-ipfs.io/ipfs/".concat(e.path)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(3),console.log("Error uploading file: ",a.t0);case 14:case"end":return a.stop()}},a,null,[[3,11]])}))).apply(this,arguments)}m.useEffect(function(){window.addEventListener("keydown",function(a){if(("U+000A"==a.keyIdentifier||"Enter"==a.keyIdentifier||13==a.keyCode)&&"INPUT"==a.target.nodeName&&"text"==a.target.type)return am(),an(),a.preventDefault(),!1},!0)});function ap(){return(ap=(0,e.Z)(k().mark(function a(b,c,d,e,f,g,h,i,j,l,m,n,o){var p,q,r,s,t,u,v,x,y,z,A,B,C,D,E,F,G,H,J;return k().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:p=[],"{}"==localStorage.getItem("tickets")?p=[]:(console.log(localStorage.getItem("tickets")),p=JSON.parse(localStorage.getItem("tickets"))),q=p.length,r=w()(m).format("YYYY-MM-DD"),s=w()(n).format("YYYY-MM-DD"),t=w()(s).diff(w()(r),"days",!1)+1,console.log(t+"asd"),u=0;case 8:if(!(u<t)){a.next=51;break}v=!0,x=!1,y=void 0,a.prev=10,z=l[Symbol.iterator]();case 12:if(v=(A=z.next()).done){a.next=34;break}for(B=A.value,C=!0,D=!1,E=void 0,a.prev=15,F=j[Symbol.iterator]();!(C=(G=F.next()).done);C=!0)for(J=0,H=G.value;J<i;J++)p.push({path:"tickets/".concat(q,".json"),content:JSON.stringify({name:"Seat No "+J,descrption:f,properties:{eventName:b,day:u,hrs:c,mins:d,organizer:e,eventType:g,price:h,supply:i,timing:H,locations:B,fromDate:r,toDate:s,AvailableLocs:l,AvailableTimings:j,image:o}})}),q++;a.next=23;break;case 19:a.prev=19,a.t0=a.catch(15),D=!0,E=a.t0;case 23:a.prev=23,a.prev=24,C||null==F.return||F.return();case 26:if(a.prev=26,!D){a.next=29;break}throw E;case 29:return a.finish(26);case 30:return a.finish(23);case 31:v=!0,a.next=12;break;case 34:a.next=40;break;case 36:a.prev=36,a.t1=a.catch(10),x=!0,y=a.t1;case 40:a.prev=40,a.prev=41,v||null==z.return||z.return();case 43:if(a.prev=43,!x){a.next=46;break}throw y;case 46:return a.finish(43);case 47:return a.finish(40);case 48:u++,a.next=8;break;case 51:return I=q,K=p,a.abrupt("return",p);case 54:case"end":return a.stop()}},a,null,[[10,36,40,48],[15,19,23,31],[24,,26,30],[41,,43,47]])}))).apply(this,arguments)}function aq(){return ar.apply(this,arguments)}function ar(){return(ar=(0,e.Z)(k().mark(function a(){var b,c,e,f,g,h,i,j,l,m,n,o,p,q,r,s,t,u,x,y,z;return k().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b=N.name,c=N.hrs,e=N.mins,f=N.organizer,g=N.description,h=N.eventType,i=N.price,j=w()(X).format("DD-MM-YYYY"),l=w()($).format("DD-MM-YYYY"),!(!b||!c||!e||!f||!g||!h||!j||!l||!i||!S||!ab||!ah)){a.next=5;break}return a.abrupt("return");case 5:return m=JSON.stringify({name:b,length:"".concat(c,":").concat(e),organizer:f,description:g,supply:S,timings:ab,location:location,price:i,image:v}),a.prev=6,a.next=9,function(a,b,c,d,e,f,g,h,i,j,k,l,m){return ap.apply(this,arguments)}(b,c,e,f,g,h,i,S,ab,ah,X,$,v);case 9:n=a.sent,o=[],p=!1,q=!1,a.prev=12,s=(0,d.Z)(L.addAll(n));case 14:return a.next=16,s.next();case 16:if(!(p=!(t=a.sent).done)){a.next=21;break}x=u=t.value,o.push(x);case 18:p=!1,a.next=14;break;case 21:a.next=27;break;case 23:a.prev=23,a.t0=a.catch(12),q=!0,r=a.t0;case 27:if(a.prev=27,a.prev=28,!(p&&null!=s.return)){a.next=32;break}return a.next=32,s.return();case 32:if(a.prev=32,!q){a.next=35;break}throw r;case 35:return a.finish(32);case 36:return a.finish(27);case 37:return y=o[o.length-1].cid.toString(),z="https://snapfuel.infura-ipfs.io/ipfs/".concat(y),console.log(z),console.log(I),a.abrupt("return",z);case 44:a.prev=44,a.t1=a.catch(6),console.log("Error uploading file: ",a.t1);case 47:case"end":return a.stop()}},a,null,[[6,44],[12,23,27,37],[28,,32,36]])}))).apply(this,arguments)}function as(){return(as=(0,e.Z)(k().mark(function a(){var b,c,d,e,f,g,h,i,j,l,m;return k().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,aq();case 2:return b=a.sent,c=new(D()),a.next=6,c.connect();case 6:return d=a.sent,f=(e=new x.Q(d)).getSigner(),g=N.price,console.log(g),h=y.dF(100),i=y.vz(h,"ether"),j=new z.CH(E.u,F.Mt,f),a.next=16,j.getListingPrice();case 16:return l=((l=a.sent)*I).toString(),a.next=20,j.addEvent(b+"{id}.json",I,i,{value:l});case 20:return m=a.sent,a.next=23,m.wait();case 23:localStorage.setItem("tickets",JSON.stringify(K)),H.push("/booking");case 25:case"end":return a.stop()}},a)}))).apply(this,arguments)}return(0,l.jsx)("div",{className:"p-4 relative",children:(0,l.jsxs)("div",{className:"my-4 mx-8",children:[(0,l.jsx)(n.Z,{title:"Create"}),Q?(0,l.jsx)(r.Z,{children:(0,l.jsx)("div",{className:"w-full my-4 p-4",children:(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,l.jsxs)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 130.2 130.2",className:"w-48 h-48",children:[(0,l.jsx)("circle",{className:"path circle",fill:"none",stroke:"#ffffff",strokeWidth:"6",strokeMiterlimit:"10",cx:"65.1",cy:"65.1",r:"62.1"}),(0,l.jsx)("polyline",{className:"path check",fill:"none",stroke:"#ffffff",strokeWidth:"10",strokeLinecap:"round",strokeMiterlimit:"10",points:"100.2,40.2 51.5,88.8 29.8,67.5 "})]}),(0,l.jsx)("h1",{className:"text-white text-3xl font-medium mt-12 max-w-xl text-center",children:"Your event has been scheduled, click the link below to view and edit your event."}),(0,l.jsx)(q(),{href:V,children:(0,l.jsxs)("a",{className:"text-white text-xl mt-12 hover:underline",children:["thesnapfuel.com",V]})})]})})}):(0,l.jsxs)("div",{className:"w-full my-4 p-4 block",children:[(0,l.jsxs)("div",{className:"flex relative",children:[(0,l.jsx)("div",{className:"w-full h-64 bg-cover bg-center rounded-3xl",style:{backgroundImage:"url(/images/cover.png)"}}),(0,l.jsx)("label",{htmlFor:"cover-file",className:"absolute bg-black top-0 left-0 h-64 w-full rounded-3xl opacity-0 hover:opacity-60 duration-200 cursor-pointer",children:(0,l.jsx)("input",{id:"cover-file",type:"file",className:"hidden"})}),(0,l.jsx)("div",{className:"absolute -bottom-16 right-0 left-0 mx-auto w-32 h-32 bg-white rounded-lg",children:(0,l.jsx)("div",{className:"flex justify-center items-center w-full h-full",children:(0,l.jsxs)("label",{htmlFor:"dropzone-file",className:"flex flex-col justify-center items-center group w-full h-full bg-black rounded-lg opacity-90 hover:opacity-100 duration-200 cursor-pointer",children:[(0,l.jsx)("div",{className:"flex flex-col justify-center items-center w-full h-full p-4",children:(0,l.jsx)("img",{src:b?URL.createObjectURL(b):"/images/icons/Cameras.svg",alt:"camera",className:"opacity-80 group-hover:opacity-100 duration-200 w-full h-full"})}),(0,l.jsx)("input",{id:"dropzone-file",type:"file",className:"hidden",onChange:function(a){return ao.apply(this,arguments)}})]})})})]}),(0,l.jsx)("div",{className:"mt-24 mx-28",children:(0,l.jsxs)("div",{className:"grid grid-cols-12 gap-4",children:[(0,l.jsx)("div",{className:"col-span-12 md:col-span-2 flex flex-col justify-center",children:(0,l.jsx)("label",{htmlFor:"eventname",children:"Event Name:"})}),(0,l.jsx)("div",{className:"col-span-12 md:col-span-6",children:(0,l.jsx)("input",{className:"w-full inp",type:"text",name:"eventname",onChange:function(a){return O((0,g.Z)((0,f.Z)({},N),{name:a.target.value}))}})}),(0,l.jsx)("div",{className:"col-span-4"}),(0,l.jsx)("div",{className:"col-span-12 md:col-span-2 flex flex-col justify-center",children:(0,l.jsx)("label",{htmlFor:"hr",children:"Length of Event:"})}),(0,l.jsxs)("div",{className:"col-span-12 md:col-span-6 flex items-center",children:[(0,l.jsx)("input",{className:"w-12 inp",type:"text",name:"eventname",onChange:function(a){return O((0,g.Z)((0,f.Z)({},N),{hrs:a.target.value}))}}),(0,l.jsx)("p",{className:"mx-2",children:"hr"}),(0,l.jsx)("input",{className:"w-12 inp",type:"text",name:"eventname",onChange:function(a){return O((0,g.Z)((0,f.Z)({},N),{mins:a.target.value}))}}),(0,l.jsx)("p",{className:"mx-2",children:"min"})]}),(0,l.jsx)("div",{className:"col-span-4"}),(0,l.jsx)("div",{className:"col-span-12 md:col-span-2 flex flex-col justify-center",children:(0,l.jsx)("label",{htmlFor:"organizer",children:"Event Organizer:"})}),(0,l.jsx)("div",{className:"col-span-12 md:col-span-6 flex items-center",children:(0,l.jsx)("div",{className:"col-span-12 md:col-span-6",children:(0,l.jsx)("input",{className:"w-full inp",type:"text",name:"organizer",onChange:function(a){return O((0,g.Z)((0,f.Z)({},N),{organizer:a.target.value}))}})})}),(0,l.jsx)("div",{className:"col-span-4"}),(0,l.jsx)("div",{className:"col-span-12",children:(0,l.jsx)("label",{htmlFor:"description",children:"Description:"})}),(0,l.jsx)("div",{className:"col-span-12",children:(0,l.jsx)("textarea",{className:"w-full inp",name:"description",onChange:function(a){return O((0,g.Z)((0,f.Z)({},N),{description:a.target.value}))}})}),(0,l.jsxs)("div",{className:"col-span-12 mt-4",children:[(0,l.jsx)("label",{htmlFor:"description",children:"Event Type:"}),(0,l.jsxs)("select",{className:"w-full select-inp mt-4",onChange:function(a){return O((0,g.Z)((0,f.Z)({},N),{eventType:a.target.value}))},children:[(0,l.jsx)("option",{value:"",children:"Select Event Type"}),["Concert","Sports","Comedy Night"].map(function(a,b){return(0,l.jsx)("option",{value:a,children:a},b)})]})]}),(0,l.jsx)("div",{className:"col-span-12 mt-4",children:(0,l.jsx)("label",{htmlFor:"date",children:"Date:"})}),(0,l.jsxs)("div",{className:"col-span-12 -mt-3 flex items-center",children:[(0,l.jsxs)("label",{htmlFor:"fromDate",className:"mr-4 text-[#D9D9D9]",children:["From:"," "]}),(0,l.jsxs)("div",{className:"relative w-48",children:[(0,l.jsx)("div",{className:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none",children:(0,l.jsx)(o.bbP,{className:"w-5 h-5 text-accent"})}),(0,l.jsx)(u(),{selected:X,className:"date-inp block w-full",onChange:function(a){var b=new Date(a);console.log(b),Y(b)}})]})," ",(0,l.jsxs)("label",{htmlFor:"toDate",className:"ml-6 mr-4 text-[#D9D9D9]",children:["To:"," "]}),(0,l.jsxs)("div",{className:"relative w-48",children:[(0,l.jsx)("div",{className:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none",children:(0,l.jsx)(o.bbP,{className:"w-5 h-5 text-accent"})}),(0,l.jsx)(u(),{selected:$,className:"date-inp block w-full",onChange:function(a){var b=new Date(a);console.log(b),_(b)}})]})]}),(0,l.jsxs)("div",{className:"col-span-12 mt-4",children:[(0,l.jsx)("label",{htmlFor:"timings",children:"Timings:"}),(0,l.jsxs)("div",{className:"flex w-full mt-4 items-center",children:[ab.map(function(a,b){return(0,l.jsx)("div",{className:"px-6 py-1 bg-accent rounded-2xl mx-2",children:a},b)}),!1===ae&&(0,l.jsx)("button",{className:"px-4 py-1 mx-2 bg-transparent border border-accent rounded-2xl",onClick:function(a){a.preventDefault(),af("")},children:"+"}),!1!==ae&&(0,l.jsx)("input",{className:"w-28 inp",type:"text",name:"timings",value:ae,onChange:function(a){af(a.target.value)}})]}),(0,l.jsx)("hr",{className:"mt-4 border-[#292b2e] mb-6"})]}),(0,l.jsxs)("div",{className:"col-span-12",children:[(0,l.jsx)("label",{htmlFor:"location",children:"Locations:"}),(0,l.jsxs)("div",{className:"flex w-full mt-4 items-center",children:[ah.map(function(a,b){return(0,l.jsx)("div",{className:"px-6 py-1 bg-accent rounded-2xl mx-2",children:a},b)}),!1===ak&&(0,l.jsx)("button",{className:"px-4 py-1 mx-2 bg-transparent border border-accent rounded-2xl",onClick:function(a){a.preventDefault(),al("")},children:"+"}),!1!==ak&&(0,l.jsx)("input",{className:"w-28 inp",type:"text",name:"location",value:ak,onChange:function(a){al(a.target.value)}})]}),(0,l.jsx)("hr",{className:"mt-4 border-[#292b2e] mb-8"})]}),(0,l.jsxs)("div",{className:"col-span-12",children:[(0,l.jsx)("label",{htmlFor:"supply",children:"Ticket Supply:"}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-[#585757]",children:"Supply is the number of tickets you want to sell"}),(0,l.jsx)(s.Z,{value:S,setValue:T,buttonClasses:"w-8 h-8 text-xs border-accent border rounded-lg hover:bg-accent hover:text-white",inputClasses:"text-sm font-normal w-12 py-2 rounded-xl mx-2 border border-accent"})]}),(0,l.jsx)("hr",{className:"mt-4 border-[#292b2e] mb-8"})]}),(0,l.jsxs)("div",{className:"col-span-12",children:[(0,l.jsx)("label",{htmlFor:"permission",children:"Permission:"}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-[#585757]",children:"Ask for permission before trade"}),(0,l.jsxs)("label",{htmlFor:"permission",className:"inline-flex relative items-center mb-4 cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",value:"",id:"permission",className:"sr-only peer"}),(0,l.jsx)("div",{className:"w-11 h-6 bg-transparent ring-2 ring-gray-300/25 peer-checked:ring-accent rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-1 after:left-[6px] peer-checked:after:bg-accent after:border-gray-300/25 after:border-2 peer-checked:after:border-0 after:rounded-full after:h-4 after:w-4 after:transition-all"})]})]}),(0,l.jsx)("hr",{className:"mt-4 border-[#292b2e] mb-8"})]}),(0,l.jsxs)("div",{className:"col-span-12",children:[(0,l.jsx)("label",{htmlFor:"status",children:"Visibility:"}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-[#585757]",children:"Set the visibility of your ticket"}),(0,l.jsxs)("label",{htmlFor:"status",className:"inline-flex relative items-center mb-4 cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",value:"",id:"status",className:"sr-only peer"}),(0,l.jsx)("div",{className:"w-11 h-6 bg-transparent ring-2 ring-gray-300/25 peer-checked:ring-accent rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-1 after:left-[6px] peer-checked:after:bg-accent after:border-gray-300/25 after:border-2 peer-checked:after:border-0 after:rounded-full after:h-4 after:w-4 after:transition-all"})]})]}),(0,l.jsx)("hr",{className:"mt-4 border-[#292b2e] mb-8"})]}),(0,l.jsxs)("div",{className:"col-span-12 mt-4",children:[(0,l.jsx)("label",{htmlFor:"payment",children:"Payment:"}),(0,l.jsx)("select",{className:"w-full select-inp mt-4",id:"payment",children:["Stripe","Paypal","Cash"].map(function(a,b){return(0,l.jsx)("option",{value:a,children:a},b)})})]}),(0,l.jsxs)("div",{className:"col-span-12 mt-4 flex justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"price",children:"Price per ticket: "}),(0,l.jsx)("br",{}),(0,l.jsxs)("div",{className:"relative w-48",children:[(0,l.jsx)("div",{className:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none",children:"$"}),(0,l.jsx)("input",{className:"w-32 date-inp block mt-4",type:"number",id:"price",style:{paddingLeft:"2rem"},onChange:function(a){return O((0,g.Z)((0,f.Z)({},N),{price:a.target.value}))}})]})]}),(0,l.jsx)("div",{className:"flex flex-col justify-end",children:(0,l.jsx)("button",{className:"w-40 mb-2 bg-accent py-2 px-6 rounded-xl shadow-sm shadow-accent transform hover:scale-110 duration-200",type:"submit",onClick:function(){!function(){return as.apply(this,arguments)}()},children:"Create"})})]})]})})]})]})})}},91990:function(a,b,c){"use strict";c.d(b,{Z:function(){return f}});var d=c(85893);c(67294);var e=c(22020);function f(a){var b=a.children,c=a.resetAnimation,f=a.classNames;return(0,d.jsx)(e.Z,{variants:{visible:{opacity:1,scale:1,transition:{delay:.1,duration:.2}},hidden:{opacity:0,scale:.75}},resetAnimation:c,classNames:void 0===f?"":f,children:b})}},23290:function(a,b,c){"use strict";var d=c(85893);c(67294),b.Z=function(a){var b=a.value,c=a.setValue,e=a.buttonClasses,f=a.inputClasses;return(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("button",{className:"".concat(e||"w-16 h-16 text-4xl pb-1 border-white border-2 rounded-full hover:border-accent hover:text-accent"," duration-200"),onClick:function(a){c(b-1)},type:"button",children:"-"}),(0,d.jsx)("input",{type:"number",className:"".concat(f||"text-7xl font-bold w-32 p-4 rounded-3xl mx-4 border-2 border-white"," bg-transparent text-center focus:border-accent focus:outline-none"),value:b,onChange:function(a){(parseInt(a.target.value)||""===a.target.value)&&c(parseInt(a.target.value))}}),(0,d.jsx)("button",{className:"".concat(e||"w-16 h-16 text-4xl pb-1 border-white border-2 rounded-full hover:border-accent hover:text-accent"," duration-200"),onClick:function(){c(b+1)},type:"button",children:"+"})]})}},7420:function(){},95856:function(){},35883:function(){},52596:function(){},63897:function(){},79156:function(){},62678:function(){},25819:function(){},24112:function(){},52361:function(){},94616:function(){}},function(a){a.O(0,[866,90,277,13,885,655,982,917,80,100,651,774,888,179],function(){var b;return a(a.s=24201)}),_N_E=a.O()}])